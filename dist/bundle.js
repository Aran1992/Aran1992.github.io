!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=73)}([function(t,e,i){"use strict";(function(t){var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(t=void 0!==t?t:o.now();i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var a=this._tweens[i[n]];a&&!1===a.update(t)&&(a._isPlaying=!1,e||delete this._tweens[i[n]])}i=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var n,o=new i;o.Group=i,o._nextId=0,o.nextId=function(){return o._nextId++},"undefined"==typeof self&&void 0!==t&&t.hrtime?o.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?o.now=self.performance.now.bind(self.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()},o.Tween=function(t,e){this._isPaused=!1,this._pauseStart=null,this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=o.Easing.Linear.None,this._interpolationFunction=o.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||o,this._id=o.nextId()},o.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},isPaused:function(){return this._isPaused},to:function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?o.now()+parseFloat(t):t:o.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(void 0===this._valuesStart[e]&&(this._valuesStart[e]=this._object[e]),this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},pause:function(t){return this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=void 0===t?o.now():t,this._group.remove(this),this)},resume:function(t){return this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=(void 0===t?o.now():t)-this._pauseStart,this._pauseStart=0,this._group.add(this),this):this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,i,n;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(t-this._startTime)/this._duration,i=0===this._duration||i>1?1:i,n=this._easingFunction(i),this._valuesEnd)if(void 0!==this._valuesStart[e]){var o=this._valuesStart[e]||0,a=this._valuesEnd[e];a instanceof Array?this._object[e]=this._interpolationFunction(a,n):("string"==typeof a&&(a="+"===a.charAt(0)||"-"===a.charAt(0)?o+parseFloat(a):parseFloat(a)),"number"==typeof a&&(this._object[e]=o+(a-o)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var s=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=s}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var r=0,l=this._chainedTweens.length;r<l;r++)this._chainedTweens[r].start(this._startTime+this._duration);return!1}return!0}},o.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-o.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*o.Easing.Bounce.In(2*t):.5*o.Easing.Bounce.Out(2*t-1)+.5}}},o.Interpolation={Linear:function(t,e){var i=t.length-1,n=i*e,a=Math.floor(n),s=o.Interpolation.Utils.Linear;return e<0?s(t[0],t[1],n):e>1?s(t[i],t[i-1],i-n):s(t[a],t[a+1>i?i:a+1],n-a)},Bezier:function(t,e){for(var i=0,n=t.length-1,a=Math.pow,s=o.Interpolation.Utils.Bernstein,r=0;r<=n;r++)i+=a(1-e,n-r)*a(e,r)*t[r]*s(n,r);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,a=Math.floor(n),s=o.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(a=Math.floor(n=i*(1+e))),s(t[(a-1+i)%i],t[a],t[(a+1)%i],t[(a+2)%i],n-a)):e<0?t[0]-(s(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(s(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):s(t[a?a-1:0],t[a],t[i<a+1?i:a+1],t[i<a+2?i:a+2],n-a)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=o.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(n=[1],function(t){var e=1;if(n[t])return n[t];for(var i=t;i>1;i--)e*=i;return n[t]=e,e}),CatmullRom:function(t,e,i,n,o){var a=.5*(i-t),s=.5*(n-e),r=o*o;return(2*e-2*i+a+s)*(o*r)+(-3*e+3*i-2*a-s)*r+a*o+e}}},o.version="18.5.0",e.a=o}).call(this,i(33))},function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"isMobile",function(){return S}),i.d(n,"EventEmitter",function(){return U.a}),i.d(n,"earcut",function(){return V.a}),i.d(n,"url",function(){return X.a}),i.d(n,"BaseTextureCache",function(){return bt}),i.d(n,"CanvasRenderTarget",function(){return kt}),i.d(n,"DATA_URI",function(){return Pt}),i.d(n,"ProgramCache",function(){return vt}),i.d(n,"TextureCache",function(){return _t}),i.d(n,"clearTextureCache",function(){return St}),i.d(n,"correctBlendMode",function(){return et}),i.d(n,"createIndicesForQuads",function(){return at}),i.d(n,"decomposeDataUri",function(){return Tt}),i.d(n,"deprecation",function(){return gt}),i.d(n,"destroyTextureCache",function(){return xt}),i.d(n,"determineCrossOrigin",function(){return Ct}),i.d(n,"getBufferType",function(){return st}),i.d(n,"getResolutionOfUrl",function(){return It}),i.d(n,"hex2rgb",function(){return Z}),i.d(n,"hex2string",function(){return K}),i.d(n,"interleaveTypedArrays",function(){return lt}),i.d(n,"isPow2",function(){return ct}),i.d(n,"isWebGLSupported",function(){return q}),i.d(n,"log2",function(){return ut}),i.d(n,"nextPow2",function(){return ht}),i.d(n,"premultiplyBlendMode",function(){return tt}),i.d(n,"premultiplyRgba",function(){return it}),i.d(n,"premultiplyTint",function(){return nt}),i.d(n,"premultiplyTintToRgba",function(){return ot}),i.d(n,"removeItems",function(){return mt}),i.d(n,"rgb2hex",function(){return Q}),i.d(n,"sayHello",function(){return Y}),i.d(n,"sign",function(){return pt}),i.d(n,"skipHello",function(){return J}),i.d(n,"string2hex",function(){return $}),i.d(n,"trimCanvas",function(){return wt}),i.d(n,"uid",function(){return ft});var o={};i.r(o),i.d(o,"AccessibilityManager",function(){return ne}),i.d(o,"accessibleTarget",function(){return ee});var a={};i.r(a),i.d(a,"InteractionData",function(){return re}),i.d(a,"InteractionEvent",function(){return he}),i.d(a,"InteractionManager",function(){return ye}),i.d(a,"InteractionTrackingData",function(){return ce}),i.d(a,"interactiveTarget",function(){return pe});i(47);var s=/iPhone/i,r=/iPod/i,l=/iPad/i,h=/\biOS-universal(?:.+)Mac\b/i,c=/\bAndroid(?:.+)Mobile\b/i,u=/Android/i,m=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,p=/Silk/i,d=/Windows Phone/i,f=/\bWindows(?:.+)ARM\b/i,y=/BlackBerry/i,g=/BB10/i,v=/Opera Mini/i,_=/\b(CriOS|Chrome)(?:.+)Mobile/i,b=/Mobile(?:.+)Firefox\b/i,x=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};
/*!
 * @pixi/settings - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var S=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,n=i.split("[FBAN");void 0!==n[1]&&(i=n[0]),void 0!==(n=i.split("Twitter"))[1]&&(i=n[0]);var o=function(t){return function(e){return e.test(t)}}(i),a={apple:{phone:o(s)&&!o(d),ipod:o(r),tablet:!o(s)&&(o(l)||x(e))&&!o(d),universal:o(h),device:(o(s)||o(r)||o(l)||o(h)||x(e))&&!o(d)},amazon:{phone:o(m),tablet:!o(m)&&o(p),device:o(m)||o(p)},android:{phone:!o(d)&&o(m)||!o(d)&&o(c),tablet:!o(d)&&!o(m)&&!o(c)&&(o(p)||o(u)),device:!o(d)&&(o(m)||o(p)||o(c)||o(u))||o(/\bokhttp\b/i)},windows:{phone:o(d),tablet:o(f),device:o(d)||o(f)},other:{blackberry:o(y),blackberry10:o(g),opera:o(v),firefox:o(b),chrome:o(_),device:o(y)||o(g)||o(v)||o(b)||o(_)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}(window.navigator);var k,w,A,P,T,C,I,B,L,E,M,R,D,O,F={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(S.tablet||S.phone){if(e=!1,S.apple.device){var i=navigator.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)>=11&&(e=!0)}if(S.android.device){var n=navigator.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)>=7&&(e=!0)}}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:S.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!S.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},j=i(34),U=i.n(j),N=i(35),V=i.n(N),G=i(28),X=i.n(G);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(k||(k={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(w||(w={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(A||(A={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(P||(P={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(T||(T={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(C||(C={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(I||(I={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(B||(B={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(L||(L={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(E||(E={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(M||(M={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(R||(R={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(D||(D={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(O||(O={})),
/*!
 * @pixi/utils - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
F.RETINA_PREFIX=/@([0-9\.]+)x/,F.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var z,H=!1,W="5.2.4";function J(){H=!0}function Y(t){var e;if(!H){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS "+W+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,i)}else window.console&&window.console.log("PixiJS "+W+" - "+t+" - http://www.pixijs.com/");H=!0}}function q(){return void 0===z&&(z=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:F.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,n}catch(t){return!1}}()),z}function Z(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function K(t){var e=t.toString(16);return"#"+(e="000000".substr(0,6-e.length)+e)}function $(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}function Q(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var tt=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[A.NORMAL_NPM]=A.NORMAL,t[A.ADD_NPM]=A.ADD,t[A.SCREEN_NPM]=A.SCREEN,e[A.NORMAL]=A.NORMAL_NPM,e[A.ADD]=A.ADD_NPM,e[A.SCREEN]=A.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}();function et(t,e){return tt[e?1:0][t]}function it(t,e,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function nt(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,n=t>>8&255,o=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(o=o*e+.5|0)}function ot(t,e,i,n){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(n||void 0===n)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function at(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var n=0,o=0;n<i;n+=6,o+=4)e[n+0]=o+0,e[n+1]=o+1,e[n+2]=o+2,e[n+3]=o+0,e[n+4]=o+2,e[n+5]=o+3;return e}function st(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var rt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function lt(t,e){for(var i=0,n=0,o={},a=0;a<t.length;a++)n+=e[a],i+=t[a].length;var s=new ArrayBuffer(4*i),r=null,l=0;for(a=0;a<t.length;a++){var h=e[a],c=t[a],u=st(c);o[u]||(o[u]=new rt[u](s)),r=o[u];for(var m=0;m<c.length;m++){r[(m/h|0)*n+l+m%h]=c[m]}l+=h}return new Float32Array(s)}function ht(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function ct(t){return!(t&t-1||!t)}function ut(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function mt(t,e,i){var n,o=t.length;if(!(e>=o||0===i)){var a=o-(i=e+i>o?o-e:i);for(n=e;n<a;++n)t[n]=t[n+i];t.length=a}}function pt(t){return 0===t?0:t<0?-1:1}var dt=0;function ft(){return++dt}var yt={};function gt(t,e,i){if(void 0===i&&(i=3),!yt[e]){var n=(new Error).stack;void 0===n?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(n=n.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(n))),yt[e]=!0}}var vt={},_t=Object.create(null),bt=Object.create(null);function xt(){var t;for(t in _t)_t[t].destroy();for(t in bt)bt[t].destroy()}function St(){var t;for(t in _t)delete _t[t];for(t in bt)delete bt[t]}var kt=function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||F.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!0,configurable:!0}),t}();function wt(t){var e,i,n,o=t.width,a=t.height,s=t.getContext("2d"),r=s.getImageData(0,0,o,a).data,l=r.length,h={top:null,left:null,right:null,bottom:null},c=null;for(e=0;e<l;e+=4)0!==r[e+3]&&(i=e/4%o,n=~~(e/4/o),null===h.top&&(h.top=n),null===h.left?h.left=i:i<h.left&&(h.left=i),null===h.right?h.right=i+1:h.right<i&&(h.right=i+1),null===h.bottom?h.bottom=n:h.bottom<n&&(h.bottom=n));return null!==h.top&&(o=h.right-h.left,a=h.bottom-h.top+1,c=s.getImageData(h.left,h.top,o,a)),{height:a,width:o,data:c}}var At,Pt=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Tt(t){var e=Pt.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function Ct(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,At||(At=document.createElement("a")),At.href=t;var i=Object(G.parse)(At.href),n=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&n&&i.protocol===e.protocol?"":"anonymous"}function It(t,e){var i=F.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}
/*!
 * @pixi/math - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Bt,Lt=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t}(),Et=function(){function t(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),t}(),Mt=2*Math.PI,Rt=180/Math.PI,Dt=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(Bt||(Bt={}));var Ot=function(){function t(t,e,i,n,o,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===o&&(o=0),void 0===a&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=o,this.ty=a}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,o,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=o,this.ty=a,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new Lt;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new Lt;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,o=t.y;return e.x=this.d*i*n+-this.c*i*o+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*o+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,o=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=o*e-this.d*i,this.d=o*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,o=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*o,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*o,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*o+this.ty,this},t.prototype.setTransform=function(t,e,i,n,o,a,s,r,l){return this.a=Math.cos(s+l)*o,this.b=Math.sin(s+l)*o,this.c=-Math.sin(s-r)*a,this.d=Math.cos(s-r)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,o=this.d,a=-Math.atan2(-n,o),s=Math.atan2(i,e),r=Math.abs(a+s);return r<1e-5||Math.abs(Mt-r)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+o*o),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,o=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*o)/a,this.ty=-(t*this.ty-e*o)/a,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!0,configurable:!0}),t}(),Ft=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],jt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ut=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Nt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Vt=[],Gt=[],Xt=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];Vt.push(e);for(var i=0;i<16;i++)for(var n=Xt(Ft[t]*Ft[i]+Ut[t]*jt[i]),o=Xt(jt[t]*Ft[i]+Nt[t]*jt[i]),a=Xt(Ft[t]*Ut[i]+Ut[t]*Nt[i]),s=Xt(jt[t]*Ut[i]+Nt[t]*Nt[i]),r=0;r<16;r++)if(Ft[r]===n&&jt[r]===o&&Ut[r]===a&&Nt[r]===s){e.push(r);break}}for(t=0;t<16;t++){var l=new Ot;l.set(Ft[t],jt[t],Ut[t],Nt[t],0,0),Gt.push(l)}}();var zt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Ft[t]},uY:function(t){return jt[t]},vX:function(t){return Ut[t]},vY:function(t){return Nt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return Vt[t][e]},sub:function(t,e){return Vt[t][zt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?zt.S:zt.N:2*Math.abs(e)<=Math.abs(t)?t>0?zt.E:zt.W:e>0?t>0?zt.SE:zt.SW:t>0?zt.NE:zt.NW},matrixAppendRotationInv:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var o=Gt[zt.inv(e)];o.tx=i,o.ty=n,t.append(o)}},Ht=function(){function t(){this.worldTransform=new Ot,this.localTransform=new Ot,this.position=new Et(this.onChange,this,0,0),this.scale=new Et(this.onChange,this,1,1),this.pivot=new Et(this.onChange,this,0,0),this.skew=new Et(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!0,configurable:!0}),t.IDENTITY=new t,t}(),Wt=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=Bt.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(o-n,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=o-n,this},t}(),Jt=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=Bt.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,o=this.y-e;return(n*=n)+(o*=o)<=i},t.prototype.getBounds=function(){return new Wt(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}(),Yt=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=Bt.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return(i*=i)+(n*=n)<=1},t.prototype.getBounds=function(){return new Wt(this.x-this.width,this.y-this.height,this.width,this.height)},t}(),qt=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(Array.isArray(e[0])&&(e=e[0]),e[0]instanceof Lt){for(var n=[],o=0,a=(e=e).length;o<a;o++)n.push(e[o].x,e[o].y);e=n}this.points=e,this.type=Bt.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,o=0,a=n-1;o<n;a=o++){var s=this.points[2*o],r=this.points[2*o+1],l=this.points[2*a],h=this.points[2*a+1];r>e!=h>e&&t<(e-r)/(h-r)*(l-s)+s&&(i=!i)}return i},t}(),Zt=function(){function t(t,e,i,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=o,this.type=Bt.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),o=this.radius*this.radius;if(i*i+n*n<=o)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=o)return!0;if(i*i+(n=e-(this.y+this.height-this.radius))*n<=o)return!0;if((i=t-(this.x+this.radius))*i+n*n<=o)return!0}return!1},t}();
/*!
 * @pixi/display - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
F.SORTABLE_CHILDREN=!1;var Kt=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null};Kt.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Kt.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Kt.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Wt.EMPTY:((t=t||new Wt(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},Kt.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},Kt.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,o=this.maxY,a=t[0],s=t[1];e=a<e?a:e,i=s<i?s:i,n=a>n?a:n,o=s>o?s:o,e=(a=t[2])<e?a:e,i=(s=t[3])<i?s:i,n=a>n?a:n,o=s>o?s:o,e=(a=t[4])<e?a:e,i=(s=t[5])<i?s:i,n=a>n?a:n,o=s>o?s:o,e=(a=t[6])<e?a:e,i=(s=t[7])<i?s:i,n=a>n?a:n,o=s>o?s:o,this.minX=e,this.minY=i,this.maxX=n,this.maxY=o},Kt.prototype.addFrame=function(t,e,i,n,o){this.addFrameMatrix(t.worldTransform,e,i,n,o)},Kt.prototype.addFrameMatrix=function(t,e,i,n,o){var a=t.a,s=t.b,r=t.c,l=t.d,h=t.tx,c=t.ty,u=this.minX,m=this.minY,p=this.maxX,d=this.maxY,f=a*e+r*i+h,y=s*e+l*i+c;u=f<u?f:u,m=y<m?y:m,p=f>p?f:p,d=y>d?y:d,u=(f=a*n+r*i+h)<u?f:u,m=(y=s*n+l*i+c)<m?y:m,p=f>p?f:p,d=y>d?y:d,u=(f=a*e+r*o+h)<u?f:u,m=(y=s*e+l*o+c)<m?y:m,p=f>p?f:p,d=y>d?y:d,u=(f=a*n+r*o+h)<u?f:u,m=(y=s*n+l*o+c)<m?y:m,p=f>p?f:p,d=y>d?y:d,this.minX=u,this.minY=m,this.maxX=p,this.maxY=d},Kt.prototype.addVertexData=function(t,e,i){for(var n=this.minX,o=this.minY,a=this.maxX,s=this.maxY,r=e;r<i;r+=2){var l=t[r],h=t[r+1];n=l<n?l:n,o=h<o?h:o,a=l>a?l:a,s=h>s?h:s}this.minX=n,this.minY=o,this.maxX=a,this.maxY=s},Kt.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},Kt.prototype.addVerticesMatrix=function(t,e,i,n,o,a){var s=t.a,r=t.b,l=t.c,h=t.d,c=t.tx,u=t.ty;o=o||0,a=a||0;for(var m=this.minX,p=this.minY,d=this.maxX,f=this.maxY,y=i;y<n;y+=2){var g=e[y],v=e[y+1],_=s*g+l*v+c,b=h*v+r*g+u;m=Math.min(m,_-o),d=Math.max(d,_+o),p=Math.min(p,b-a),f=Math.max(f,b+a)}this.minX=m,this.minY=p,this.maxX=d,this.maxY=f},Kt.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,o=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>o?t.maxY:o},Kt.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,o=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=o&&n<=a){var s=this.minX,r=this.minY,l=this.maxX,h=this.maxY;this.minX=i<s?i:s,this.minY=n<r?n:r,this.maxX=o>l?o:l,this.maxY=a>h?a:h}},Kt.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},Kt.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=o&&n<=a){var s=this.minX,r=this.minY,l=this.maxX,h=this.maxY;this.minX=i<s?i:s,this.minY=n<r?n:r,this.maxX=o>l?o:l,this.maxY=a>h?a:h}},Kt.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},Kt.prototype.addFramePad=function(t,e,i,n,o,a){t-=o,e-=a,i+=o,n+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n};var $t=function(t){function e(){t.call(this),this.tempDisplayObjectParent=null,this.transform=new Ht,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Kt,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return e.mixin=function(t){for(var i=Object.keys(t),n=0;n<i.length;++n){var o=i[n];Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(t,o))}},i._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.calculateBounds=function(){},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Wt),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new Wt),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.render=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,n,o,a,s,r,l){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===l&&(l=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=o,this.skew.x=a,this.skew.y=s,this.pivot.x=r,this.pivot.y=l,this},e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},i.x.get=function(){return this.position.x},i.x.set=function(t){this.transform.position.x=t},i.y.get=function(){return this.position.y},i.y.set=function(t){this.transform.position.y=t},i.worldTransform.get=function(){return this.transform.worldTransform},i.localTransform.get=function(){return this.transform.localTransform},i.position.get=function(){return this.transform.position},i.position.set=function(t){this.transform.position.copyFrom(t)},i.scale.get=function(){return this.transform.scale},i.scale.set=function(t){this.transform.scale.copyFrom(t)},i.pivot.get=function(){return this.transform.pivot},i.pivot.set=function(t){this.transform.pivot.copyFrom(t)},i.skew.get=function(){return this.transform.skew},i.skew.set=function(t){this.transform.skew.copyFrom(t)},i.rotation.get=function(){return this.transform.rotation},i.rotation.set=function(t){this.transform.rotation=t},i.angle.get=function(){return this.transform.rotation*Rt},i.angle.set=function(t){this.transform.rotation=t*Dt},i.zIndex.get=function(){return this._zIndex},i.zIndex.set=function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},i.worldVisible.get=function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},i.mask.get=function(){return this._mask},i.mask.set=function(t){if(this._mask){var e=this._mask.maskObject||this._mask;e.renderable=!0,e.isMask=!1}if(this._mask=t,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},Object.defineProperties(e.prototype,i),e}(U.a);function Qt(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}$t.prototype.displayObjectUpdateTransform=$t.prototype.updateTransform;var te=function(t){function e(){t.call(this),this.children=[],this.sortableChildren=F.SORTABLE_CHILDREN,this.sortDirty=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0}};return e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments,i=arguments.length;if(i>1)for(var n=0;n<i;n++)this.addChild(e[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);mt(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments,i=arguments.length;if(i>1)for(var n=0;n<i;n++)this.removeChild(e[n]);else{var o=this.children.indexOf(t);if(-1===o)return null;t.parent=null,t.transform._parentID=-1,mt(this.children,o,1),this._boundsID++,this.onChildrenChange(o),t.emit("removed",this),this.emit("childRemoved",t,this,o)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,mt(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0);var i,n=t,o="number"==typeof e?e:this.children.length,a=o-n;if(a>0&&a<=o){i=this.children.splice(n,a);for(var s=0;s<i.length;++s)i[s].parent=null,i[s].transform&&(i[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var r=0;r<i.length;++r)i[r].emit("removed",this),this.emit("childRemoved",i[r],this,r);return i}if(0===a&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var n=this.children[e];n._lastSortedIndex=e,t||0===n.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(Qt),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);for(var o=0,a=this.children.length;o<a;o++)this.children[o].render(t);t.batch.flush(),i&&t.mask.pop(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var o=0;o<n.length;++o)n[o].destroy(e)},i.width.get=function(){return this.scale.x*this.getLocalBounds().width},i.width.set=function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},i.height.get=function(){return this.scale.y*this.getLocalBounds().height},i.height.set=function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},Object.defineProperties(e.prototype,i),e}($t);te.prototype.containerUpdateTransform=te.prototype.updateTransform;
/*!
 * @pixi/accessibility - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ee={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0};$t.mixin(ee);var ie,ne=function(t){this._hookDiv=null,(S.tablet||S.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)};ne.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="select to enable accessability for this content",e.addEventListener("focus",function(){t.isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},ne.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},ne.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},ne.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessibility&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},ne.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},ne.prototype.update=function(){var t=performance.now();if(!(S.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=this.renderer.resolution,n=e.width/this.renderer.width*i,o=e.height/this.renderer.height*i,a=this.div;a.style.left=e.left+"px",a.style.top=e.top+"px",a.style.width=this.renderer.width+"px",a.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var r=this.children[s];if(r.renderId!==this.renderId)r._accessibleActive=!1,mt(this.children,s,1),this.div.removeChild(r._accessibleDiv),this.pool.push(r._accessibleDiv),r._accessibleDiv=null,s--;else{a=r._accessibleDiv;var l=r.hitArea,h=r.worldTransform;r.hitArea?(a.style.left=(h.tx+l.x*h.a)*n+"px",a.style.top=(h.ty+l.y*h.d)*o+"px",a.style.width=l.width*h.a*n+"px",a.style.height=l.height*h.d*o+"px"):(l=r.getBounds(),this.capHitArea(l),a.style.left=l.x*n+"px",a.style.top=l.y*o+"px",a.style.width=l.width*n+"px",a.style.height=l.height*o+"px",a.title!==r.accessibleTitle&&null!==r.accessibleTitle&&(a.title=r.accessibleTitle),a.getAttribute("aria-label")!==r.accessibleHint&&null!==r.accessibleHint&&a.setAttribute("aria-label",r.accessibleHint)),r.accessibleTitle===a.title&&r.tabIndex===a.tabIndex||(a.title=r.accessibleTitle,a.tabIndex=r.tabIndex,this.debug&&this.updateDebugHTML(a))}}this.renderId++}},ne.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},ne.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},ne.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},ne.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},ne.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},ne.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},ne.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},ne.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},ne.prototype.destroy=function(){this.destroyTouchHook(),this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},
/*!
 * @pixi/ticker - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
F.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(ie||(ie={}));var oe=function(){function t(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=0),void 0===n&&(n=!1),this.fn=t,this.context=e,this.priority=i,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),ae=function(){function t(){var t=this;this._head=new oe(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/F.TARGET_FPMS,this.elapsedMS=1/F.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=ie.NORMAL),this._addListener(new oe(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=ie.NORMAL),this._addListener(new oe(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*F.TARGET_FPMS;for(var n=this._head,o=n.next;o;)o=o.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,F.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!0,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!0,configurable:!0}),t}(),se=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,ie.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ae.shared:new ae,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}(),re=function(){this.global=new Lt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0},le={pointerId:{configurable:!0}};le.pointerId.get=function(){return this.identifier},re.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},re.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},re.prototype.reset=function(){this.isPrimary=!1},Object.defineProperties(re.prototype,le);var he=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null};he.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},he.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null};var ce=function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE},ue={pointerId:{configurable:!0},flags:{configurable:!0},none:{configurable:!0},over:{configurable:!0},rightDown:{configurable:!0},leftDown:{configurable:!0}};ce.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},ue.pointerId.get=function(){return this._pointerId},ue.flags.get=function(){return this._flags},ue.flags.set=function(t){this._flags=t},ue.none.get=function(){return this._flags===this.constructor.FLAGS.NONE},ue.over.get=function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},ue.over.set=function(t){this._doSet(this.constructor.FLAGS.OVER,t)},ue.rightDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},ue.rightDown.set=function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)},ue.leftDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},ue.leftDown.set=function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)},Object.defineProperties(ce.prototype,ue),ce.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});var me=function(){this._tempPoint=new Lt};me.prototype.recursiveFindHit=function(t,e,i,n,o){if(!e||!e.visible)return!1;var a=t.data.global,s=!1,r=o=e.interactive||o,l=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(a,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(n=!1,l=!1)),r=!1):e._mask&&n&&(e._mask.containsPoint&&e._mask.containsPoint(a)||(n=!1)),l&&e.interactiveChildren&&e.children)for(var h=e.children,c=h.length-1;c>=0;c--){var u=h[c],m=this.recursiveFindHit(t,u,i,n,r);if(m){if(!u.parent)continue;r=!1,m&&(t.target&&(n=!1),s=!0)}}return o&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(a)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),i&&i(t,e,!!s))),s},me.prototype.findHit=function(t,e,i,n){this.recursiveFindHit(t,e,i,n,!1)};var pe={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};$t.mixin(pe);var de=1,fe={target:null,data:{global:null}},ye=function(t){function e(e,i){t.call(this),i=i||{},this.renderer=e,this.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,this.interactionFrequency=i.interactionFrequency||10,this.mouse=new re,this.mouse.identifier=de,this.mouse.global.set(-999999),this.activeInteractionData={},this.activeInteractionData[de]=this.mouse,this.interactionDataPool=[],this.eventData=new he,this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.tickerAdded=!1,this.mouseOverRenderer=!1,this.supportsTouchEvents="ontouchstart"in window,this.supportsPointerEvents=!!window.PointerEvent,this.onPointerUp=this.onPointerUp.bind(this),this.processPointerUp=this.processPointerUp.bind(this),this.onPointerCancel=this.onPointerCancel.bind(this),this.processPointerCancel=this.processPointerCancel.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.processPointerDown=this.processPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.processPointerMove=this.processPointerMove.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.processPointerOverOut=this.processPointerOverOut.bind(this),this.onPointerOver=this.onPointerOver.bind(this),this.cursorStyles={default:"inherit",pointer:"pointer"},this.currentCursorMode=null,this.cursor=null,this.resolution=1,this.delayedEvents=[],this.search=new me,this._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,this.setTargetElement(this.renderer.view,this.renderer.resolution)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={useSystemTicker:{configurable:!0}};return i.useSystemTicker.get=function(){return this._useSystemTicker},i.useSystemTicker.set=function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},e.prototype.hitTest=function(t,e){return fe.target=null,fe.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(fe,e,null,!0),fe.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(ae.system.add(this.tickerUpdate,this,ie.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(ae.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){!this.eventsAdded&&this.interactionDOMElement&&(window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.eventsAdded&&this.interactionDOMElement&&(window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this.didMove)this.didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var o=1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*o,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*o},e.prototype.processInteractive=function(t,e,i,n){var o=this.search.findHit(t,e,i,n),a=this.delayedEvents;if(!a.length)return o;t.stopPropagationHint=!1;var s=a.length;this.delayedEvents=[];for(var r=0;r<s;r++){var l=a[r],h=l.displayObject,c=l.eventString,u=l.eventData;u.stopsPropagatingAt===h&&(u.stopPropagationHint=!0),this.dispatchEvent(h,c,u)}return o},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var o=e[n],a=this.getInteractionDataForPointerId(o),s=this.configureInteractionEventForDOMEvent(this.eventData,o,a);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===o.pointerType)this.emit("touchstart",s);else if("mouse"===o.pointerType||"pen"===o.pointerType){var r=2===o.button;this.emit(r?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,o=t.data.identifier;if(i)if(e.trackedPointers[o]||(e.trackedPointers[o]=new ce(o)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;a?e.trackedPointers[o].rightDown=!0:e.trackedPointers[o].leftDown=!0,this.dispatchEvent(e,a?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),o=n.length,a=t.target!==this.interactionDOMElement?"outside":"",s=0;s<o;s++){var r=n[s],l=this.getInteractionDataForPointerId(r),h=this.configureInteractionEventForDOMEvent(this.eventData,r,l);if(h.data.originalEvent=t,this.processInteractive(h,this.renderer._lastObjectRendered,i,e||!a),this.emit(e?"pointercancel":"pointerup"+a,h),"mouse"===r.pointerType||"pen"===r.pointerType){var c=2===r.button;this.emit(c?"rightup"+a:"mouseup"+a,h)}else"touch"===r.pointerType&&(this.emit(e?"touchcancel":"touchend"+a,h),this.releaseInteractionDataForPointerId(r.pointerId,l))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,o=t.data.identifier,a=e.trackedPointers[o],s="touch"===n.pointerType,r="mouse"===n.pointerType||"pen"===n.pointerType,l=!1;if(r){var h=2===n.button,c=ce.FLAGS,u=h?c.RIGHT_DOWN:c.LEFT_DOWN,m=void 0!==a&&a.flags&u;i?(this.dispatchEvent(e,h?"rightup":"mouseup",t),m&&(this.dispatchEvent(e,h?"rightclick":"click",t),l=!0)):m&&this.dispatchEvent(e,h?"rightupoutside":"mouseupoutside",t),a&&(h?a.rightDown=!1:a.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),a&&(r&&!l||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),a.over=!1))):a&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),a&&a.none&&delete e.trackedPointers[o]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var o=e[n],a=this.getInteractionDataForPointerId(o),s=this.configureInteractionEventForDOMEvent(this.eventData,o,a);s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===o.pointerType&&this.emit("touchmove",s),"mouse"!==o.pointerType&&"pen"!==o.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,o="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType;a&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),o&&this.dispatchEvent(e,"touchmove",t),a&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,o=t.data.identifier,a="mouse"===n.pointerType||"pen"===n.pointerType,s=e.trackedPointers[o];i&&!s&&(s=e.trackedPointers[o]=new ce(o)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),a&&this.delayDispatchEvent(e,"mouseover",t)),a&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),a&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[o]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return i===de||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new re).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var o=t.changedTouches[i];void 0===o.button&&(o.button=t.touches.length?1:0),void 0===o.buttons&&(o.buttons=t.touches.length?1:0),void 0===o.isPrimary&&(o.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===o.width&&(o.width=o.radiusX||1),void 0===o.height&&(o.height=o.radiusY||1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="touch"),void 0===o.pointerId&&(o.pointerId=o.identifier||0),void 0===o.pressure&&(o.pressure=o.force||.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),void 0===o.layerX&&(o.layerX=o.offsetX=o.clientX),void 0===o.layerY&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,e.push(o)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=de),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},Object.defineProperties(e.prototype,i),e}(U.a),ge=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,n,o,a,s,r){if(arguments.length>8)throw new Error("max arguments reached");var l=this.name,h=this.items;this._aliasCount++;for(var c=0,u=h.length;c<u;c++)h[c][l](t,e,i,n,o,a,s,r);return h===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t}();Object.defineProperties(ge.prototype,{dispatch:{value:ge.prototype.emit},run:{value:ge.prototype.emit}});
/*!
 * @pixi/core - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new ge("setRealSize",2),this.onUpdate=new ge("update"),this.onError=new ge("onError",1)},_e={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};ve.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.run(this._width,this._height)},ve.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},ve.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.run(t,e))},_e.valid.get=function(){return!!this._width&&!!this._height},ve.prototype.update=function(){this.destroyed||this.onUpdate.run()},ve.prototype.load=function(){return Promise.resolve()},_e.width.get=function(){return this._width},_e.height.get=function(){return this._height},ve.prototype.upload=function(t,e,i){return!1},ve.prototype.style=function(t,e,i){return!1},ve.prototype.dispose=function(){},ve.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(ve.prototype,_e);var be=function(t){function e(e){var i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;t.call(this,i,n),this.source=e,this.noSubImage=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=Ct(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,n){var o=t.gl,a=e.realWidth,s=e.realHeight;return n=n||this.source,o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===M.UNPACK),this.noSubImage||e.target!==o.TEXTURE_2D||i.width!==a||i.height!==s?(i.width=a,i.height=s,o.texImage2D(e.target,0,e.format,e.format,e.type,n)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,e.type,n),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source.naturalWidth||this.source.videoWidth||this.source.width,i=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.resize(e,i),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(ve),xe=function(t){function e(e,i){if(i=i||{},!(e instanceof HTMLImageElement)){var n=new Image;t.crossOrigin(n,e,i.crossorigin),n.src=e,e=n}t.call(this,e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==i.createBitmap?i.createBitmap:F.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,void 0!==i.premultiplyAlpha&&(this.premultiplyAlpha=i.premultiplyAlpha),this.bitmap=null,this._load=null,!1!==i.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(t){var e=this;return this._load?this._load:(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,i){e.url=e.source.src;var n=e.source,o=function(){e.destroyed||(n.onload=null,n.onerror=null,e.resize(n.width,n.height),e._load=null,e.createBitmap?t(e.process()):t(e))};n.complete&&n.src?o():(n.onload=o,n.onerror=function(t){i(t),e.onError.emit(t)})}),this._load)},e.prototype.process=function(){var t=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha===M.UNPACK?"premultiply":"none"}).then(function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))}),this._process):Promise.resolve(this)},e.prototype.upload=function(e,i,n){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var o=!0;for(var a in i._glTextures){var s=i._glTextures[a];if(s!==n&&s.dirtyId!==i.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e}(be),Se=[];function ke(t,e){if(!t)return null;var i="";if("string"==typeof t){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(i=n[1].toLowerCase())}for(var o=Se.length-1;o>=0;--o){var a=Se[o];if(a.test&&a.test(t,i))return new a(t,e)}return new xe(t,e)}var we=function(t){function e(e,i){var n=i||{},o=n.width,a=n.height;if(!o||!a)throw new Error("BufferResource width or height invalid");t.call(this,o,a),this.data=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,i){var n=t.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===M.UNPACK),i.width===e.width&&i.height===e.height?n.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,n.texImage2D(e.target,0,i.internalFormat,e.width,e.height,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(ve),Ae={scaleMode:B.NEAREST,format:T.RGBA,alphaMode:M.NPM},Pe=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null),t.call(this);var n=(i=i||{}).alphaMode,o=i.mipmap,a=i.anisotropicLevel,s=i.scaleMode,r=i.width,l=i.height,h=i.wrapMode,c=i.format,u=i.type,m=i.target,p=i.resolution,d=i.resourceOptions;!e||e instanceof ve||((e=ke(e,d)).internal=!0),this.width=r||0,this.height=l||0,this.resolution=p||F.RESOLUTION,this.mipmap=void 0!==o?o:F.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==a?a:F.ANISOTROPIC_LEVEL,this.wrapMode=h||F.WRAP_MODE,this.scaleMode=void 0!==s?s:F.SCALE_MODE,this.format=c||T.RGBA,this.type=u||I.UNSIGNED_BYTE,this.target=m||C.TEXTURE_2D,this.alphaMode=void 0!==n?n:M.UNPACK,void 0!==i.premultiplyAlpha&&(this.premultiplyAlpha=i.premultiplyAlpha),this.uid=ft(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=r>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.setResource(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={realWidth:{configurable:!0},realHeight:{configurable:!0}};return i.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},i.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=ct(this.realWidth)&&ct(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete bt[this.cacheId],delete _t[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.from=function(t,i,n){void 0===n&&(n=F.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;o?a=t:(t._pixiId||(t._pixiId="pixiid_"+ft()),a=t._pixiId);var s=bt[a];if(o&&n&&!s)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return s||((s=new e(t,i)).cacheId=a,e.addToCache(s,a)),s},e.fromBuffer=function(t,i,n,o){t=t||new Float32Array(i*n*4);var a=new we(t,{width:i,height:n}),s=t instanceof Float32Array?I.FLOAT:I.UNSIGNED_BYTE;return new e(a,Object.assign(Ae,o||{width:i,height:n,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),bt[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),bt[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=bt[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete bt[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete bt[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperties(e.prototype,i),e}(U.a);Pe._globalBatch=0;var Te=function(t){function e(e,i){var n;i=i||{};var o=e;Array.isArray(e)&&(n=e,o=e.length),t.call(this,i.width,i.height),this.items=[],this.itemDirtyIds=[];for(var a=0;a<o;a++){var s=new Pe;this.items.push(s),this.itemDirtyIds.push(-1)}if(this.length=o,this._load=null,n)for(var r=0;r<o;r++)this.addResourceAt(ke(n[r],i),r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=C.TEXTURE_2D_ARRAY;for(var i=0;i<this.length;i++)this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map(function(t){return t.resource}),i=e.map(function(t){return t.load()});return this._load=Promise.all(i).then(function(){var i=e[0],n=i.width,o=i.height;return t.resize(n,o),Promise.resolve(t)}),this._load},e.prototype.upload=function(t,e,i){var n=this.length,o=this.itemDirtyIds,a=this.items,s=t.gl;i.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,n,0,e.format,e.type,null);for(var r=0;r<n;r++){var l=a[r];o[r]<l.dirtyId&&(o[r]=l.dirtyId,l.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,r,l.resource.width,l.resource.height,1,e.format,e.type,l.resource.source))}return!0},e}(ve),Ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(be),Ie=function(t){function e(i,n){if(n=n||{},t.call(this,i,n),this.length!==e.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var o=0;o<e.SIDES;o++)this.items[o].target=C.TEXTURE_CUBE_MAP_POSITIVE_X+o;!1!==n.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=C.TEXTURE_CUBE_MAP},e.prototype.upload=function(t,i,n){for(var o=this.itemDirtyIds,a=0;a<e.SIDES;a++){var s=this.items[a];o[a]<s.dirtyId&&(o[a]=s.dirtyId,s.valid&&s.resource.upload(t,s,n))}return!0},e}(Te);Ie.SIDES=6;var Be=function(t){function e(e,i){i=i||{},t.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=e,this.scale=i.scale||1,this._overrideWidth=i.width,this._overrideHeight=i.height,this._resolve=null,this._crossorigin=i.crossorigin,this._load=null,!1!==i.autoLoad&&this.load()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise(function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var e=this,i=new Image;t.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(t){e._resolve&&(i.onerror=null,e.onError.run(t))},i.onload=function(){if(e._resolve){var t=i.width,n=i.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=t*e.scale,a=n*e.scale;(e._overrideWidth||e._overrideHeight)&&(o=e._overrideWidth||e._overrideHeight/n*t,a=e._overrideHeight||e._overrideWidth/t*n),o=Math.round(o),a=Math.round(a);var s=e.source;s.width=o,s.height=a,s._pixiId="canvas_"+ft(),s.getContext("2d").drawImage(i,0,0,t,n,0,0,o,a),e._resolve(),e._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"==typeof t&&0===t.indexOf("<svg")},e}(be);Be.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var Le=function(t){function e(e,i){if(i=i||{},!(e instanceof HTMLVideoElement)){var n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),"string"==typeof e&&(e=[e]),t.crossOrigin(n,e[0].src||e[0],i.crossorigin);for(var o=0;o<e.length;++o){var a=document.createElement("source"),s=e[o],r=s.src,l=s.mime,h=(r=r||e[o]).split("?").shift().toLowerCase(),c=h.substr(h.lastIndexOf(".")+1);l=l||"video/"+c,a.src=r,a.type=l,n.appendChild(a)}e=n}t.call(this,e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=i.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==i.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==i.autoLoad&&this.load()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return e.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var i=ae.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this,e),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){t.valid?i(t):(t._resolve=i,e.load())}),this._load},e.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ae.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(ae.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&ae.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),t.prototype.dispose.call(this)},i.autoUpdate.get=function(){return this._autoUpdate},i.autoUpdate.set=function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ae.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ae.shared.add(this.update,this),this._isConnectedToTicker=!0))},i.updateFPS.get=function(){return this._updateFPS},i.updateFPS.set=function(t){t!==this._updateFPS&&(this._updateFPS=t)},e.test=function(t,i){return t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},Object.defineProperties(e.prototype,i),e}(be);Le.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var Ee=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(be);Se.push(xe,Ee,Ce,Le,Be,we,Ie,Te);var Me={INSTALLED:Se,autoDetectResource:ke,ArrayResource:Te,BufferResource:we,CanvasResource:Ce,CubeResource:Ie,ImageResource:xe,ImageBitmapResource:Ee,SVGResource:Be,VideoResource:Le,Resource:ve,BaseImageResource:be},Re=function(t){this.renderer=t};Re.prototype.destroy=function(){this.renderer=null};var De=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.upload=function(t,e,i){var n=t.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===M.UNPACK),i.width===e.width&&i.height===e.height?n.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,n.texImage2D(e.target,0,1===t.context.webGLVersion?n.DEPTH_COMPONENT:n.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(we),Oe=function(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ge("disposeFramebuffer",2)},Fe={colorTexture:{configurable:!0}};Fe.colorTexture.get=function(){return this.colorTextures[0]},Oe.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new Pe(null,{scaleMode:B.NEAREST,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Oe.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Pe(new De(null,{width:this.width,height:this.height}),{scaleMode:B.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:!1,format:T.DEPTH_COMPONENT,type:I.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Oe.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Oe.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Oe.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],o=n.resolution;n.setSize(t/o,e/o)}if(this.depthTexture){var a=this.depthTexture.resolution;this.depthTexture.setSize(t/a,e/a)}}},Oe.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Object.defineProperties(Oe.prototype,Fe);var je=function(t){function e(e){"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});t.call(this,null,e);var i=e||{},n=i.width,o=i.height;this.mipmap=!1,this.width=Math.ceil(n)||100,this.height=Math.ceil(o)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new Oe(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.framebuffer=null},e}(Pe),Ue=function(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)};Ue.prototype.set=function(t,e,i){var n=e.width,o=e.height;if(i){var a=t.width/2/n,s=t.height/2/o,r=t.x/n+a,l=t.y/o+s;i=zt.add(i,zt.NW),this.x0=r+a*zt.uX(i),this.y0=l+s*zt.uY(i),i=zt.add(i,2),this.x1=r+a*zt.uX(i),this.y1=l+s*zt.uY(i),i=zt.add(i,2),this.x2=r+a*zt.uX(i),this.y2=l+s*zt.uY(i),i=zt.add(i,2),this.x3=r+a*zt.uX(i),this.y3=l+s*zt.uY(i)}else this.x0=t.x/n,this.y0=t.y/o,this.x1=(t.x+t.width)/n,this.y1=t.y/o,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/o,this.x3=t.x/n,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var Ne=new Ue,Ve=function(t){function e(i,n,o,a,s,r){if(t.call(this),this.noFrame=!1,n||(this.noFrame=!0,n=new Wt(0,0,1,1)),i instanceof e&&(i=i.baseTexture),this.baseTexture=i,this._frame=n,this.trim=a,this.valid=!1,this.requiresUpdate=!1,this._uvs=Ne,this.uvMatrix=null,this.orig=o||n,this._rotate=Number(s||0),!0===s)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=r?new Lt(r.x,r.y):new Lt(0,0),this._updateID=0,this.textureCacheIds=[],i.valid?this.noFrame?i.valid&&this.onBaseTextureUpdated(i):this.frame=n:i.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&i.on("update",this.onBaseTextureUpdated,this)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&_t[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===Ne&&(this._uvs=new Ue),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,n){void 0===i&&(i={}),void 0===n&&(n=F.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;o?a=t:(t._pixiId||(t._pixiId="pixiid_"+ft()),a=t._pixiId);var s=_t[a];if(o&&n&&!s)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return s||(i.resolution||(i.resolution=It(t)),(s=new e(new Pe(t,i))).baseTexture.cacheId=a,Pe.addToCache(s.baseTexture,a),e.addToCache(s,a)),s},e.fromBuffer=function(t,i,n,o){return new e(Pe.fromBuffer(t,i,n,o))},e.fromLoader=function(t,i,n){var o=new xe(t);o.url=i;var a=new e(new Pe(o,{scaleMode:F.SCALE_MODE,resolution:It(i)}));return n||(n=i),Pe.addToCache(a.baseTexture,n),e.addToCache(a,n),n!==i&&(Pe.addToCache(a.baseTexture,i),e.addToCache(a,i)),a},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),_t[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),_t[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=_t[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete _t[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)_t[t.textureCacheIds[n]]===t&&delete _t[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},i.resolution.get=function(){return this.baseTexture.resolution},i.frame.get=function(){return this._frame},i.frame.set=function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,n=t.width,o=t.height,a=e+n>this.baseTexture.width,s=i+o>this.baseTexture.height;if(a||s){var r=a&&s?"and":"or",l="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,h="Y: "+i+" + "+o+" = "+(i+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+r+" "+h)}this.valid=n&&o&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},i.rotate.get=function(){return this._rotate},i.rotate.set=function(t){this._rotate=t,this.valid&&this.updateUvs()},i.width.get=function(){return this.orig.width},i.height.get=function(){return this.orig.height},Object.defineProperties(e.prototype,i),e}(U.a);function Ge(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Ve.EMPTY=new Ve(new Pe),Ge(Ve.EMPTY),Ge(Ve.EMPTY.baseTexture),Ve.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Ve(new Pe(new Ce(t)))}(),Ge(Ve.WHITE),Ge(Ve.WHITE.baseTexture);var Xe=function(t){function e(e,i){var n=null;if(!(e instanceof je)){var o=arguments[1],a=arguments[2],s=arguments[3],r=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+a+") instead of the ctor directly."),n=arguments[0],i=null,e=new je({width:o,height:a,scaleMode:s,resolution:r})}t.call(this,e,i),this.legacyRenderer=n,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new je(t))},e}(Ve),ze=function(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0};ze.prototype.createTexture=function(t,e){var i=new je(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Xe(i)},ze.prototype.getOptimalTexture=function(t,e,i){void 0===i&&(i=1);var n=ze.SCREEN_KEY;t*=i,e*=i,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(n=(65535&(t=ht(t)))<<16|65535&(e=ht(e))),this.texturePool[n]||(this.texturePool[n]=[]);var o=this.texturePool[n].pop();return o||(o=this.createTexture(t,e)),o.filterPoolKey=n,o.setResolution(i),o},ze.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},ze.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},ze.prototype.returnFilterTexture=function(t){this.returnTexture(t)},ze.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},ze.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=ze.SCREEN_KEY,i=this.texturePool[e];if(this.enableFullScreen=t.width>0&&t.height>0,i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},ze.SCREEN_KEY="screen";var He=function(t,e,i,n,o,a,s){void 0===i&&(i=!1),void 0===n&&(n=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=o,this.start=a,this.instance=s};He.prototype.destroy=function(){this.buffer=null},He.from=function(t,e,i,n,o){return new He(t,e,i,n,o)};var We=0,Je=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=We++,this.disposeRunner=new ge("disposeBuffer",2)};function Ye(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}Je.prototype.update=function(t){this.data=t||this.data,this._updateID++},Je.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Je.prototype.destroy=function(){this.dispose(),this.data=null},Je.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new Je(t)};var qe={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Ze={5126:4,5123:2,5121:1},Ke=0,$e={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Qe=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Ke++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ge("disposeGeometry",2),this.refCount=0};Qe.prototype.addAttribute=function(t,e,i,n,o,a,s,r){if(void 0===n&&(n=!1),void 0===r&&(r=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e.data||(e instanceof Array&&(e=new Float32Array(e)),e=new Je(e));var l=t.split("|");if(l.length>1){for(var h=0;h<l.length;h++)this.addAttribute(l[h],e,i,n,o);return this}var c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new He(c,i,n,o,a,s,r),this.instanced=this.instanced||r,this},Qe.prototype.getAttribute=function(t){return this.attributes[t]},Qe.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},Qe.prototype.addIndex=function(t){return t.data||(t instanceof Array&&(t=new Uint16Array(t)),t=new Je(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},Qe.prototype.getIndex=function(){return this.indexBuffer},Qe.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],n=new Je;for(t in this.attributes){var o=this.attributes[t],a=this.buffers[o.buffer];e.push(a.data),i.push(o.size*Ze[o.type]/4),o.buffer=0}for(n.data=function(t,e){for(var i=0,n=0,o={},a=0;a<t.length;a++)n+=e[a],i+=t[a].length;for(var s=new ArrayBuffer(4*i),r=null,l=0,h=0;h<t.length;h++){var c=e[h],u=t[h],m=Ye(u);o[m]||(o[m]=new qe[m](s)),r=o[m];for(var p=0;p<u.length;p++)r[(p/c|0)*n+l+p%c]=u[p];l+=c}return new Float32Array(s)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Qe.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},Qe.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Qe.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Qe.prototype.clone=function(){for(var t=new Qe,e=0;e<this.buffers.length;e++)t.buffers[e]=new Je(this.buffers[e].data.slice());for(var i in this.attributes){var n=this.attributes[i];t.attributes[i]=new He(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},Qe.merge=function(t){for(var e,i=new Qe,n=[],o=[],a=[],s=0;s<t.length;s++){e=t[s];for(var r=0;r<e.buffers.length;r++)o[r]=o[r]||0,o[r]+=e.buffers[r].data.length,a[r]=0}for(var l=0;l<e.buffers.length;l++)n[l]=new($e[Ye(e.buffers[l].data)])(o[l]),i.buffers[l]=new Je(n[l]);for(var h=0;h<t.length;h++){e=t[h];for(var c=0;c<e.buffers.length;c++)n[c].set(e.buffers[c].data,a[c]),a[c]+=e.buffers[c].data.length}if(i.attributes=e.attributes,e.indexBuffer){i.indexBuffer=i.buffers[e.buffers.indexOf(e.indexBuffer)],i.indexBuffer.index=!0;for(var u=0,m=0,p=0,d=0,f=0;f<e.buffers.length;f++)if(e.buffers[f]!==e.indexBuffer){d=f;break}for(var y in e.attributes){var g=e.attributes[y];(0|g.buffer)===d&&(m+=g.size*Ze[g.type]/4)}for(var v=0;v<t.length;v++){for(var _=t[v].indexBuffer.data,b=0;b<_.length;b++)i.indexBuffer.data[b+p]+=u;u+=e.buffers[d].data.length/m,p+=_.length}}return i};var ti=function(t){function e(){t.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Qe),ei=function(t){function e(){t.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Je(this.vertices),this.uvBuffer=new Je(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Qe),ii=0,ni=function(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ii++,this.static=!!e};ni.prototype.update=function(){this.dirtyId++},ni.prototype.add=function(t,e,i){this.uniforms[t]=new ni(e,i)},ni.from=function(t,e){return new ni(t,e)};var oi=function(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Wt,this.destinationFrame=new Wt,this.filters=[]};oi.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};var ai=function(t){function e(e){t.call(this,e),this.defaultFilterStack=[{}],this.texturePool=new ze,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new ti,this.quadUv=new ei,this.tempRect=new Wt,this.activeState={},this.globalUniforms=new ni({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,o=this.statePool.pop()||new oi,a=e[0].resolution,s=e[0].padding,r=e[0].autoFit,l=e[0].legacy,h=1;h<e.length;h++){var c=e[h];a=Math.min(a,c.resolution),s=this.useMaxPadding?Math.max(s,c.padding):s+c.padding,r=r||c.autoFit,l=l||c.legacy}1===n.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),n.push(o),o.resolution=a,o.legacy=l,o.target=t,o.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),o.sourceFrame.pad(s),r&&o.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),o.sourceFrame.ceil(a),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,a),o.filters=e,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height,o.renderTexture.filterFrame=o.sourceFrame,i.renderTexture.bind(o.renderTexture,o.sourceFrame),i.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var o=n.inputSize,a=n.inputPixel,s=n.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=o[0]*e.resolution,a[1]=o[1]*e.resolution,a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=e.sourceFrame.width*o[2]-.5*a[2],s[3]=e.sourceFrame.height*o[3]-.5*a[3],e.legacy){var r=n.filterArea;r[0]=e.destinationFrame.width,r[1]=e.destinationFrame.height,r[2]=e.sourceFrame.x,r[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(1===i.length)i[0].apply(this,e.renderTexture,l.renderTexture,!1,e),this.returnFilterTexture(e.renderTexture);else{var h=e.renderTexture,c=this.getOptimalFilterTexture(h.width,h.height,e.resolution);c.filterFrame=h.filterFrame;var u=0;for(u=0;u<i.length-1;++u){i[u].apply(this,h,c,!0,e);var m=h;h=c,c=m}i[u].apply(this,h,l.renderTexture,!1,e),this.returnFilterTexture(h),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},e.prototype.applyFilter=function(t,e,i,n){var o=this.renderer;o.renderTexture.bind(i,i?i.filterFrame:null),n&&o.renderTexture.clear(),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.state.set(t.state),o.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(P.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(P.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,o=i.destinationFrame,a=e._texture.orig,s=t.set(o.width,0,0,o.height,n.x,n.y),r=e.worldTransform.copyTo(Ot.TEMP_MATRIX);return r.invert(),s.prepend(r),s.scale(1/a.width,1/a.height),s.translate(e.anchor.x,e.anchor.y),s},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(t,e,i)},e.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var i=t;t=e,e=i}t=t||this.activeState.renderTexture;var n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return n.filterFrame=t.filterFrame,n},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(Re),si=function(t){this.renderer=t};si.prototype.flush=function(){},si.prototype.destroy=function(){this.renderer=null},si.prototype.start=function(){},si.prototype.stop=function(){this.flush()},si.prototype.render=function(t){};var ri=function(t){function e(e){t.call(this,e),this.emptyRenderer=new si(e),this.currentRenderer=this.emptyRenderer}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},e.prototype.boundArray=function(t,e,i,n){for(var o=t.elements,a=t.ids,s=t.count,r=0,l=0;l<s;l++){var h=o[l],c=h._batchLocation;if(c>=0&&c<n&&e[c]===h)a[l]=c;else for(;r<n;){var u=e[r];if(!u||u._batchEnabled!==i||u._batchLocation!==r){a[l]=r,h._batchLocation=r,e[r]=h;break}r++}}},e}(Re);F.PREFER_ENV=S.any?k.WEBGL:k.WEBGL2,F.STRICT_TEXTURE_CACHE=!1;var li=0,hi=function(t){function e(e){t.call(this,e),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isLost:{configurable:!0}};return i.isLost.get=function(){return!this.gl||this.gl.isContextLost()},e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=li++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=li++,this.renderer.runners.contextChange.run(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var i;if(F.PREFER_ENV>=k.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),i},e.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(e.prototype,i),e}(Re),ci=function(t){function e(e){t.call(this,e),this.managedFramebuffers=[],this.unknownFramebuffer=new Oe(10,10)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={size:{configurable:!0}};return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Wt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;F.PREFER_ENV===k.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}},e.prototype.bind=function(t,e){var i=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++)t.colorTextures[o].texturePart?this.renderer.texture.unbind(t.colorTextures[o].texture):this.renderer.texture.unbind(t.colorTextures[o]);t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,i,n){var o=this.viewport;o.width===i&&o.height===n&&o.x===t&&o.y===e||(o.x=t,o.y=e,o.width=i,o.height=n,this.gl.viewport(t,e,i,n))},i.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},e.prototype.clear=function(t,e,i,n){var o=this.gl;o.clearColor(t,e,i,n),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)},e.prototype.initFramebuffer=function(t){var e={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},e.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var n=t.colorTextures,o=0;o<n.length;o++)this.renderer.texture.bind(n[o],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures.length;e.drawBuffers||(n=Math.min(n,1));for(var o=[],a=0;a<n;a++){var s=t.colorTextures[a];s.texturePart?(this.renderer.texture.bind(s.texture,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+a,e.TEXTURE_CUBE_MAP_NEGATIVE_X+s.side,s.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D,s._glTextures[this.CONTEXT_UID].texture,0)),o.push(e.COLOR_ATTACHMENT0+a)}if((o.length>1&&e.drawBuffers(o),t.depthTexture)&&this.writeDepthTexture){var r=t.depthTexture;this.renderer.texture.bind(r,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r._glTextures[this.CONTEXT_UID].texture,0)}i.stencil||!t.stencil&&!t.depth||(i.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i.stencil))},e.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var o=this.managedFramebuffers.indexOf(t);o>=0&&this.managedFramebuffers.splice(o,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var i=t.width,n=t.height,o=this.gl,a=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,a),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,i,n),e.stencil=a,o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Wt},Object.defineProperties(e.prototype,i),e}(Re),ui=function(t){this.buffer=t,this.updateID=-1,this.byteLength=-1,this.refCount=0},mi={5126:4,5123:2,5121:1},pi=function(t){function e(e){t.call(this,e),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!t.createVertexArray){var i=this.renderer.context.extensions.vertexArrayObject;F.PREFER_ENV===k.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){},t.bindVertexArray=function(){},t.deleteVertexArray=function(){})}if(!t.vertexAttribDivisor){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(t,e){return n.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,o,a){return n.drawElementsInstancedANGLE(t,e,i,o,a)},t.drawArraysInstanced=function(t,e,i,o){return n.drawArraysInstancedANGLE(t,e,i,o)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID];n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={});var o=n[e.program.id]||this.initGeometryVao(t,e.program);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var n=t.buffers[i],o=n._glBuffers[this.CONTEXT_UID];if(n._updateID!==o.updateID){o.updateID=n._updateID;var a=n.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(a,o.buffer),this._boundBuffer=o,o.byteLength>=n.data.byteLength)e.bufferSubData(a,0,n.data);else{var s=n.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;o.byteLength=n.data.byteLength,e.bufferData(a,n.data,s)}}}},e.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var o in n)if(!i[o])throw new Error('shader and geometry incompatible, geometry missing the "'+o+'" attribute')},e.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,o=["g",t.id];for(var a in i)n[a]&&o.push(a);return o.join("-")},e.prototype.initGeometryVao=function(t,e){this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,o=this.getSignature(t,e),a=t.glVertexArrayObjects[this.CONTEXT_UID],s=a[o];if(s)return a[e.id]=s,s;var r=t.buffers,l=t.attributes,h={},c={};for(var u in r)h[u]=0,c[u]=0;for(var m in l)!l[m].size&&e.attributeData[m]?l[m].size=e.attributeData[m].size:l[m].size||console.warn("PIXI Geometry attribute '"+m+"' size cannot be determined (likely the bound shader does not have the attribute)"),h[l[m].buffer]+=l[m].size*mi[l[m].type];for(var p in l){var d=l[p],f=d.size;void 0===d.stride&&(h[d.buffer]===f*mi[d.type]?d.stride=0:d.stride=h[d.buffer]),void 0===d.start&&(d.start=c[d.buffer],c[d.buffer]+=f*mi[d.type])}s=i.createVertexArray(),i.bindVertexArray(s);for(var y=0;y<r.length;y++){var g=r[y];g._glBuffers[n]||(g._glBuffers[n]=new ui(i.createBuffer()),this.managedBuffers[g.id]=g,g.disposeRunner.add(this)),g._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=s,a[e.id]=s,a[o]=s,s},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,o=t.buffers;if(t.disposeRunner.remove(this),i){for(var a=0;a<o.length;a++){var s=o[a]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(o[a],e)}if(!e)for(var r in i)if("g"===r[0]){var l=i[r];this._activeVao===l&&this.unbind(),n.deleteVertexArray(l)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);e=Object.keys(this.managedBuffers);for(var n=0;n<e.length;n++)this.disposeBuffer(this.managedBuffers[e[n]],t)},e.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,o=t.buffers,a=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[n].buffer);var s=null;for(var r in a){var l=a[r],h=o[l.buffer]._glBuffers[n];if(e.attributeData[r]){s!==h&&(i.bindBuffer(i.ARRAY_BUFFER,h.buffer),s=h);var c=e.attributeData[r].location;if(i.enableVertexAttribArray(c),i.vertexAttribPointer(c,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(c,1)}}}},e.prototype.draw=function(t,e,i,n){var o=this.gl,a=this._activeGeometry;if(a.indexBuffer){var s=a.indexBuffer.data.BYTES_PER_ELEMENT,r=2===s?o.UNSIGNED_SHORT:o.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,r,(i||0)*s,n||1):o.drawElements(t,e||a.indexBuffer.data.length,r,(i||0)*s):console.warn("unsupported index buffer type: uint32")}else a.instanced?o.drawArraysInstanced(t,i,e||a.getSize(),n||1):o.drawArrays(t,i,e||a.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(Re),di=function(t){this.type=O.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null};function fi(t,e,i,n){var o=yi(t,t.VERTEX_SHADER,e),a=yi(t,t.FRAGMENT_SHADER,i),s=t.createProgram();if(t.attachShader(s,o),t.attachShader(s,a),n)for(var r in n)t.bindAttribLocation(s,n[r],r);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(t.getShaderParameter(o,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(o))),t.getShaderParameter(a,t.COMPILE_STATUS)||(console.warn(i),console.error(t.getShaderInfoLog(a))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(o),t.deleteShader(a),s}function yi(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}function gi(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return vi(2*e);case"bvec3":return vi(3*e);case"bvec4":return vi(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function vi(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}di.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=O.NONE,this.autoDetect=!0),this._target=null},di.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var _i,bi={},xi=bi;function Si(){if(xi===bi||xi&&xi.isContextLost()){var t,e=document.createElement("canvas");F.PREFER_ENV>=k.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),xi=t}return xi}function ki(t,e,i){if("precision"!==t.substring(0,9)){var n=e;return e===D.HIGH&&i!==D.HIGH&&(n=D.MEDIUM),"precision "+n+" float;\n"+t}return i!==D.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var wi={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Ai(t){return wi[t]}var Pi=null,Ti={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function Ci(t,e){if(!Pi){var i=Object.keys(Ti);Pi={};for(var n=0;n<i.length;++n){var o=i[n];Pi[t[o]]=Ti[o]}}return Pi[e]}var Ii={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Bi={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Li,Ei=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Mi(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var n=Ei.replace(/%forloop%/gi,Ri(t));if(e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}function Ri(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}var Di=0,Oi={},Fi=function t(e,i,n){void 0===n&&(n="pixi-shader"),this.id=Di++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),Oi[n]?(Oi[n]++,n+="-"+Oi[n]):Oi[n]=1,this.vertexSrc="#define SHADER_NAME "+n+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+"\n"+this.fragmentSrc,this.vertexSrc=ki(this.vertexSrc,F.PRECISION_VERTEX,D.HIGH),this.fragmentSrc=ki(this.fragmentSrc,F.PRECISION_FRAGMENT,function(){if(!_i){_i=D.MEDIUM;var t=Si();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);_i=e.precision?D.HIGH:D.MEDIUM}}return _i}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null},ji={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};Fi.prototype.extractData=function(t,e){var i=Si();if(i){var n=fi(i,t,e);this.attributeData=this.getAttributeData(n,i),this.uniformData=this.getUniformData(n,i),i.deleteProgram(n)}else this.uniformData={},this.attributeData={}},Fi.prototype.getAttributeData=function(t,e){for(var i={},n=[],o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var s=e.getActiveAttrib(t,a),r=Ci(e,s.type),l={type:r,name:s.name,size:Ai(r),location:0};i[s.name]=l,n.push(l)}n.sort(function(t,e){return t.name>e.name?1:-1});for(var h=0;h<n.length;h++)n[h].location=h;return i},Fi.prototype.getUniformData=function(t,e){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=0;o<n;o++){var a=e.getActiveUniform(t,o),s=a.name.replace(/\[.*?\]/,""),r=a.name.match(/\[.*?\]/,""),l=Ci(e,a.type);i[s]={type:l,size:a.size,isArray:r,value:gi(l,a.size)}}return i},ji.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},ji.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},Fi.from=function(t,e,i){var n=t+e,o=vt[n];return o||(vt[n]=o=new Fi(t,e,i)),o},Object.defineProperties(Fi,ji);var Ui=function(t,e){for(var i in this.program=t,this.uniformGroup=e?e instanceof ni?e:new ni(e):new ni({}),t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))},Ni={uniforms:{configurable:!0}};Ui.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},Ui.prototype.destroy=function(){this.uniformGroup=null},Ni.uniforms.get=function(){return this.uniformGroup.uniforms},Ui.from=function(t,e,i){var n=Fi.from(t,e);return new Ui(n,i)},Object.defineProperties(Ui.prototype,Ni);var Vi=function(){this.data=0,this.blendMode=A.NORMAL,this.polygonOffset=0,this.blend=!0},Gi={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};Gi.blend.get=function(){return!!(1&this.data)},Gi.blend.set=function(t){!!(1&this.data)!==t&&(this.data^=1)},Gi.offsets.get=function(){return!!(2&this.data)},Gi.offsets.set=function(t){!!(2&this.data)!==t&&(this.data^=2)},Gi.culling.get=function(){return!!(4&this.data)},Gi.culling.set=function(t){!!(4&this.data)!==t&&(this.data^=4)},Gi.depthTest.get=function(){return!!(8&this.data)},Gi.depthTest.set=function(t){!!(8&this.data)!==t&&(this.data^=8)},Gi.clockwiseFrontFace.get=function(){return!!(16&this.data)},Gi.clockwiseFrontFace.set=function(t){!!(16&this.data)!==t&&(this.data^=16)},Gi.blendMode.get=function(){return this._blendMode},Gi.blendMode.set=function(t){this.blend=t!==A.NONE,this._blendMode=t},Gi.polygonOffset.get=function(){return this._polygonOffset},Gi.polygonOffset.set=function(t){this.offsets=!!t,this._polygonOffset=t},Vi.for2d=function(){var t=new Vi;return t.depthTest=!1,t.blend=!0,t},Object.defineProperties(Vi.prototype,Gi);var Xi=function(t){function e(i,n,o){var a=Fi.from(i||e.defaultVertexSrc,n||e.defaultFragmentSrc);t.call(this,a,o),this.padding=0,this.resolution=F.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new Vi}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blendMode:{configurable:!0}},n={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return e.prototype.apply=function(t,e,i,n,o){t.applyFilter(this,e,i,n,o)},i.blendMode.get=function(){return this.state.blendMode},i.blendMode.set=function(t){this.state.blendMode=t},n.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},n.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(e.prototype,i),Object.defineProperties(e,n),e}(Ui);Xi.SOURCE_KEY_MAP={};var zi="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",Hi="varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",Wi=new Ot,Ji=function(t,e){this._texture=t,this.mapCoord=new Ot,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1},Yi={texture:{configurable:!0}};Yi.texture.get=function(){return this._texture},Yi.texture.set=function(t){this._texture=t,this._updateID=-1},Ji.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var o=t[n],a=t[n+1];e[n]=o*i.a+a*i.c+i.tx,e[n+1]=o*i.b+a*i.d+i.ty}return e},Ji.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._updateID===e._updateID)return!1;this._updateID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,o=e.trim;o&&(Wi.set(n.width/o.width,0,0,n.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Wi));var a=e.baseTexture,s=this.uClampFrame,r=this.clampMargin/a.resolution,l=this.clampOffset;return s[0]=(e._frame.x+r+l)/a.width,s[1]=(e._frame.y+r+l)/a.height,s[2]=(e._frame.x+e._frame.width-r+l)/a.width,s[3]=(e._frame.y+e._frame.height-r+l)/a.height,this.uClampOffset[0]=l/a.realWidth,this.uClampOffset[1]=l/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&0===e.rotate,!0},Object.defineProperties(Ji.prototype,Yi);var qi=function(t){function e(e){var i=new Ot;t.call(this,zi,Hi),e.renderable=!1,this.maskSprite=e,this.maskMatrix=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t,e,i,n){var o=this.maskSprite,a=this.maskSprite.texture;a.valid&&(a.transform||(a.transform=new Ji(a,0)),a.transform.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,o).prepend(a.transform.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=a.transform.uClampFrame,t.applyFilter(this,e,i,n))},e}(Xi),Zi=function(t){function e(e){t.call(this,e),this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){if(!e.isMaskData){var i=this.maskDataPool.pop()||new di;i.pooled=!0,i.maskObject=e,e=i}switch(e.autoDetect&&this.detect(e),e.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),e._target=t,e.type){case O.SCISSOR:this.maskStack.push(e),this.renderer.scissor.push(e);break;case O.STENCIL:this.maskStack.push(e),this.renderer.stencil.push(e);break;case O.SPRITE:e.copyCountersOrReset(null),this.pushSpriteMask(e),this.maskStack.push(e)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case O.SCISSOR:this.renderer.scissor.pop();break;case O.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case O.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=O.SPRITE;else if(t.type=O.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),o=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),o=((o=Math.round(o*(180/Math.PI)*100)-n)%18e3+18e3)%18e3,0===(n=(n%9e3+9e3)%9e3)&&9e3===o&&(t.type=O.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,i=t._target,n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new qi(e)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=e;var o=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=o,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(Re),Ki=function(t){function e(e){t.call(this,e),this.maskStack=[],this.glConst=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(0===n?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this,this),this.maskStack=null},e}(Re),$i=function(t){function e(e){t.call(this,e),this.glConst=WebGLRenderingContext.SCISSOR_TEST}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,n=e.getBounds(!0),o=this.renderer.gl;e.renderable=!1,i?n.fit(i):o.enable(o.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=n,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,n=i.transform,o=i.sourceFrame,a=i.destinationFrame,s=e?e.resolution:this.renderer.resolution,r=(t.x-o.x)*s+a.x,l=(t.y-o.y)*s+a.y,h=t.width*s,c=t.height*s;n&&(r+=n.tx*s,l+=n.ty*s),e||(l=this.renderer.height-c-l),this.renderer.gl.scissor(r,l,h,c)},e}(Ki),Qi=function(t){function e(e){t.call(this,e),this.glConst=WebGLRenderingContext.STENCIL_TEST}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,n,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(Ki),tn=function(t){function e(e){t.call(this,e),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ot,this.transform=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,i,n){var o=this.projectionMatrix;n?(o.a=1/t.width*2*i,o.d=-1/t.height*2*i,o.tx=-1-e.x*o.a,o.ty=1-e.y*o.d):(o.a=1/t.width*2*i,o.d=1/t.height*2*i,o.tx=-1-e.x*o.a,o.ty=-1-e.y*o.d)},e.prototype.setTransform=function(){},e}(Re),en=new Wt,nn=function(t){function e(e){t.call(this,e),this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Wt,this.destinationFrame=new Wt}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(t,e,i){void 0===t&&(t=null),this.current=t;var n,o=this.renderer;if(t){var a=t.baseTexture;n=a.resolution,i||(en.width=a.realWidth,en.height=a.realHeight,i=en),e||(e=i),this.renderer.framebuffer.bind(a.framebuffer,i),this.renderer.projection.update(i,e,n,!1),this.renderer.mask.setMaskStack(a.maskStack)}else n=this.renderer.resolution,i||(en.width=o.width,en.height=o.height,i=en),e||(e=i),o.framebuffer.bind(null,i),this.renderer.projection.update(i,e,n,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(e),this.destinationFrame.x=i.x/n,this.destinationFrame.y=i.y/n,this.destinationFrame.width=i.width/n,this.destinationFrame.height=i.height/n,e===i&&this.sourceFrame.copyFrom(this.destinationFrame)},e.prototype.clear=function(t){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(Re),on=function(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}};on.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var an=0,sn={textureCount:0},rn=function(t){function e(e){t.call(this,e),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=an++}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Li)return Li;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Li=!0===t({a:"b"},"a","b")}catch(t){Li=!1}return Li}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(sn.textureCount=0,this.syncUniformGroup(t.uniformGroup,sn)),n},e.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var i=this.getglProgram();t.static&&t.dirtyId===i.uniformGroups[t.id]||(i.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},e.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var i="var v = null;\n    var cv = null\n    var t = 0;\n    var gl = renderer.gl\n    ";for(var n in t.uniforms){var o=e[n];o?"float"===o.type&&1===o.size?i+="\n            if(uv."+n+" !== ud."+n+".value)\n            {\n                ud."+n+".value = uv."+n+"\n                gl.uniform1f(ud."+n+".location, uv."+n+")\n            }\n":"sampler2D"!==o.type&&"samplerCube"!==o.type&&"sampler2DArray"!==o.type||1!==o.size||o.isArray?"mat3"===o.type&&1===o.size?void 0!==t.uniforms[n].a?i+="\n                gl.uniformMatrix3fv(ud."+n+".location, false, uv."+n+".toArray(true));\n                \n":i+="\n                gl.uniformMatrix3fv(ud."+n+".location, false, uv."+n+");\n                \n":"vec2"===o.type&&1===o.size?void 0!==t.uniforms[n].x?i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+n+".location, v.x, v.y);\n                }\n":i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+n+".location, v[0], v[1]);\n                }\n                \n":"vec4"===o.type&&1===o.size?void 0!==t.uniforms[n].width?i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+n+".location, v.x, v.y, v.width, v.height)\n                }\n":i+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+n+".location, v[0], v[1], v[2], v[3])\n                }\n                \n":i+="\n            cv = ud."+n+".value;\n            v = uv."+n+";\n            "+(1===o.size?Ii:Bi)[o.type].replace("location","ud."+n+".location")+";\n":i+="\n\n            t = syncData.textureCount++;\n\n            renderer.texture.bind(uv."+n+", t);\n            \n            if(ud."+n+".value !== t)\n            {\n                ud."+n+".value = t;\n                gl.uniform1i(ud."+n+".location, t);\n; // eslint-disable-line max-len\n            }\n":t.uniforms[n].group&&(i+="\n                    renderer.shader.syncUniformGroup(uv."+n+", syncData);\n                ")}return new Function("ud","uv","renderer","syncData",i)}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var i=t.uniforms,n=[];for(var o in i)n.push(o),e[o]&&n.push(e[o].type);return n.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,i=t.program,n={};for(var o in i.attributeData)n[o]=i.attributeData[o].location;var a=fi(e,i.vertexSrc,i.fragmentSrc,n),s={};for(var r in i.uniformData){var l=i.uniformData[r];s[r]={location:e.getUniformLocation(a,r),value:gi(l.type,l.size)}}var h=new on(a,s);return i.glPrograms[this.renderer.CONTEXT_UID]=h,h},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(Re);var ln=0,hn=1,cn=2,un=3,mn=4,pn=function(t){function e(e){t.call(this,e),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=A.NONE,this._blendEq=!1,this.map=[],this.map[ln]=this.setBlend,this.map[hn]=this.setOffset,this.map[cn]=this.setCullFace,this.map[un]=this.setDepthTest,this.map[mn]=this.setFrontFace,this.checks=[],this.defaultState=new Vi,this.defaultState.blend=!0,this.defaultState.depth=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[A.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.ADD]=[t.ONE,t.ONE],e[A.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.NONE]=[0,0],e[A.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[A.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[A.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[A.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[A.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[A.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[A.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[A.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[A.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[A.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[A.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var i=0;i<this.checks.length;i++)this.checks[i](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(e.polygonOffset,0)},e}(Re),dn=function(t){function e(e){t.call(this,e),this.count=0,this.checkCount=0,this.maxIdle=F.GC_MAX_IDLE,this.checkCountMax=F.GC_MAX_CHECK_COUNT,this.mode=F.GC_MODE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==R.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var o=e[n];!o.framebuffer&&this.count-o.touched>this.maxIdle&&(t.destroyTexture(o,!0),e[n]=null,i=!0)}if(i){for(var a=0,s=0;s<e.length;s++)null!==e[s]&&(e[a++]=e[s]);e.length=a}},e.prototype.unload=function(t){var e=this.renderer.textureSystem;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},e}(Re),fn=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},yn=function(t){function e(e){t.call(this,e),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Pe}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new fn(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new fn(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var o=0;o<6;o++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var a=0;a<this.boundTextures.length;a++)this.bind(null,a)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if(t){if((t=t.baseTexture||t).valid){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(var o=0;o<i.length;o++)i[o]===t&&(this.currentLocation!==o&&(e.activeTexture(e.TEXTURE0+o),this.currentLocation=o),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[t.target].texture),i[o]=null)},e.prototype.initTexture=function(t){var e=new fn(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var i=this.renderer.gl;t.type===i.FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA32F),t.type===I.HALF_FLOAT&&(e.type=i.HALF_FLOAT),e.type===i.HALF_FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e));else{var n=t.realWidth,o=t.realHeight,a=i.gl;(e.width!==n||e.height!==o||e.dirtyId<0)&&(e.width=n,e.height=o,a.texImage2D(t.target,0,e.internalFormat,n,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.baseTexture||t)._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);-1!==n&&mt(this.managedTextures,n,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==E.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=0,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=L.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===B.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===B.LINEAR){var o=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===B.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===B.LINEAR?i.LINEAR:i.NEAREST)},e}(Re),gn={FilterSystem:ai,BatchSystem:ri,ContextSystem:hi,FramebufferSystem:ci,GeometrySystem:pi,MaskSystem:Zi,ScissorSystem:$i,StencilSystem:Qi,ProjectionSystem:tn,RenderTextureSystem:nn,ShaderSystem:rn,StateSystem:pn,TextureGCSystem:dn,TextureSystem:yn},vn=new Ot,_n=function(t){function e(e,i){t.call(this),(i=Object.assign({},F.RENDER_OPTIONS,i)).roundPixels&&(F.ROUND_PIXELS=i.roundPixels,gt("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),this.options=i,this.type=w.UNKNOWN,this.screen=new Wt(0,0,i.width,i.height),this.view=i.view||document.createElement("canvas"),this.resolution=i.resolution||F.RESOLUTION,this.transparent=i.transparent,this.autoDensity=i.autoDensity||i.autoResize||!1,this.preserveDrawingBuffer=i.preserveDrawingBuffer,this.clearBeforeRender=i.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=i.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new te,this._lastObjectRendered=this._tempDisplayObjectParent,this.plugins={}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0},backgroundColor:{configurable:!0}};return e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},i.width.get=function(){return this.view.width},i.height.get=function(){return this.view.height},e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,n){0===(n=n||t.getLocalBounds()).width&&(n.width=1),0===n.height&&(n.height=1);var o=Xe.create({width:0|n.width,height:0|n.height,scaleMode:e,resolution:i});return vn.tx=-n.x,vn.ty=-n.y,this.render(t,o,!1,vn,!!t.parent),o},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=w.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoDensity=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},i.backgroundColor.get=function(){return this._backgroundColor},i.backgroundColor.set=function(t){this._backgroundColor=t,this._backgroundColorString=K(t),Z(t,this._backgroundColorRgba)},Object.defineProperties(e.prototype,i),e}(U.a),bn=function(t){function e(i){void 0===i&&(i={}),t.call(this,"WebGL",i),i=this.options,this.type=w.WEBGL,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new ge("destroy"),contextChange:new ge("contextChange",1),reset:new ge("reset"),update:new ge("update"),postrender:new ge("postrender"),prerender:new ge("prerender"),resize:new ge("resize",2)},this.globalUniforms=new ni({projectionMatrix:new Ot},!0),this.addSystem(Zi,"mask").addSystem(hi,"context").addSystem(pn,"state").addSystem(rn,"shader").addSystem(yn,"texture").addSystem(pi,"geometry").addSystem(ci,"framebuffer").addSystem($i,"scissor").addSystem(Qi,"stencil").addSystem(tn,"projection").addSystem(dn,"textureGC").addSystem(ai,"filter").addSystem(nn,"renderTexture").addSystem(ri,"batch"),this.initPlugins(e.__plugins),i.context?this.context.initFromContext(i.context):this.context.initFromOptions({alpha:this.transparent,antialias:i.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,Y(2===this.context.webGLVersion?"WebGL 2":"WebGL 1"),this.resize(this.options.width,this.options.height)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t){if(q())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var n in this[e]=i,this.runners)this.runners[n].add(i);return this},e.prototype.render=function(t,e,i,n,o){if(this.renderingToScreen=!e,this.runners.prerender.run(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(e||(this._lastObjectRendered=t),!o){var a=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.run(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.run(e,i)},e.prototype.reset=function(){return this.runners.reset.run(),this},e.prototype.clear=function(){this.framebuffer.bind(),this.framebuffer.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.run(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i},e}(_n);function xn(t){return bn.create(t)}var Sn="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",kn="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",wn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.from=function(t,i){return new e(new Ie(t,i))},e}(Pe),An=function(){this.texArray=null,this.blend=0,this.type=P.TRIANGLES,this.start=0,this.size=0,this.data=null},Pn=function(){this.elements=[],this.ids=[],this.count=0};Pn.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0};var Tn=function(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)},Cn={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};Cn.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},Cn.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},Cn.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},Cn.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},Cn.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},Tn.prototype.view=function(t){return this[t+"View"]},Tn.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Tn.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Object.defineProperties(Tn.prototype,Cn);var In=function(t){function e(e){t.call(this,e),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=Vi.for2d(),this.size=4*F.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contextChange=function(){var t=this.renderer.gl;F.PREFER_ENV===k.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),F.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Mi(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,n=this.size/4,o=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new An);for(;i.length<o;)i.push(new Pn);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,n=e._textureArrayPool,o=this.renderer.batch,a=this._tempBoundTextures,s=this.renderer.textureGC.count,r=++Pe._globalBatch,l=0,h=n[0],c=0;o.copyBoundTextures(a,i);for(var u=0;u<this._bufferSize;++u){var m=t[u];t[u]=null,m._batchEnabled!==r&&(h.count>=i&&(o.boundArray(h,a,r,i),this.buildDrawCalls(h,c,u),c=u,h=n[++l],++r),m._batchEnabled=r,m.touched=s,h.elements[h.count++]=m)}h.count>0&&(o.boundArray(h,a,r,i),this.buildDrawCalls(h,c,this._bufferSize),++l,++r);for(var p=0;p<a.length;p++)a[p]=null;Pe._globalBatch=r},e.prototype.buildDrawCalls=function(t,i,n){var o=this._bufferedElements,a=this._attributeBuffer,s=this._indexBuffer,r=this.vertexSize,l=e._drawCallPool,h=this._dcIndex,c=this._aIndex,u=this._iIndex,m=l[h];m.start=this._iIndex,m.texArray=t;for(var p=i;p<n;++p){var d=o[p],f=d._texture.baseTexture,y=tt[f.alphaMode?1:0][d.blendMode];o[p]=null,i<p&&m.blend!==y&&(m.size=u-m.start,i=p,(m=l[++h]).texArray=t,m.start=u),this.packInterleavedGeometry(d,a,s,c,u),c+=d.vertexData.length/2*r,u+=d.indices.length,m.blend=y}i<n&&(m.size=u-m.start,++h),this._dcIndex=h,this._aIndex=c,this._iIndex=u},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;F.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,n=i.gl,o=i.state,a=e._drawCallPool,s=null,r=0;r<t;r++){var l=a[r],h=l.texArray,c=l.type,u=l.size,m=l.start,p=l.blend;s!==h&&(s=h,this.bindAndClearTexArray(h)),this.state.blendMode=p,o.set(this.state),n.drawElements(c,u,n.UNSIGNED_SHORT,2*m)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),F.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=ht(Math.ceil(t/8)),i=ut(e),n=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._aBuffers[n];return o||(this._aBuffers[n]=o=new Tn(n*this.vertexSize*4)),o},e.prototype.getIndexBuffer=function(t){var e=ht(Math.ceil(t/12)),i=ut(e),n=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._iBuffers[i];return o||(this._iBuffers[i]=o=new Uint16Array(n)),o},e.prototype.packInterleavedGeometry=function(t,e,i,n,o){for(var a=e.uint32View,s=e.float32View,r=n/this.vertexSize,l=t.uvs,h=t.indices,c=t.vertexData,u=t._texture.baseTexture._batchLocation,m=Math.min(t.worldAlpha,1),p=m<1&&t._texture.baseTexture.alphaMode?nt(t._tintRGB,m):t._tintRGB+(255*m<<24),d=0;d<c.length;d+=2)s[n++]=c[d],s[n++]=c[d+1],s[n++]=l[d],s[n++]=l[d+1],a[n++]=p,s[n++]=u;for(var f=0;f<h.length;f++)i[o++]=r+h[f]},e}(si);In._drawCallPool=[],In._textureArrayPool=[];var Bn=function(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')};Bn.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=ni.from({uSamplers:e},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Fi(this.vertexSrc,n)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ot,default:this.defaultGroupCache[t]};return new Ui(this.programCache[t],o)},Bn.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"};var Ln=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this._buffer=new Je(null,e,!1),this._indexBuffer=new Je(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,I.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,I.FLOAT).addAttribute("aColor",this._buffer,4,!0,I.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,I.FLOAT).addIndex(this._indexBuffer)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Qe),En="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Mn="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Rn=function(){},Dn={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};Rn.create=function(t){var e=Object.assign({vertex:En,fragment:Mn,geometryClass:Ln,vertexSize:6},t),i=e.vertex,n=e.fragment,o=e.vertexSize,a=e.geometryClass;return function(t){function e(e){t.call(this,e),this.shaderGenerator=new Bn(i,n),this.geometryClass=a,this.vertexSize=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(In)},Dn.defaultVertexSrc.get=function(){return En},Dn.defaultFragmentTemplate.get=function(){return Mn},Object.defineProperties(Rn,Dn);var On=Rn.create(),Fn=function t(e){var i=this;e=Object.assign({forceCanvas:!1},e),this.renderer=xn(e),this.stage=new te,t._plugins.forEach(function(t){t.init.call(i,e)})},jn={view:{configurable:!0},screen:{configurable:!0}};
/*!
 * @pixi/app - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Fn.registerPlugin=function(t){Fn._plugins.push(t)},Fn.prototype.render=function(){this.renderer.render(this.stage)},jn.view.get=function(){return this.renderer.view},jn.screen.get=function(){return this.renderer.screen},Fn.prototype.destroy=function(t,e){var i=this,n=Fn._plugins.slice(0);n.reverse(),n.forEach(function(t){t.destroy.call(i)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},Object.defineProperties(Fn.prototype,jn),Fn._plugins=[];var Un=function(){};Un.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.resize),this._resizeTo=t,t&&(window.addEventListener("resize",this.resize),this.resize())},get:function(){return this._resizeTo}}),this.resize=function(){e._resizeTo&&(e._resizeTo===window?e.renderer.resize(window.innerWidth,window.innerHeight):e.renderer.resize(e._resizeTo.clientWidth,e._resizeTo.clientHeight))},this._resizeTo=null,this.resizeTo=t.resizeTo||null},Un.destroy=function(){this.resizeTo=null,this.resize=null},Fn.registerPlugin(Un);
/*!
 * @pixi/extract - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Nn=new Wt,Vn=function(t){this.renderer=t,t.extract=this};Vn.prototype.image=function(t,e,i){var n=new Image;return n.src=this.base64(t,e,i),n},Vn.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},Vn.prototype.canvas=function(t){var e,i,n,o=this.renderer,a=!1,s=!1;t&&(t instanceof Xe?n=t:(n=this.renderer.generateTexture(t),s=!0)),n?(e=n.baseTexture.resolution,i=n.frame,a=!1,o.renderTexture.bind(n)):(e=this.renderer.resolution,a=!0,(i=Nn).width=this.renderer.width,i.height=this.renderer.height,o.renderTexture.bind(null));var r=Math.floor(i.width*e+1e-4),l=Math.floor(i.height*e+1e-4),h=new kt(r,l,1),c=new Uint8Array(4*r*l),u=o.gl;u.readPixels(i.x*e,i.y*e,r,l,u.RGBA,u.UNSIGNED_BYTE,c);var m=h.context.getImageData(0,0,r,l);if(Vn.arrayPostDivide(c,m.data),h.context.putImageData(m,0,0),a){var p=new kt(h.width,h.height,1);p.context.scale(1,-1),p.context.drawImage(h.canvas,0,-l),h.destroy(),h=p}return s&&n.destroy(!0),h.canvas},Vn.prototype.pixels=function(t){var e,i,n,o=this.renderer,a=!1;t&&(t instanceof Xe?n=t:(n=this.renderer.generateTexture(t),a=!0)),n?(e=n.baseTexture.resolution,i=n.frame,o.renderTexture.bind(n)):(e=o.resolution,(i=Nn).width=o.width,i.height=o.height,o.renderTexture.bind(null));var s=i.width*e,r=i.height*e,l=new Uint8Array(4*s*r),h=o.gl;return h.readPixels(i.x*e,i.y*e,s,r,h.RGBA,h.UNSIGNED_BYTE,l),a&&n.destroy(!0),Vn.arrayPostDivide(l,l),l},Vn.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Vn.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var n=e[i+3]=t[i+3];0!==n?(e[i]=Math.round(Math.min(255*t[i]/n,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/n,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/n,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}};var Gn=i(32),Xn=i.n(Gn),zn=i(17),Hn=i.n(zn);
/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
function Wn(){}function Jn(t,e,i,n){var o=0,a=t.length;!function s(r){r||o===a?i&&i(r):n?setTimeout(function(){e(t[o++],s)},1):e(t[o++],s)}()}function Yn(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function qn(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,n={_tasks:[],concurrency:e,saturated:Wn,unsaturated:Wn,buffer:e/4,empty:Wn,drain:Wn,error:Wn,started:!1,paused:!1,push:function(t,e){o(t,!1,e)},kill:function(){i=0,n.drain=Wn,n.started=!1,n._tasks=[]},unshift:function(t,e){o(t,!0,e)},process:function(){for(;!n.paused&&i<n.concurrency&&n._tasks.length;){var e=n._tasks.shift();0===n._tasks.length&&n.empty(),(i+=1)===n.concurrency&&n.saturated(),t(e.data,Yn(a(e)))}},length:function(){return n._tasks.length},running:function(){return i},idle:function(){return n._tasks.length+i===0},pause:function(){!0!==n.paused&&(n.paused=!0)},resume:function(){if(!1!==n.paused){n.paused=!1;for(var t=1;t<=n.concurrency;t++)n.process()}}};function o(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,null==t&&n.idle())setTimeout(function(){return n.drain()},1);else{var o={data:t,callback:"function"==typeof i?i:Wn};e?n._tasks.unshift(o):n._tasks.push(o),setTimeout(function(){return n.process()},1)}}function a(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&n.error(arguments[0],t.data),i<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}}return n}var Zn={};function Kn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $n(t,e,i){return e&&Kn(t.prototype,e),i&&Kn(t,i),t}var Qn=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),to=null;function eo(){}var io=function(){function t(e,i,n){if("string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=eo,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Hn.a,this.onProgress=new Hn.a,this.onComplete=new Hn.a,this.onAfterMiddleware=new Hn.a}t.setExtensionLoadType=function(e,i){no(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){no(t._xhrTypeMap,e,i)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(i)},1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:Qn&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},e._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(oo(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(oo(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(oo(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2===(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var o=new DOMParser;this.data=o.parseFromString(i,"text/xml")}else{var a=document.createElement("div");a.innerHTML=i,this.data=a}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,to||(to=document.createElement("a")),to.href=t;var i=!(t=Xn()(to.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),o=t.indexOf("#"),a=Math.min(n>-1?n:t.length,o>-1?o:t.length);e=(t=t.substring(0,a)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},$n(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function no(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function oo(t){return t.toString().replace("object ","")}io.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},io.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},io.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},io.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},io._loadTypeMap={gif:io.LOAD_TYPE.IMAGE,png:io.LOAD_TYPE.IMAGE,bmp:io.LOAD_TYPE.IMAGE,jpg:io.LOAD_TYPE.IMAGE,jpeg:io.LOAD_TYPE.IMAGE,tif:io.LOAD_TYPE.IMAGE,tiff:io.LOAD_TYPE.IMAGE,webp:io.LOAD_TYPE.IMAGE,tga:io.LOAD_TYPE.IMAGE,svg:io.LOAD_TYPE.IMAGE,"svg+xml":io.LOAD_TYPE.IMAGE,mp3:io.LOAD_TYPE.AUDIO,ogg:io.LOAD_TYPE.AUDIO,wav:io.LOAD_TYPE.AUDIO,mp4:io.LOAD_TYPE.VIDEO,webm:io.LOAD_TYPE.VIDEO},io._xhrTypeMap={xhtml:io.XHR_RESPONSE_TYPE.DOCUMENT,html:io.XHR_RESPONSE_TYPE.DOCUMENT,htm:io.XHR_RESPONSE_TYPE.DOCUMENT,xml:io.XHR_RESPONSE_TYPE.DOCUMENT,tmx:io.XHR_RESPONSE_TYPE.DOCUMENT,svg:io.XHR_RESPONSE_TYPE.DOCUMENT,tsx:io.XHR_RESPONSE_TYPE.DOCUMENT,gif:io.XHR_RESPONSE_TYPE.BLOB,png:io.XHR_RESPONSE_TYPE.BLOB,bmp:io.XHR_RESPONSE_TYPE.BLOB,jpg:io.XHR_RESPONSE_TYPE.BLOB,jpeg:io.XHR_RESPONSE_TYPE.BLOB,tif:io.XHR_RESPONSE_TYPE.BLOB,tiff:io.XHR_RESPONSE_TYPE.BLOB,webp:io.XHR_RESPONSE_TYPE.BLOB,tga:io.XHR_RESPONSE_TYPE.BLOB,json:io.XHR_RESPONSE_TYPE.JSON,text:io.XHR_RESPONSE_TYPE.TEXT,txt:io.XHR_RESPONSE_TYPE.TEXT,ttf:io.XHR_RESPONSE_TYPE.BUFFER,otf:io.XHR_RESPONSE_TYPE.BUFFER},io.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var so=window.URL||window.webkitURL;var ro={caching:function(t,e){var i=this;Zn[t.url]?(t.data=Zn[t.url],t.complete()):t.onComplete.once(function(){return Zn[i.url]=i.data}),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===io.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=so.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=io.TYPE.IMAGE,void(t.data.onload=function(){so.revokeObjectURL(i),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],o=[0,0,0,0],a=0;a<n.length;++a)i<t.length?n[a]=255&t.charCodeAt(i++):n[a]=0;switch(o[0]=n[0]>>2,o[1]=(3&n[0])<<4|n[1]>>4,o[2]=(15&n[1])<<2|n[2]>>6,o[3]=63&n[2],i-(t.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var s=0;s<o.length;++s)e+=ao.charAt(o[s])}return e}(t.xhr.responseText),t.type=io.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},lo=/(#[\w-]+)?$/,ho=function(){function t(e,i){var n=this;void 0===e&&(e=""),void 0===i&&(i=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this._queue=qn(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new Hn.a,this.onError=new Hn.a,this.onLoad=new Hn.a,this.onStart=new Hn.a,this.onComplete=new Hn.a;for(var o=0;o<t._defaultBeforeMiddleware.length;++o)this.pre(t._defaultBeforeMiddleware[o]);for(var a=0;a<t._defaultAfterMiddleware.length;++a)this.use(t._defaultAfterMiddleware[a])}var e=t.prototype;return e.add=function(t,e,i,n){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if("object"==typeof t&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new io(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var a=i.parentResource,s=[],r=0;r<a.children.length;++r)a.children[r].isComplete||s.push(a.children[r]);var l=a.progressChunk*(s.length+1)/(s.length+2);a.children.push(this.resources[t]),a.progressChunk=l;for(var h=0;h<s.length;++h)s[h].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,i=Xn()(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=lo.exec(e)[0];-1!==(e=e.substr(0,e.length-n.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=n}return e},e._loadResource=function(t,e){var i=this;t._dequeue=e,Jn(this._beforeMiddleware,function(e,n){e.call(i,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Jn(this._afterMiddleware,function(i,n){i.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},$n(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();ho._defaultBeforeMiddleware=[],ho._defaultAfterMiddleware=[],ho.pre=function(t){return ho._defaultBeforeMiddleware.push(t),ho},ho.use=function(t){return ho._defaultAfterMiddleware.push(t),ho};
/*!
 * @pixi/loaders - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var co=function(){};co.use=function(t,e){t.data&&t.type===io.TYPE.IMAGE&&(t.texture=Ve.fromLoader(t.data,t.url,t.name)),e()};var uo=function(t){function e(i,n){var o=this;t.call(this,i,n),U.a.call(this);for(var a=0;a<e._plugins.length;++a){var s=e._plugins[a],r=s.pre,l=s.use;r&&this.pre(r),l&&this.use(l)}this.onStart.add(function(t){return o.emit("start",t)}),this.onProgress.add(function(t,e){return o.emit("progress",t,e)}),this.onError.add(function(t,e,i){return o.emit("error",t,e,i)}),this.onLoad.add(function(t,e){return o.emit("load",t,e)}),this.onComplete.add(function(t,e){return o.emit("complete",t,e)}),this._protected=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={shared:{configurable:!0}};return e.prototype.destroy=function(){this._protected||(this.removeAllListeners(),this.reset())},i.shared.get=function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},Object.defineProperties(e,i),e}(ho);Object.assign(uo.prototype,U.a.prototype),uo._plugins=[],uo.registerPlugin=function(t){return uo._plugins.push(t),t.add&&t.add(),uo},uo.registerPlugin({use:ro.parsing}),uo.registerPlugin(co);var mo=function(){};mo.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?uo.shared:new uo},mo.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};var po=io,fo=function(t){function e(e,i,n,o){void 0===e&&(e=1500),void 0===n&&(n=16384),void 0===o&&(o=!1),t.call(this);n>16384&&(n=16384),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=A.NORMAL,this.autoResize=o,this.roundPixels=!0,this.baseTexture=null,this.setProperties(i),this._tint=0,this.tintRgb=new Float32Array(4),this.tint=16777215}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={tint:{configurable:!0}};return e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},i.tint.get=function(){return this._tint},i.tint.set=function(t){this._tint=t,Z(t,this.tintRgb)},e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},Object.defineProperties(e.prototype,i),e}(te),yo=function(t,e,i){this.geometry=new Qe,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var o=t[n];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||I.FLOAT,offset:o.offset},e[n]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()};
/*!
 * @pixi/particles - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */yo.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Je(at(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Je(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var r=this.staticProperties[s];r.offset=a,a+=r.size,this.staticStride+=r.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=new Je(this.staticData,!0,!1);for(var h=0;h<this.dynamicProperties.length;++h){var c=this.dynamicProperties[h];t.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===I.UNSIGNED_BYTE,c.type,4*this.dynamicStride,4*c.offset)}for(var u=0;u<this.staticProperties.length;++u){var m=this.staticProperties[u];t.addAttribute(m.attributeName,this.staticBuffer,0,m.type===I.UNSIGNED_BYTE,m.type,4*this.staticStride,4*m.offset)}},yo.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var o=this.dynamicProperties[n];o.uploadFunction(t,e,i,o.type===I.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},yo.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var o=this.staticProperties[n];o.uploadFunction(t,e,i,o.type===I.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},yo.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()};var go="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n",vo="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",_o=function(t){function e(e){t.call(this,e),this.shader=null,this.properties=null,this.tempMatrix=new Ot,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:I.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Ui.from(go,vo,{}),this.state=Vi.for2d()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,o=this.renderer,a=e.length;if(0!==a){a>i&&!t.autoResize&&(a=i);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var r=e[0]._texture.baseTexture;this.state.blendMode=et(t.blendMode,r.alphaMode),o.state.set(this.state);var l=o.gl,h=t.worldTransform.copyTo(this.tempMatrix);h.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=it(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,r.alphaMode),this.shader.uniforms.uSampler=r,this.renderer.shader.bind(this.shader);for(var c=!1,u=0,m=0;u<a;u+=n,m+=1){var p=a-u;p>n&&(p=n),m>=s.length&&s.push(this._generateOneMoreBuffer(t));var d=s[m];d.uploadDynamic(e,u,p);var f=t._bufferUpdateIDs[m]||0;(c=c||d._updateID<f)&&(d._updateID=t._updateID,d.uploadStatic(e,u,p)),o.geometry.bind(d.geometry),l.drawElements(l.TRIANGLES,6*p,l.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,n=t._batchSize,o=t._properties,a=0;a<i;a+=n)e.push(new yo(this.properties,o,n));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new yo(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,n,o,a){for(var s=0,r=0,l=0,h=0,c=0;c<i;++c){var u=t[e+c],m=u._texture,p=u.scale.x,d=u.scale.y,f=m.trim,y=m.orig;f?(s=(r=f.x-u.anchor.x*y.width)+f.width,l=(h=f.y-u.anchor.y*y.height)+f.height):(s=y.width*(1-u.anchor.x),r=y.width*-u.anchor.x,l=y.height*(1-u.anchor.y),h=y.height*-u.anchor.y),n[a]=r*p,n[a+1]=h*d,n[a+o]=s*p,n[a+o+1]=h*d,n[a+2*o]=s*p,n[a+2*o+1]=l*d,n[a+3*o]=r*p,n[a+3*o+1]=l*d,a+=4*o}},e.prototype.uploadPosition=function(t,e,i,n,o,a){for(var s=0;s<i;s++){var r=t[e+s].position;n[a]=r.x,n[a+1]=r.y,n[a+o]=r.x,n[a+o+1]=r.y,n[a+2*o]=r.x,n[a+2*o+1]=r.y,n[a+3*o]=r.x,n[a+3*o+1]=r.y,a+=4*o}},e.prototype.uploadRotation=function(t,e,i,n,o,a){for(var s=0;s<i;s++){var r=t[e+s].rotation;n[a]=r,n[a+o]=r,n[a+2*o]=r,n[a+3*o]=r,a+=4*o}},e.prototype.uploadUvs=function(t,e,i,n,o,a){for(var s=0;s<i;++s){var r=t[e+s]._texture._uvs;r?(n[a]=r.x0,n[a+1]=r.y0,n[a+o]=r.x1,n[a+o+1]=r.y1,n[a+2*o]=r.x2,n[a+2*o+1]=r.y2,n[a+3*o]=r.x3,n[a+3*o+1]=r.y3,a+=4*o):(n[a]=0,n[a+1]=0,n[a+o]=0,n[a+o+1]=0,n[a+2*o]=0,n[a+2*o+1]=0,n[a+3*o]=0,n[a+3*o+1]=0,a+=4*o)}},e.prototype.uploadTint=function(t,e,i,n,o,a){for(var s=0;s<i;++s){var r=t[e+s],l=r._texture.baseTexture.alphaMode>0,h=r.alpha,c=h<1&&l?nt(r._tintRGB,h):r._tintRGB+(255*h<<24);n[a]=c,n[a+o]=c,n[a+2*o]=c,n[a+3*o]=c,a+=4*o}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(si),bo={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},xo=function(){this.reset()};xo.prototype.clone=function(){var t=new xo;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},xo.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ve.WHITE,this.matrix=null,this.visible=!1},xo.prototype.destroy=function(){this.texture=null,this.matrix=null};var So={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,n=t.holes,o=e.points,a=e.indices;if(i.length>=6){for(var s=[],r=0;r<n.length;r++){var l=n[r];s.push(i.length/2),i=i.concat(l.points)}var h=V()(i,s,2);if(!h)return;for(var c=o.length/2,u=0;u<h.length;u+=3)a.push(h[u]+c),a.push(h[u+1]+c),a.push(h[u+2]+c);for(var m=0;m<i.length;m++)o.push(i[m])}}},ko={build:function(t){var e,i,n=t.shape,o=t.points,a=n.x,s=n.y;if(o.length=0,t.type===Bt.CIRC?(e=n.radius,i=n.radius):(e=n.width,i=n.height),0!==e&&0!==i){var r=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height));r/=2.3;for(var l=2*Math.PI/r,h=0;h<r-.5;h++)o.push(a+Math.sin(-l*h)*e,s+Math.cos(-l*h)*i);o.push(o[0],o[1])}},triangulate:function(t,e){var i=t.points,n=e.points,o=e.indices,a=n.length/2,s=a,r=t.shape,l=t.matrix,h=r.x,c=r.y;n.push(t.matrix?l.a*h+l.c*c+l.tx:h,t.matrix?l.b*h+l.d*c+l.ty:c);for(var u=0;u<i.length;u+=2)n.push(i[u],i[u+1]),o.push(a++,s,a)}},wo={build:function(t){var e=t.shape,i=e.x,n=e.y,o=e.width,a=e.height,s=t.points;s.length=0,s.push(i,n,i+o,n,i+o,n+a,i,n+a)},triangulate:function(t,e){var i=t.points,n=e.points,o=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(o,o+1,o+2,o+1,o+2,o+3)}},Ao={build:function(t){var e=t.shape,i=t.points,n=e.x,o=e.y,a=e.width,s=e.height,r=Math.max(0,Math.min(e.radius,Math.min(a,s)/2));i.length=0,r?(To(n,o+r,n,o,n+r,o,i),To(n+a-r,o,n+a,o,n+a,o+r,i),To(n+a,o+s-r,n+a,o+s,n+a-r,o+s,i),To(n+r,o+s,n,o+s,n,o+s-r,i)):i.push(n,o,n+a,o,n+a,o+s,n,o+s)},triangulate:function(t,e){for(var i=t.points,n=e.points,o=e.indices,a=n.length/2,s=V()(i,null,2),r=0,l=s.length;r<l;r+=3)o.push(s[r]+a),o.push(s[r+1]+a),o.push(s[r+2]+a);for(var h=0,c=i.length;h<c;h++)n.push(i[h],i[++h])}};function Po(t,e,i){return t+(e-t)*i}function To(t,e,i,n,o,a,s){void 0===s&&(s=[]);for(var r=s,l=0,h=0,c=0,u=0,m=0,p=0,d=0,f=0;d<=20;++d)l=Po(t,i,f=d/20),h=Po(e,n,f),c=Po(i,o,f),u=Po(n,a,f),m=Po(l,c,f),p=Po(h,u,f),r.push(m,p);return r}function Co(t,e){t.lineStyle.native?function(t,e){var i=0,n=t.shape,o=t.points||n.points,a=n.type!==Bt.POLY||n.closeStroke;if(0===o.length)return;var s=e.points,r=e.indices,l=o.length/2,h=s.length/2,c=h;for(s.push(o[0],o[1]),i=1;i<l;i++)s.push(o[2*i],o[2*i+1]),r.push(c,c+1),c++;a&&r.push(c,h)}(t,e):function(t,e){var i=t.shape,n=t.points||i.points.slice(),o=e.closePointEps;if(0===n.length)return;var a=t.lineStyle,s=new Lt(n[0],n[1]),r=new Lt(n[n.length-2],n[n.length-1]),l=i.type!==Bt.POLY||i.closeStroke,h=Math.abs(s.x-r.x)<o&&Math.abs(s.y-r.y)<o;if(l){n=n.slice(),h&&(n.pop(),n.pop(),r.set(n[n.length-2],n[n.length-1]));var c=r.x+.5*(s.x-r.x),u=r.y+.5*(s.y-r.y);n.unshift(c,u),n.push(c,u)}var m=e.points,p=n.length/2,d=n.length,f=m.length/2,y=a.width/2,g=n[0],v=n[1],_=n[2],b=n[3],x=0,S=0,k=-(v-b),w=g-_,A=0,P=0,T=0,C=0,I=Math.sqrt(k*k+w*w);k/=I,w/=I,k*=y,w*=y;var B=a.alignment,L=2*(1-B),E=2*B;m.push(g-k*L,v-w*L),m.push(g+k*E,v+w*E);for(var M=1;M<p-1;++M){g=n[2*(M-1)],v=n[2*(M-1)+1],_=n[2*M],b=n[2*M+1],x=n[2*(M+1)],S=n[2*(M+1)+1],k=-(v-b),w=g-_,I=Math.sqrt(k*k+w*w),k/=I,w/=I,k*=y,w*=y,A=-(b-S),P=_-x,I=Math.sqrt(A*A+P*P),A/=I,P/=I;var R=-w+v-(-w+b),D=-k+_-(-k+g),O=(-k+g)*(-w+b)-(-k+_)*(-w+v),F=-(P*=y)+S-(-P+b),j=-(A*=y)+_-(-A+x),U=(-A+x)*(-P+b)-(-A+_)*(-P+S),N=R*j-F*D;if(Math.abs(N)<.1)N+=10.1,m.push(_-k*L,b-w*L),m.push(_+k*E,b+w*E);else{var V=(D*U-j*O)/N,G=(F*O-R*U)/N,X=(V-_)*(V-_)+(G-b)*(G-b);X>196*y*y?(T=k-A,C=w-P,I=Math.sqrt(T*T+C*C),T/=I,C/=I,T*=y,C*=y,m.push(_-T*L,b-C*L),m.push(_+T*E,b+C*E),m.push(_-T*E*L,b-C*L),d++):(m.push(_+(V-_)*L,b+(G-b)*L),m.push(_-(V-_)*E,b-(G-b)*E))}}g=n[2*(p-2)],v=n[2*(p-2)+1],_=n[2*(p-1)],b=n[2*(p-1)+1],k=-(v-b),w=g-_,I=Math.sqrt(k*k+w*w),k/=I,w/=I,k*=y,w*=y,m.push(_-k*L,b-w*L),m.push(_+k*E,b+w*E);for(var z=e.indices,H=0;H<d-2;++H)z.push(f,f+1,f+2),f++}(t,e)}var Io=function(t){function e(e,i,n,o,a,s){a=a||o/2;for(var r=-1*Math.PI/2+s,l=2*n,h=Mt/l,c=[],u=0;u<l;u++){var m=u%2?a:o,p=u*h+r;c.push(e+m*Math.cos(p),i+m*Math.sin(p))}t.call(this,c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(qt),Bo=function(){};Bo.curveTo=function(t,e,i,n,o,a){var s=a[a.length-2],r=a[a.length-1]-e,l=s-t,h=n-e,c=i-t,u=Math.abs(r*c-l*h);if(u<1e-8||0===o)return a[a.length-2]===t&&a[a.length-1]===e||a.push(t,e),null;var m=r*r+l*l,p=h*h+c*c,d=r*h+l*c,f=o*Math.sqrt(m)/u,y=o*Math.sqrt(p)/u,g=f*d/m,v=y*d/p,_=f*c+y*l,b=f*h+y*r,x=l*(y+g),S=r*(y+g),k=c*(f+v),w=h*(f+v);return{cx:_+t,cy:b+e,radius:o,startAngle:Math.atan2(S-b,x-_),endAngle:Math.atan2(w-b,k-_),anticlockwise:l*h>c*r}},Bo.arc=function(t,e,i,n,o,a,s,r,l){for(var h=s-a,c=bo._segmentsCount(Math.abs(h)*o,40*Math.ceil(Math.abs(h)/Mt)),u=h/(2*c),m=2*u,p=Math.cos(u),d=Math.sin(u),f=c-1,y=f%1/f,g=0;g<=f;++g){var v=u+a+m*(g+y*g),_=Math.cos(v),b=-Math.sin(v);l.push((p*_+d*b)*o+i,(p*-b+d*_)*o+n)}};var Lo=function(){};Lo.curveLength=function(t,e,i,n,o,a,s,r){for(var l=0,h=0,c=0,u=0,m=0,p=0,d=0,f=0,y=0,g=0,v=0,_=t,b=e,x=1;x<=10;++x)g=_-(f=(d=(p=(m=1-(h=x/10))*m)*m)*t+3*p*h*i+3*m*(c=h*h)*o+(u=c*h)*s),v=b-(y=d*e+3*p*h*n+3*m*c*a+u*r),_=f,b=y,l+=Math.sqrt(g*g+v*v);return l},Lo.curveTo=function(t,e,i,n,o,a,s){var r=s[s.length-2],l=s[s.length-1];s.length-=2;var h=bo._segmentsCount(Lo.curveLength(r,l,t,e,i,n,o,a)),c=0,u=0,m=0,p=0,d=0;s.push(r,l);for(var f=1,y=0;f<=h;++f)m=(u=(c=1-(y=f/h))*c)*c,d=(p=y*y)*y,s.push(m*r+3*u*y*t+3*c*p*i+d*o,m*l+3*u*y*e+3*c*p*n+d*a)};var Eo=function(){};Eo.curveLength=function(t,e,i,n,o,a){var s=t-2*i+o,r=e-2*n+a,l=2*i-2*t,h=2*n-2*e,c=4*(s*s+r*r),u=4*(s*l+r*h),m=l*l+h*h,p=2*Math.sqrt(c+u+m),d=Math.sqrt(c),f=2*c*d,y=2*Math.sqrt(m),g=u/d;return(f*p+d*u*(p-y)+(4*m*c-u*u)*Math.log((2*d+g+p)/(g+y)))/(4*f)},Eo.curveTo=function(t,e,i,n,o){for(var a=o[o.length-2],s=o[o.length-1],r=bo._segmentsCount(Eo.curveLength(a,s,t,e,i,n)),l=0,h=0,c=1;c<=r;++c){var u=c/r;l=a+(t-a)*u,h=s+(e-s)*u,o.push(l+(t+(i-t)*u-l)*u,h+(e+(n-e)*u-h)*u)}};var Mo=function(){this.reset()};Mo.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},Mo.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},Mo.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0};var Ro={};Ro[Bt.POLY]=So,Ro[Bt.CIRC]=ko,Ro[Bt.ELIP]=ko,Ro[Bt.RECT]=wo,Ro[Bt.RREC]=Ao;var Do=[],Oo=[],Fo={buildPoly:So,buildCircle:ko,buildRectangle:wo,buildRoundedRectangle:Ao,FILL_COMMANDS:Ro,BATCH_POOL:Do,DRAW_CALL_POOL:Oo,buildLine:Co,buildComplexPoly:function(t,e){var i=t.points.slice();if(!(i.length<6)){var n=e.indices;e.points=i,e.alpha=t.fillAlpha,e.color=Z(t.fillColor);for(var o=1/0,a=-1/0,s=1/0,r=-1/0,l=0,h=0,c=0;c<i.length;c+=2)o=(l=i[c])<o?l:o,a=l>a?l:a,s=(h=i[c+1])<s?h:s,r=h>r?h:r;i.push(o,s,a,s,a,r,o,r);for(var u=i.length/2,m=0;m<u;m++)n.push(m)}},bezierCurveTo:function(t,e,i,n,o,a,s,r,l,h){void 0===h&&(h=[]);var c=0,u=0,m=0,p=0,d=0;h.push(t,e);for(var f=1,y=0;f<=l;++f)m=(u=(c=1-(y=f/l))*c)*c,d=(p=y*y)*y,h.push(m*t+3*u*y*i+3*c*p*o+d*s,m*e+3*u*y*n+3*c*p*a+d*r);return h},Star:Io,ArcUtils:Bo,BezierUtils:Lo,QuadraticUtils:Eo,BatchPart:Mo},jo=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type,this.points=[],this.holes=[]};jo.prototype.clone=function(){return new jo(this.shape,this.fillStyle,this.lineStyle,this.matrix)},jo.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null};var Uo=new Lt,No=new Kt,Vo=function(t){function e(){t.call(this),this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeIndex=0,this._bounds=new Kt,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.uvsFloat32=null,this.closePointEps=1e-4}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={bounds:{configurable:!0}};return i.bounds.get=function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].textures.length=0,Oo.push(this.drawCalls[t]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var i=this.batches[e];i.reset(),Do.push(i)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,n){var o=new jo(t,e,i,n);return this.graphicsData.push(o),this.dirty++,this},e.prototype.drawHole=function(t,e){if(!this.graphicsData.length)return null;var i=new jo(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(t,Uo):Uo.copyFrom(t),n.shape.contains(Uo.x,Uo.y)))){var o=!1;if(n.holes)for(var a=0;a<n.holes.length;a++){if(n.holes[a].shape.contains(Uo.x,Uo.y)){o=!0;break}}if(!o)return!0}}return!1},e.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,e=this.graphicsData,i=null,n=null;this.batches.length>0&&(n=(i=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<e.length;o++){this.shapeIndex++;var a=e[o],s=a.fillStyle,r=a.lineStyle;Ro[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix);for(var l=0;l<2;l++){var h=0===l?s:r;if(h.visible){var c=h.texture.baseTexture,u=this.indices.length,m=this.points.length/2;c.wrapMode=L.REPEAT,0===l?this.processFill(a):this.processLine(a);var p=this.points.length/2-m;0!==p&&(i&&!this._compareStyles(n,h)&&(i.end(u,m),i=null),i||((i=Do.pop()||new Mo).begin(h,u,m),this.batches.push(i),n=h),this.addUvs(this.points,t,h.texture,m,p,h.matrix))}}}if(i){var d=this.indices.length,f=this.points.length/2;i.end(d,f)}0!==this.batches.length?(this.indicesUint16=new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()):this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],n=i.fillStyle,o=i.lineStyle;if(n&&!n.texture.baseTexture.valid)return!1;if(o&&!o.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var n=t[e],o=0;o<n.size;o++){var a=n.start+o;this.indicesUint16[a]=this.indicesUint16[a]-n.attribStart}},e.prototype.isBatchable=function(){for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++Pe._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].textures.length=0,Oo.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,n=this.textureIds,o=Oo.pop();o||((o=new An).textures=new Pn),o.textures.count=0,o.start=0,o.size=0,o.type=P.TRIANGLES;var a=0,s=null,r=0,l=!1,h=P.TRIANGLES,c=0;this.drawCalls.push(o);for(var u=0;u<this.batches.length;u++){var m=this.batches[u],p=m.style,d=p.texture.baseTexture;l!==!!p.native&&(h=(l=!!p.native)?P.LINES:P.TRIANGLES,s=null,a=8,t++),s!==d&&(s=d,d._batchEnabled!==t&&(8===a&&(t++,a=0,o.size>0&&((o=Oo.pop())||((o=new An).textures=new Pn),this.drawCalls.push(o)),o.start=c,o.size=0,o.textures.count=0,o.type=h),d.touched=1,d._batchEnabled=t,d._batchLocation=a,d.wrapMode=10497,o.textures.elements[o.textures.count++]=d,a++)),o.size+=m.size,c+=m.size,r=d._batchLocation,this.addColors(i,p.color,p.alpha,m.attribSize),this.addTextureIds(n,r,m.attribSize)}Pe._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,n=this.textureIds,o=new ArrayBuffer(3*t.length*4),a=new Float32Array(o),s=new Uint32Array(o),r=0,l=0;l<t.length/2;l++)a[r++]=t[2*l],a[r++]=t[2*l+1],a[r++]=e[2*l],a[r++]=e[2*l+1],s[r++]=i[l],a[r++]=n[l];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),So.triangulate(t,this)):Ro[t.type].triangulate(t,this)},e.prototype.processLine=function(t){Co(t,this);for(var e=0;e<t.holes.length;e++)Co(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];Ro[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=No,i=Ot.IDENTITY;this._bounds.clear(),e.clear();for(var n=0;n<this.graphicsData.length;n++){var o=this.graphicsData[n],a=o.shape,s=o.type,r=o.lineStyle,l=o.matrix||Ot.IDENTITY,h=0;if(r&&r.visible){var c=r.alignment;h=r.width,s===Bt.POLY?h*=.5+Math.abs(.5-c):h*=Math.max(0,c)}i!==l&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=l),s===Bt.RECT||s===Bt.RREC?e.addFramePad(a.x,a.y,a.x+a.width,a.y+a.height,h,h):s===Bt.CIRC?e.addFramePad(a.x,a.y,a.x,a.y,a.radius+h,a.radius+h):s===Bt.ELIP?e.addFramePad(a.x,a.y,a.x,a.y,a.width+h,a.height+h):t.addVerticesMatrix(i,a.points,0,a.points.length,h,h)}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var n=t[2*i],o=t[2*i+1];t[2*i]=e.a*n+e.c*o+e.tx,t[2*i+1]=e.b*n+e.d*o+e.ty}},e.prototype.addColors=function(t,e,i,n){for(var o=nt((e>>16)+(65280&e)+((255&e)<<16),i);n-- >0;)t.push(o)},e.prototype.addTextureIds=function(t,e,i){for(;i-- >0;)t.push(e)},e.prototype.addUvs=function(t,e,i,n,o,a){for(var s=0,r=e.length,l=i.frame;s<o;){var h=t[2*(n+s)],c=t[2*(n+s)+1];if(a){var u=a.a*h+a.c*c+a.tx;c=a.b*h+a.d*c+a.ty,h=u}s++,e.push(h/l.width,c/l.height)}var m=i.baseTexture;(l.width<m.width||l.height<m.height)&&this.adjustUvs(e,i,r,o)},e.prototype.adjustUvs=function(t,e,i,n){for(var o=e.baseTexture,a=i+2*n,s=e.frame,r=s.width/o.width,l=s.height/o.height,h=s.x/s.width,c=s.y/s.height,u=Math.floor(t[i]+1e-6),m=Math.floor(t[i+1]+1e-6),p=i+2;p<a;p+=2)u=Math.min(u,Math.floor(t[p]+1e-6)),m=Math.min(m,Math.floor(t[p+1]+1e-6));h-=u,c-=m;for(var d=i;d<a;d+=2)t[d]=(t[d]+h)*r,t[d+1]=(t[d+1]+c)*l},Object.defineProperties(e.prototype,i),e}(Ln);Vo.BATCHABLE_SIZE=100;var Go=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.width=0,this.alignment=.5,this.native=!1},e}(xo),Xo=new Float32Array(3),zo={},Ho=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.geometry=e||new Vo,this.geometry.refCount++,this.shader=null,this.state=Vi.for2d(),this._fillStyle=new xo,this._lineStyle=new Go,this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.vertexData=null,this._transformID=-1,this.batchDirty=-1,this.pluginName="batch",this.tint=16777215,this.blendMode=A.NORMAL}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blendMode:{configurable:!0},tint:{configurable:!0},fill:{configurable:!0},line:{configurable:!0}};return e.prototype.clone=function(){return this.finishPoly(),new e(this.geometry)},i.blendMode.set=function(t){this.state.blendMode=t},i.blendMode.get=function(){return this.state.blendMode},i.tint.get=function(){return this._tint},i.tint.set=function(t){this._tint=t},i.fill.get=function(){return this._fillStyle},i.line.get=function(){return this._lineStyle},e.prototype.lineStyle=function(t){if("number"==typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){if("number"==typeof t){gt("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments[0],i=arguments[1],n=arguments[2],o=arguments[3],a=arguments[4],s=arguments[5],r=arguments[6];t={width:e,texture:i,color:n,alpha:o,matrix:a,alignment:s,native:r},Object.keys(t).forEach(function(e){return void 0===t[e]&&delete t[e]})}t=Object.assign({width:0,texture:Ve.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1},t),this.currentPath&&this.startPoly();var l=t.width>0&&t.alpha>0;return l?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:l},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new qt,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new qt,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,n=i[i.length-2],o=i[i.length-1];return n===t&&o===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,n){this._initCurve();var o=this.currentPath.points;return 0===o.length&&this.moveTo(0,0),Eo.curveTo(t,e,i,n,o),this},e.prototype.bezierCurveTo=function(t,e,i,n,o,a){return this._initCurve(),Lo.curveTo(t,e,i,n,o,a,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,n,o){this._initCurve(t,e);var a=this.currentPath.points,s=Bo.curveTo(t,e,i,n,o,a);if(s){var r=s.cx,l=s.cy,h=s.radius,c=s.startAngle,u=s.endAngle,m=s.anticlockwise;this.arc(r,l,h,c,u,m)}return this},e.prototype.arc=function(t,e,i,n,o,a){if(void 0===a&&(a=!1),n===o)return this;if(!a&&o<=n?o+=Mt:a&&n<=o&&(n+=Mt),0===o-n)return this;var s=t+Math.cos(n)*i,r=e+Math.sin(n)*i,l=this.geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var c=Math.abs(h[h.length-2]-s),u=Math.abs(h[h.length-1]-r);c<l&&u<l||h.push(s,r)}else this.moveTo(s,r),h=this.currentPath.points;return Bo.arc(s,r,t,e,i,n,o,a,h),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:Ve.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){if(t instanceof Ve){gt("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments[0],i=arguments[1],n=arguments[2],o=arguments[3];t={texture:e,color:i,alpha:n,matrix:o},Object.keys(t).forEach(function(e){return void 0===t[e]&&delete t[e]})}t=Object.assign({texture:Ve.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var a=t.alpha>0;return a?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:a},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new Wt(t,e,i,n))},e.prototype.drawRoundedRect=function(t,e,i,n,o){return this.drawShape(new Zt(t,e,i,n,o))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new Jt(t,e,i))},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new Yt(t,e,i,n))},e.prototype.drawPolygon=function(t){var e=arguments,i=t,n=!0;if(i.points&&(n=i.closeStroke,i=i.points),!Array.isArray(i)){i=new Array(arguments.length);for(var o=0;o<i.length;++o)i[o]=e[o]}var a=new qt(i);return a.closeStroke=n,this.drawShape(a),this},e.prototype.drawShape=function(t){return this._holeMode?this.geometry.drawHole(t,this._matrix):this.geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,e,i,n,o,a){return void 0===a&&(a=0),this.drawPolygon(new Io(t,e,i,n,o,a))},e.prototype.clear=function(){return this.geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){return 1===this.geometry.graphicsData.length&&this.geometry.graphicsData[0].shape.type===Bt.RECT&&!this.geometry.graphicsData[0].lineWidth},e.prototype._render=function(t){this.finishPoly();var e=this.geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this.geometry,e=this.blendMode;this.batches=[],this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.vertexData=new Float32Array(t.points);for(var i=0,n=t.batches.length;i<n;i++){var o=t.batches[i],a=o.style.color,s=new Float32Array(this.vertexData.buffer,4*o.attribStart*2,2*o.attribSize),r=new Float32Array(t.uvsFloat32.buffer,4*o.attribStart*2,2*o.attribSize),l={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*o.start,o.size),uvs:r,_batchRGB:Z(a),_tintRGB:a,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[i]=l}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this.geometry,n=this.tint,o=this.worldAlpha,a=e.uniforms,s=i.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(n>>16&255)/255*o,a.tint[1]=(n>>8&255)/255*o,a.tint[2]=(255&n)/255*o,a.tint[3]=o,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var r=0,l=s.length;r<l;r++)this._renderDrawCallDirect(t,i.drawCalls[r])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.textures,n=e.type,o=e.size,a=e.start,s=i.count,r=0;r<s;r++)t.texture.bind(i.elements[r],r);t.geometry.draw(n,o,a)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!zo[i]){for(var n=new Int32Array(16),o=0;o<16;o++)n[o]=o;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ot,default:ni.from({uSamplers:n},!0)},s=t.plugins[i]._shader.program;zo[i]=new Ui(s,a)}e=zo[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this.geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,n=e.minY,o=e.maxX,a=e.maxY;this._bounds.addFrame(this.transform,i,n,o,a)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this.geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Z(this.tint,Xo),e=0;e<this.batches.length;e++){var i=this.batches[e],n=i._batchRGB,o=(t[0]*n[0]*255<<16)+(t[1]*n[1]*255<<8)+(0|t[2]*n[2]*255);i._tintRGB=(o>>16)+(65280&o)+((255&o)<<16)}}},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID;for(var t=this.transform.worldTransform,e=t.a,i=t.b,n=t.c,o=t.d,a=t.tx,s=t.ty,r=this.geometry.points,l=this.vertexData,h=0,c=0;c<r.length;c+=2){var u=r[c],m=r[c+1];l[h++]=e*u+n*m+a,l[h++]=o*m+i*u+s}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this.geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},Object.defineProperties(e.prototype,i),e}(te);Ho._TEMP_POINT=new Lt;
/*!
 * @pixi/sprite - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Wo=new Lt,Jo=new Uint16Array([0,1,2,0,2,3]),Yo=function(t){function e(e){t.call(this),this._anchor=new Et(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=A.NORMAL,this.shader=null,this._cachedTint=16777215,this.uvs=null,this.texture=e||Ve.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=Jo,this.pluginName="batch",this.isSprite=!0,this._roundPixels=F.ROUND_PIXELS}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={roundPixels:{configurable:!0},width:{configurable:!0},height:{configurable:!0},anchor:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=pt(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=pt(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,n=e.b,o=e.c,a=e.d,s=e.tx,r=e.ty,l=this.vertexData,h=t.trim,c=t.orig,u=this._anchor,m=0,p=0,d=0,f=0;if(h?(m=(p=h.x-u._x*c.width)+h.width,d=(f=h.y-u._y*c.height)+h.height):(m=(p=-u._x*c.width)+c.width,d=(f=-u._y*c.height)+c.height),l[0]=i*p+o*f+s,l[1]=a*f+n*p+r,l[2]=i*m+o*f+s,l[3]=a*f+n*m+r,l[4]=i*m+o*d+s,l[5]=a*d+n*m+r,l[6]=i*p+o*d+s,l[7]=a*d+n*p+r,this._roundPixels)for(var y=F.RESOLUTION,g=0;g<l.length;++g)l[g]=Math.round((l[g]*y|0)/y)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,o=this.transform.worldTransform,a=o.a,s=o.b,r=o.c,l=o.d,h=o.tx,c=o.ty,u=-n._x*i.width,m=u+i.width,p=-n._y*i.height,d=p+i.height;e[0]=a*u+r*p+h,e[1]=l*p+s*u+c,e[2]=a*m+r*p+h,e[3]=l*p+s*m+c,e[4]=a*m+r*d+h,e[5]=l*d+s*m+c,e[6]=a*u+r*d+h,e[7]=l*d+s*u+c},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Wt),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Wo);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,o=0;return Wo.x>=n&&Wo.x<n+e&&(o=-i*this.anchor.y,Wo.y>=o&&Wo.y<o+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t,i){return new e(t instanceof Ve?t:Ve.from(t,i))},i.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},i.roundPixels.get=function(){return this._roundPixels},i.width.get=function(){return Math.abs(this.scale.x)*this._texture.orig.width},i.width.set=function(t){var e=pt(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},i.height.get=function(){return Math.abs(this.scale.y)*this._texture.orig.height},i.height.set=function(t){var e=pt(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},i.anchor.get=function(){return this._anchor},i.anchor.set=function(t){this._anchor.copyFrom(t)},i.tint.get=function(){return this._tint},i.tint.set=function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},i.texture.get=function(){return this._texture},i.texture.set=function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Ve.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},Object.defineProperties(e.prototype,i),e}(te),qo={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},Zo={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:qo.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Ko=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],$o=function(t){this.styleID=0,this.reset(),ia(this,t,t)},Qo={align:{configurable:!0},breakWords:{configurable:!0},dropShadow:{configurable:!0},dropShadowAlpha:{configurable:!0},dropShadowAngle:{configurable:!0},dropShadowBlur:{configurable:!0},dropShadowColor:{configurable:!0},dropShadowDistance:{configurable:!0},fill:{configurable:!0},fillGradientType:{configurable:!0},fillGradientStops:{configurable:!0},fontFamily:{configurable:!0},fontSize:{configurable:!0},fontStyle:{configurable:!0},fontVariant:{configurable:!0},fontWeight:{configurable:!0},letterSpacing:{configurable:!0},lineHeight:{configurable:!0},leading:{configurable:!0},lineJoin:{configurable:!0},miterLimit:{configurable:!0},padding:{configurable:!0},stroke:{configurable:!0},strokeThickness:{configurable:!0},textBaseline:{configurable:!0},trim:{configurable:!0},whiteSpace:{configurable:!0},wordWrap:{configurable:!0},wordWrapWidth:{configurable:!0}};function ta(t){return"number"==typeof t?K(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function ea(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=ta(t[e]);return t}return ta(t)}function ia(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}$o.prototype.clone=function(){var t={};return ia(t,this,Zo),new $o(t)},$o.prototype.reset=function(){ia(this,Zo,Zo)},Qo.align.get=function(){return this._align},Qo.align.set=function(t){this._align!==t&&(this._align=t,this.styleID++)},Qo.breakWords.get=function(){return this._breakWords},Qo.breakWords.set=function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},Qo.dropShadow.get=function(){return this._dropShadow},Qo.dropShadow.set=function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},Qo.dropShadowAlpha.get=function(){return this._dropShadowAlpha},Qo.dropShadowAlpha.set=function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},Qo.dropShadowAngle.get=function(){return this._dropShadowAngle},Qo.dropShadowAngle.set=function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},Qo.dropShadowBlur.get=function(){return this._dropShadowBlur},Qo.dropShadowBlur.set=function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},Qo.dropShadowColor.get=function(){return this._dropShadowColor},Qo.dropShadowColor.set=function(t){var e=ea(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},Qo.dropShadowDistance.get=function(){return this._dropShadowDistance},Qo.dropShadowDistance.set=function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},Qo.fill.get=function(){return this._fill},Qo.fill.set=function(t){var e=ea(t);this._fill!==e&&(this._fill=e,this.styleID++)},Qo.fillGradientType.get=function(){return this._fillGradientType},Qo.fillGradientType.set=function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},Qo.fillGradientStops.get=function(){return this._fillGradientStops},Qo.fillGradientStops.set=function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},Qo.fontFamily.get=function(){return this._fontFamily},Qo.fontFamily.set=function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},Qo.fontSize.get=function(){return this._fontSize},Qo.fontSize.set=function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},Qo.fontStyle.get=function(){return this._fontStyle},Qo.fontStyle.set=function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},Qo.fontVariant.get=function(){return this._fontVariant},Qo.fontVariant.set=function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},Qo.fontWeight.get=function(){return this._fontWeight},Qo.fontWeight.set=function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},Qo.letterSpacing.get=function(){return this._letterSpacing},Qo.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},Qo.lineHeight.get=function(){return this._lineHeight},Qo.lineHeight.set=function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},Qo.leading.get=function(){return this._leading},Qo.leading.set=function(t){this._leading!==t&&(this._leading=t,this.styleID++)},Qo.lineJoin.get=function(){return this._lineJoin},Qo.lineJoin.set=function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},Qo.miterLimit.get=function(){return this._miterLimit},Qo.miterLimit.set=function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},Qo.padding.get=function(){return this._padding},Qo.padding.set=function(t){this._padding!==t&&(this._padding=t,this.styleID++)},Qo.stroke.get=function(){return this._stroke},Qo.stroke.set=function(t){var e=ea(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},Qo.strokeThickness.get=function(){return this._strokeThickness},Qo.strokeThickness.set=function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},Qo.textBaseline.get=function(){return this._textBaseline},Qo.textBaseline.set=function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},Qo.trim.get=function(){return this._trim},Qo.trim.set=function(t){this._trim!==t&&(this._trim=t,this.styleID++)},Qo.whiteSpace.get=function(){return this._whiteSpace},Qo.whiteSpace.set=function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},Qo.wordWrap.get=function(){return this._wordWrap},Qo.wordWrap.set=function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},Qo.wordWrapWidth.get=function(){return this._wordWrapWidth},Qo.wordWrapWidth.set=function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},$o.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&Ko.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},Object.defineProperties($o.prototype,Qo);var na=function(t,e,i,n,o,a,s,r,l){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=o,this.lineWidths=a,this.lineHeight=s,this.maxLineWidth=r,this.fontProperties=l};na.measureText=function(t,e,i,n){void 0===n&&(n=na._canvas),i=null==i?e.wordWrap:i;var o=e.toFontString(),a=na.measureFont(o);0===a.fontSize&&(a.fontSize=e.fontSize,a.ascent=e.fontSize);var s=n.getContext("2d");s.font=o;for(var r=(i?na.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),l=new Array(r.length),h=0,c=0;c<r.length;c++){var u=s.measureText(r[c]).width+(r[c].length-1)*e.letterSpacing;l[c]=u,h=Math.max(h,u)}var m=h+e.strokeThickness;e.dropShadow&&(m+=e.dropShadowDistance);var p=e.lineHeight||a.fontSize+e.strokeThickness,d=Math.max(p,a.fontSize+e.strokeThickness)+(r.length-1)*(p+e.leading);return e.dropShadow&&(d+=e.dropShadowDistance),new na(t,e,m,d,r,l,p+e.leading,h,a)},na.wordWrap=function(t,e,i){void 0===i&&(i=na._canvas);for(var n=i.getContext("2d"),o=0,a="",s="",r={},l=e.letterSpacing,h=e.whiteSpace,c=na.collapseSpaces(h),u=na.collapseNewlines(h),m=!c,p=e.wordWrapWidth+l,d=na.tokenize(t),f=0;f<d.length;f++){var y=d[f];if(na.isNewline(y)){if(!u){s+=na.addLine(a),m=!c,a="",o=0;continue}y=" "}if(c){var g=na.isBreakingSpace(y),v=na.isBreakingSpace(a[a.length-1]);if(g&&v)continue}var _=na.getFromCache(y,l,r,n);if(_>p)if(""!==a&&(s+=na.addLine(a),a="",o=0),na.canBreakWords(y,e.breakWords))for(var b=na.wordWrapSplit(y),x=0;x<b.length;x++){for(var S=b[x],k=1;b[x+k];){var w=b[x+k],A=S[S.length-1];if(na.canBreakChars(A,w,y,x,e.breakWords))break;S+=w,k++}x+=S.length-1;var P=na.getFromCache(S,l,r,n);P+o>p&&(s+=na.addLine(a),m=!1,a="",o=0),a+=S,o+=P}else{a.length>0&&(s+=na.addLine(a),a="",o=0);var T=f===d.length-1;s+=na.addLine(y,!T),m=!1,a="",o=0}else _+o>p&&(m=!1,s+=na.addLine(a),a="",o=0),(a.length>0||!na.isBreakingSpace(y)||m)&&(a+=y,o+=_)}return s+=na.addLine(a,!1)},na.addLine=function(t,e){return void 0===e&&(e=!0),t=na.trimRight(t),t=e?t+"\n":t},na.getFromCache=function(t,e,i,n){var o=i[t];if(void 0===o){var a=t.length*e;o=n.measureText(t).width+a,i[t]=o}return o},na.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},na.collapseNewlines=function(t){return"normal"===t},na.trimRight=function(t){if("string"!=typeof t)return"";for(var e=t.length-1;e>=0;e--){var i=t[e];if(!na.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},na.isNewline=function(t){return"string"==typeof t&&na._newlines.indexOf(t.charCodeAt(0))>=0},na.isBreakingSpace=function(t){return"string"==typeof t&&na._breakingSpaces.indexOf(t.charCodeAt(0))>=0},na.tokenize=function(t){var e=[],i="";if("string"!=typeof t)return e;for(var n=0;n<t.length;n++){var o=t[n];na.isBreakingSpace(o)||na.isNewline(o)?(""!==i&&(e.push(i),i=""),e.push(o)):i+=o}return""!==i&&e.push(i),e},na.canBreakWords=function(t,e){return e},na.canBreakChars=function(t,e,i,n,o){return!0},na.wordWrapSplit=function(t){return t.split("")},na.measureFont=function(t){if(na._fonts[t])return na._fonts[t];var e={},i=na._canvas,n=na._context;n.font=t;var o=na.METRICS_STRING+na.BASELINE_SYMBOL,a=Math.ceil(n.measureText(o).width),s=Math.ceil(n.measureText(na.BASELINE_SYMBOL).width),r=2*s;s=s*na.BASELINE_MULTIPLIER|0,i.width=a,i.height=r,n.fillStyle="#f00",n.fillRect(0,0,a,r),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(o,0,s);var l=n.getImageData(0,0,a,r).data,h=l.length,c=4*a,u=0,m=0,p=!1;for(u=0;u<s;++u){for(var d=0;d<c;d+=4)if(255!==l[m+d]){p=!0;break}if(p)break;m+=c}for(e.ascent=s-u,m=h-c,p=!1,u=r;u>s;--u){for(var f=0;f<c;f+=4)if(255!==l[m+f]){p=!0;break}if(p)break;m-=c}return e.descent=u-s,e.fontSize=e.ascent+e.descent,na._fonts[t]=e,e},na.clearMetrics=function(t){void 0===t&&(t=""),t?delete na._fonts[t]:na._fonts={}};var oa=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();oa.width=oa.height=10,na._canvas=oa,na._context=oa.getContext("2d"),na._fonts={},na.METRICS_STRING="|ÉqÅ",na.BASELINE_SYMBOL="M",na.BASELINE_MULTIPLIER=1.4,na._newlines=[10,13],na._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var aa={texture:!0,children:!1,baseTexture:!0},sa=function(t){function e(e,i,n){var o=!1;n||(n=document.createElement("canvas"),o=!0),n.width=3,n.height=3;var a=Ve.from(n);a.orig=new Wt,a.trim=new Wt,t.call(this,a),this._ownCanvas=o,this.canvas=n,this.context=this.canvas.getContext("2d"),this._resolution=F.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=i,this.localStyleID=-1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={width:{configurable:!0},height:{configurable:!0},style:{configurable:!0},text:{configurable:!0},resolution:{configurable:!0}};return e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i,n,o=this.context,a=na.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=a.width,r=a.height,l=a.lines,h=a.lineHeight,c=a.lineWidths,u=a.maxLineWidth,m=a.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,r)+2*e.padding)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=e.strokeThickness,o.textBaseline=e.textBaseline,o.lineJoin=e.lineJoin,o.miterLimit=e.miterLimit;for(var p=e.dropShadow?2:1,d=0;d<p;++d){var f=e.dropShadow&&0===d,y=f?2*r:0,g=y*this.resolution;if(f){o.fillStyle="black",o.strokeStyle="black";var v=e.dropShadowColor,_=Z("number"==typeof v?v:$(v));o.shadowColor="rgba("+255*_[0]+","+255*_[1]+","+255*_[2]+","+e.dropShadowAlpha+")",o.shadowBlur=e.dropShadowBlur,o.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,o.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+g}else o.fillStyle=this._generateFillStyle(e,l,a),o.strokeStyle=e.stroke,o.shadowColor=0,o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;for(var b=0;b<l.length;b++)i=e.strokeThickness/2,n=e.strokeThickness/2+b*h+m.ascent,"right"===e.align?i+=u-c[b]:"center"===e.align&&(i+=(u-c[b])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(l[b],i+e.padding,n+e.padding-y,!0),e.fill&&this.drawLetterSpacing(l[b],i+e.padding,n+e.padding-y)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i,n){void 0===n&&(n=!1);var o=this._style.letterSpacing;if(0!==o)for(var a=e,s=Array.from?Array.from(t):t.split(""),r=this.context.measureText(t).width,l=0,h=0;h<s.length;++h){var c=s[h];n?this.context.strokeText(c,a,i):this.context.fillText(c,a,i),a+=r-(l=this.context.measureText(t.substring(h+1)).width)+o,r=l}else n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=wt(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,n=this._style,o=n.trim?0:n.padding,a=i.baseTexture;i.trim.width=i._frame.width=Math.ceil(t.width/this._resolution),i.trim.height=i._frame.height=Math.ceil(t.height/this._resolution),i.trim.x=-o,i.trim.y=-o,i.orig.width=i._frame.width-2*o,i.orig.height=i._frame.height-2*o,this._onTextureUpdate(),a.setRealSize(t.width,t.height,this._resolution),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e,i){if(!Array.isArray(t.fill))return t.fill;if(1===t.fill.length)return t.fill[0];var n,o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,s=Math.ceil(this.canvas.width/this._resolution)-o-2*a,r=Math.ceil(this.canvas.height/this._resolution)-o-2*a,l=t.fill.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var c=l.length+1,u=1;u<c;++u)h.push(u/c);if(l.unshift(t.fill[0]),h.unshift(0),l.push(t.fill[t.fill.length-1]),h.push(1),t.fillGradientType===qo.LINEAR_VERTICAL){n=this.context.createLinearGradient(s/2,a,s/2,r+a);for(var m=0,p=(i.fontProperties.fontSize+t.strokeThickness)/r,d=0;d<e.length;d++)for(var f=i.lineHeight*d,y=0;y<l.length;y++){var g=f/r+("number"==typeof h[y]?h[y]:y/l.length)*p,v=Math.max(m,g);v=Math.min(v,1),n.addColorStop(v,l[y]),m=v}}else{n=this.context.createLinearGradient(a,r/2,s+a,r/2);for(var _=l.length+1,b=1,x=0;x<l.length;x++){var S=void 0;S="number"==typeof h[x]?h[x]:b/_,n.addColorStop(S,l[x]),b++}}return n},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},aa,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},i.width.get=function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},i.width.set=function(t){this.updateText(!0);var e=pt(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},i.height.get=function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},i.height.set=function(t){this.updateText(!0);var e=pt(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},i.style.get=function(){return this._style},i.style.set=function(t){t=t||{},this._style=t instanceof $o?t:new $o(t),this.localStyleID=-1,this.dirty=!0},i.text.get=function(){return this._text},i.text.set=function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},i.resolution.get=function(){return this._resolution},i.resolution.set=function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},Object.defineProperties(e.prototype,i),e}(Yo);
/*!
 * @pixi/prepare - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
F.UPLOADS_PER_FRAME=4;var ra=function(t){this.maxItemsPerFrame=t,this.itemsLeft=0};ra.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},ra.prototype.allowedToUpload=function(){return this.itemsLeft-- >0};var la=function(t){var e=this;this.limiter=new ra(F.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(da),this.registerFindHook(fa),this.registerFindHook(ha),this.registerFindHook(ca),this.registerFindHook(ua),this.registerUploadHook(ma),this.registerUploadHook(pa)};function ha(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof Ve){var o=t._textures[n].baseTexture;-1===e.indexOf(o)&&(e.push(o),i=!0)}return i}function ca(t,e){if(t.baseTexture instanceof Pe){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function ua(t,e){if(t._texture&&t._texture instanceof Ve){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function ma(t,e){return e instanceof sa&&(e.updateText(!0),!0)}function pa(t,e){if(e instanceof $o){var i=e.toFontString();return na.measureFont(i),!0}return!1}function da(t,e){if(t instanceof sa){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function fa(t,e){return t instanceof $o&&(-1===e.indexOf(t)&&e.push(t),!0)}la.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,ae.system.addOnce(this.tick,this,ie.UTILITY))):e&&e()},la.prototype.tick=function(){setTimeout(this.delayedTick,0)},la.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)ae.system.addOnce(this.tick,this,ie.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var a=0,s=o.length;a<s;a++)o[a]()}},la.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},la.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},la.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof te)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},la.prototype.destroy=function(){this.ticking&&ae.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null};var ya=function(t){function e(e){t.call(this,e),this.uploadHookHelper=this.renderer,this.registerFindHook(_a),this.registerUploadHook(ga),this.registerUploadHook(va)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(la);function ga(t,e){return e instanceof Pe&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function va(t,e){if(!(e instanceof Ho))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var n=i.batches,o=0;o<n.length;o++){var a=n[o].style.texture;a&&ga(t,a.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function _a(t,e){return t instanceof Ho&&(e.push(t),!0)}var ba=function(t){this.maxMilliseconds=t,this.frameStart=0};ba.prototype.beginFrame=function(){this.frameStart=Date.now()},ba.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds};
/*!
 * @pixi/spritesheet - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var xa=function(t,e,i){void 0===i&&(i=null),this._texture=t instanceof Ve?t:null,this.baseTexture=t instanceof Pe?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e,this.resolution=this._updateResolution(i||(this.baseTexture.resource?this.baseTexture.resource.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null},Sa={BATCH_SIZE:{configurable:!0}};Sa.BATCH_SIZE.get=function(){return 1e3},xa.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=It(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},xa.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=xa.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},xa.prototype._processFrames=function(t){for(var e=t,i=xa.BATCH_SIZE;e-t<i&&e<this._frameKeys.length;){var n=this._frameKeys[e],o=this._frames[n],a=o.frame;if(a){var s=null,r=null,l=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,h=new Wt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s=o.rotated?new Wt(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new Wt(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(r=new Wt(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[n]=new Ve(this.baseTexture,s,h,r,o.rotated?2:0,o.anchor),Ve.addToCache(this.textures[n],n)}e++}},xa.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var n=t[e][i];this.animations[e].push(this.textures[n])}}},xa.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},xa.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*xa.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*xa.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},xa.prototype.destroy=function(t){for(var e in void 0===t&&(t=!1),this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture&&this._texture.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},Object.defineProperties(xa,Sa);var ka=function(){};ka.use=function(t,e){var i=t.name+"_image";if(t.data&&t.type===po.TYPE.JSON&&t.data.frames&&!this.resources[i]){var n={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},o=ka.getResourcePath(t,this.baseUrl);this.add(i,o,n,function(i){if(i.error)e(i.error);else{var n=new xa(i.texture,t.data,t.url);n.parse(function(){t.spritesheet=n,t.textures=n.textures,e()})}})}else e()},ka.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:X.a.resolve(t.url.replace(e,""),t.data.meta.image)};
/*!
 * @pixi/sprite-tiling - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var wa=new Lt,Aa=function(t){function e(e,i,n){void 0===i&&(i=100),void 0===n&&(n=100),t.call(this,e),this.tileTransform=new Ht,this._width=i,this._height=n,this._canvasPattern=null,this.uvMatrix=e.uvMatrix||new Ji(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={clampMargin:{configurable:!0},tileScale:{configurable:!0},tilePosition:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return i.clampMargin.get=function(){return this.uvMatrix.clampMargin},i.clampMargin.set=function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},i.tileScale.get=function(){return this.tileTransform.scale},i.tileScale.set=function(t){this.tileTransform.scale.copyFrom(t)},i.tilePosition.get=function(){return this.tileTransform.position},i.tilePosition.set=function(t){this.tileTransform.position.copyFrom(t)},e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Wt),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,wa);var e=this._width,i=this._height,n=-e*this.anchor._x;if(wa.x>=n&&wa.x<n+e){var o=-i*this.anchor._y;if(wa.y>=o&&wa.y<o+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i,n){return new e(Ve.from(t),i,n)},e.fromFrame=function(t,i,n){var o=_t[t];if(!o)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(o,i,n)},e.fromImage=function(t,i,n,o){return o&&"object"!=typeof o&&(o={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),new e(Ve.from(t,o),i,n)},i.width.get=function(){return this._width},i.width.set=function(t){this._width=t},i.height.get=function(){return this._height},i.height.set=function(t){this._height=t},Object.defineProperties(e.prototype,i),e}(Yo),Pa="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Ta="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",Ca="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",Ia=new Ot,Ba=function(t){function e(e){t.call(this,e);var i={globals:this.renderer.globalUniforms};this.shader=Ui.from(Pa,Ta,i),this.simpleShader=Ui.from(Pa,Ca,i),this.quad=new ei,this.state=Vi.for2d()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=this.renderer,i=this.quad,n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((n=i.uvs)[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),i.invalidate();var o=t._texture,a=o.baseTexture,s=t.tileTransform.localTransform,r=t.uvMatrix,l=a.isPowerOfTwo&&o.frame.width===a.width&&o.frame.height===a.height;l&&(a._glTextures[e.CONTEXT_UID]?l=a.wrapMode!==L.CLAMP:a.wrapMode===L.CLAMP&&(a.wrapMode=L.REPEAT));var h=l?this.simpleShader:this.shader,c=o.width,u=o.height,m=t._width,p=t._height;Ia.set(s.a*c/m,s.b*c/p,s.c*u/m,s.d*u/p,s.tx/m,s.ty/p),Ia.invert(),l?Ia.prepend(r.mapCoord):(h.uniforms.uMapCoord=r.mapCoord.toArray(!0),h.uniforms.uClampFrame=r.uClampFrame,h.uniforms.uClampOffset=r.uClampOffset),h.uniforms.uTransform=Ia.toArray(!0),h.uniforms.uColor=ot(t.tint,t.worldAlpha,h.uniforms.uColor,a.alphaMode),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.uSampler=o,e.shader.bind(h),e.geometry.bind(i),this.state.blendMode=et(t.blendMode,a.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(si),La=function(t){function e(e,i){var n=this;void 0===i&&(i={}),t.call(this),this._textWidth=0,this._textHeight=0,this._glyphs=[],this._font={tint:void 0!==i.tint?i.tint:16777215,align:i.align||"left",name:null,size:0},this.font=i.font,this._text=e,this._maxWidth=0,this._maxLineHeight=0,this._letterSpacing=0,this._anchor=new Et(function(){n.dirty=!0},this,0,0),this.dirty=!1,this.roundPixels=F.ROUND_PIXELS,this.updateText()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={tint:{configurable:!0},align:{configurable:!0},anchor:{configurable:!0},font:{configurable:!0},text:{configurable:!0},maxWidth:{configurable:!0},maxLineHeight:{configurable:!0},textWidth:{configurable:!0},letterSpacing:{configurable:!0},textHeight:{configurable:!0}};return e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,n=new Lt,o=[],a=[],s=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",r=s.length,l=this._maxWidth*t.size/this._font.size,h=null,c=0,u=0,m=0,p=-1,d=0,f=0,y=0,g=0;g<r;g++){var v=s.charCodeAt(g),_=s.charAt(g);if(/(?:\s)/.test(_)&&(p=g,d=c),"\r"!==_&&"\n"!==_){var b=t.chars[v];b&&(h&&b.kerning[h]&&(n.x+=b.kerning[h]),o.push({texture:b.texture,line:m,charCode:v,position:new Lt(n.x+b.xOffset+this._letterSpacing/2,n.y+b.yOffset)}),n.x+=b.xAdvance+this._letterSpacing,c=n.x,y=Math.max(y,b.yOffset+b.texture.height),h=v,-1!==p&&l>0&&n.x>l&&(mt(o,1+p-++f,1+g-p),g=p,p=-1,a.push(d),u=Math.max(u,d),m++,n.x=0,n.y+=t.lineHeight,h=null))}else a.push(c),u=Math.max(u,c),++m,++f,n.x=0,n.y+=t.lineHeight,h=null}var x=s.charAt(s.length-1);"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(c=d),a.push(c),u=Math.max(u,c));for(var S=[],k=0;k<=m;k++){var w=0;"right"===this._font.align?w=u-a[k]:"center"===this._font.align&&(w=(u-a[k])/2),S.push(w)}for(var A=o.length,P=this.tint,T=0;T<A;T++){var C=this._glyphs[T];C?C.texture=o[T].texture:((C=new Yo(o[T].texture)).roundPixels=this.roundPixels,this._glyphs.push(C)),C.position.x=(o[T].position.x+S[o[T].line])*i,C.position.y=o[T].position.y*i,C.scale.x=C.scale.y=i,C.tint=P,C.parent||this.addChild(C)}for(var I=A;I<this._glyphs.length;++I)this.removeChild(this._glyphs[I]);if(this._textWidth=u*i,this._textHeight=(n.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var B=0;B<A;B++)this._glyphs[B].x-=this._textWidth*this.anchor.x,this._glyphs[B].y-=this._textHeight*this.anchor.y;this._maxLineHeight=y*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},i.tint.get=function(){return this._font.tint},i.tint.set=function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0},i.align.get=function(){return this._font.align},i.align.set=function(t){this._font.align=t||"left",this.dirty=!0},i.anchor.get=function(){return this._anchor},i.anchor.set=function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},i.font.get=function(){return this._font},i.font.set=function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)},i.text.get=function(){return this._text},i.text.set=function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},i.maxWidth.get=function(){return this._maxWidth},i.maxWidth.set=function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},i.maxLineHeight.get=function(){return this.validate(),this._maxLineHeight},i.textWidth.get=function(){return this.validate(),this._textWidth},i.letterSpacing.get=function(){return this._letterSpacing},i.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},i.textHeight.get=function(){return this.validate(),this._textHeight},e.registerFont=function(t,i){var n={},o=t.getElementsByTagName("info")[0],a=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("page"),r=It(s[0].getAttribute("file")),l={};n.font=o.getAttribute("face"),n.size=parseInt(o.getAttribute("size"),10),n.lineHeight=parseInt(a.getAttribute("lineHeight"),10)/r,n.chars={},i instanceof Ve&&(i=[i]);for(var h=0;h<s.length;h++){var c=s[h].getAttribute("id"),u=s[h].getAttribute("file");l[c]=i instanceof Array?i[h]:i[u]}for(var m=t.getElementsByTagName("char"),p=0;p<m.length;p++){var d=m[p],f=parseInt(d.getAttribute("id"),10),y=d.getAttribute("page")||0,g=new Wt(parseInt(d.getAttribute("x"),10)/r+l[y].frame.x/r,parseInt(d.getAttribute("y"),10)/r+l[y].frame.y/r,parseInt(d.getAttribute("width"),10)/r,parseInt(d.getAttribute("height"),10)/r);n.chars[f]={xOffset:parseInt(d.getAttribute("xoffset"),10)/r,yOffset:parseInt(d.getAttribute("yoffset"),10)/r,xAdvance:parseInt(d.getAttribute("xadvance"),10)/r,kerning:{},texture:new Ve(l[y].baseTexture,g),page:y}}for(var v=t.getElementsByTagName("kerning"),_=0;_<v.length;_++){var b=v[_],x=parseInt(b.getAttribute("first"),10)/r,S=parseInt(b.getAttribute("second"),10)/r,k=parseInt(b.getAttribute("amount"),10)/r;n.chars[S]&&(n.chars[S].kerning[x]=k)}return e.fonts[n.font]=n,n},Object.defineProperties(e.prototype,i),e}(te);La.fonts={};var Ea=function(){};Ea.parse=function(t,e){t.bitmapFont=La.registerFont(t.data,e)},Ea.add=function(){po.setExtensionXhrType("fnt",po.XHR_RESPONSE_TYPE.DOCUMENT)},Ea.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},Ea.use=function(t,e){if(t.data&&t.type===po.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var i=t.isDataUrl?"":Ea.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");for(var n=t.data.getElementsByTagName("page"),o={},a=function(i){o[i.metadata.pageFile]=i.texture,Object.keys(o).length===n.length&&(Ea.parse(t,o),e())},s=0;s<n.length;++s){var r=n[s].getAttribute("file"),l=i+r,h=!1;for(var c in this.resources){var u=this.resources[c];if(u.url===l){u.metadata.pageFile=r,u.texture?a(u):u.onAfterMiddleware.add(a),h=!0;break}}if(!h){var m={crossOrigin:t.crossOrigin,loadType:po.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:r},t.metadata.imageMetadata),parentResource:t};this.add(l,m,a)}}}else e();else e()};
/*!
 * @pixi/filter-alpha - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Ma="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",Ra=function(t){function e(e){void 0===e&&(e=1),t.call(this,Sn,Ma,{uAlpha:1}),this.alpha=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={alpha:{configurable:!0}};return i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(e.prototype,i),e}(Xi),Da="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";var Oa={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Fa=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var ja=function(t){function e(e,i,n,o,a){var s=function(t,e){var i,n=Math.ceil(t/2),o=Da,a="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var r=i.replace("%index%",s);a+=r=r.replace("%sampleIndex%",s-(n-1)+".0"),a+="\n"}return o=(o=o.replace("%blur%",a)).replace("%size%",t)}(a=a||5,e),r=function(t){for(var e,i=Oa[t],n=i.length,o=Fa,a="",s=0;s<t;s++){var r="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s);e=s,s>=n&&(e=t-s-1),a+=r=r.replace("%value%",i[e]),a+="\n"}return o=(o=o.replace("%blur%",a)).replace("%size%",t)}(a);t.call(this,s,r),this.horizontal=e,this.resolution=o||F.RESOLUTION,this._quality=0,this.quality=n||4,this.blur=i||8}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blur:{configurable:!0},quality:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{var o=t.getFilterTexture(),a=t.renderer,s=e,r=o;this.state.blend=!1,t.applyFilter(this,s,r,!0);for(var l=1;l<this.passes-1;l++){a.renderTexture.bind(s,s.filterFrame),this.uniforms.uSampler=r;var h=r;r=s,s=h,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,r,i,n),t.returnFilterTexture(o)}},i.blur.get=function(){return this.strength},i.blur.set=function(t){this.padding=1+2*Math.abs(t),this.strength=t},i.quality.get=function(){return this._quality},i.quality.set=function(t){this._quality=t,this.passes=t},Object.defineProperties(e.prototype,i),e}(Xi),Ua=function(t){function e(e,i,n,o){t.call(this),this.blurXFilter=new ja(!0,e,i,n,o),this.blurYFilter=new ja(!1,e,i,n,o),this.resolution=n||F.RESOLUTION,this.quality=i||4,this.blur=e||8,this.repeatEdgePixels=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blur:{configurable:!0},quality:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0},blendMode:{configurable:!0},repeatEdgePixels:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){var o=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(o&&a){var s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,!0),this.blurYFilter.apply(t,s,i,n),t.returnFilterTexture(s)}else a?this.blurYFilter.apply(t,e,i,n):this.blurXFilter.apply(t,e,i,n)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},i.blur.get=function(){return this.blurXFilter.blur},i.blur.set=function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},i.quality.get=function(){return this.blurXFilter.quality},i.quality.set=function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},i.blurX.get=function(){return this.blurXFilter.blur},i.blurX.set=function(t){this.blurXFilter.blur=t,this.updatePadding()},i.blurY.get=function(){return this.blurYFilter.blur},i.blurY.set=function(t){this.blurYFilter.blur=t,this.updatePadding()},i.blendMode.get=function(){return this.blurYFilter.blendMode},i.blendMode.set=function(t){this.blurYFilter.blendMode=t},i.repeatEdgePixels.get=function(){return this._repeatEdgePixels},i.repeatEdgePixels.set=function(t){this._repeatEdgePixels=t,this.updatePadding()},Object.defineProperties(e.prototype,i),e}(Xi),Na="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",Va=function(t){function e(){var e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};t.call(this,kn,Na,e),this.alpha=1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={matrix:{configurable:!0},alpha:{configurable:!0}};return e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),o=1/3,a=(0,Math.sqrt)(o),s=[i+(1-i)*o,o*(1-i)-a*n,o*(1-i)+a*n,0,0,o*(1-i)+a*n,i+o*(1-i),o*(1-i)-a*n,0,0,o*(1-i)-a*n,o*(1-i)+a*n,i+o*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-.5*(i-1),o=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(o,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,n=-.5*(i-1),o=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(o,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,n,o){var a=((i=i||16770432)>>16&255)/255,s=(i>>8&255)/255,r=(255&i)/255,l=((n=n||3375104)>>16&255)/255,h=(n>>8&255)/255,c=(255&n)/255,u=[.3,.59,.11,0,0,a,s,r,t=t||.2,0,l,h,c,e=e||.15,0,a-l,s-h,r-c,0,0];this._loadMatrix(u,o)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},i.matrix.get=function(){return this.uniforms.m},i.matrix.set=function(t){this.uniforms.m=t},i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(e.prototype,i),e}(Xi);Va.prototype.grayscale=Va.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Ga="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n",Xa="varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",za=function(t){function e(e,i){var n=new Ot;e.renderable=!1,t.call(this,Ga,Xa,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,null==i&&(i=20),this.scale=new Lt(i,i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={map:{configurable:!0}};return e.prototype.apply=function(t,e,i,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var o=this.maskSprite.transform.worldTransform,a=Math.sqrt(o.a*o.a+o.b*o.b),s=Math.sqrt(o.c*o.c+o.d*o.d);0!==a&&0!==s&&(this.uniforms.rotation[0]=o.a/a,this.uniforms.rotation[1]=o.b/a,this.uniforms.rotation[2]=o.c/s,this.uniforms.rotation[3]=o.d/s),t.applyFilter(this,e,i,n)},i.map.get=function(){return this.uniforms.mapSampler},i.map.set=function(t){this.uniforms.mapSampler=t},Object.defineProperties(e.prototype,i),e}(Xi),Ha="\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",Wa='varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n',Ja=function(t){function e(){t.call(this,Ha,Wa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Xi),Ya="precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",qa=function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random()),t.call(this,kn,Ya,{uNoise:0,uSeed:0}),this.noise=e,this.seed=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={noise:{configurable:!0},seed:{configurable:!0}};return i.noise.get=function(){return this.uniforms.uNoise},i.noise.set=function(t){this.uniforms.uNoise=t},i.seed.get=function(){return this.uniforms.uSeed},i.seed.set=function(t){this.uniforms.uSeed=t},Object.defineProperties(e.prototype,i),e}(Xi),Za=new Ot;$t.prototype._cacheAsBitmap=!1,$t.prototype._cacheData=!1;var Ka=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties($t.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Ka),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),$t.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},$t.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds().clone();if(this.filters){var n=this.filters[0].padding;i.pad(n)}i.ceil(F.RESOLUTION);var o=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),s=t.projection.transform,r=Xe.create(i.width,i.height),l="cacheAsBitmap_"+ft();this._cacheData.textureCacheId=l,Pe.addToCache(r.baseTexture,l),Ve.addToCache(r,l);var h=Za;h.tx=-i.x,h.ty=-i.y,this.transform.worldTransform.identity(),this.render=this._cacheData.originalRender,t.render(this,r,!0,h,!0),t.projection.transform=s,t.renderTexture.bind(o,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new Yo(r);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-i.x/i.width,c.anchor.y=-i.y/i.height,c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)}},$t.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},$t.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var n=t.context,o=t._projTransform;e.ceil(F.RESOLUTION);var a=Xe.create(e.width,e.height),s="cacheAsBitmap_"+ft();this._cacheData.textureCacheId=s,Pe.addToCache(a.baseTexture,s),Ve.addToCache(a,s);var r=Za;this.transform.localTransform.copyTo(r),r.invert(),r.tx-=e.x,r.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,a,!0,r,!1),t.context=n,t._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var l=new Yo(a);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l.alpha=i,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},$t.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},$t.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},$t.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Pe.removeFromCache(this._cacheData.textureCacheId),Ve.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},$t.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},
/*!
 * @pixi/mixin-get-child-by-name - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
$t.prototype.name=null,te.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null},
/*!
 * @pixi/mixin-get-global-position - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
$t.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new Lt),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};
/*!
 * @pixi/mesh - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var $a=function(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0};$a.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}};var Qa=new Lt,ts=new qt,es=function(t){function e(e,i,n,o){void 0===o&&(o=P.TRIANGLES),t.call(this),this.geometry=e,e.refCount++,this.shader=i,this.state=n||Vi.for2d(),this.drawMode=o,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=0,this._transformID=-1,this.tint=16777215,this.blendMode=A.NORMAL,this._roundPixels=F.ROUND_PIXELS,this.batchUvs=null}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={uvBuffer:{configurable:!0},verticesBuffer:{configurable:!0},material:{configurable:!0},blendMode:{configurable:!0},roundPixels:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return i.uvBuffer.get=function(){return this.geometry.buffers[1]},i.verticesBuffer.get=function(){return this.geometry.buffers[0]},i.material.set=function(t){this.shader=t},i.material.get=function(){return this.shader},i.blendMode.set=function(t){this.state.blendMode=t},i.blendMode.get=function(){return this.state.blendMode},i.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},i.roundPixels.get=function(){return this._roundPixels},i.tint.get=function(){return this.shader.tint},i.tint.set=function(t){this.shader.tint=t},i.texture.get=function(){return this.shader.texture},i.texture.set=function(t){this.shader.texture=t},e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===P.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var i=this.transform.worldTransform,n=i.a,o=i.b,a=i.c,s=i.d,r=i.tx,l=i.ty,h=this.vertexData,c=0;c<h.length/2;c++){var u=e[2*c],m=e[2*c+1];h[2*c]=n*u+a*m+r,h[2*c+1]=o*u+s*m+l}if(this._roundPixels)for(var p=F.RESOLUTION,d=0;d<h.length;++d)h[d]=Math.round((h[d]*p|0)/p);this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new $a(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Qa);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=ts.points,n=this.geometry.getIndex().data,o=n.length,a=4===this.drawMode?3:1,s=0;s+2<o;s+=a){var r=2*n[s],l=2*n[s+1],h=2*n[s+2];if(i[0]=e[r],i[1]=e[r+1],i[2]=e[l],i[3]=e[l+1],i[4]=e[h],i[5]=e[h+1],ts.contains(Qa.x,Qa.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Object.defineProperties(e.prototype,i),e}(te);es.BATCHABLE_SIZE=100;var is="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n",ns="varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n",os=function(t){function e(e,i){var n={uSampler:e,alpha:1,uTextureMatrix:Ot.IDENTITY,uColor:new Float32Array([1,1,1,1])};(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(n,i.uniforms),t.call(this,i.program||Fi.from(is,ns),n),this._colorDirty=!1,this.uvMatrix=new Ji(e),this.batchable=void 0===i.program,this.pluginName=i.pluginName,this.tint=i.tint,this.alpha=i.alpha}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={texture:{configurable:!0},alpha:{configurable:!0},tint:{configurable:!0}};return i.texture.get=function(){return this.uniforms.uSampler},i.texture.set=function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},i.alpha.set=function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},i.alpha.get=function(){return this._alpha},i.tint.set=function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},i.tint.get=function(){return this._tint},e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;ot(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},Object.defineProperties(e.prototype,i),e}(Ui),as=function(t){function e(e,i,n){t.call(this);var o=new Je(e),a=new Je(i,!0),s=new Je(n,!0,!0);this.addAttribute("aVertexPosition",o,2,!1,I.FLOAT).addAttribute("aTextureCoord",a,2,!1,I.FLOAT).addIndex(s),this._updateId=-1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={vertexDirtyId:{configurable:!0}};return i.vertexDirtyId.get=function(){return this.buffers[0]._updateID},Object.defineProperties(e.prototype,i),e}(Qe),ss=function(t){function e(e,i,n,o){void 0===e&&(e=100),void 0===i&&(i=100),void 0===n&&(n=10),void 0===o&&(o=10),t.call(this),this.segWidth=n,this.segHeight=o,this.width=e,this.height=i,this.build()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],n=[],o=this.segWidth-1,a=this.segHeight-1,s=this.width/o,r=this.height/a,l=0;l<t;l++){var h=l%this.segWidth,c=l/this.segWidth|0;e.push(h*s,c*r),i.push(h/o,c/a)}for(var u=o*a,m=0;m<u;m++){var p=m%o,d=m/o|0,f=d*this.segWidth+p,y=d*this.segWidth+p+1,g=(d+1)*this.segWidth+p,v=(d+1)*this.segWidth+p+1;n.push(f,y,g,y,v,g)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(as),rs=function(t){function e(e,i,n){void 0===e&&(e=200),void 0===n&&(n=0),t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1))),this.points=i,this.width=e,this.textureScale=n,this.build()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),n=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),n.data=new Uint16Array(6*(t.length-1)));var o=i.data,a=n.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;for(var s=0,r=t[0],l=this.width*this.textureScale,h=t.length,c=0;c<h;c++){var u=4*c;if(this.textureScale>0){var m=r.x-t[c].x,p=r.y-t[c].y,d=Math.sqrt(m*m+p*p);r=t[c],s+=d/l}else s=c/(h-1);o[u]=s,o[u+1]=0,o[u+2]=s,o[u+3]=1}for(var f=0,y=0;y<h-1;y++){var g=2*y;a[f++]=g,a[f++]=g+1,a[f++]=g+2,a[f++]=g+2,a[f++]=g+1,a[f++]=g+3}i.update(),n.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],n=0,o=0,a=this.buffers[0].data,s=t.length,r=0;r<s;r++){var l=t[r],h=4*r;o=-((e=r<t.length-1?t[r+1]:l).x-i.x),n=e.y-i.y;var c=Math.sqrt(n*n+o*o),u=this.textureScale>0?this.textureScale*this.width/2:this.width/2;n/=c,o/=c,n*=u,o*=u,a[h]=l.x+n,a[h+1]=l.y+o,a[h+2]=l.x-n,a[h+3]=l.y-o,i=l}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(as),ls=function(t){function e(e,i,n){void 0===n&&(n=0);var o=new rs(e.height,i,n),a=new os(e);n>0&&(e.baseTexture.wrapMode=L.REPEAT),t.call(this,o,a),this.autoUpdate=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._render=function(e){(this.autoUpdate||this.geometry.width!==this.shader.texture.height)&&(this.geometry.width=this.shader.texture.height,this.geometry.update()),t.prototype._render.call(this,e)},e}(es),hs=function(t){function e(e,i,n){var o=new ss(e.width,e.height,i,n),a=new os(Ve.WHITE);t.call(this,o,a),this.texture=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={texture:{configurable:!0}};return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this.geometry.width=this.shader.texture.width,this.geometry.height=this.shader.texture.height,this.geometry.build()},i.texture.set=function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},i.texture.get=function(){return this.shader.texture},e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},Object.defineProperties(e.prototype,i),e}(es),cs=function(t){function e(e,i,n,o,a){void 0===e&&(e=Ve.EMPTY);var s=new as(i,n,o);s.getBuffer("aVertexPosition").static=!1;var r=new os(e);t.call(this,s,r,null,a),this.autoUpdate=!0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={vertices:{configurable:!0}};return i.vertices.get=function(){return this.geometry.getBuffer("aVertexPosition").data},i.vertices.set=function(t){this.geometry.getBuffer("aVertexPosition").data=t},e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},Object.defineProperties(e.prototype,i),e}(es),us=10,ms=function(t){function e(e,i,n,o,a){t.call(this,Ve.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=void 0!==i?i:us,this._rightWidth=void 0!==o?o:us,this._topHeight=void 0!==n?n:us,this._bottomHeight=void 0!==a?a:us,this.texture=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={vertices:{configurable:!0},width:{configurable:!0},height:{configurable:!0},leftWidth:{configurable:!0},rightWidth:{configurable:!0},topHeight:{configurable:!0},bottomHeight:{configurable:!0}};return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},i.vertices.get=function(){return this.geometry.getBuffer("aVertexPosition").data},i.vertices.set=function(t){this.geometry.getBuffer("aVertexPosition").data=t},e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,n=this._height>i?1:this._height/i;return Math.min(e,n)},i.width.get=function(){return this._width},i.width.set=function(t){this._width=t,this._refresh()},i.height.get=function(){return this._height},i.height.set=function(t){this._height=t,this._refresh()},i.leftWidth.get=function(){return this._leftWidth},i.leftWidth.set=function(t){this._leftWidth=t,this._refresh()},i.rightWidth.get=function(){return this._rightWidth},i.rightWidth.set=function(t){this._rightWidth=t,this._refresh()},i.topHeight.get=function(){return this._topHeight},i.topHeight.set=function(t){this._topHeight=t,this._refresh()},i.bottomHeight.get=function(){return this._bottomHeight},i.bottomHeight.set=function(t){this._bottomHeight=t,this._refresh()},e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},Object.defineProperties(e.prototype,i),e}(hs),ps=function(t){function e(e,i){t.call(this,e[0]instanceof Ve?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=!1!==i,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={totalFrames:{configurable:!0},textures:{configurable:!0},currentFrame:{configurable:!0},playing:{configurable:!0},autoUpdate:{configurable:!0}};return e.prototype.stop=function(){this.playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(ae.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this.playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(ae.shared.add(this.update,this,ie.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var o=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(Ve.from(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(Ve.from(t[n]));return new e(i)},i.totalFrames.get=function(){return this._textures.length},i.textures.get=function(){return this._textures},i.textures.set=function(t){if(t[0]instanceof Ve)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},i.currentFrame.get=function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},i.playing.get=function(){return this._playing},i.autoUpdate.get=function(){return this._autoUpdate},i.autoUpdate.set=function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(ae.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(ae.shared.add(this.update,this),this._isConnectedToTicker=!0))},Object.defineProperties(e.prototype,i),e}(Yo);i.d(e,"VERSION",function(){return ys}),i.d(e,"filters",function(){return gs}),i.d(e,"useDeprecated",function(){return fs}),i.d(e,"accessibility",function(){return o}),i.d(e,"interaction",function(){return a}),i.d(e,"utils",function(){return n}),i.d(e,"Application",function(){return Fn}),i.d(e,"AbstractBatchRenderer",function(){return In}),i.d(e,"AbstractRenderer",function(){return _n}),i.d(e,"Attribute",function(){return He}),i.d(e,"BaseRenderTexture",function(){return je}),i.d(e,"BaseTexture",function(){return Pe}),i.d(e,"BatchDrawCall",function(){return An}),i.d(e,"BatchGeometry",function(){return Ln}),i.d(e,"BatchPluginFactory",function(){return Rn}),i.d(e,"BatchRenderer",function(){return On}),i.d(e,"BatchShaderGenerator",function(){return Bn}),i.d(e,"BatchTextureArray",function(){return Pn}),i.d(e,"Buffer",function(){return Je}),i.d(e,"CubeTexture",function(){return wn}),i.d(e,"Filter",function(){return Xi}),i.d(e,"Framebuffer",function(){return Oe}),i.d(e,"GLProgram",function(){return on}),i.d(e,"GLTexture",function(){return fn}),i.d(e,"Geometry",function(){return Qe}),i.d(e,"MaskData",function(){return di}),i.d(e,"ObjectRenderer",function(){return si}),i.d(e,"Program",function(){return Fi}),i.d(e,"Quad",function(){return ti}),i.d(e,"QuadUv",function(){return ei}),i.d(e,"RenderTexture",function(){return Xe}),i.d(e,"RenderTexturePool",function(){return ze}),i.d(e,"Renderer",function(){return bn}),i.d(e,"Shader",function(){return Ui}),i.d(e,"SpriteMaskFilter",function(){return qi}),i.d(e,"State",function(){return Vi}),i.d(e,"System",function(){return Re}),i.d(e,"Texture",function(){return Ve}),i.d(e,"TextureMatrix",function(){return Ji}),i.d(e,"TextureUvs",function(){return Ue}),i.d(e,"UniformGroup",function(){return ni}),i.d(e,"ViewableBuffer",function(){return Tn}),i.d(e,"autoDetectRenderer",function(){return xn}),i.d(e,"checkMaxIfStatementsInShader",function(){return Mi}),i.d(e,"defaultFilterVertex",function(){return kn}),i.d(e,"defaultVertex",function(){return Sn}),i.d(e,"resources",function(){return Me}),i.d(e,"systems",function(){return gn}),i.d(e,"Extract",function(){return Vn}),i.d(e,"AppLoaderPlugin",function(){return mo}),i.d(e,"Loader",function(){return uo}),i.d(e,"LoaderResource",function(){return po}),i.d(e,"TextureLoader",function(){return co}),i.d(e,"ParticleContainer",function(){return fo}),i.d(e,"ParticleRenderer",function(){return _o}),i.d(e,"BasePrepare",function(){return la}),i.d(e,"CountLimiter",function(){return ra}),i.d(e,"Prepare",function(){return ya}),i.d(e,"TimeLimiter",function(){return ba}),i.d(e,"Spritesheet",function(){return xa}),i.d(e,"SpritesheetLoader",function(){return ka}),i.d(e,"TilingSprite",function(){return Aa}),i.d(e,"TilingSpriteRenderer",function(){return Ba}),i.d(e,"BitmapFontLoader",function(){return Ea}),i.d(e,"BitmapText",function(){return La}),i.d(e,"Ticker",function(){return ae}),i.d(e,"TickerPlugin",function(){return se}),i.d(e,"UPDATE_PRIORITY",function(){return ie}),i.d(e,"ALPHA_MODES",function(){return M}),i.d(e,"BLEND_MODES",function(){return A}),i.d(e,"DRAW_MODES",function(){return P}),i.d(e,"ENV",function(){return k}),i.d(e,"FORMATS",function(){return T}),i.d(e,"GC_MODES",function(){return R}),i.d(e,"MASK_TYPES",function(){return O}),i.d(e,"MIPMAP_MODES",function(){return E}),i.d(e,"PRECISION",function(){return D}),i.d(e,"RENDERER_TYPE",function(){return w}),i.d(e,"SCALE_MODES",function(){return B}),i.d(e,"TARGETS",function(){return C}),i.d(e,"TYPES",function(){return I}),i.d(e,"WRAP_MODES",function(){return L}),i.d(e,"Bounds",function(){return Kt}),i.d(e,"Container",function(){return te}),i.d(e,"DisplayObject",function(){return $t}),i.d(e,"FillStyle",function(){return xo}),i.d(e,"GRAPHICS_CURVES",function(){return bo}),i.d(e,"Graphics",function(){return Ho}),i.d(e,"GraphicsData",function(){return jo}),i.d(e,"GraphicsGeometry",function(){return Vo}),i.d(e,"LineStyle",function(){return Go}),i.d(e,"graphicsUtils",function(){return Fo}),i.d(e,"Circle",function(){return Jt}),i.d(e,"DEG_TO_RAD",function(){return Dt}),i.d(e,"Ellipse",function(){return Yt}),i.d(e,"Matrix",function(){return Ot}),i.d(e,"ObservablePoint",function(){return Et}),i.d(e,"PI_2",function(){return Mt}),i.d(e,"Point",function(){return Lt}),i.d(e,"Polygon",function(){return qt}),i.d(e,"RAD_TO_DEG",function(){return Rt}),i.d(e,"Rectangle",function(){return Wt}),i.d(e,"RoundedRectangle",function(){return Zt}),i.d(e,"SHAPES",function(){return Bt}),i.d(e,"Transform",function(){return Ht}),i.d(e,"groupD8",function(){return zt}),i.d(e,"Mesh",function(){return es}),i.d(e,"MeshBatchUvs",function(){return $a}),i.d(e,"MeshGeometry",function(){return as}),i.d(e,"MeshMaterial",function(){return os}),i.d(e,"NineSlicePlane",function(){return ms}),i.d(e,"PlaneGeometry",function(){return ss}),i.d(e,"RopeGeometry",function(){return rs}),i.d(e,"SimpleMesh",function(){return cs}),i.d(e,"SimplePlane",function(){return hs}),i.d(e,"SimpleRope",function(){return ls}),i.d(e,"Runner",function(){return ge}),i.d(e,"Sprite",function(){return Yo}),i.d(e,"AnimatedSprite",function(){return ps}),i.d(e,"TEXT_GRADIENT",function(){return qo}),i.d(e,"Text",function(){return sa}),i.d(e,"TextMetrics",function(){return na}),i.d(e,"TextStyle",function(){return $o}),i.d(e,"isMobile",function(){return S}),i.d(e,"settings",function(){return F});
/*!
 * pixi.js - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ds="5.0.0";function fs(){var t=this;Object.defineProperties(t,{SVG_SIZE:{get:function(){return gt(ds,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),t.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return gt(ds,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),t.Transform}},TransformBase:{get:function(){return gt(ds,"PIXI.TransformBase class has been removed, use PIXI.Transform"),t.Transform}},TRANSFORM_MODE:{get:function(){return gt(ds,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return gt(ds,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),t.Renderer}},CanvasRenderTarget:{get:function(){return gt(ds,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),t.utils.CanvasRenderTarget}},loader:{get:function(){return gt(ds,"PIXI.loader instance has moved to PIXI.Loader.shared"),t.Loader.shared}},FilterManager:{get:function(){return gt(ds,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),t.systems.FilterSystem}},CanvasTinter:{get:function(){return gt("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),t.canvasUtils}},GroupD8:{get:function(){return gt("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),t.groupD8}}}),t.prepare={},Object.defineProperties(t.prepare,{BasePrepare:{get:function(){return gt("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),t.BasePrepare}},Prepare:{get:function(){return gt("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),t.Prepare}},CanvasPrepare:{get:function(){return gt("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),t.CanvasPrepare}}}),t.extract={},Object.defineProperties(t.extract,{Extract:{get:function(){return gt("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),t.Extract}},CanvasExtract:{get:function(){return gt("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),t.CanvasExtract}}}),t.extras={},Object.defineProperties(t.extras,{TilingSprite:{get:function(){return gt(ds,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),t.TilingSprite}},TilingSpriteRenderer:{get:function(){return gt(ds,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),t.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return gt(ds,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),t.AnimatedSprite}},BitmapText:{get:function(){return gt(ds,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),t.BitmapText}}}),Object.defineProperties(t.utils,{getSvgSize:{get:function(){return gt(ds,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),t.SVGResource.getSize}}}),t.mesh={},Object.defineProperties(t.mesh,{Mesh:{get:function(){return gt(ds,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),t.SimpleMesh}},NineSlicePlane:{get:function(){return gt(ds,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),t.NineSlicePlane}},Plane:{get:function(){return gt(ds,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),t.SimplePlane}},Rope:{get:function(){return gt(ds,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),t.SimpleRope}},RawMesh:{get:function(){return gt(ds,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),t.Mesh}},CanvasMeshRenderer:{get:function(){return gt(ds,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),t.CanvasMeshRenderer}},MeshRenderer:{get:function(){return gt(ds,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),t.MeshRenderer}}}),t.particles={},Object.defineProperties(t.particles,{ParticleContainer:{get:function(){return gt(ds,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),t.ParticleContainer}},ParticleRenderer:{get:function(){return gt(ds,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),t.ParticleRenderer}}}),t.ticker={},Object.defineProperties(t.ticker,{Ticker:{get:function(){return gt(ds,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),t.Ticker}},shared:{get:function(){return gt(ds,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),t.Ticker.shared}}}),t.loaders={},Object.defineProperties(t.loaders,{Loader:{get:function(){return gt(ds,"PIXI.loaders.Loader class has moved to PIXI.Loader"),t.Loader}},Resource:{get:function(){return gt(ds,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),t.LoaderResource}},bitmapFontParser:{get:function(){return gt(ds,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),t.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){return gt(ds,"PIXI.loaders.parseBitmapFontData function has moved to PIXI.BitmapFontLoader.parse"),t.BitmapFontLoader.parse}},spritesheetParser:{get:function(){return gt(ds,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),t.SpritesheetLoader.use}},getResourcePath:{get:function(){return gt(ds,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),t.SpritesheetLoader.getResourcePath}}}),t.Loader.addPixiMiddleware=function(e){return gt(ds,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),t.loaders.Loader.registerPlugin({use:e()})},Object.defineProperty(t.extract,"WebGLExtract",{get:function(){return gt(ds,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),t.Extract}}),Object.defineProperty(t.prepare,"WebGLPrepare",{get:function(){return gt(ds,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),t.Prepare}}),t.Container.prototype._renderWebGL=function(t){gt(ds,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(t)},t.Container.prototype.renderWebGL=function(t){gt(ds,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(t)},t.DisplayObject.prototype.renderWebGL=function(t){gt(ds,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(t)},t.Container.prototype.renderAdvancedWebGL=function(t){gt(ds,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(t)},Object.defineProperties(t.settings,{TRANSFORM_MODE:{get:function(){return gt(ds,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){gt(ds,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var e=t.BaseTexture;e.prototype.loadSource=function(e){gt(ds,"PIXI.BaseTexture.loadSource method has been deprecated");var i=t.resources.autoDetectResource(e);i.internal=!0,this.setResource(i),this.update()};var i=!1;Object.defineProperties(e.prototype,{hasLoaded:{get:function(){return gt(ds,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){return gt(ds,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&this.resource.url},set:function(t){gt(ds,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=t)}},source:{get:function(){return gt(ds,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource&&this.resource.source},set:function(t){gt(ds,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=t)}},premultiplyAlpha:{get:function(){return gt("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){gt("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}},_id:{get:function(){return i||(gt("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),i=!0),this._batchLocation},set:function(t){this._batchLocation=t}}}),e.fromImage=function(t,i,n,o){gt(ds,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var a={scale:o,crossorigin:i};return e.from(t,{scaleMode:n,resourceOptions:a})},e.fromCanvas=function(t,i){return gt(ds,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),e.from(t,{scaleMode:i})},e.fromSVG=function(t,i,n,o){gt(ds,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var a={scale:o,crossorigin:i};return e.from(t,{scaleMode:n,resourceOptions:a})},Object.defineProperties(t.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return gt("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){gt("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}}}),t.Point.prototype.copy=function(t){return gt(ds,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(t)},t.ObservablePoint.prototype.copy=function(t){return gt(ds,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(t)},t.Rectangle.prototype.copy=function(t){return gt(ds,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(t)},t.Matrix.prototype.copy=function(t){return gt(ds,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(t)},t.systems.StateSystem.prototype.setState=function(t){return gt("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(t)},Object.assign(t.systems.FilterSystem.prototype,{getRenderTarget:function(t,e){return gt(ds,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(e)},returnRenderTarget:function(t){gt(ds,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(t)},calculateScreenSpaceMatrix:function(t){gt(ds,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var e=t.identity(),i=this.activeState,n=i.sourceFrame,o=i.destinationFrame;return e.translate(n.x/o.width,n.y/o.height),e.scale(o.width,o.height),e},calculateNormalizedScreenSpaceMatrix:function(t){gt(ds,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var e=this.activeState,i=e.sourceFrame,n=e.destinationFrame,o=t.identity();o.translate(i.x/n.width,i.y/n.height);var a=n.width/i.width,s=n.height/i.height;return o.scale(a,s),o}}),Object.defineProperties(t.RenderTexture.prototype,{sourceFrame:{get:function(){return gt(ds,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return gt(ds,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var n=function(t){function e(e,i,n,o){gt(ds,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!0,e,i,n,o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t.filters.BlurFilterPass),o=function(t){function e(e,i,n,o){gt(ds,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!1,e,i,n,o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t.filters.BlurFilterPass);Object.assign(t.filters,{BlurXFilter:n,BlurYFilter:o});var a=t.Sprite,s=t.Texture,r=t.Graphics;function l(t,e,i,n){return gt(ds,"PIXI.Sprite."+t+" method is deprecated, use PIXI.Sprite.from"),a.from(e,{resourceOptions:{scale:n,crossorigin:i}})}function h(t,e,i,n){return gt(ds,"PIXI.Texture."+t+" method is deprecated, use PIXI.Texture.from"),s.from(e,{resourceOptions:{scale:n,crossorigin:i}})}r.prototype.generateCanvasTexture||(r.prototype.generateCanvasTexture=function(){gt(ds,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(t.Graphics.prototype,"graphicsData",{get:function(){return gt(ds,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),Object.defineProperty(t.SimpleRope.prototype,"points",{get:function(){return gt(ds,"PIXI.SimpleRope.points property is deprecated, use PIXI.SimpleRope.geometry.points"),this.geometry.points},set:function(t){gt(ds,"PIXI.SimpleRope.points property is deprecated, use PIXI.SimpleRope.geometry.points"),this.geometry.points=t}}),a.fromImage=l.bind(null,"fromImage"),a.fromSVG=l.bind(null,"fromSVG"),a.fromCanvas=l.bind(null,"fromCanvas"),a.fromVideo=l.bind(null,"fromVideo"),a.fromFrame=l.bind(null,"fromFrame"),s.fromImage=h.bind(null,"fromImage"),s.fromSVG=h.bind(null,"fromSVG"),s.fromCanvas=h.bind(null,"fromCanvas"),s.fromVideo=h.bind(null,"fromVideo"),s.fromFrame=h.bind(null,"fromFrame"),Object.defineProperty(t.AbstractRenderer.prototype,"autoResize",{get:function(){return gt(ds,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(t){gt(ds,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=t}}),Object.defineProperty(t.Renderer.prototype,"textureManager",{get:function(){return gt(ds,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),t.utils.mixins={mixin:function(){gt(ds,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){gt(ds,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){gt(ds,"PIXI.utils.mixins.performMixins function is no longer available")}}}bn.registerPlugin("accessibility",ne),bn.registerPlugin("extract",Vn),bn.registerPlugin("interaction",ye),bn.registerPlugin("particle",_o),bn.registerPlugin("prepare",ya),bn.registerPlugin("batch",On),bn.registerPlugin("tilingSprite",Ba),uo.registerPlugin(Ea),uo.registerPlugin(ka),Fn.registerPlugin(se),Fn.registerPlugin(mo);var ys="5.2.4",gs={AlphaFilter:Ra,BlurFilter:Ua,BlurFilterPass:ja,ColorMatrixFilter:Va,DisplacementFilter:za,FXAAFilter:Ja,NoiseFilter:qa}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,o="undefined"!=typeof ASSERT&&ASSERT;t.exports=r;var a=i(4),s=i(3);function r(t,e){if(!(this instanceof r))return new r(t,e);void 0===t?(this.x=0,this.y=0):"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),o&&r.assert(this)}r.zero=function(){var t=Object.create(r.prototype);return t.x=0,t.y=0,t},r.neo=function(t,e){var i=Object.create(r.prototype);return i.x=t,i.y=e,i},r.clone=function(t){return o&&r.assert(t),r.neo(t.x,t.y)},r.prototype.toString=function(){return JSON.stringify(this)},r.isValid=function(t){return t&&s.isFinite(t.x)&&s.isFinite(t.y)},r.assert=function(t){if(o&&!r.isValid(t))throw n&&a.debug(t),new Error("Invalid Vec2!")},r.prototype.clone=function(){return r.clone(this)},r.prototype.setZero=function(){return this.x=0,this.y=0,this},r.prototype.set=function(t,e){return"object"==typeof t?(o&&r.assert(t),this.x=t.x,this.y=t.y):(o&&s.assert(t),o&&s.assert(e),this.x=t,this.y=e),this},r.prototype.setXY=function(t,e){return this.x=t,this.y=e,this},r.prototype.setVec2=function(t){return this.x=t.x,this.y=t.y,this},r.prototype.wSet=function(t,e,i,n){return void 0!==i||void 0!==n?this.setCombine(t,e,i,n):this.setMul(t,e)},r.prototype.setCombine=function(t,e,i,n){o&&s.assert(t),o&&r.assert(e),o&&s.assert(i),o&&r.assert(n);var a=t*e.x+i*n.x,l=t*e.y+i*n.y;return this.x=a,this.y=l,this},r.prototype.setMul=function(t,e){o&&s.assert(t),o&&r.assert(e);var i=t*e.x,n=t*e.y;return this.x=i,this.y=n,this},r.prototype.add=function(t){return o&&r.assert(t),this.x+=t.x,this.y+=t.y,this},r.prototype.wAdd=function(t,e,i,n){return void 0!==i||void 0!==n?this.addCombine(t,e,i,n):this.addMul(t,e)},r.prototype.addCombine=function(t,e,i,n){o&&s.assert(t),o&&r.assert(e),o&&s.assert(i),o&&r.assert(n);var a=t*e.x+i*n.x,l=t*e.y+i*n.y;return this.x+=a,this.y+=l,this},r.prototype.addMul=function(t,e){o&&s.assert(t),o&&r.assert(e);var i=t*e.x,n=t*e.y;return this.x+=i,this.y+=n,this},r.prototype.wSub=function(t,e,i,n){return void 0!==i||void 0!==n?this.subCombine(t,e,i,n):this.subMul(t,e)},r.prototype.subCombine=function(t,e,i,n){o&&s.assert(t),o&&r.assert(e),o&&s.assert(i),o&&r.assert(n);var a=t*e.x+i*n.x,l=t*e.y+i*n.y;return this.x-=a,this.y-=l,this},r.prototype.subMul=function(t,e){o&&s.assert(t),o&&r.assert(e);var i=t*e.x,n=t*e.y;return this.x-=i,this.y-=n,this},r.prototype.sub=function(t){return o&&r.assert(t),this.x-=t.x,this.y-=t.y,this},r.prototype.mul=function(t){return o&&s.assert(t),this.x*=t,this.y*=t,this},r.prototype.length=function(){return r.lengthOf(this)},r.prototype.lengthSquared=function(){return r.lengthSquared(this)},r.prototype.normalize=function(){var t=this.length();if(t<s.EPSILON)return 0;var e=1/t;return this.x*=e,this.y*=e,t},r.lengthOf=function(t){return o&&r.assert(t),s.sqrt(t.x*t.x+t.y*t.y)},r.lengthSquared=function(t){return o&&r.assert(t),t.x*t.x+t.y*t.y},r.distance=function(t,e){o&&r.assert(t),o&&r.assert(e);var i=t.x-e.x,n=t.y-e.y;return s.sqrt(i*i+n*n)},r.distanceSquared=function(t,e){o&&r.assert(t),o&&r.assert(e);var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},r.areEqual=function(t,e){return o&&r.assert(t),o&&r.assert(e),t==e||"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y},r.skew=function(t){return o&&r.assert(t),r.neo(-t.y,t.x)},r.dot=function(t,e){return o&&r.assert(t),o&&r.assert(e),t.x*e.x+t.y*e.y},r.cross=function(t,e){return"number"==typeof e?(o&&r.assert(t),o&&s.assert(e),r.neo(e*t.y,-e*t.x)):"number"==typeof t?(o&&s.assert(t),o&&r.assert(e),r.neo(-t*e.y,t*e.x)):(o&&r.assert(t),o&&r.assert(e),t.x*e.y-t.y*e.x)},r.crossVec2Vec2=function(t,e){return t.x*e.y-t.y*e.x},r.crossNumVec2_=function(t,e,i){return i.setXY(-t*e.y,t*e.x)},r.crossVec2Num_=function(t,e,i){return i.setXY(e*t.y,-e*t.x)},r.addCross=function(t,e,i){return"number"==typeof i?(o&&r.assert(e),o&&s.assert(i),r.neo(i*e.y+t.x,-i*e.x+t.y)):"number"==typeof e?(o&&s.assert(e),o&&r.assert(i),r.neo(-e*i.y+t.x,e*i.x+t.y)):void(o&&a.assert(!1))},r.add=function(t,e){return o&&r.assert(t),o&&r.assert(e),r.neo(t.x+e.x,t.y+e.y)},r.wAdd=function(t,e,i,n){return void 0!==i||void 0!==n?r.combine(t,e,i,n):r.mul(t,e)},r.combine=function(t,e,i,n){return r.zero().setCombine(t,e,i,n)},r.combine_=function(t,e,i,n,o){return o.setCombine(t,e,i,n)},r.sub=function(t,e){return o&&r.assert(t),o&&r.assert(e),r.neo(t.x-e.x,t.y-e.y)},r.sub_=function(t,e,i){return o&&r.assert(t),o&&r.assert(e),i.setXY(t.x-e.x,t.y-e.y)},r.mul=function(t,e){return"object"==typeof t?(o&&r.assert(t),o&&s.assert(e),r.neo(t.x*e,t.y*e)):"object"==typeof e?(o&&s.assert(t),o&&r.assert(e),r.neo(t*e.x,t*e.y)):void 0},r.mulVec2Num_=function(t,e,i){return i.setXY(t.x*e,t.y*e)},r.mulNumVec2_=function(t,e,i){return i.setXY(t*e.x,t*e.y)},r.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},r.neg=function(t){return o&&r.assert(t),r.neo(-t.x,-t.y)},r.neg_=function(t,e){return o&&r.assert(t),e.setXY(-t.x,-t.y)},r.abs=function(t){return o&&r.assert(t),r.neo(s.abs(t.x),s.abs(t.y))},r.mid=function(t,e){return o&&r.assert(t),o&&r.assert(e),r.neo(.5*(t.x+e.x),.5*(t.y+e.y))},r.upper=function(t,e){return o&&r.assert(t),o&&r.assert(e),r.neo(s.max(t.x,e.x),s.max(t.y,e.y))},r.lower=function(t,e){return o&&r.assert(t),o&&r.assert(e),r.neo(s.min(t.x,e.x),s.min(t.y,e.y))},r.prototype.clamp=function(t){var e=this.x*this.x+this.y*this.y;if(e>t*t){var i=s.invSqrt(e);this.x*=i*t,this.y*=i*t}return this},r.clamp=function(t,e){return(t=r.neo(t.x,t.y)).clamp(e),t},r.scaleFn=function(t,e){return function(i){return r.neo(i.x*t,i.y*e)}},r.translateFn=function(t,e){return function(i){return r.neo(i.x+t,i.y+e)}}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,o="undefined"!=typeof ASSERT&&ASSERT,a=i(4),s=i(9),r=Math,l=t.exports=s(r);l.EPSILON=1e-9,l.isFinite=function(t){return"number"==typeof t&&isFinite(t)&&!isNaN(t)},l.assert=function(t){if(o&&!l.isFinite(t))throw n&&a.debug(t),new Error("Invalid Number!")},l.invSqrt=function(t){return 1/r.sqrt(t)},l.nextPowerOfTwo=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},l.isPowerOfTwo=function(t){return t>0&&0==(t&t-1)},l.mod=function(t,e,i){return void 0===e?(i=1,e=0):void 0===i&&(i=e,e=0),i>e?(t=(t-e)%(i-e))+(t<0?i:e):(t=(t-i)%(e-i))+(t<=0?e:i)},l.clamp=function(t,e,i){return t<e?e:t>i?i:t},l.random=function(t,e){return void 0===t?(e=1,t=0):void 0===e&&(e=t,t=0),t==e?t:r.random()*(e-t)+t}},function(t,e){var i="undefined"!=typeof DEBUG&&DEBUG,n="undefined"!=typeof ASSERT&&ASSERT;e.debug=function(){i&&console.log.apply(console,arguments)},e.assert=function(t,e,i){if(n&&!t)throw i&&console.log(i),new Error(e)}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,o="undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var a=i(4),s=i(2),r=i(6);function l(t,e){if(!(this instanceof l))return new l(t,e);this.p=s.zero(),this.q=r.identity(),void 0!==t&&this.p.set(t),void 0!==e&&this.q.set(e)}l.clone=function(t){var e=Object.create(l.prototype);return e.p=s.clone(t.p),e.q=r.clone(t.q),e},l.neo=function(t,e){var i=Object.create(l.prototype);return i.p=s.clone(t),i.q=r.clone(e),i},l.identity=function(){var t=Object.create(l.prototype);return t.p=s.zero(),t.q=r.identity(),t},l.prototype.setIdentity=function(){return this.p.setZero(),this.q.setIdentity(),this},l.prototype.set=function(t,e){void 0===e?(this.p.set(t.p),this.q.set(t.q)):(this.p.set(t),this.q.set(e))},l.isValid=function(t){return t&&s.isValid(t.p)&&r.isValid(t.q)},l.assert=function(t){if(o&&!l.isValid(t))throw n&&a.debug(t),new Error("Invalid Transform!")},l.mul=function(t,e){if(o&&l.assert(t),Array.isArray(e)){for(var i=[],n=0;n<e.length;n++)i[n]=l.mul(t,e[n]);return i}if("x"in e&&"y"in e){o&&s.assert(e);var a=t.q.c*e.x-t.q.s*e.y+t.p.x,h=t.q.s*e.x+t.q.c*e.y+t.p.y;return s.neo(a,h)}if("p"in e&&"q"in e){o&&l.assert(e);var c=l.identity();return c.q=r.mulRot(t.q,e.q),c.p=s.add(r.mulVec2(t.q,e.p),t.p),c}},l.mulAll=function(t,e){o&&l.assert(t);for(var i=[],n=0;n<e.length;n++)i[n]=l.mul(t,e[n]);return i},l.mulFn=function(t){return o&&l.assert(t),function(e){return l.mul(t,e)}},l.mulVec2=function(t,e){o&&l.assert(t),o&&s.assert(e);var i=t.q.c*e.x-t.q.s*e.y+t.p.x,n=t.q.s*e.x+t.q.c*e.y+t.p.y;return s.neo(i,n)},l.mulVec2_=function(t,e,i){o&&l.assert(t),o&&s.assert(e);var n=t.q.c*e.x-t.q.s*e.y+t.p.x,a=t.q.s*e.x+t.q.c*e.y+t.p.y;return i.set(n,a)},l.mulXf=function(t,e){o&&l.assert(t),o&&l.assert(e);var i=l.identity();return i.q=r.mulRot(t.q,e.q),i.p=s.add(r.mulVec2(t.q,e.p),t.p),i},l.mulT=function(t,e){if(o&&l.assert(t),"x"in e&&"y"in e){o&&s.assert(e);var i=e.x-t.p.x,n=e.y-t.p.y,a=t.q.c*i+t.q.s*n,h=-t.q.s*i+t.q.c*n;return s.neo(a,h)}if("p"in e&&"q"in e){o&&l.assert(e);var c=l.identity();return c.q.set(r.mulTRot(t.q,e.q)),c.p.set(r.mulTVec2(t.q,s.sub(e.p,t.p))),c}},l.mulTVec2=function(t,e){o&&l.assert(t),o&&s.assert(e);var i=e.x-t.p.x,n=e.y-t.p.y,a=t.q.c*i+t.q.s*n,r=-t.q.s*i+t.q.c*n;return s.neo(a,r)},l.mulTVec2_=function(t,e,i){o&&l.assert(t),o&&s.assert(e);var n=e.x-t.p.x,a=e.y-t.p.y,r=t.q.c*n+t.q.s*a,h=-t.q.s*n+t.q.c*a;return i.set(r,h)},l.mulTXf=function(t,e){o&&l.assert(t),o&&l.assert(e);var i=l.identity();return i.q.set(r.mulTRot(t.q,e.q)),i.p.set(r.mulTVec2(t.q,s.sub(e.p,t.p))),i};var h=s.zero();l.mulTXf_=function(t,e,i){return o&&l.assert(t),o&&l.assert(e),r.mulTRot_(t.q,e.q,i.q),r.mulTVec2_(t.q,s.sub(e.p,t.p,h),i.p),i}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,o="undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var a=i(4),s=i(2),r=i(3);function l(t){if(!(this instanceof l))return new l(t);"number"==typeof t?this.setAngle(t):"object"==typeof t?this.set(t):this.setIdentity()}l.neo=function(t){var e=Object.create(l.prototype);return e.setAngle(t),e},l.clone=function(t){o&&l.assert(t);var e=Object.create(l.prototype);return e.s=t.s,e.c=t.c,e},l.identity=function(){var t=Object.create(l.prototype);return t.s=0,t.c=1,t},l.isValid=function(t){return t&&r.isFinite(t.s)&&r.isFinite(t.c)},l.assert=function(t){if(o&&!l.isValid(t))throw n&&a.debug(t),new Error("Invalid Rot!")},l.prototype.setIdentity=function(){return this.s=0,this.c=1,this},l.prototype.set=function(t){"object"==typeof t?(o&&l.assert(t),this.s=t.s,this.c=t.c):(o&&r.assert(t),this.s=r.sin(t),this.c=r.cos(t))},l.prototype.setAngle=function(t){o&&r.assert(t),this.s=r.sin(t),this.c=r.cos(t)},l.prototype.getAngle=function(){return r.atan2(this.s,this.c)},l.prototype.getXAxis=function(){return s.neo(this.c,this.s)},l.prototype.getYAxis=function(){return s.neo(-this.s,this.c)},l.mul=function(t,e){if(o&&l.assert(t),"c"in e&&"s"in e){o&&l.assert(e);var i=l.identity();return i.s=t.s*e.c+t.c*e.s,i.c=t.c*e.c-t.s*e.s,i}if("x"in e&&"y"in e)return o&&s.assert(e),s.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},l.mulRot=function(t,e){o&&l.assert(t),o&&l.assert(e);var i=l.identity();return i.s=t.s*e.c+t.c*e.s,i.c=t.c*e.c-t.s*e.s,i},l.mulVec2=function(t,e){return o&&l.assert(t),o&&s.assert(e),s.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},l.mulVec2_=function(t,e,i){return o&&l.assert(t),o&&s.assert(e),i.set(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},l.mulSub=function(t,e,i){var n=t.c*(e.x-i.x)-t.s*(e.y-i.y),o=t.s*(e.x-i.y)+t.c*(e.y-i.y);return s.neo(n,o)},l.mulT=function(t,e){if("c"in e&&"s"in e){o&&l.assert(e);var i=l.identity();return i.s=t.c*e.s-t.s*e.c,i.c=t.c*e.c+t.s*e.s,i}if("x"in e&&"y"in e)return o&&s.assert(e),s.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)},l.mulTRot=function(t,e){o&&l.assert(e);var i=l.identity();return i.s=t.c*e.s-t.s*e.c,i.c=t.c*e.c+t.s*e.s,i},l.mulTRot_=function(t,e,i){o&&l.assert(e);var n=i.setIdentity();return n.s=t.c*e.s-t.s*e.c,n.c=t.c*e.c+t.s*e.s,n},l.mulTVec2=function(t,e){return o&&s.assert(e),s.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)},l.mulTVec2_=function(t,e,i){return o&&s.assert(e),i.set(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var i=e;i.maxManifoldPoints=2,i.maxPolygonVertices=12,i.aabbExtension=.1,i.aabbMultiplier=2,i.linearSlop=.005,i.linearSlopSquared=i.linearSlop*i.linearSlop,i.angularSlop=2/180*Math.PI,i.polygonRadius=2*i.linearSlop,i.maxSubSteps=8,i.maxTOIContacts=32,i.maxTOIIterations=20,i.maxDistnceIterations=20,i.velocityThreshold=1,i.maxLinearCorrection=.2,i.maxAngularCorrection=8/180*Math.PI,i.maxTranslation=2,i.maxTranslationSquared=i.maxTranslation*i.maxTranslation,i.maxRotation=.5*Math.PI,i.maxRotationSquared=i.maxRotation*i.maxRotation,i.baumgarte=.2,i.toiBaugarte=.75,i.timeToSleep=.5,i.linearSleepTolerance=.01,i.linearSleepToleranceSqr=Math.pow(i.linearSleepTolerance,2),i.angularSleepTolerance=2/180*Math.PI,i.angularSleepToleranceSqr=Math.pow(i.angularSleepTolerance,2)},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,Object.prototype.propertyIsEnumerable;t.exports=function(t,e){for(var i in null==t&&(t={}),e)e.hasOwnProperty(i)&&void 0===t[i]&&(t[i]=e[i]);if("function"==typeof Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),o=0;o<n.length;o++){var a=n[o];e.propertyIsEnumerable(a)&&void 0===t[i]&&(t[a]=e[a])}return t}},function(t,e){if("function"==typeof Object.create)t.exports=function(t,e){return Object.create.call(Object,t,e)};else{function i(){}t.exports=function(t,e){if(e)throw Error("Second argument is not supported!");if("object"!=typeof t||null===t)throw Error("Invalid prototype!");return i.prototype=t,new i}}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,o="undefined"!=typeof ASSERT&&ASSERT;t.exports=r;var a=i(4),s=i(3);function r(t,e,i){if(!(this instanceof r))return new r(t,e,i);void 0===t?(this.x=0,this.y=0,this.z=0):"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t,this.y=e,this.z=i),o&&r.assert(this)}r.neo=function(t,e,i){var n=Object.create(r.prototype);return n.x=t,n.y=e,n.z=i,n},r.clone=function(t){return o&&r.assert(t),r.neo(t.x,t.y,t.z)},r.prototype.toString=function(){return JSON.stringify(this)},r.isValid=function(t){return t&&s.isFinite(t.x)&&s.isFinite(t.y)&&s.isFinite(t.z)},r.assert=function(t){if(o&&!r.isValid(t))throw n&&a.debug(t),new Error("Invalid Vec3!")},r.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},r.prototype.set=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},r.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},r.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},r.areEqual=function(t,e){return o&&r.assert(t),o&&r.assert(e),t==e||"object"==typeof t&&null!==t&&"object"==typeof e&&null!==e&&t.x===e.x&&t.y===e.y&&t.z===e.z},r.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},r.cross=function(t,e){return new r(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},r.add=function(t,e){return new r(t.x+e.x,t.y+e.y,t.z+e.z)},r.sub=function(t,e){return new r(t.x-e.x,t.y-e.y,t.z-e.z)},r.mul=function(t,e){return new r(e*t.x,e*t.y,e*t.z)},r.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},r.neg=function(t){return new r(-t.x,-t.y,-t.z)}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,o="undefined"!=typeof ASSERT&&ASSERT;t.exports=r;var a=i(4),s=(i(3),i(2));function r(t,e,i,n){"object"==typeof t&&null!==t?(this.ex=s.clone(t),this.ey=s.clone(e)):"number"==typeof t?(this.ex=s.neo(t,i),this.ey=s.neo(e,n)):(this.ex=s.zero(),this.ey=s.zero())}r.prototype.toString=function(){return JSON.stringify(this)},r.isValid=function(t){return t&&s.isValid(t.ex)&&s.isValid(t.ey)},r.assert=function(t){if(o&&!r.isValid(t))throw n&&a.debug(t),new Error("Invalid Mat22!")},r.prototype.set=function(t,e,i,n){"number"==typeof t&&"number"==typeof e&&"number"==typeof i&&"number"==typeof n?(this.ex.set(t,i),this.ey.set(e,n)):"object"==typeof t&&"object"==typeof e?(this.ex.set(t),this.ey.set(e)):"object"==typeof t?(o&&r.assert(t),this.ex.set(t.ex),this.ey.set(t.ey)):o&&a.assert(!1)},r.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},r.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},r.prototype.getInverse=function(){var t=this.ex.x,e=this.ey.x,i=this.ex.y,n=this.ey.y,o=t*n-e*i;0!=o&&(o=1/o);var a=new r;return a.ex.x=o*n,a.ey.x=-o*e,a.ex.y=-o*i,a.ey.y=o*t,a},r.prototype.solve=function(t){o&&s.assert(t);var e=this.ex.x,i=this.ey.x,n=this.ex.y,a=this.ey.y,r=e*a-i*n;0!=r&&(r=1/r);var l=s.zero();return l.x=r*(a*t.x-i*t.y),l.y=r*(e*t.y-n*t.x),l},r.mul=function(t,e){if(e&&"x"in e&&"y"in e){o&&s.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return s.neo(i,n)}if(e&&"ex"in e&&"ey"in e)return o&&r.assert(e),new r(s.mul(t,e.ex),s.mul(t,e.ey));o&&a.assert(!1)},r.mulVec2=function(t,e){o&&s.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return s.neo(i,n)},r.mulVec2_=function(t,e,i){o&&s.assert(e);var n=t.ex.x*e.x+t.ey.x*e.y,a=t.ex.y*e.x+t.ey.y*e.y;return i.set(n,a)},r.mulMat22=function(t,e){return o&&r.assert(e),new r(s.mul(t,e.ex),s.mul(t,e.ey))},r.mulT=function(t,e){return e&&"x"in e&&"y"in e?(o&&s.assert(e),s.neo(s.dot(e,t.ex),s.dot(e,t.ey))):e&&"ex"in e&&"ey"in e?(o&&r.assert(e),new r(s.neo(s.dot(t.ex,e.ex),s.dot(t.ey,e.ex)),s.neo(s.dot(t.ex,e.ey),s.dot(t.ey,e.ey)))):void(o&&a.assert(!1))},r.mulTVec2=function(t,e){return o&&r.assert(t),o&&s.assert(e),s.neo(s.dot(e,t.ex),s.dot(e,t.ey))},r.mulTMat22=function(t,e){return o&&r.assert(t),o&&r.assert(e),new r(s.neo(s.dot(t.ex,e.ex),s.dot(t.ey,e.ex)),s.neo(s.dot(t.ex,e.ey),s.dot(t.ey,e.ey)))},r.abs=function(t){return o&&r.assert(t),new r(s.abs(t.ex),s.abs(t.ey))},r.add=function(t,e){return o&&r.assert(t),o&&r.assert(e),new r(s.add(t.ex+e.ex),s.add(t.ey+e.ey))}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=h;var o=i(4),a=i(3),s=i(2),r=i(6),l=i(5);function h(t,e){n&&o.assert(void 0===t),n&&o.assert(void 0===e),this.localCenter=s.zero(),this.c=s.zero(),this.a=0,this.alpha0=0,this.c0=s.zero(),this.a0=0}h.prototype.setTransform=function(t){var e=l.mulVec2(t,this.localCenter);this.c.set(e),this.c0.set(e),this.a=t.q.getAngle(),this.a0=t.q.getAngle()},h.prototype.setLocalCenter=function(t,e){this.localCenter.set(t);var i=l.mulVec2(e,this.localCenter);this.c.set(i),this.c0.set(i)},h.prototype.getTransform=function(t,e){e=void 0===e?0:e,t.q.setAngle((1-e)*this.a0+e*this.a),t.p.setCombine(1-e,this.c0,e,this.c),t.p.sub(r.mulVec2(t.q,this.localCenter))},h.prototype.advance=function(t){n&&o.assert(this.alpha0<1);var e=(t-this.alpha0)/(1-this.alpha0);this.c0.setCombine(e,this.c,1-e,this.c0),this.a0=e*this.a+(1-e)*this.a0,this.alpha0=t},h.prototype.forward=function(){this.a0=this.a,this.c0.set(this.c)},h.prototype.normalize=function(){var t=a.mod(this.a0,-a.PI,+a.PI);this.a-=this.a0-t,this.a0=t},h.prototype.clone=function(){var t=new h;return t.localCenter.set(this.localCenter),t.alpha0=this.alpha0,t.a0=this.a0,t.a=this.a,t.c0.set(this.c0),t.c.set(this.c),t},h.prototype.set=function(t){this.localCenter.set(t.localCenter),this.alpha0=t.alpha0,this.a0=t.a0,this.a=t.a,this.c0.set(t.c0),this.c.set(t.c)}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,o="undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var a=i(4),s=(i(3),i(2)),r=i(10);function l(t,e,i){"object"==typeof t&&null!==t?(this.ex=r.clone(t),this.ey=r.clone(e),this.ez=r.clone(i)):(this.ex=r(),this.ey=r(),this.ez=r())}l.prototype.toString=function(){return JSON.stringify(this)},l.isValid=function(t){return t&&r.isValid(t.ex)&&r.isValid(t.ey)&&r.isValid(t.ez)},l.assert=function(t){if(o&&!l.isValid(t))throw n&&a.debug(t),new Error("Invalid Mat33!")},l.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},l.prototype.solve33=function(t){var e=r.dot(this.ex,r.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=new r;return i.x=e*r.dot(t,r.cross(this.ey,this.ez)),i.y=e*r.dot(this.ex,r.cross(t,this.ez)),i.z=e*r.dot(this.ex,r.cross(this.ey,t)),i},l.prototype.solve22=function(t){var e=this.ex.x,i=this.ey.x,n=this.ex.y,o=this.ey.y,a=e*o-i*n;0!=a&&(a=1/a);var r=s.zero();return r.x=a*(o*t.x-i*t.y),r.y=a*(e*t.y-n*t.x),r},l.prototype.getInverse22=function(t){var e=this.ex.x,i=this.ey.x,n=this.ex.y,o=this.ey.y,a=e*o-i*n;0!=a&&(a=1/a),t.ex.x=a*o,t.ey.x=-a*i,t.ex.z=0,t.ex.y=-a*n,t.ey.y=a*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0},l.prototype.getSymInverse33=function(t){var e=r.dot(this.ex,r.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=this.ex.x,n=this.ey.x,o=this.ez.x,a=this.ey.y,s=this.ez.y,l=this.ez.z;t.ex.x=e*(a*l-s*s),t.ex.y=e*(o*s-n*l),t.ex.z=e*(n*s-o*a),t.ey.x=t.ex.y,t.ey.y=e*(i*l-o*o),t.ey.z=e*(o*n-i*s),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(i*a-n*n)},l.mul=function(t,e){if(o&&l.assert(t),e&&"z"in e&&"y"in e&&"x"in e){o&&r.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,n=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,h=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new r(i,n,h)}if(e&&"y"in e&&"x"in e){o&&s.assert(e);i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return s.neo(i,n)}o&&a.assert(!1)},l.mulVec3=function(t,e){o&&l.assert(t),o&&r.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,n=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,a=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new r(i,n,a)},l.mulVec2=function(t,e){o&&l.assert(t),o&&s.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return s.neo(i,n)},l.add=function(t,e){return o&&l.assert(t),o&&l.assert(e),new l(r.add(t.ex+e.ex),r.add(t.ey+e.ey),r.add(t.ez+e.ez))}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=function(){this.v=n.zero(),this.w=0};var n=i(2)},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=a;var n=i(2),o=i(6);function a(){this.c=n.zero(),this.a=0}a.prototype.getTransform=function(t,e){return t.q.set(this.a),t.p.set(n.sub(this.c,o.mulVec2(t.q,e))),t}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=s;var o=i(4);function a(){this.other=null,this.joint=null,this.prev=null,this.next=null}function s(t,e,i){e=t.bodyA||e,i=t.bodyB||i,n&&o.assert(e),n&&o.assert(i),n&&o.assert(e!=i),this.m_type="unknown-joint",this.m_bodyA=e,this.m_bodyB=i,this.m_index=0,this.m_collideConnected=!!t.collideConnected,this.m_prev=null,this.m_next=null,this.m_edgeA=new a,this.m_edgeB=new a,this.m_islandFlag=!1,this.m_userData=t.userData}s.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},s.prototype.getType=function(){return this.m_type},s.prototype.getBodyA=function(){return this.m_bodyA},s.prototype.getBodyB=function(){return this.m_bodyB},s.prototype.getNext=function(){return this.m_next},s.prototype.getUserData=function(){return this.m_userData},s.prototype.setUserData=function(t){this.m_userData=t},s.prototype.getCollideConnected=function(){return this.m_collideConnected},s.prototype.getAnchorA=function(){},s.prototype.getAnchorB=function(){},s.prototype.getReactionForce=function(t){},s.prototype.getReactionTorque=function(t){},s.prototype.shiftOrigin=function(t){},s.prototype.initVelocityConstraints=function(t){},s.prototype.solveVelocityConstraints=function(t){},s.prototype.solvePositionConstraints=function(t){}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e,i,n){void 0===i&&(i=!1),o(this,t),this._fn=e,this._once=i,this._thisArg=n,this._next=this._prev=this._owner=null}return n(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var r=function(){function t(){o(this,t),this._head=this._tail=void 0}return n(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof a))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new a(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new a(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof a))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();r.MiniSignalBinding=a,e.default=r,t.exports=e.default},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,o="undefined"!=typeof ASSERT&&ASSERT,a=(i(7),i(3)),s=i(2);function r(t,e){if(!(this instanceof r))return new r(t,e);this.lowerBound=s.zero(),this.upperBound=s.zero(),"object"==typeof t&&this.lowerBound.set(t),"object"==typeof e&&this.upperBound.set(e)}t.exports=r,r.prototype.isValid=function(){return r.isValid(this)},r.isValid=function(t){var e=s.sub(t.upperBound,t.lowerBound);return e.x>=0&&e.y>=0&&s.isValid(t.lowerBound)&&s.isValid(t.upperBound)},r.assert=function(t){if(o&&!r.isValid(t))throw n&&common.debug(t),new Error("Invalid AABB!")},r.prototype.getCenter=function(){return s.neo(.5*(this.lowerBound.x+this.upperBound.x),.5*(this.lowerBound.y+this.upperBound.y))},r.prototype.getExtents=function(){return s.neo(.5*(this.upperBound.x-this.lowerBound.x),.5*(this.upperBound.y-this.lowerBound.y))},r.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},r.prototype.combine=function(t,e){var i=t.lowerBound,n=t.upperBound,o=e.lowerBound,s=e.upperBound,r=a.min(i.x,o.x),l=a.min(i.y,o.y),h=a.max(s.x,n.x),c=a.max(s.y,n.y);this.lowerBound.set(r,l),this.upperBound.set(h,c)},r.prototype.combinePoints=function(t,e){this.lowerBound.set(a.min(t.x,e.x),a.min(t.y,e.y)),this.upperBound.set(a.max(t.x,e.x),a.max(t.y,e.y))},r.prototype.set=function(t){this.lowerBound.set(t.lowerBound.x,t.lowerBound.y),this.upperBound.set(t.upperBound.x,t.upperBound.y)},r.prototype.contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},r.prototype.extend=function(t){r.extend(this,t)},r.extend=function(t,e){t.lowerBound.x-=e,t.lowerBound.y-=e,t.upperBound.x+=e,t.upperBound.y+=e},r.testOverlap=function(t,e){var i=e.lowerBound.x-t.upperBound.x,n=t.lowerBound.x-e.upperBound.x,o=e.lowerBound.y-t.upperBound.y,a=t.lowerBound.y-e.upperBound.y;return!(i>0||o>0||n>0||a>0)},r.areEqual=function(t,e){return s.areEqual(t.lowerBound,e.lowerBound)&&s.areEqual(t.upperBound,e.upperBound)},r.diff=function(t,e){var i=a.max(0,a.min(t.upperBound.x,e.upperBound.x)-a.max(e.lowerBound.x,t.lowerBound.x)),n=a.max(0,a.min(t.upperBound.y,e.upperBound.y)-a.max(e.lowerBound.y,t.lowerBound.y));return(t.upperBound.x-t.lowerBound.x)*(t.upperBound.y-t.lowerBound.y)+(e.upperBound.x-e.lowerBound.x)*(e.upperBound.y-e.lowerBound.y)-i*n},r.prototype.rayCast=function(t,e){for(var i=-1/0,n=1/0,o=e.p1,r=s.sub(e.p2,e.p1),l=s.abs(r),h=s.zero(),c="x";null!==c;c="x"===c?"y":null)if(l.x<a.EPSILON){if(o[c]<this.lowerBound[c]||this.upperBound[c]<o[c])return!1}else{var u=1/r[c],m=(this.lowerBound[c]-o[c])*u,p=(this.upperBound[c]-o[c])*u,d=-1;if(m>p){var f=m;m=p,p=f,d=1}if(m>i&&(h.setZero(),h[c]=d,i=m),i>(n=a.min(n,p)))return!1}return!(i<0||e.maxFraction<i)&&(t.fraction=i,t.normal=h,!0)},r.prototype.toString=function(){return JSON.stringify(this)}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,o=i(4),a=i(40),s=i(3),r=i(2),l=i(5),h=i(11),c=i(6),u=i(7),m=i(21),p=i(25);function d(t){this.contact=t,this.prev=null,this.next=null,this.other=null}function f(){this.m_nodeA=new d(this),this.m_nodeB=new d(this),this.m_manifold=new m,this.v_points_cache=[new R,new R],this.v_points=[],this.v_normal=r.zero(),this.v_normalMass=new h,this.v_K=new h,this.p_localPoints_cache=[r.zero(),r.zero()],this.p_localPoints=[],this.p_localNormal=r.zero(),this.p_localPoint=r.zero(),this.p_localCenterA=r.zero(),this.p_localCenterB=r.zero()}t.exports=f,f.prototype.init=function(t,e,i,n,o){this.m_fixtureA=t,this.m_fixtureB=i,this.m_indexA=e,this.m_indexB=n,this.m_evaluateFcn=o,this.m_manifold.init(),this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=K(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=$(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution),this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.v_points.length=0,this.v_normal.setZero(),this.v_normalMass.setZero(),this.v_K.setZero(),this.v_pointCount=null,this.v_tangentSpeed=null,this.v_friction=null,this.v_restitution=null,this.v_invMassA=null,this.v_invMassB=null,this.v_invIA=null,this.v_invIB=null,this.p_localPoints.length=0,this.p_localNormal.setZero(),this.p_localPoint.setZero(),this.p_localCenterA.setZero(),this.p_localCenterB.setZero(),this.p_type=null,this.p_radiusA=null,this.p_radiusB=null,this.p_pointCount=null,this.p_invMassA=null,this.p_invMassB=null,this.p_invIA=null,this.p_invIB=null},f.prototype.initConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,a=e.getShape(),s=i.getShape(),r=e.getBody(),l=i.getBody(),h=this.m_manifold,c=h.pointCount;n&&o.assert(c>0),this.v_invMassA=r.m_invMass,this.v_invMassB=l.m_invMass,this.v_invIA=r.m_invI,this.v_invIB=l.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=c,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=r.m_invMass,this.p_invMassB=l.m_invMass,this.p_invIA=r.m_invI,this.p_invIB=l.m_invI,this.p_localCenterA.setVec2(r.m_sweep.localCenter),this.p_localCenterB.setVec2(l.m_sweep.localCenter),this.p_radiusA=a.m_radius,this.p_radiusB=s.m_radius,this.p_type=h.type,this.p_localNormal.setVec2(h.localNormal),this.p_localPoint.setVec2(h.localPoint),this.p_pointCount=c;for(var u=0;u<c;++u){var m=h.points[u],p=this.v_points[u]=this.v_points_cache[u].init();t.warmStarting?(p.normalImpulse=t.dtRatio*m.normalImpulse,p.tangentImpulse=t.dtRatio*m.tangentImpulse):(p.normalImpulse=0,p.tangentImpulse=0),p.rA.setZero(),p.rB.setZero(),p.normalMass=0,p.tangentMass=0,p.velocityBias=0,this.p_localPoints[u]=this.p_localPoints_cache[u].setVec2(m.localPoint)}},f.prototype.getManifold=function(){return this.m_manifold},f.prototype.getWorldManifold=function(t){var e=this.m_fixtureA.getBody(),i=this.m_fixtureB.getBody(),n=this.m_fixtureA.getShape(),o=this.m_fixtureB.getShape();return this.m_manifold.getWorldManifold(t,e.getTransform(),n.m_radius,i.getTransform(),o.m_radius)},f.prototype.setEnabled=function(t){this.m_enabledFlag=!!t},f.prototype.isEnabled=function(){return this.m_enabledFlag},f.prototype.isTouching=function(){return this.m_touchingFlag},f.prototype.getNext=function(){return this.m_next},f.prototype.getFixtureA=function(){return this.m_fixtureA},f.prototype.getFixtureB=function(){return this.m_fixtureB},f.prototype.getChildIndexA=function(){return this.m_indexA},f.prototype.getChildIndexB=function(){return this.m_indexB},f.prototype.flagForFiltering=function(){this.m_filterFlag=!0},f.prototype.setFriction=function(t){this.m_friction=t},f.prototype.getFriction=function(){return this.m_friction},f.prototype.resetFriction=function(){this.m_friction=K(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},f.prototype.setRestitution=function(t){this.m_restitution=t},f.prototype.getRestitution=function(){return this.m_restitution},f.prototype.resetRestitution=function(){this.m_restitution=$(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},f.prototype.setTangentSpeed=function(t){this.m_tangentSpeed=t},f.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},f.prototype.evaluate=function(t,e,i){this.m_evaluateFcn(t,e,this.m_fixtureA,this.m_indexA,i,this.m_fixtureB,this.m_indexB)};var y=new m;f.prototype.update=function(t){this.m_enabledFlag=!0;var e=!1,i=this.m_touchingFlag,n=this.m_fixtureA.isSensor(),o=this.m_fixtureB.isSensor(),a=n||o,s=this.m_fixtureA.getBody(),r=this.m_fixtureB.getBody(),l=s.getTransform(),h=r.getTransform();if(a){var c=this.m_fixtureA.getShape(),u=this.m_fixtureB.getShape();e=p.testOverlap(c,this.m_indexA,u,this.m_indexB,l,h),this.m_manifold.pointCount=0}else{var m=this.m_manifold;this.m_manifold=y.init(),y=m,this.evaluate(this.m_manifold,l,h),e=this.m_manifold.pointCount>0;for(var d=0;d<this.m_manifold.pointCount;++d){var f=this.m_manifold.points[d];f.normalImpulse=0,f.tangentImpulse=0;for(var g=0;g<m.pointCount;++g){var v=m.points[g];if(v.id.key==f.id.key){f.normalImpulse=v.normalImpulse,f.tangentImpulse=v.tangentImpulse;break}}}e!==i&&(s.setAwake(!0),r.setAwake(!0))}this.m_touchingFlag=e,!i&&e&&t&&t.beginContact(this),i&&!e&&t&&t.endContact(this),!a&&e&&t&&t.preSolve(this,m)},f.prototype.solvePositionConstraint=function(t){return this._solvePositionConstraint(t,!1)},f.prototype.solvePositionConstraintTOI=function(t,e,i){return this._solvePositionConstraint(t,!0,e,i)};var g=r.zero(),v=r.zero(),_=r.zero(),b=r.zero(),x=l.identity(),S=l.identity(),k=r.zero(),w=r.zero(),A=r.zero(),P=r.zero(),T=r.zero(),C=r.zero(),I=r.zero(),B=r.zero(),L=r.zero(),E=r.zero(),M=r.zero();function R(){this.rA=r.zero(),this.rB=r.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}f.prototype._solvePositionConstraint=function(t,e,i,n){var o=this.m_fixtureA,a=this.m_fixtureB,h=o.getBody(),p=a.getBody(),d=(h.c_velocity,p.c_velocity,h.c_position),f=p.c_position,y=g.setVec2(this.p_localCenterA),R=v.setVec2(this.p_localCenterB),D=0,O=0;e&&h!==i&&h!==n||(D=this.p_invMassA,O=this.p_invIA);var F=0,j=0;e&&p!==i&&p!==n||(F=this.p_invMassB,j=this.p_invIB);for(var U=_.setVec2(d.c),N=d.a,V=b.setVec2(f.c),G=f.a,X=0,z=0;z<this.p_pointCount;++z){var H,W,J,Y=x.setIdentity(),q=S.setIdentity();switch(Y.q.set(N),q.q.set(G),Y.p.setVec2(r.sub_(U,c.mulVec2_(Y.q,y,k),w)),q.p.setVec2(r.sub_(V,c.mulVec2_(q.q,R,k),w)),this.p_type){case m.e_circles:var Z=l.mulVec2_(Y,this.p_localPoint,T),K=l.mulVec2_(q,this.p_localPoints[0],C);(H=r.sub_(K,Z,A)).normalize(),W=r.combine_(.5,Z,.5,K,P),J=r.dot(r.sub(K,Z),H)-this.p_radiusA-this.p_radiusB;break;case m.e_faceA:H=c.mulVec2_(Y.q,this.p_localNormal,A);var $=l.mulVec2_(Y,this.p_localPoint,I),Q=l.mulVec2_(q,this.p_localPoints[z],B);J=r.dot(r.sub_(Q,$,k),H)-this.p_radiusA-this.p_radiusB,W=P.setVec2(Q);break;case m.e_faceB:H=c.mulVec2_(q.q,this.p_localNormal,A);$=l.mulVec2_(q,this.p_localPoint,I),Q=l.mulVec2_(Y,this.p_localPoints[z],B);J=r.dot(r.sub_(Q,$,k),H)-this.p_radiusA-this.p_radiusB,W=P.setVec2(Q),H.mul(-1)}var tt=r.sub_(W,U,L),et=r.sub_(W,V,E);X=s.min(X,J);var it=e?u.toiBaugarte:u.baumgarte,nt=u.linearSlop,ot=u.maxLinearCorrection,at=s.clamp(it*(J+nt),-ot,0),st=r.crossVec2Vec2(tt,H),rt=r.crossVec2Vec2(et,H),lt=D+F+O*st*st+j*rt*rt,ht=lt>0?-at/lt:0,ct=r.mulNumVec2_(ht,H,M);U.subMul(D,ct),N-=O*r.crossVec2Vec2(tt,ct),V.addMul(F,ct),G+=j*r.crossVec2Vec2(et,ct)}return d.c.setVec2(U),d.a=N,f.c.setVec2(V),f.a=G,X},R.prototype.init=function(){return this.rA.setZero(),this.rB.setZero(),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0,this};var D=r.zero(),O=r.zero(),F=r.zero(),j=r.zero(),U=r.zero(),N=r.zero(),V=r.zero(),G=r.zero(),X=r.zero(),z=l.identity(),H=l.identity();f.prototype.initVelocityConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,a=e.getBody(),s=i.getBody(),l=a.c_velocity,h=s.c_velocity,m=a.c_position,p=s.c_position,d=this.p_radiusA,f=this.p_radiusB,y=this.m_manifold,g=this.v_invMassA,v=this.v_invMassB,_=this.v_invIA,b=this.v_invIB,x=D.setVec2(this.p_localCenterA),S=O.setVec2(this.p_localCenterB),k=j.setVec2(m.c),w=m.a,A=N.setVec2(l.v),P=l.w,T=U.set(p.c),C=p.a,I=V.set(h.v),B=h.w;n&&o.assert(y.pointCount>0);var L=z.setIdentity(),E=H.setIdentity();L.q.set(w),E.q.set(C),L.p.setCombine(1,k,-1,c.mulVec2(L.q,x)),E.p.setCombine(1,T,-1,c.mulVec2(E.q,S));var M=y.getWorldManifold(null,L,d,E,f);this.v_normal.set(M.normal);for(var R=0;R<this.v_pointCount;++R){var W=this.v_points[R];W.rA.setCombine(1,M.points[R],-1,k),W.rB.setCombine(1,M.points[R],-1,T);var J=r.crossVec2Vec2(W.rA,this.v_normal),Y=r.crossVec2Vec2(W.rB,this.v_normal),q=g+v+_*J*J+b*Y*Y;W.normalMass=q>0?1/q:0;var Z=r.crossVec2Num_(this.v_normal,1,F),K=r.crossVec2Vec2(W.rA,Z),$=r.crossVec2Vec2(W.rB,Z),Q=g+v+_*K*K+b*$*$;W.tangentMass=Q>0?1/Q:0,W.velocityBias=0;var tt=r.dot(this.v_normal,I)+r.dot(this.v_normal,r.crossNumVec2_(B,W.rB,G))-r.dot(this.v_normal,A)-r.dot(this.v_normal,r.crossNumVec2_(P,W.rA,X));tt<-u.velocityThreshold&&(W.velocityBias=-this.v_restitution*tt)}if(2===this.v_pointCount&&t.blockSolve){var et=this.v_points[0],it=this.v_points[1],nt=r.crossVec2Vec2(et.rA,this.v_normal),ot=r.crossVec2Vec2(et.rB,this.v_normal),at=r.crossVec2Vec2(it.rA,this.v_normal),st=r.crossVec2Vec2(it.rB,this.v_normal),rt=g+v+_*nt*nt+b*ot*ot,lt=g+v+_*at*at+b*st*st,ht=g+v+_*nt*at+b*ot*st;rt*rt<1e3*(rt*lt-ht*ht)?(this.v_K.ex.set(rt,ht),this.v_K.ey.set(ht,lt),this.v_normalMass.set(this.v_K.getInverse())):this.v_pointCount=1}m.c.set(k),m.a=w,l.v.set(A),l.w=P,p.c.set(T),p.a=C,h.v.set(I),h.w=B};var W=r.zero(),J=r.zero(),Y=r.zero(),q=r.zero();f.prototype.warmStartConstraint=function(t){for(var e=this.m_fixtureA,i=this.m_fixtureB,n=e.getBody(),o=i.getBody(),a=n.c_velocity,s=o.c_velocity,l=(n.c_position,o.c_position,this.v_invMassA),h=this.v_invIA,c=this.v_invMassB,u=this.v_invIB,m=W.set(a.v),p=a.w,d=J.set(s.v),f=s.w,y=this.v_normal,g=r.crossVec2Num_(y,1,Y),v=0;v<this.v_pointCount;++v){var _=this.v_points[v],b=q.setCombine(_.normalImpulse,y,_.tangentImpulse,g);p-=h*r.crossVec2Vec2(_.rA,b),m.subMul(l,b),f+=u*r.crossVec2Vec2(_.rB,b),d.addMul(c,b)}a.v.set(m),a.w=p,s.v.set(d),s.w=f},f.prototype.storeConstraintImpulses=function(t){for(var e=this.m_manifold,i=0;i<this.v_pointCount;++i)e.points[i].normalImpulse=this.v_points[i].normalImpulse,e.points[i].tangentImpulse=this.v_points[i].tangentImpulse};r.zero(),r.zero(),r.zero(),r.zero();var Z=r.zero();r.zero(),r.zero(),r.zero(),r.zero(),r.zero(),r.zero(),r.zero(),r.zero(),r.zero(),r.zero();function K(t,e){return s.sqrt(t*e)}function $(t,e){return t>e?t:e}f.prototype.solveVelocityConstraint=function(t){var e=this.m_fixtureA.m_body,i=this.m_fixtureB.m_body,a=e.c_velocity,l=(e.c_position,i.c_velocity),h=(i.c_position,this.v_invMassA),c=this.v_invIA,u=this.v_invMassB,m=this.v_invIB,p=a.v.x,d=a.v.y,f=a.w,y=l.v.x,g=l.v.y,v=l.w,_=this.v_normal,b=r.crossVec2Num_(_,1,Z),x=this.v_friction;n&&o.assert(1===this.v_pointCount||2===this.v_pointCount);for(var S=0;S<this.v_pointCount;++S){var k=0,w=0;k+=y+-v*(I=this.v_points[S]).rB.y,w+=g+v*I.rB.x,k-=p+-f*I.rA.y,w-=d+f*I.rA.x;var A=k*b.x+w*b.y-this.v_tangentSpeed,P=I.tangentMass*-A,T=x*I.normalImpulse;P=(B=s.clamp(I.tangentImpulse+P,-T,T))-I.tangentImpulse,I.tangentImpulse=B,p-=h*(L=P*b.x),p-=h*(E=P*b.y),f-=c*(I.rA.x*E-I.rA.y*L),y+=u*L,g+=u*E,v+=m*(I.rB.x*E-I.rB.y*L)}if(1===this.v_pointCount||!1===t.blockSolve)for(var C=0;C<this.v_pointCount;++C){var I;k=0,w=0;k+=y+-v*(I=this.v_points[C]).rB.y,w+=g+v*I.rB.x,k-=p+-f*I.rA.y,w-=d+f*I.rA.x;var B,L,E,M=k*_.x+w*_.y;P=-I.normalMass*(M-I.velocityBias);P=(B=s.max(I.normalImpulse+P,0))-I.normalImpulse,I.normalImpulse=B,p-=h*(L=P*_.x),d-=h*(E=P*_.y),f-=c*(I.rA.x*E-I.rA.y*L),y+=u*L,g+=u*E,v+=m*(I.rB.x*E-I.rB.y*L)}else{var R=this.v_points[0],D=this.v_points[1],O=R.normalImpulse,F=D.normalImpulse;n&&o.assert(O>=0&&F>=0);var j=y+-v*R.rB.y-(p+-f*R.rA.y),U=g+v*R.rB.x-(d+f*R.rA.x),N=y+-v*D.rB.y-(p+-f*D.rA.y),V=g+v*D.rB.x-(d+f*D.rA.x),G=j*_.x+U*_.y,X=N*_.x+V*_.y,z=G-R.velocityBias,H=X-D.velocityBias;z-=this.v_K.ex.x*O+this.v_K.ey.x*F,H-=this.v_K.ex.y*O+this.v_K.ey.y*F;for(;;){var W=-(this.v_normalMass.ex.x*z+this.v_normalMass.ey.x*H),J=-(this.v_normalMass.ex.y*z+this.v_normalMass.ey.y*H);if(W>=0&&J>=0){var Y=J-F,q=($=W-O)*_.x,K=$*_.y;p-=h*q+h*(Q=Y*_.x),d-=h*K+h*(tt=Y*_.y),f-=c*(R.rA.x*K-R.rA.y*q+D.rA.x*tt-D.rA.y*Q),y+=u*q+u*Q,g+=u*K+u*tt,v+=m*(R.rB.x*K-R.rB.y*q+D.rB.x*tt-D.rB.y*Q),R.normalImpulse=W,D.normalImpulse=J;break}if(W=-R.normalMass*z,J=0,G=0,X=this.v_K.ex.y*W+H,W>=0&&X>=0){Y=J-F,q=($=W-O)*_.x,K=$*_.y;p-=h*q+h*(Q=Y*_.x),d-=h*K+h*(tt=Y*_.y),f-=c*(R.rA.x*K-R.rA.y*q+D.rA.x*tt-D.rA.y*Q),y+=u*q+u*Q,g+=u*K+u*tt,v+=m*(R.rB.x*K-R.rB.y*q+D.rB.x*tt-D.rB.y*Q),R.normalImpulse=W,D.normalImpulse=J;break}if(W=0,J=-D.normalMass*H,G=this.v_K.ey.x*J+z,X=0,J>=0&&G>=0){Y=J-F,q=($=W-O)*_.x,K=$*_.y;p-=h*q+h*(Q=Y*_.x),d-=h*K+h*(tt=Y*_.y),f-=c*(R.rA.x*K-R.rA.y*q+D.rA.x*tt-D.rA.y*Q),y+=u*q+u*Q,g+=u*K+u*tt,v+=m*(R.rB.x*K-R.rB.y*q+D.rB.x*tt-D.rB.y*Q),R.normalImpulse=W,D.normalImpulse=J;break}if(W=0,J=0,X=H,(G=z)>=0&&X>=0){var $,Q,tt;Y=J-F,q=($=W-O)*_.x,K=$*_.y;p-=h*q+h*(Q=Y*_.x),d-=h*K+h*(tt=Y*_.y),f-=c*(R.rA.x*K-R.rA.y*q+D.rA.x*tt-D.rA.y*Q),y+=u*q+u*Q,g+=u*K+u*tt,v+=m*(R.rB.x*K-R.rB.y*q+D.rB.x*tt-D.rB.y*Q),R.normalImpulse=W,D.normalImpulse=J;break}break}}a.v.x=p,a.v.y=d,a.w=f,l.v.x=y,l.v.y=g,l.w=v};var Q=[],tt=new a({create:function(){return new f}});f.addType=function(t,e,i){Q[t]=Q[t]||{},Q[t][e]=i},f.create=function(t,e,i,n){var o,a,s=t.getType(),r=i.getType();if(a=Q[s]&&Q[s][r])(o=tt.allocate()).init(t,e,i,n,a);else{if(!(a=Q[r]&&Q[r][s]))return null;(o=tt.allocate()).init(i,n,t,e,a)}t=o.getFixtureA(),i=o.getFixtureB(),e=o.getChildIndexA(),n=o.getChildIndexB();var l=t.getBody(),h=i.getBody();return o.m_nodeA.contact=o,o.m_nodeA.other=h,o.m_nodeA.prev=null,o.m_nodeA.next=l.m_contactList,null!=l.m_contactList&&(l.m_contactList.prev=o.m_nodeA),l.m_contactList=o.m_nodeA,o.m_nodeB.contact=o,o.m_nodeB.other=l,o.m_nodeB.prev=null,o.m_nodeB.next=h.m_contactList,null!=h.m_contactList&&(h.m_contactList.prev=o.m_nodeB),h.m_contactList=o.m_nodeB,t.isSensor()||i.isSensor()||(l.setAwake(!0),h.setAwake(!0)),o},f.destroy=function(t,e){var i=t.m_fixtureA,n=t.m_fixtureB,o=i.getBody(),a=n.getBody();t.isTouching()&&e.endContact(t),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA===o.m_contactList&&(o.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB===a.m_contactList&&(a.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&!i.isSensor()&&!n.isSensor()&&(o.setAwake(!0),a.setAwake(!0));var s=i.getType(),r=n.getType(),l=Q[s][r].destroyFcn;"function"==typeof l&&l(t),tt.release(t)}},function(t,e,i){e.internal={},e.Math=i(3),e.Vec2=i(2),e.Vec3=i(10),e.Mat22=i(11),e.Mat33=i(13),e.Transform=i(5),e.Rot=i(6),e.AABB=i(18),e.Shape=i(22),e.Fixture=i(37),e.Body=i(29),e.Contact=i(19),e.Joint=i(16),e.World=i(38),e.Circle=i(26),e.Edge=i(27),e.Polygon=i(24),e.Chain=i(31),e.Box=i(58),i(59),i(60),e.internal.CollidePolygons=i(61),i(62),i(63),e.DistanceJoint=i(64),e.FrictionJoint=i(65),e.GearJoint=i(66),e.MotorJoint=i(67),e.MouseJoint=i(68),e.PrismaticJoint=i(43),e.PulleyJoint=i(69),e.RevoluteJoint=i(42),e.RopeJoint=i(70),e.WeldJoint=i(71),e.WheelJoint=i(72),e.internal.Sweep=i(12),e.internal.stats=i(30),e.internal.Manifold=i(21),e.internal.Distance=i(25),e.internal.TimeOfImpact=i(41),e.internal.DynamicTree=i(39),e.internal.Settings=i(7)},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,i(4);var n=i(2),o=i(5),a=i(3),s=i(6);function r(){this.type=-1,this.localNormal=n.zero(),this.localPoint=n.zero(),this.points=[new l,new l],this.pointCount=0}function l(){this.localPoint=n.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.id=new h}function h(){this.cf=new c}function c(){this.indexA,this.indexB,this.typeA,this.typeB}function u(){this.normal,this.points=[],this.separations=[]}t.exports=r,t.exports.clipSegmentToLine=function(t,e,i,o,a){var s=0,l=n.dot(i,e[0].v)-o,h=n.dot(i,e[1].v)-o;l<=0&&t[s++].set(e[0]);h<=0&&t[s++].set(e[1]);if(l*h<0){var c=l/(l-h);t[s].v.setCombine(1-c,e[0].v,c,e[1].v),t[s].id.cf.indexA=a,t[s].id.cf.indexB=e[0].id.cf.indexB,t[s].id.cf.typeA=r.e_vertex,t[s].id.cf.typeB=r.e_face,++s}return s},t.exports.clipVertex=p,t.exports.getPointStates=function(t,e,i,n){for(var o=0;o<i.pointCount;++o){var a=i.points[o].id;t[o]=m.removeState;for(var s=0;s<n.pointCount;++s)if(n.points[s].id.key==a.key){t[o]=m.persistState;break}}for(var o=0;o<n.pointCount;++o){var a=n.points[o].id;e[o]=m.addState;for(var s=0;s<i.pointCount;++s)if(i.points[s].id.key==a.key){e[o]=m.persistState;break}}},t.exports.PointState=m,r.e_circles=0,r.e_faceA=1,r.e_faceB=2,r.e_vertex=0,r.e_face=1,r.prototype.init=function(){return this.type=-1,this.localNormal.setZero(),this.localPoint.setZero(),this.points[0].init(),this.points[1].init(),this.pointCount=0,this},l.prototype.init=function(){this.localPoint.setZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.init()},h.prototype.init=function(){this.cf.init()},Object.defineProperty(h.prototype,"key",{get:function(){return this.cf.indexA+4*this.cf.indexB+16*this.cf.typeA+64*this.cf.typeB},enumerable:!0,configurable:!0}),h.prototype.set=function(t){this.cf.set(t.cf)},c.prototype.init=function(){this.indexA=0,this.indexB=0,this.typeA=0,this.typeB=0},c.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.typeA=t.typeA,this.typeB=t.typeB},r.prototype.getWorldManifold=function(t,e,i,l,h){if(0!=this.pointCount){var c=(t=t||new u).normal,m=t.points,p=t.separations;switch(this.type){case r.e_circles:c=n.neo(1,0);var d=o.mulVec2(e,this.localPoint),f=o.mulVec2(l,this.points[0].localPoint),y=n.sub(f,d);n.lengthSquared(y)>a.EPSILON*a.EPSILON&&(c.set(y),c.normalize()),m[0]=n.mid(d,f),p[0]=-h-i,m.length=1,p.length=1;break;case r.e_faceA:c=s.mulVec2(e.q,this.localNormal);for(var g=o.mulVec2(e,this.localPoint),v=0;v<this.pointCount;++v){var _=o.mulVec2(l,this.points[v].localPoint),b=n.clone(_).addMul(i-n.dot(n.sub(_,g),c),c),x=n.clone(_).subMul(h,c);m[v]=n.mid(b,x),p[v]=n.dot(n.sub(x,b),c)}m.length=this.pointCount,p.length=this.pointCount;break;case r.e_faceB:c=s.mulVec2(l.q,this.localNormal);for(g=o.mulVec2(l,this.localPoint),v=0;v<this.pointCount;++v){_=o.mulVec2(e,this.points[v].localPoint),x=n.combine(1,_,h-n.dot(n.sub(_,g),c),c),b=n.combine(1,_,-i,c);m[v]=n.mid(b,x),p[v]=n.dot(n.sub(b,x),c)}m.length=this.pointCount,p.length=this.pointCount,c.mul(-1)}return t.normal=c,t.points=m,t.separations=p,t}};var m={nullState:0,addState:1,persistState:2,removeState:3};function p(){this.v=n.zero(),this.id=new h}p.prototype.set=function(t){this.v.set(t.v),this.id.set(t.id)},p.prototype.init=function(){this.v.setZero(),this.id.init()}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=n;i(3);function n(){this.m_type,this.m_radius}n.isValid=function(t){return!!t},n.prototype.getRadius=function(){return this.m_radius},n.prototype.getType=function(){return this.m_type},n.prototype._clone=function(){},n.prototype.getChildCount=function(){},n.prototype.testPoint=function(t,e){},n.prototype.rayCast=function(t,e,i,n){},n.prototype.computeAABB=function(t,e,i){},n.prototype.computeMass=function(t,e){},n.prototype.computeDistanceProxy=function(t){}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=m;var o=i(4),a=i(9),s=(i(8),i(3)),r=i(5),l=i(6),h=i(2),c=(i(18),i(7)),u=i(22);function m(t){if(!(this instanceof m))return new m(t);m._super.call(this),this.m_type=m.TYPE,this.m_radius=c.polygonRadius,this.m_centroid=h.zero(),this.m_vertices=[],this.m_normals=[],this.m_count=0,t&&t.length&&this._set(t)}m._super=u,m.prototype=a(m._super.prototype),m.TYPE="polygon",m.prototype.getVertex=function(t){return n&&o.assert(0<=t&&t<this.m_count),this.m_vertices[t]},m.prototype._clone=function(){var t=new m;t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_count=this.m_count,t.m_centroid.set(this.m_centroid);for(var e=0;e<this.m_count;e++)t.m_vertices.push(this.m_vertices[e].clone());for(e=0;e<this.m_normals.length;e++)t.m_normals.push(this.m_normals[e].clone());return t},m.prototype.getChildCount=function(){return 1},m.prototype._set=function(t){if(n&&o.assert(3<=t.length&&t.length<=c.maxPolygonVertices),t.length<3)this._setAsBox(1,1);else{for(var e=s.min(t.length,c.maxPolygonVertices),i=[],a=0,r=0;r<e;++r){for(var l=t[r],u=!0,m=0;m<a;++m)if(h.distanceSquared(l,i[m])<.25*c.linearSlopSquared){u=!1;break}u&&(i[a++]=l)}if((e=a)<3)return n&&o.assert(!1),void this._setAsBox(1,1);var p=0,d=i[0].x;for(r=1;r<e;++r){var f=i[r].x;(f>d||f==d&&i[r].y<i[p].y)&&(p=r,d=f)}for(var y=[],g=0,v=p;;){y[g]=v;var _=0;for(m=1;m<e;++m)if(_!=v){var b=h.sub(i[_],i[y[g]]),x=(l=h.sub(i[m],i[y[g]]),h.cross(b,l));x<0&&(_=m),0==x&&l.lengthSquared()>b.lengthSquared()&&(_=m)}else _=m;if(++g,v=_,_==p)break}if(g<3)return n&&o.assert(!1),void this._setAsBox(1,1);this.m_count=g;for(r=0;r<g;++r)this.m_vertices[r]=i[y[r]];for(r=0;r<g;++r){var S=r,k=r+1<g?r+1:0,w=h.sub(this.m_vertices[k],this.m_vertices[S]);n&&o.assert(w.lengthSquared()>s.EPSILON*s.EPSILON),this.m_normals[r]=h.cross(w,1),this.m_normals[r].normalize()}this.m_centroid=function(t,e){n&&o.assert(e>=3);for(var i=h.zero(),a=0,r=h.zero(),l=0;l<e;++l){var c=r,u=t[l],m=l+1<e?t[l+1]:t[0],p=h.sub(u,c),d=h.sub(m,c),f=.5*h.cross(p,d);a+=f,i.addMul(f*(1/3),c),i.addMul(f*(1/3),u),i.addMul(f*(1/3),m)}return n&&o.assert(a>s.EPSILON),i.mul(1/a),i}(this.m_vertices,g)}},m.prototype._setAsBox=function(t,e,i,n){if(this.m_vertices[0]=h.neo(-t,-e),this.m_vertices[1]=h.neo(t,-e),this.m_vertices[2]=h.neo(t,e),this.m_vertices[3]=h.neo(-t,e),this.m_normals[0]=h.neo(0,-1),this.m_normals[1]=h.neo(1,0),this.m_normals[2]=h.neo(0,1),this.m_normals[3]=h.neo(-1,0),this.m_count=4,h.isValid(i)){n=n||0,this.m_centroid.set(i);var o=r.identity();o.p.set(i),o.q.set(n);for(var a=0;a<this.m_count;++a)this.m_vertices[a]=r.mulVec2(o,this.m_vertices[a]),this.m_normals[a]=l.mulVec2(o.q,this.m_normals[a])}},m.prototype.testPoint=function(t,e){for(var i=l.mulTVec2(t.q,h.sub(e,t.p)),n=0;n<this.m_count;++n){if(h.dot(this.m_normals[n],h.sub(i,this.m_vertices[n]))>0)return!1}return!0},m.prototype.rayCast=function(t,e,i,a){for(var s=l.mulTVec2(i.q,h.sub(e.p1,i.p)),r=l.mulTVec2(i.q,h.sub(e.p2,i.p)),c=h.sub(r,s),u=0,m=e.maxFraction,p=-1,d=0;d<this.m_count;++d){var f=h.dot(this.m_normals[d],h.sub(this.m_vertices[d],s)),y=h.dot(this.m_normals[d],c);if(0==y){if(f<0)return!1}else y<0&&f<u*y?(u=f/y,p=d):y>0&&f<m*y&&(m=f/y);if(m<u)return!1}return n&&o.assert(0<=u&&u<=e.maxFraction),p>=0&&(t.fraction=u,t.normal=l.mulVec2(i.q,this.m_normals[p]),!0)},m.prototype.computeAABB=function(t,e,i){for(var n=1/0,o=1/0,a=-1/0,l=-1/0,h=0;h<this.m_count;++h){var c=r.mulVec2(e,this.m_vertices[h]);n=s.min(n,c.x),a=s.max(a,c.x),o=s.min(o,c.y),l=s.max(l,c.y)}t.lowerBound.set(n,o),t.upperBound.set(a,l),t.extend(this.m_radius)},m.prototype.computeMass=function(t,e){n&&o.assert(this.m_count>=3);for(var i=h.zero(),a=0,r=0,l=h.zero(),c=0;c<this.m_count;++c)l.add(this.m_vertices[c]);l.mul(1/this.m_count);for(c=0;c<this.m_count;++c){var u=h.sub(this.m_vertices[c],l),m=c+1<this.m_count?h.sub(this.m_vertices[c+1],l):h.sub(this.m_vertices[0],l),p=h.cross(u,m),d=.5*p;a+=d,i.addCombine(d*(1/3),u,d*(1/3),m);var f=u.x,y=u.y,g=m.x,v=m.y;r+=1/3*.25*p*(f*f+g*f+g*g+(y*y+v*y+v*v))}t.mass=e*a,n&&o.assert(a>s.EPSILON),i.mul(1/a),t.center.setCombine(1,i,1,l),t.I=e*r,t.I+=t.mass*(h.dot(t.center,t.center)-h.dot(i,i))},m.prototype.validate=function(){for(var t=0;t<this.m_count;++t)for(var e=t,i=t<this.m_count-1?e+1:0,n=this.m_vertices[e],o=h.sub(this.m_vertices[i],n),a=0;a<this.m_count;++a)if(a!=e&&a!=i){var s=h.sub(this.m_vertices[a],n);if(h.cross(o,s)<0)return!1}return!0},m.prototype.computeDistanceProxy=function(t){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=d,t.exports.Input=u,t.exports.Output=m,t.exports.Proxy=f,t.exports.Cache=p;var o=i(7),a=i(4),s=i(30),r=i(3),l=i(2),h=(i(10),i(11),i(13),i(6)),c=(i(12),i(5));i(14),i(15);function u(){this.proxyA=new f,this.proxyB=new f,this.transformA=null,this.transformB=null,this.useRadii=!1}function m(){this.pointA=l.zero(),this.pointB=l.zero(),this.distance,this.iterations}function p(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}function d(t,e,i){++s.gjkCalls;var n=i.proxyA,a=i.proxyB,u=i.transformA,m=i.transformB,p=new g;p.readCache(e,n,u,a,m);for(var d=p.m_v,f=o.maxDistnceIterations,y=[],v=[],_=0,b=0;b<f;){_=p.m_count;for(var x=0;x<_;++x)y[x]=d[x].indexA,v[x]=d[x].indexB;if(p.solve(),3==p.m_count)break;(C=p.getClosestPoint()).lengthSquared();var S=p.getSearchDirection();if(S.lengthSquared()<r.EPSILON*r.EPSILON)break;var k=d[p.m_count];k.indexA=n.getSupport(h.mulTVec2(u.q,l.neg(S))),k.wA=c.mulVec2(u,n.getVertex(k.indexA)),k.indexB=a.getSupport(h.mulTVec2(m.q,S)),k.wB=c.mulVec2(m,a.getVertex(k.indexB)),k.w=l.sub(k.wB,k.wA),++b,++s.gjkIters;var w=!1;for(x=0;x<_;++x)if(k.indexA==y[x]&&k.indexB==v[x]){w=!0;break}if(w)break;++p.m_count}if(s.gjkMaxIters=r.max(s.gjkMaxIters,b),p.getWitnessPoints(t.pointA,t.pointB),t.distance=l.distance(t.pointA,t.pointB),t.iterations=b,p.writeCache(e),i.useRadii){var A=n.m_radius,P=a.m_radius;if(t.distance>A+P&&t.distance>r.EPSILON){t.distance-=A+P;var T=l.sub(t.pointB,t.pointA);T.normalize(),t.pointA.addMul(A,T),t.pointB.subMul(P,T)}else{var C=l.mid(t.pointA,t.pointB);t.pointA.set(C),t.pointB.set(C),t.distance=0}}}function f(){this.m_buffer=[],this.m_vertices=[],this.m_count=0,this.m_radius=0}function y(){this.indexA,this.indexB,this.wA=l.zero(),this.wB=l.zero(),this.w=l.zero(),this.a}function g(){this.m_v1=new y,this.m_v2=new y,this.m_v3=new y,this.m_v=[this.m_v1,this.m_v2,this.m_v3],this.m_count}s.gjkCalls=0,s.gjkIters=0,s.gjkMaxIters=0,f.prototype.getVertexCount=function(){return this.m_count},f.prototype.getVertex=function(t){return n&&a.assert(0<=t&&t<this.m_count),this.m_vertices[t]},f.prototype.getSupport=function(t){for(var e=0,i=l.dot(this.m_vertices[0],t),n=0;n<this.m_count;++n){var o=l.dot(this.m_vertices[n],t);o>i&&(e=n,i=o)}return e},f.prototype.getSupportVertex=function(t){return this.m_vertices[this.getSupport(t)]},f.prototype.set=function(t,e){n&&a.assert("function"==typeof t.computeDistanceProxy),t.computeDistanceProxy(this,e)},y.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.wA=l.clone(t.wA),this.wB=l.clone(t.wB),this.w=l.clone(t.w),this.a=t.a},g.prototype.print=function(){return 3==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():2==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():1==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},g.prototype.readCache=function(t,e,i,o,s){n&&a.assert(t.count<=3),this.m_count=t.count;for(var h=0;h<this.m_count;++h){(f=this.m_v[h]).indexA=t.indexA[h],f.indexB=t.indexB[h];var u=e.getVertex(f.indexA),m=o.getVertex(f.indexB);f.wA=c.mulVec2(i,u),f.wB=c.mulVec2(s,m),f.w=l.sub(f.wB,f.wA),f.a=0}if(this.m_count>1){var p=t.metric,d=this.getMetric();(d<.5*p||2*p<d||d<r.EPSILON)&&(this.m_count=0)}if(0==this.m_count){var f;(f=this.m_v[0]).indexA=0,f.indexB=0;u=e.getVertex(0),m=o.getVertex(0);f.wA=c.mulVec2(i,u),f.wB=c.mulVec2(s,m),f.w=l.sub(f.wB,f.wA),f.a=1,this.m_count=1}},g.prototype.writeCache=function(t){t.metric=this.getMetric(),t.count=this.m_count;for(var e=0;e<this.m_count;++e)t.indexA[e]=this.m_v[e].indexA,t.indexB[e]=this.m_v[e].indexB},g.prototype.getSearchDirection=function(){switch(this.m_count){case 1:return l.neg(this.m_v1.w);case 2:var t=l.sub(this.m_v2.w,this.m_v1.w);return l.cross(t,l.neg(this.m_v1.w))>0?l.cross(1,t):l.cross(t,1);default:return n&&a.assert(!1),l.zero()}},g.prototype.getClosestPoint=function(){switch(this.m_count){case 0:return n&&a.assert(!1),l.zero();case 1:return l.clone(this.m_v1.w);case 2:return l.combine(this.m_v1.a,this.m_v1.w,this.m_v2.a,this.m_v2.w);case 3:return l.zero();default:return n&&a.assert(!1),l.zero()}},g.prototype.getWitnessPoints=function(t,e){switch(this.m_count){case 0:n&&a.assert(!1);break;case 1:t.set(this.m_v1.wA),e.set(this.m_v1.wB);break;case 2:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),e.setCombine(this.m_v1.a,this.m_v1.wB,this.m_v2.a,this.m_v2.wB);break;case 3:t.setCombine(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),t.addMul(this.m_v3.a,this.m_v3.wA),e.set(t);break;default:n&&a.assert(!1)}},g.prototype.getMetric=function(){switch(this.m_count){case 0:return n&&a.assert(!1),0;case 1:return 0;case 2:return l.distance(this.m_v1.w,this.m_v2.w);case 3:return l.cross(l.sub(this.m_v2.w,this.m_v1.w),l.sub(this.m_v3.w,this.m_v1.w));default:return n&&a.assert(!1),0}},g.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3();break;default:n&&a.assert(!1)}},g.prototype.solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=l.sub(e,t),n=-l.dot(t,i);if(n<=0)return this.m_v1.a=1,void(this.m_count=1);var o=l.dot(e,i);if(o<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);var a=1/(o+n);this.m_v1.a=o*a,this.m_v2.a=n*a,this.m_count=2},g.prototype.solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,n=l.sub(e,t),o=l.dot(t,n),a=l.dot(e,n),s=-o,r=l.sub(i,t),h=l.dot(t,r),c=l.dot(i,r),u=-h,m=l.sub(i,e),p=l.dot(e,m),d=l.dot(i,m),f=-p,y=l.cross(n,r),g=y*l.cross(e,i),v=y*l.cross(i,t),_=y*l.cross(t,e);if(s<=0&&u<=0)return this.m_v1.a=1,void(this.m_count=1);if(a>0&&s>0&&_<=0){var b=1/(a+s);return this.m_v1.a=a*b,this.m_v2.a=s*b,void(this.m_count=2)}if(c>0&&u>0&&v<=0){var x=1/(c+u);return this.m_v1.a=c*x,this.m_v3.a=u*x,this.m_count=2,void this.m_v2.set(this.m_v3)}if(a<=0&&f<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);if(c<=0&&d<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.set(this.m_v3);if(d>0&&f>0&&g<=0){var S=1/(d+f);return this.m_v2.a=d*S,this.m_v3.a=f*S,this.m_count=2,void this.m_v1.set(this.m_v3)}var k=1/(g+v+_);this.m_v1.a=g*k,this.m_v2.a=v*k,this.m_v3.a=_*k,this.m_count=3},d.testOverlap=function(t,e,i,n,o,a){var s=new u;s.proxyA.set(t,e),s.proxyB.set(i,n),s.transformA=o,s.transformB=a,s.useRadii=!0;var l=new p,h=new m;return d(h,l,s),h.distance<10*r.EPSILON}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=c;var o=i(4),a=i(9),s=(i(8),i(3)),r=(i(5),i(6)),l=i(2),h=(i(18),i(7),i(22));function c(t,e){if(!(this instanceof c))return new c(t,e);c._super.call(this),this.m_type=c.TYPE,this.m_p=l.zero(),this.m_radius=1,"object"==typeof t&&l.isValid(t)?(this.m_p.set(t),"number"==typeof e&&(this.m_radius=e)):"number"==typeof t&&(this.m_radius=t)}c._super=h,c.prototype=a(c._super.prototype),c.TYPE="circle",c.prototype.getRadius=function(){return this.m_radius},c.prototype.getCenter=function(){return this.m_p},c.prototype.getVertex=function(t){return n&&o.assert(0==t),this.m_p},c.prototype.getVertexCount=function(t){return 1},c.prototype._clone=function(){var t=new c;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_p=this.m_p.clone(),t},c.prototype.getChildCount=function(){return 1},c.prototype.testPoint=function(t,e){var i=l.add(t.p,r.mulVec2(t.q,this.m_p)),n=l.sub(e,i);return l.dot(n,n)<=this.m_radius*this.m_radius},c.prototype.rayCast=function(t,e,i,n){var o=l.add(i.p,r.mulVec2(i.q,this.m_p)),a=l.sub(e.p1,o),h=l.dot(a,a)-this.m_radius*this.m_radius,c=l.sub(e.p2,e.p1),u=l.dot(a,c),m=l.dot(c,c),p=u*u-m*h;if(p<0||m<s.EPSILON)return!1;var d=-(u+s.sqrt(p));return 0<=d&&d<=e.maxFraction*m&&(d/=m,t.fraction=d,t.normal=l.add(a,l.mul(d,c)),t.normal.normalize(),!0)},c.prototype.computeAABB=function(t,e,i){var n=l.add(e.p,r.mulVec2(e.q,this.m_p));t.lowerBound.set(n.x-this.m_radius,n.y-this.m_radius),t.upperBound.set(n.x+this.m_radius,n.y+this.m_radius)},c.prototype.computeMass=function(t,e){t.mass=e*s.PI*this.m_radius*this.m_radius,t.center=this.m_p,t.I=t.mass*(.5*this.m_radius*this.m_radius+l.dot(this.m_p,this.m_p))},c.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_p),t.m_count=1,t.m_radius=this.m_radius}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=h;var n=i(9),o=(i(8),i(7)),a=i(22),s=(i(3),i(5)),r=i(6),l=i(2);i(18);function h(t,e){if(!(this instanceof h))return new h(t,e);h._super.call(this),this.m_type=h.TYPE,this.m_radius=o.polygonRadius,this.m_vertex1=t?l.clone(t):l.zero(),this.m_vertex2=e?l.clone(e):l.zero(),this.m_vertex0=l.zero(),this.m_vertex3=l.zero(),this.m_hasVertex0=!1,this.m_hasVertex3=!1}h._super=a,h.prototype=n(h._super.prototype),h.TYPE="edge",h.prototype.setNext=function(t){return t?(this.m_vertex3.set(t),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},h.prototype.setPrev=function(t){return t?(this.m_vertex0.set(t),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},h.prototype._set=function(t,e){return this.m_vertex1.set(t),this.m_vertex2.set(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},h.prototype._clone=function(){var t=new h;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_vertex1.set(this.m_vertex1),t.m_vertex2.set(this.m_vertex2),t.m_vertex0.set(this.m_vertex0),t.m_vertex3.set(this.m_vertex3),t.m_hasVertex0=this.m_hasVertex0,t.m_hasVertex3=this.m_hasVertex3,t},h.prototype.getChildCount=function(){return 1},h.prototype.testPoint=function(t,e){return!1},h.prototype.rayCast=function(t,e,i,n){var o=r.mulTVec2(i.q,l.sub(e.p1,i.p)),a=r.mulTVec2(i.q,l.sub(e.p2,i.p)),s=l.sub(a,o),h=this.m_vertex1,c=this.m_vertex2,u=l.sub(c,h),m=l.neo(u.y,-u.x);m.normalize();var p=l.dot(m,l.sub(h,o)),d=l.dot(m,s);if(0==d)return!1;var f=p/d;if(f<0||e.maxFraction<f)return!1;var y=l.add(o,l.mul(f,s)),g=l.sub(c,h),v=l.dot(g,g);if(0==v)return!1;var _=l.dot(l.sub(y,h),g)/v;return!(_<0||1<_)&&(t.fraction=f,t.normal=p>0?r.mulVec2(i.q,m).neg():r.mulVec2(i.q,m),!0)},h.prototype.computeAABB=function(t,e,i){var n=s.mulVec2(e,this.m_vertex1),o=s.mulVec2(e,this.m_vertex2);t.combinePoints(n,o),t.extend(this.m_radius)},h.prototype.computeMass=function(t,e){t.mass=0,t.center.setCombine(.5,this.m_vertex1,.5,this.m_vertex2),t.I=0},h.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_vertex1),t.m_vertices.push(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius}},function(t,e,i){"use strict";var n=i(50),o=i(51);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){o.isString(t)&&(t=_(t));return t instanceof a?t.format():a.prototype.format.call(t)},e.Url=a;var s=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(h),u=["%","/","?",";","#"].concat(c),m=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=i(52);function _(t,e,i){if(t&&o.isObject(t)&&t instanceof a)return t;var n=new a;return n.parse(t,e,i),n}a.prototype.parse=function(t,e,i){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var a=t.indexOf("?"),r=-1!==a&&a<t.indexOf("#")?"?":"#",h=t.split(r);h[0]=h[0].replace(/\\/g,"/");var _=t=h.join(r);if(_=_.trim(),!i&&1===t.split("#").length){var b=l.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=s.exec(_);if(x){var S=(x=x[0]).toLowerCase();this.protocol=S,_=_.substr(x.length)}if(i||x||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===_.substr(0,2);!k||x&&y[x]||(_=_.substr(2),this.slashes=!0)}if(!y[x]&&(k||x&&!g[x])){for(var w,A,P=-1,T=0;T<m.length;T++){-1!==(C=_.indexOf(m[T]))&&(-1===P||C<P)&&(P=C)}-1!==(A=-1===P?_.lastIndexOf("@"):_.lastIndexOf("@",P))&&(w=_.slice(0,A),_=_.slice(A+1),this.auth=decodeURIComponent(w)),P=-1;for(T=0;T<u.length;T++){var C;-1!==(C=_.indexOf(u[T]))&&(-1===P||C<P)&&(P=C)}-1===P&&(P=_.length),this.host=_.slice(0,P),_=_.slice(P),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var B=this.hostname.split(/\./),L=(T=0,B.length);T<L;T++){var E=B[T];if(E&&!E.match(p)){for(var M="",R=0,D=E.length;R<D;R++)E.charCodeAt(R)>127?M+="x":M+=E[R];if(!M.match(p)){var O=B.slice(0,T),F=B.slice(T+1),j=E.match(d);j&&(O.push(j[1]),F.unshift(j[2])),F.length&&(_="/"+F.join(".")+_),this.hostname=O.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+U,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!f[S])for(T=0,L=c.length;T<L;T++){var V=c[T];if(-1!==_.indexOf(V)){var G=encodeURIComponent(V);G===V&&(G=escape(V)),_=_.split(V).join(G)}}var X=_.indexOf("#");-1!==X&&(this.hash=_.substr(X),_=_.slice(0,X));var z=_.indexOf("?");if(-1!==z?(this.search=_.substr(z),this.query=_.substr(z+1),e&&(this.query=v.parse(this.query)),_=_.slice(0,z)):e&&(this.search="",this.query={}),_&&(this.pathname=_),g[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var H=this.search||"";this.path=U+H}return this.href=this.format(),this},a.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",a=!1,s="";this.host?a=t+this.host:this.hostname&&(a=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var r=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==a?(a="//"+(a||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):a||(a=""),n&&"#"!==n.charAt(0)&&(n="#"+n),r&&"?"!==r.charAt(0)&&(r="?"+r),e+a+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(r=r.replace("#","%23"))+n},a.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},a.prototype.resolveObject=function(t){if(o.isString(t)){var e=new a;e.parse(t,!1,!0),t=e}for(var i=new a,n=Object.keys(this),s=0;s<n.length;s++){var r=n[s];i[r]=this[r]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),h=0;h<l.length;h++){var c=l[h];"protocol"!==c&&(i[c]=t[c])}return g[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!g[t.protocol]){for(var u=Object.keys(t),m=0;m<u.length;m++){var p=u[m];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||y[t.protocol])i.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),i.pathname=d.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var f=i.pathname||"",v=i.search||"";i.path=f+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var _=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||_||i.host&&t.pathname,S=x,k=i.pathname&&i.pathname.split("/")||[],w=(d=t.pathname&&t.pathname.split("/")||[],i.protocol&&!g[i.protocol]);if(w&&(i.hostname="",i.port=null,i.host&&(""===k[0]?k[0]=i.host:k.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),x=x&&(""===d[0]||""===k[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,k=d;else if(d.length)k||(k=[]),k.pop(),k=k.concat(d),i.search=t.search,i.query=t.query;else if(!o.isNullOrUndefined(t.search)){if(w)i.hostname=i.host=k.shift(),(I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=I.shift(),i.host=i.hostname=I.shift());return i.search=t.search,i.query=t.query,o.isNull(i.pathname)&&o.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!k.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var A=k.slice(-1)[0],P=(i.host||t.host||k.length>1)&&("."===A||".."===A)||""===A,T=0,C=k.length;C>=0;C--)"."===(A=k[C])?k.splice(C,1):".."===A?(k.splice(C,1),T++):T&&(k.splice(C,1),T--);if(!x&&!S)for(;T--;T)k.unshift("..");!x||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),P&&"/"!==k.join("/").substr(-1)&&k.push("");var I,B=""===k[0]||k[0]&&"/"===k[0].charAt(0);w&&(i.hostname=i.host=B?"":k.length?k.shift():"",(I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=I.shift(),i.host=i.hostname=I.shift()));return(x=x||i.host&&k.length)&&!B&&k.unshift(""),k.length?i.pathname=k.join("/"):(i.pathname=null,i.path=null),o.isNull(i.pathname)&&o.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},a.prototype.parseHost=function(){var t=this.host,e=r.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=v;var o=i(4),a=i(8),s=i(2),r=i(6),l=i(3),h=i(12),c=i(5),u=i(14),m=i(15),p=i(37),d=(i(22),i(38),v.STATIC="static"),f=v.KINEMATIC="kinematic",y=v.DYNAMIC="dynamic",g={type:d,position:s.zero(),angle:0,linearVelocity:s.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null};function v(t,e){e=a(e,g),n&&o.assert(s.isValid(e.position)),n&&o.assert(s.isValid(e.linearVelocity)),n&&o.assert(l.isFinite(e.angle)),n&&o.assert(l.isFinite(e.angularVelocity)),n&&o.assert(l.isFinite(e.angularDamping)&&e.angularDamping>=0),n&&o.assert(l.isFinite(e.linearDamping)&&e.linearDamping>=0),this.m_world=t,this.m_awakeFlag=e.awake,this.m_autoSleepFlag=e.allowSleep,this.m_bulletFlag=e.bullet,this.m_fixedRotationFlag=e.fixedRotation,this.m_activeFlag=e.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=e.userData,this.m_type=e.type,this.m_type==y?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=c.identity(),this.m_xf.p=s.clone(e.position),this.m_xf.q.setAngle(e.angle),this.m_sweep=new h,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new u,this.c_position=new m,this.m_force=s.zero(),this.m_torque=0,this.m_linearVelocity=s.clone(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_gravityScale=e.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null,this.m_destroyed=!1}function _(){this.mass=0,this.center=s.zero(),this.I=0}v.prototype.isWorldLocked=function(){return!(!this.m_world||!this.m_world.isLocked())},v.prototype.getWorld=function(){return this.m_world},v.prototype.getNext=function(){return this.m_next},v.prototype.setUserData=function(t){this.m_userData=t},v.prototype.getUserData=function(){return this.m_userData},v.prototype.getFixtureList=function(){return this.m_fixtureList},v.prototype.getJointList=function(){return this.m_jointList},v.prototype.getContactList=function(){return this.m_contactList},v.prototype.isStatic=function(){return this.m_type==d},v.prototype.isDynamic=function(){return this.m_type==y},v.prototype.isKinematic=function(){return this.m_type==f},v.prototype.setStatic=function(){return this.setType(d),this},v.prototype.setDynamic=function(){return this.setType(y),this},v.prototype.setKinematic=function(){return this.setType(f),this},v.prototype.getType=function(){return this.m_type},v.prototype.setType=function(t){if(n&&o.assert(t===d||t===f||t===y),n&&o.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type!=t){this.m_type=t,this.resetMassData(),this.m_type==d&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var e=this.m_contactList;e;){var i=e;e=e.next,this.m_world.destroyContact(i.contact)}this.m_contactList=null;for(var a=this.m_world.m_broadPhase,s=this.m_fixtureList;s;s=s.m_next)for(var r=s.m_proxyCount,l=0;l<r;++l)a.touchProxy(s.m_proxies[l].proxyId)}},v.prototype.isBullet=function(){return this.m_bulletFlag},v.prototype.setBullet=function(t){this.m_bulletFlag=!!t},v.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},v.prototype.setSleepingAllowed=function(t){this.m_autoSleepFlag=!!t,0==this.m_autoSleepFlag&&this.setAwake(!0)},v.prototype.isAwake=function(){return this.m_awakeFlag},v.prototype.setAwake=function(t){t?0==this.m_awakeFlag&&(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},v.prototype.isActive=function(){return this.m_activeFlag},v.prototype.setActive=function(t){if(n&&o.assert(0==this.isWorldLocked()),t!=this.m_activeFlag)if(this.m_activeFlag=!!t,this.m_activeFlag)for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.createProxies(e,this.m_xf);else{for(e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.destroyProxies(e);for(var a=this.m_contactList;a;){var s=a;a=a.next,this.m_world.destroyContact(s.contact)}this.m_contactList=null}},v.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},v.prototype.setFixedRotation=function(t){this.m_fixedRotationFlag!=t&&(this.m_fixedRotationFlag=!!t,this.m_angularVelocity=0,this.resetMassData())},v.prototype.getTransform=function(){return this.m_xf},v.prototype.setTransform=function(t,e){if(n&&o.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){this.m_xf.set(t,e),this.m_sweep.setTransform(this.m_xf);for(var i=this.m_world.m_broadPhase,a=this.m_fixtureList;a;a=a.m_next)a.synchronize(i,this.m_xf,this.m_xf)}},v.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},v.prototype.synchronizeFixtures=function(){var t=c.identity();this.m_sweep.getTransform(t,0);for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.synchronize(e,t,this.m_xf)},v.prototype.advance=function(t){this.m_sweep.advance(t),this.m_sweep.c.set(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},v.prototype.getPosition=function(){return this.m_xf.p},v.prototype.setPosition=function(t){this.setTransform(t,this.m_sweep.a)},v.prototype.getAngle=function(){return this.m_sweep.a},v.prototype.setAngle=function(t){this.setTransform(this.m_xf.p,t)},v.prototype.getWorldCenter=function(){return this.m_sweep.c},v.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},v.prototype.getLinearVelocity=function(){return this.m_linearVelocity},v.prototype.getLinearVelocityFromWorldPoint=function(t){var e=s.sub(t,this.m_sweep.c);return s.add(this.m_linearVelocity,s.cross(this.m_angularVelocity,e))},v.prototype.getLinearVelocityFromLocalPoint=function(t){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(t))},v.prototype.setLinearVelocity=function(t){this.m_type!=d&&(s.dot(t,t)>0&&this.setAwake(!0),this.m_linearVelocity.set(t))},v.prototype.getAngularVelocity=function(){return this.m_angularVelocity},v.prototype.setAngularVelocity=function(t){this.m_type!=d&&(t*t>0&&this.setAwake(!0),this.m_angularVelocity=t)},v.prototype.getLinearDamping=function(){return this.m_linearDamping},v.prototype.setLinearDamping=function(t){this.m_linearDamping=t},v.prototype.getAngularDamping=function(){return this.m_angularDamping},v.prototype.setAngularDamping=function(t){this.m_angularDamping=t},v.prototype.getGravityScale=function(){return this.m_gravityScale},v.prototype.setGravityScale=function(t){this.m_gravityScale=t},v.prototype.getMass=function(){return this.m_mass},v.prototype.getInertia=function(){return this.m_I+this.m_mass*s.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},v.prototype.getMassData=function(t){t.mass=this.m_mass,t.I=this.getInertia(),t.center.set(this.m_sweep.localCenter)},v.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.setZero(),this.isStatic()||this.isKinematic())return this.m_sweep.c0.set(this.m_xf.p),this.m_sweep.c.set(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);n&&o.assert(this.isDynamic());for(var t=s.zero(),e=this.m_fixtureList;e;e=e.m_next)if(0!=e.m_density){var i=new _;e.getMassData(i),this.m_mass+=i.mass,t.addMul(i.mass,i.center),this.m_I+=i.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.mul(this.m_invMass)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==this.m_fixedRotationFlag?(this.m_I-=this.m_mass*s.dot(t,t),n&&o.assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var a=s.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t,this.m_xf),this.m_linearVelocity.add(s.cross(this.m_angularVelocity,s.sub(this.m_sweep.c,a)))},v.prototype.setMassData=function(t){if(n&&o.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type==y){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*s.dot(t.center,t.center),n&&o.assert(this.m_I>0),this.m_invI=1/this.m_I);var e=s.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t.center,this.m_xf),this.m_linearVelocity.add(s.cross(this.m_angularVelocity,s.sub(this.m_sweep.c,e)))}},v.prototype.applyForce=function(t,e,i){this.m_type==y&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(t),this.m_torque+=s.cross(s.sub(e,this.m_sweep.c),t)))},v.prototype.applyForceToCenter=function(t,e){this.m_type==y&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(t))},v.prototype.applyTorque=function(t,e){this.m_type==y&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))},v.prototype.applyLinearImpulse=function(t,e,i){this.m_type==y&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.addMul(this.m_invMass,t),this.m_angularVelocity+=this.m_invI*s.cross(s.sub(e,this.m_sweep.c),t)))},v.prototype.applyAngularImpulse=function(t,e){this.m_type==y&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))},v.prototype.shouldCollide=function(t){if(this.m_type!=y&&t.m_type!=y)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},v.prototype.createFixture=function(t,e){if(n&&o.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;var i=new p(this,t,e);if(this.m_activeFlag){var a=this.m_world.m_broadPhase;i.createProxies(a,this.m_xf)}return i.m_next=this.m_fixtureList,this.m_fixtureList=i,i.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,i},v.prototype.destroyFixture=function(t){if(n&&o.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){n&&o.assert(t.m_body==this);var e=!1;if(this.m_fixtureList===t)this.m_fixtureList=t.m_next,e=!0;else for(var i=this.m_fixtureList;null!=i;){if(i.m_next===t){i.m_next=t.m_next,e=!0;break}i=i.m_next}n&&o.assert(e);for(var a=this.m_contactList;a;){var s=a.contact;a=a.next;var r=s.getFixtureA(),l=s.getFixtureB();t!=r&&t!=l||this.m_world.destroyContact(s)}if(this.m_activeFlag){var h=this.m_world.m_broadPhase;t.destroyProxies(h)}t.m_body=null,t.m_next=null,this.m_world.publish("remove-fixture",t),this.resetMassData()}},v.prototype.getWorldPoint=function(t){return c.mulVec2(this.m_xf,t)},v.prototype.getWorldVector=function(t){return r.mulVec2(this.m_xf.q,t)},v.prototype.getLocalPoint=function(t){return c.mulTVec2(this.m_xf,t)},v.prototype.getLocalVector=function(t){return r.mulTVec2(this.m_xf.q,t)}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;e.toString=function(t){t="string"==typeof t?t:"\n";var e="";for(var i in this)"function"!=typeof this[i]&&"object"!=typeof this[i]&&(e+=i+": "+this[i]+t);return e}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var o=i(4),a=i(9),s=(i(8),i(3),i(5)),r=(i(6),i(2)),l=(i(18),i(7)),h=i(22),c=i(27);function u(t,e){if(!(this instanceof u))return new u(t,e);u._super.call(this),this.m_type=u.TYPE,this.m_radius=l.polygonRadius,this.m_vertices=[],this.m_count=0,this.m_prevVertex=null,this.m_nextVertex=null,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,t&&t.length&&(e?this._createLoop(t):this._createChain(t))}u._super=h,u.prototype=a(u._super.prototype),u.TYPE="chain",u.prototype._createLoop=function(t){n&&o.assert(0==this.m_vertices.length&&0==this.m_count),n&&o.assert(t.length>=3);for(var e=1;e<t.length;++e){var i=t[e-1],a=t[e];n&&o.assert(r.distanceSquared(i,a)>l.linearSlopSquared)}this.m_vertices.length=0,this.m_count=t.length+1;for(e=0;e<t.length;++e)this.m_vertices[e]=t[e].clone();return this.m_vertices[t.length]=t[0].clone(),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},u.prototype._createChain=function(t){n&&o.assert(0==this.m_vertices.length&&0==this.m_count),n&&o.assert(t.length>=2);for(var e=1;e<t.length;++e){var i=t[e-1],a=t[e];n&&o.assert(r.distanceSquared(i,a)>l.linearSlopSquared)}this.m_count=t.length;for(e=0;e<t.length;++e)this.m_vertices[e]=t[e].clone();return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex=null,this.m_nextVertex=null,this},u.prototype._setPrevVertex=function(t){this.m_prevVertex=t,this.m_hasPrevVertex=!0},u.prototype._setNextVertex=function(t){this.m_nextVertex=t,this.m_hasNextVertex=!0},u.prototype._clone=function(){var t=new u;return t.createChain(this.m_vertices),t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_prevVertex=this.m_prevVertex,t.m_nextVertex=this.m_nextVertex,t.m_hasPrevVertex=this.m_hasPrevVertex,t.m_hasNextVertex=this.m_hasNextVertex,t},u.prototype.getChildCount=function(){return this.m_count-1},u.prototype.getChildEdge=function(t,e){n&&o.assert(0<=e&&e<this.m_count-1),t.m_type=c.TYPE,t.m_radius=this.m_radius,t.m_vertex1=this.m_vertices[e],t.m_vertex2=this.m_vertices[e+1],e>0?(t.m_vertex0=this.m_vertices[e-1],t.m_hasVertex0=!0):(t.m_vertex0=this.m_prevVertex,t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3=this.m_vertices[e+2],t.m_hasVertex3=!0):(t.m_vertex3=this.m_nextVertex,t.m_hasVertex3=this.m_hasNextVertex)},u.prototype.getVertex=function(t){return n&&o.assert(0<=t&&t<=this.m_count),t<this.m_count?this.m_vertices[t]:this.m_vertices[0]},u.prototype.testPoint=function(t,e){return!1},u.prototype.rayCast=function(t,e,i,a){return n&&o.assert(0<=a&&a<this.m_count),new c(this.getVertex(a),this.getVertex(a+1)).rayCast(t,e,i,0)},u.prototype.computeAABB=function(t,e,i){n&&o.assert(0<=i&&i<this.m_count);var a=s.mulVec2(e,this.getVertex(i)),r=s.mulVec2(e,this.getVertex(i+1));t.combinePoints(a,r)},u.prototype.computeMass=function(t,e){t.mass=0,t.center=r.neo(),t.I=0},u.prototype.computeDistanceProxy=function(t,e){n&&o.assert(0<=e&&e<this.m_count),t.m_buffer[0]=this.getVertex(e),t.m_buffer[1]=this.getVertex(e+1),t.m_vertices=t.m_buffer,t.m_count=2,t.m_radius=this.m_radius}},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),o={},a=14;a--;)o[i.key[a]]=n[a]||"";return o[i.q.name]={},o[i.key[12]].replace(i.q.parser,function(t,e,n){e&&(o[i.q.name][e]=n)}),o}},function(t,e){var i,n,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function r(t){if(i===setTimeout)return setTimeout(t,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(t){i=a}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,h=[],c=!1,u=-1;function m(){c&&l&&(c=!1,l.length?h=l.concat(h):u=-1,h.length&&p())}function p(){if(!c){var t=r(m);c=!0;for(var e=h.length;e;){for(l=h,h=[];++u<e;)l&&l[u].run();u=-1,e=h.length}l=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function f(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new d(t,e)),1!==h.length||c||r(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,o="~";function a(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function r(t,e,i,n,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var r=new s(i,n||t,a),l=o?o+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],r]:t._events[l].push(r):(t._events[l]=r,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new a:delete t._events[e]}function h(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(o=!1)),h.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},h.prototype.listeners=function(t){var e=o?o+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,a=i.length,s=new Array(a);n<a;n++)s[n]=i[n].fn;return s},h.prototype.listenerCount=function(t){var e=o?o+t:t,i=this._events[e];return i?i.fn?1:i.length:0},h.prototype.emit=function(t,e,i,n,a,s){var r=o?o+t:t;if(!this._events[r])return!1;var l,h,c=this._events[r],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,a),!0;case 6:return c.fn.call(c.context,e,i,n,a,s),!0}for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];c.fn.apply(c.context,l)}else{var m,p=c.length;for(h=0;h<p;h++)switch(c[h].once&&this.removeListener(t,c[h].fn,void 0,!0),u){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,e);break;case 3:c[h].fn.call(c[h].context,e,i);break;case 4:c[h].fn.call(c[h].context,e,i,n);break;default:if(!l)for(m=1,l=new Array(u-1);m<u;m++)l[m-1]=arguments[m];c[h].fn.apply(c[h].context,l)}}return!0},h.prototype.on=function(t,e,i){return r(this,t,e,i,!1)},h.prototype.once=function(t,e,i){return r(this,t,e,i,!0)},h.prototype.removeListener=function(t,e,i,n){var a=o?o+t:t;if(!this._events[a])return this;if(!e)return l(this,a),this;var s=this._events[a];if(s.fn)s.fn!==e||n&&!s.once||i&&s.context!==i||l(this,a);else{for(var r=0,h=[],c=s.length;r<c;r++)(s[r].fn!==e||n&&!s[r].once||i&&s[r].context!==i)&&h.push(s[r]);h.length?this._events[a]=1===h.length?h[0]:h:l(this,a)}return this},h.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&l(this,e)):(this._events=new a,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=o,h.EventEmitter=h,t.exports=h},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,r,l,h,c,p,d,y=e&&e.length,g=y?e[0]*i:t.length,v=o(t,0,g,i,!0),_=[];if(!v||v.next===v.prev)return _;if(y&&(v=function(t,e,i,n){var s,r,l,h,c,p=[];for(s=0,r=e.length;s<r;s++)l=e[s]*n,h=s<r-1?e[s+1]*n:t.length,(c=o(t,l,h,n,!1))===c.next&&(c.steiner=!0),p.push(f(c));for(p.sort(u),s=0;s<p.length;s++)m(p[s],i),i=a(i,i.next);return i}(t,e,v,i)),t.length>80*i){n=l=t[0],r=h=t[1];for(var b=i;b<g;b+=i)(c=t[b])<n&&(n=c),(p=t[b+1])<r&&(r=p),c>l&&(l=c),p>h&&(h=p);d=0!==(d=Math.max(l-n,h-r))?1/d:0}return s(v,_,i,n,r,d),_}function o(t,e,i,n,o){var a,s;if(o===C(t,e,i,n)>0)for(a=e;a<i;a+=n)s=A(a,t[a],t[a+1],s);else for(a=i-n;a>=e;a-=n)s=A(a,t[a],t[a+1],s);return s&&_(s,s.next)&&(P(s),s=s.next),s}function a(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!_(n,n.next)&&0!==v(n.prev,n,n.next))n=n.next;else{if(P(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function s(t,e,i,n,o,u,m){if(t){!m&&u&&function(t,e,i,n){var o=t;do{null===o.z&&(o.z=d(o.x,o.y,e,i,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,i,n,o,a,s,r,l,h=1;do{for(i=t,t=null,a=null,s=0;i;){for(s++,n=i,r=0,e=0;e<h&&(r++,n=n.nextZ);e++);for(l=h;r>0||l>0&&n;)0!==r&&(0===l||!n||i.z<=n.z)?(o=i,i=i.nextZ,r--):(o=n,n=n.nextZ,l--),a?a.nextZ=o:t=o,o.prevZ=a,a=o;i=n}a.nextZ=null,h*=2}while(s>1)}(o)}(t,n,o,u);for(var p,f,y=t;t.prev!==t.next;)if(p=t.prev,f=t.next,u?l(t,n,o,u):r(t))e.push(p.i/i),e.push(t.i/i),e.push(f.i/i),P(t),t=f.next,y=f.next;else if((t=f)===y){m?1===m?s(t=h(a(t),e,i),e,i,n,o,u,2):2===m&&c(t,e,i,n,o,u):s(a(t),e,i,n,o,u,1);break}}}function r(t){var e=t.prev,i=t,n=t.next;if(v(e,i,n)>=0)return!1;for(var o=t.next.next;o!==t.prev;){if(y(e.x,e.y,i.x,i.y,n.x,n.y,o.x,o.y)&&v(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function l(t,e,i,n){var o=t.prev,a=t,s=t.next;if(v(o,a,s)>=0)return!1;for(var r=o.x<a.x?o.x<s.x?o.x:s.x:a.x<s.x?a.x:s.x,l=o.y<a.y?o.y<s.y?o.y:s.y:a.y<s.y?a.y:s.y,h=o.x>a.x?o.x>s.x?o.x:s.x:a.x>s.x?a.x:s.x,c=o.y>a.y?o.y>s.y?o.y:s.y:a.y>s.y?a.y:s.y,u=d(r,l,e,i,n),m=d(h,c,e,i,n),p=t.prevZ,f=t.nextZ;p&&p.z>=u&&f&&f.z<=m;){if(p!==t.prev&&p!==t.next&&y(o.x,o.y,a.x,a.y,s.x,s.y,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&y(o.x,o.y,a.x,a.y,s.x,s.y,f.x,f.y)&&v(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=u;){if(p!==t.prev&&p!==t.next&&y(o.x,o.y,a.x,a.y,s.x,s.y,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=m;){if(f!==t.prev&&f!==t.next&&y(o.x,o.y,a.x,a.y,s.x,s.y,f.x,f.y)&&v(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function h(t,e,i){var n=t;do{var o=n.prev,s=n.next.next;!_(o,s)&&b(o,n,n.next,s)&&k(o,s)&&k(s,o)&&(e.push(o.i/i),e.push(n.i/i),e.push(s.i/i),P(n),P(n.next),n=t=s),n=n.next}while(n!==t);return a(n)}function c(t,e,i,n,o,r){var l=t;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&g(l,h)){var c=w(l,h);return l=a(l,l.next),c=a(c,c.next),s(l,e,i,n,o,r),void s(c,e,i,n,o,r)}h=h.next}l=l.next}while(l!==t)}function u(t,e){return t.x-e.x}function m(t,e){if(e=function(t,e){var i,n=e,o=t.x,a=t.y,s=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var r=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(r<=o&&r>s){if(s=r,r===o){if(a===n.y)return n;if(a===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(o===s)return i;var l,h=i,c=i.x,u=i.y,m=1/0;n=i;do{o>=n.x&&n.x>=c&&o!==n.x&&y(a<u?o:s,a,c,u,a<u?s:o,a,n.x,n.y)&&(l=Math.abs(a-n.y)/(o-n.x),k(n,t)&&(l<m||l===m&&(n.x>i.x||n.x===i.x&&p(i,n)))&&(i=n,m=l)),n=n.next}while(n!==h);return i}(t,e)){var i=w(e,t);a(e,e.next),a(i,i.next)}}function p(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function d(t,e,i,n,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*o)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function y(t,e,i,n,o,a,s,r){return(o-s)*(e-r)-(t-s)*(a-r)>=0&&(t-s)*(n-r)-(i-s)*(e-r)>=0&&(i-s)*(a-r)-(o-s)*(n-r)>=0}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&b(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(k(t,e)&&k(e,t)&&function(t,e){var i=t,n=!1,o=(t.x+e.x)/2,a=(t.y+e.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&o<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||_(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,i,n){var o=S(v(t,e,i)),a=S(v(t,e,n)),s=S(v(i,n,t)),r=S(v(i,n,e));return o!==a&&s!==r||(!(0!==o||!x(t,i,e))||(!(0!==a||!x(t,n,e))||(!(0!==s||!x(i,t,n))||!(0!==r||!x(i,e,n)))))}function x(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function S(t){return t>0?1:t<0?-1:0}function k(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function w(t,e){var i=new T(t.i,t.x,t.y),n=new T(e.i,e.x,e.y),o=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=o,o.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function A(t,e,i,n){var o=new T(t,e,i);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function P(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,i,n){for(var o=0,a=e,s=i-n;a<i;a+=n)o+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return o}t.exports=n,t.exports.default=n,n.deviation=function(t,e,i,n){var o=e&&e.length,a=o?e[0]*i:t.length,s=Math.abs(C(t,0,a,i));if(o)for(var r=0,l=e.length;r<l;r++){var h=e[r]*i,c=r<l-1?e[r+1]*i:t.length;s-=Math.abs(C(t,h,c,i))}var u=0;for(r=0;r<n.length;r+=3){var m=n[r]*i,p=n[r+1]*i,d=n[r+2]*i;u+=Math.abs((t[m]-t[d])*(t[p+1]-t[m+1])-(t[m]-t[p])*(t[d+1]-t[m+1]))}return 0===s&&0===u?0:Math.abs((u-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,o=0;o<t.length;o++){for(var a=0;a<t[o].length;a++)for(var s=0;s<e;s++)i.vertices.push(t[o][a][s]);o>0&&(n+=t[o-1].length,i.holes.push(n))}return i}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var o=i(4),a=i(8),s=i(3),r=i(2),l=i(18),h={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535};function c(t,e){this.aabb=new l,this.fixture=t,this.childIndex=e,this.proxyId}function u(t,e,i){e.shape?(i=e,e=e.shape):"number"==typeof i&&(i={density:i}),i=a(i,h),this.m_body=t,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_density=i.density,this.m_isSensor=i.isSensor,this.m_filterGroupIndex=i.filterGroupIndex,this.m_filterCategoryBits=i.filterCategoryBits,this.m_filterMaskBits=i.filterMaskBits,this.m_shape=e,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var n=this.m_shape.getChildCount(),o=0;o<n;++o)this.m_proxies[o]=new c(this,o);this.m_userData=i.userData}u.prototype.getType=function(){return this.m_shape.getType()},u.prototype.getShape=function(){return this.m_shape},u.prototype.isSensor=function(){return this.m_isSensor},u.prototype.setSensor=function(t){t!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=t)},u.prototype.getUserData=function(){return this.m_userData},u.prototype.setUserData=function(t){this.m_userData=t},u.prototype.getBody=function(){return this.m_body},u.prototype.getNext=function(){return this.m_next},u.prototype.getDensity=function(){return this.m_density},u.prototype.setDensity=function(t){n&&o.assert(s.isFinite(t)&&t>=0),this.m_density=t},u.prototype.getFriction=function(){return this.m_friction},u.prototype.setFriction=function(t){this.m_friction=t},u.prototype.getRestitution=function(){return this.m_restitution},u.prototype.setRestitution=function(t){this.m_restitution=t},u.prototype.testPoint=function(t){return this.m_shape.testPoint(this.m_body.getTransform(),t)},u.prototype.rayCast=function(t,e,i){return this.m_shape.rayCast(t,e,this.m_body.getTransform(),i)},u.prototype.getMassData=function(t){this.m_shape.computeMass(t,this.m_density)},u.prototype.getAABB=function(t){return n&&o.assert(0<=t&&t<this.m_proxyCount),this.m_proxies[t].aabb},u.prototype.createProxies=function(t,e){n&&o.assert(0==this.m_proxyCount),this.m_proxyCount=this.m_shape.getChildCount();for(var i=0;i<this.m_proxyCount;++i){var a=this.m_proxies[i];this.m_shape.computeAABB(a.aabb,e,i),a.proxyId=t.createProxy(a.aabb,a)}},u.prototype.destroyProxies=function(t){for(var e=0;e<this.m_proxyCount;++e){var i=this.m_proxies[e];t.destroyProxy(i.proxyId),i.proxyId=null}this.m_proxyCount=0},u.prototype.synchronize=function(t,e,i){for(var n=0;n<this.m_proxyCount;++n){var o=this.m_proxies[n],a=new l,s=new l;this.m_shape.computeAABB(a,e,o.childIndex),this.m_shape.computeAABB(s,i,o.childIndex),o.aabb.combine(a,s);var h=r.sub(i.p,e.p);t.moveProxy(o.proxyId,o.aabb,h)}},u.prototype.setFilterData=function(t){this.m_filterGroupIndex=t.groupIndex,this.m_filterCategoryBits=t.categoryBits,this.m_filterMaskBits=t.maskBits,this.refilter()},u.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},u.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},u.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},u.prototype.refilter=function(){if(null!=this.m_body){for(var t=this.m_body.getContactList();t;){var e=t.contact,i=e.getFixtureA(),n=e.getFixtureB();i!=this&&n!=this||e.flagForFiltering(),t=t.next}var o=this.m_body.getWorld();if(null!=o)for(var a=o.m_broadPhase,s=0;s<this.m_proxyCount;++s)a.touchProxy(this.m_proxies[s].proxyId)}},u.prototype.shouldCollide=function(t){return t.m_filterGroupIndex==this.m_filterGroupIndex&&0!=t.m_filterGroupIndex?t.m_filterGroupIndex>0:0!=(t.m_filterMaskBits&this.m_filterCategoryBits)&&0!=(t.m_filterCategoryBits&this.m_filterMaskBits)}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=m;var o=i(8),a=i(4),s=i(2),r=i(55),l=i(56),h=i(29),c=i(19),u={gravity:s.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3};function m(t){if(!(this instanceof m))return new m(t);t&&s.isValid(t)&&(t={gravity:t}),t=o(t,u),this.m_solver=new l(this),this.m_broadPhase=new r,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=t.allowSleep,this.m_gravity=s.clone(t.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=t.warmStarting,this.m_continuousPhysics=t.continuousPhysics,this.m_subStepping=t.subStepping,this.m_blockSolve=t.blockSolve,this.m_velocityIterations=t.velocityIterations,this.m_positionIterations=t.positionIterations,this.m_t=0,this.m_stepCount=0,this.addPair=this.createContact.bind(this)}m.prototype.getBodyList=function(){return this.m_bodyList},m.prototype.getJointList=function(){return this.m_jointList},m.prototype.getContactList=function(){return this.m_contactList},m.prototype.getBodyCount=function(){return this.m_bodyCount},m.prototype.getJointCount=function(){return this.m_jointCount},m.prototype.getContactCount=function(){return this.m_contactCount},m.prototype.setGravity=function(t){this.m_gravity=t},m.prototype.getGravity=function(){return this.m_gravity},m.prototype.isLocked=function(){return this.m_locked},m.prototype.setAllowSleeping=function(t){if(t!=this.m_allowSleep&&(this.m_allowSleep=t,0==this.m_allowSleep))for(var e=this.m_bodyList;e;e=e.m_next)e.setAwake(!0)},m.prototype.getAllowSleeping=function(){return this.m_allowSleep},m.prototype.setWarmStarting=function(t){this.m_warmStarting=t},m.prototype.getWarmStarting=function(){return this.m_warmStarting},m.prototype.setContinuousPhysics=function(t){this.m_continuousPhysics=t},m.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},m.prototype.setSubStepping=function(t){this.m_subStepping=t},m.prototype.getSubStepping=function(){return this.m_subStepping},m.prototype.setAutoClearForces=function(t){this.m_clearForces=t},m.prototype.getAutoClearForces=function(){return this.m_clearForces},m.prototype.clearForces=function(){for(var t=this.m_bodyList;t;t=t.getNext())t.m_force.setZero(),t.m_torque=0},m.prototype.queryAABB=function(t,e){n&&a.assert("function"==typeof e);var i=this.m_broadPhase;this.m_broadPhase.query(t,function(t){var n=i.getUserData(t);return e(n.fixture)})},m.prototype.rayCast=function(t,e,i){n&&a.assert("function"==typeof i);var o=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:t,p2:e},function(t,e){var n=o.getUserData(e),a=n.fixture,r=n.childIndex,l={};if(a.rayCast(l,t,r)){var h=l.fraction,c=s.add(s.mul(1-h,t.p1),s.mul(h,t.p2));return i(a,c,l.normal,h)}return t.maxFraction})},m.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},m.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},m.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},m.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},m.prototype.shiftOrigin=function(t){if(n&&a.assert(0==this.m_locked),!this.m_locked){for(var e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.sub(t),e.m_sweep.c0.sub(t),e.m_sweep.c.sub(t);for(var i=this.m_jointList;i;i=i.m_next)i.shiftOrigin(t);this.m_broadPhase.shiftOrigin(t)}},m.prototype.createBody=function(t,e){if(n&&a.assert(0==this.isLocked()),this.isLocked())return null;t&&s.isValid(t)&&(t={position:t,angle:e});var i=new h(this,t);return i.m_prev=null,i.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=i),this.m_bodyList=i,++this.m_bodyCount,i},m.prototype.createDynamicBody=function(t,e){return t?s.isValid(t)&&(t={position:t,angle:e}):t={},t.type="dynamic",this.createBody(t)},m.prototype.createKinematicBody=function(t,e){return t?s.isValid(t)&&(t={position:t,angle:e}):t={},t.type="kinematic",this.createBody(t)},m.prototype.destroyBody=function(t){if(n&&a.assert(this.m_bodyCount>0),n&&a.assert(0==this.isLocked()),!this.isLocked()){if(t.m_destroyed)return!1;for(var e=t.m_jointList;e;){var i=e;e=e.next,this.publish("remove-joint",i.joint),this.destroyJoint(i.joint),t.m_jointList=e}t.m_jointList=null;for(var o=t.m_contactList;o;){var s=o;o=o.next,this.destroyContact(s.contact),t.m_contactList=o}t.m_contactList=null;for(var r=t.m_fixtureList;r;){var l=r;r=r.m_next,this.publish("remove-fixture",l),l.destroyProxies(this.m_broadPhase),t.m_fixtureList=r}return t.m_fixtureList=null,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),t.m_destroyed=!0,--this.m_bodyCount,this.publish("remove-body",t),!0}},m.prototype.createJoint=function(t){if(n&&a.assert(!!t.m_bodyA),n&&a.assert(!!t.m_bodyB),n&&a.assert(0==this.isLocked()),this.isLocked())return null;if(t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB,0==t.m_collideConnected)for(var e=t.m_bodyB.getContactList();e;e=e.next)e.other==t.m_bodyA&&e.contact.flagForFiltering();return t},m.prototype.destroyJoint=function(t){if(n&&a.assert(0==this.isLocked()),!this.isLocked()){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var e=t.m_bodyA,i=t.m_bodyB;if(e.setAwake(!0),i.setAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==i.m_jointList&&(i.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,n&&a.assert(this.m_jointCount>0),--this.m_jointCount,0==t.m_collideConnected)for(var o=i.getContactList();o;)o.other==e&&o.contact.flagForFiltering(),o=o.next;this.publish("remove-joint",t)}};var p=new l.TimeStep;m.prototype.step=function(t,e,i){if((0|e)!==e&&(e=0),e=e||this.m_velocityIterations,i=i||this.m_positionIterations,this.m_stepCount++,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,p.reset(t),p.velocityIterations=e,p.positionIterations=i,p.warmStarting=this.m_warmStarting,p.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&t>0){this.m_solver.solveWorld(p);for(var n=this.m_bodyList;n;n=n.getNext())0!=n.m_islandFlag&&(n.isStatic()||n.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&t>0&&this.m_solver.solveWorldTOI(p),this.m_clearForces&&this.clearForces(),this.m_locked=!1},m.prototype.findNewContacts=function(){this.m_broadPhase.updatePairs(this.addPair)},m.prototype.createContact=function(t,e){var i=t.fixture,n=e.fixture,o=t.childIndex,a=e.childIndex,s=i.getBody(),r=n.getBody();if(s!==r){for(var l=r.getContactList();l;){if(l.other===s){var h=l.contact.getFixtureA(),u=l.contact.getFixtureB(),m=l.contact.getChildIndexA(),p=l.contact.getChildIndexB();if(h===i&&u===n&&m===o&&p===a)return;if(h===n&&u===i&&m===a&&p===o)return}l=l.next}if(!1!==r.shouldCollide(s)&&!1!==n.shouldCollide(i)){var d=c.create(i,o,n,a);null!=d&&(d.m_prev=null,null!=this.m_contactList&&(d.m_next=this.m_contactList,this.m_contactList.m_prev=d),this.m_contactList=d,++this.m_contactCount)}}},m.prototype.updateContacts=function(){for(var t,e=this.m_contactList;t=e;){e=t.getNext();var i=t.getFixtureA(),n=t.getFixtureB(),o=t.getChildIndexA(),a=t.getChildIndexB(),s=i.getBody(),r=n.getBody();if(t.m_filterFlag){if(0==r.shouldCollide(s)){this.destroyContact(t);continue}if(0==n.shouldCollide(i)){this.destroyContact(t);continue}t.m_filterFlag=!1}var l=s.isAwake()&&!s.isStatic(),h=r.isAwake()&&!r.isStatic();if(0!=l||0!=h){var c=i.m_proxies[o].proxyId,u=n.m_proxies[a].proxyId;0!=this.m_broadPhase.testOverlap(c,u)?t.update(this):this.destroyContact(t)}}},m.prototype.destroyContact=function(t){c.destroy(t,this),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_contactList&&(this.m_contactList=t.m_next),--this.m_contactCount},m.prototype._listeners=null,m.prototype.on=function(t,e){return"string"!=typeof t||"function"!=typeof e?this:(this._listeners||(this._listeners={}),this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this)},m.prototype.off=function(t,e){if("string"!=typeof t||"function"!=typeof e)return this;var i=this._listeners&&this._listeners[t];if(!i||!i.length)return this;var n=i.indexOf(e);return n>=0&&i.splice(n,1),this},m.prototype.publish=function(t,e,i,n){var o=this._listeners&&this._listeners[t];if(!o||!o.length)return 0;for(var a=0;a<o.length;a++)o[a].call(this,e,i,n);return o.length},m.prototype.beginContact=function(t){this.publish("begin-contact",t)},m.prototype.endContact=function(t){this.publish("end-contact",t)},m.prototype.preSolve=function(t,e){this.publish("pre-solve",t,e)},m.prototype.postSolve=function(t,e){this.publish("post-solve",t,e)}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,o=i(7),a=i(4),s=i(40),r=i(2),l=i(3),h=i(18);t.exports=p;var c=new s({create:function(){return new h},release:function(t){t.lowerBound.setZero(),t.upperBound.setZero()}}),u=new s({create:function(){return new m}});function m(t){this.id=t,this.aabb=new h,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.toString=function(){return this.id+": "+this.userData}}function p(){this.m_root=null,this.m_nodes={},this.m_lastProxyId=0}m.prototype.isLeaf=function(){return null==this.child1},p.prototype.getUserData=function(t){var e=this.m_nodes[t];return n&&a.assert(!!e),e.userData},p.prototype.getFatAABB=function(t){var e=this.m_nodes[t];return n&&a.assert(!!e),e.aabb},p.prototype.allocateNode=function(){var t=u.allocate();return t.id=++this.m_lastProxyId,t.userData=null,t.parent=null,t.child1=null,t.child2=null,t.height=-1,this.m_nodes[t.id]=t,t},p.prototype.freeNode=function(t){u.release(t),t.height=-1,delete this.m_nodes[t.id]},p.prototype.createProxy=function(t,e){n&&a.assert(h.isValid(t));var i=this.allocateNode();return i.aabb.set(t),i.aabb.extend(o.aabbExtension),i.userData=e,i.height=0,this.insertLeaf(i),i.id},p.prototype.destroyProxy=function(t){var e=this.m_nodes[t];n&&a.assert(!!e),n&&a.assert(e.isLeaf()),this.removeLeaf(e),this.freeNode(e)},p.prototype.moveProxy=function(t,e,i){n&&a.assert(h.isValid(e)),n&&a.assert(!i||r.isValid(i));var s=this.m_nodes[t];return n&&a.assert(!!s),n&&a.assert(s.isLeaf()),!s.aabb.contains(e)&&(this.removeLeaf(s),s.aabb.set(e),e=s.aabb,h.extend(e,o.aabbExtension),i.x<0?e.lowerBound.x+=i.x*o.aabbMultiplier:e.upperBound.x+=i.x*o.aabbMultiplier,i.y<0?e.lowerBound.y+=i.y*o.aabbMultiplier:e.upperBound.y+=i.y*o.aabbMultiplier,this.insertLeaf(s),!0)},p.prototype.insertLeaf=function(t){if(n&&a.assert(h.isValid(t.aabb)),null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);for(var e=t.aabb,i=this.m_root;0==i.isLeaf();){var o=i.child1,s=i.child2,r=i.aabb.getPerimeter(),u=c.allocate();u.combine(i.aabb,e);var m=u.getPerimeter();c.release(u);var p,d,f=2*m,y=2*(m-r);if(o.isLeaf()){(v=c.allocate()).combine(e,o.aabb),p=v.getPerimeter()+y,c.release(v)}else{(v=c.allocate()).combine(e,o.aabb);var g=o.aabb.getPerimeter();p=v.getPerimeter()-g+y,c.release(v)}if(s.isLeaf()){(v=c.allocate()).combine(e,s.aabb),d=v.getPerimeter()+y,c.release(v)}else{var v;(v=c.allocate()).combine(e,s.aabb);g=s.aabb.getPerimeter();d=v.getPerimeter()-g+y,c.release(v)}if(f<p&&f<d)break;i=p<d?o:s}var _=i,b=_.parent,x=this.allocateNode();for(x.parent=b,x.userData=null,x.aabb.combine(e,_.aabb),x.height=_.height+1,null!=b?(b.child1==_?b.child1=x:b.child2=x,x.child1=_,x.child2=t,_.parent=x,t.parent=x):(x.child1=_,x.child2=t,_.parent=x,t.parent=x,this.m_root=x),i=t.parent;null!=i;){o=(i=this.balance(i)).child1,s=i.child2;n&&a.assert(null!=o),n&&a.assert(null!=s),i.height=1+l.max(o.height,s.height),i.aabb.combine(o.aabb,s.aabb),i=i.parent}},p.prototype.removeLeaf=function(t){if(t!=this.m_root){var e,i=t.parent,n=i.parent;if(e=i.child1==t?i.child2:i.child1,null!=n){n.child1==i?n.child1=e:n.child2=e,e.parent=n,this.freeNode(i);for(var o=n;null!=o;){var a=(o=this.balance(o)).child1,s=o.child2;o.aabb.combine(a.aabb,s.aabb),o.height=1+l.max(a.height,s.height),o=o.parent}}else this.m_root=e,e.parent=null,this.freeNode(i)}else this.m_root=null},p.prototype.balance=function(t){n&&a.assert(null!=t);var e=t;if(e.isLeaf()||e.height<2)return t;var i=e.child1,o=e.child2,s=o.height-i.height;if(s>1){var r=o.child1,h=o.child2;return o.child1=e,o.parent=e.parent,e.parent=o,null!=o.parent?o.parent.child1==t?o.parent.child1=o:o.parent.child2=o:this.m_root=o,r.height>h.height?(o.child2=r,e.child2=h,h.parent=e,e.aabb.combine(i.aabb,h.aabb),o.aabb.combine(e.aabb,r.aabb),e.height=1+l.max(i.height,h.height),o.height=1+l.max(e.height,r.height)):(o.child2=h,e.child2=r,r.parent=e,e.aabb.combine(i.aabb,r.aabb),o.aabb.combine(e.aabb,h.aabb),e.height=1+l.max(i.height,r.height),o.height=1+l.max(e.height,h.height)),o}if(s<-1){var c=i.child1,u=i.child2;return i.child1=e,i.parent=e.parent,e.parent=i,null!=i.parent?i.parent.child1==e?i.parent.child1=i:i.parent.child2=i:this.m_root=i,c.height>u.height?(i.child2=c,e.child1=u,u.parent=e,e.aabb.combine(o.aabb,u.aabb),i.aabb.combine(e.aabb,c.aabb),e.height=1+l.max(o.height,u.height),i.height=1+l.max(e.height,c.height)):(i.child2=u,e.child1=c,c.parent=e,e.aabb.combine(o.aabb,c.aabb),i.aabb.combine(e.aabb,u.aabb),e.height=1+l.max(o.height,c.height),i.height=1+l.max(e.height,u.height)),i}return e},p.prototype.getHeight=function(){return null==this.m_root?0:this.m_root.height},p.prototype.getAreaRatio=function(){if(null==this.m_root)return 0;for(var t,e=this.m_root.aabb.getPerimeter(),i=0,n=y.allocate().preorder();t=n.next();)t.height<0||(i+=t.aabb.getPerimeter());return y.release(n),i/e},p.prototype.computeHeight=function(t){var e;if((e=void 0!==t?this.m_nodes[t]:this.m_root).isLeaf())return 0;var i=ComputeHeight(e.child1),n=ComputeHeight(e.child2);return 1+l.max(i,n)},p.prototype.validateStructure=function(t){if(null!=t){t==this.m_root&&n&&a.assert(null==t.parent);var e=t.child1,i=t.child2;if(t.isLeaf())return n&&a.assert(null==e),n&&a.assert(null==i),void(n&&a.assert(0==t.height));n&&a.assert(e.parent==t),n&&a.assert(i.parent==t),this.validateStructure(e),this.validateStructure(i)}},p.prototype.validateMetrics=function(t){if(null!=t){var e=t.child1,i=t.child2;if(t.isLeaf())return n&&a.assert(null==e),n&&a.assert(null==i),void(n&&a.assert(0==t.height));var o=this.m_nodes[e].height,s=this.m_nodes[i].height,r=1+l.max(o,s);n&&a.assert(t.height==r),n&&a.assert(h.areEqual((new h).combine(e.aabb,i.aabb),t.aabb)),this.validateMetrics(e),this.validateMetrics(i)}},p.prototype.validate=function(){ValidateStructure(this.m_root),ValidateMetrics(this.m_root),n&&a.assert(this.getHeight()==this.computeHeight())},p.prototype.getMaxBalance=function(){for(var t,e=0,i=y.allocate().preorder();t=i.next();)if(!(t.height<=1)){n&&a.assert(0==t.isLeaf());var o=l.abs(t.child2.height-t.child1.height);e=l.max(e,o)}return y.release(i),e},p.prototype.rebuildBottomUp=function(){for(var t,e=[],i=0,n=y.allocate().preorder();t=n.next();)t.height<0||(t.isLeaf()?(t.parent=null,e[i]=t,++i):this.freeNode(t));for(y.release(n);i>1;){for(var o=1/0,a=-1,s=-1,r=0;r<i;++r)for(var h=e[r].aabb,u=r+1;u<i;++u){var m=e[u].aabb,p=c.allocate();p.combine(h,m);var d=p.getPerimeter();d<o&&(a=r,s=u,o=d),c.release(p)}var f=e[a],g=e[s],v=this.allocateNode();v.child1=f,v.child2=g,v.height=1+l.max(f.height,g.height),v.aabb.combine(f.aabb,g.aabb),v.parent=null,f.parent=v,g.parent=v,e[s]=e[i-1],e[a]=v,--i}this.m_root=e[0],this.validate()},p.prototype.shiftOrigin=function(t){for(var e,i=y.allocate().preorder();e=i.next();){var n=e.aabb;n.lowerBound.x-=t.x,n.lowerBound.y-=t.y,n.upperBound.x-=t.x,n.upperBound.y-=t.y}y.release(i)},p.prototype.query=function(t,e){n&&a.assert("function"==typeof e);var i=f.allocate();for(i.push(this.m_root);i.length>0;){var o=i.pop();if(null!=o)if(h.testOverlap(o.aabb,t))if(o.isLeaf()){if(0==e(o.id))return}else i.push(o.child1),i.push(o.child2)}f.release(i)},p.prototype.rayCast=function(t,e){n&&a.assert("function"==typeof e);var i=t.p1,o=t.p2,s=r.sub(o,i);n&&a.assert(s.lengthSquared()>0),s.normalize();var c=r.cross(1,s),u=r.abs(c),m=t.maxFraction,p=new h,y=r.combine(1-m,i,m,o);p.combinePoints(i,y);var g=f.allocate(),v=d.allocate();for(g.push(this.m_root);g.length>0;){var _=g.pop();if(null!=_&&0!=h.testOverlap(_.aabb,p)){var b=_.aabb.getCenter(),x=_.aabb.getExtents();if(!(l.abs(r.dot(c,r.sub(i,b)))-r.dot(u,x)>0))if(_.isLeaf()){v.p1=r.clone(t.p1),v.p2=r.clone(t.p2),v.maxFraction=m;var S=e(v,_.id);if(0==S)return;S>0&&(m=S,y=r.combine(1-m,i,m,o),p.combinePoints(i,y))}else g.push(_.child1),g.push(_.child2)}}f.release(g),d.release(v)};var d=new s({create:function(){return{}},release:function(t){}}),f=new s({create:function(){return[]},release:function(t){t.length=0}}),y=new s({create:function(){return new g},release:function(t){t.close()}});function g(){var t=[],e=[];return{preorder:function(i){return t.length=0,t.push(i),e.length=0,e.push(0),this},next:function(){for(;t.length>0;){var i=t.length-1,n=t[i];if(0===e[i])return e[i]=1,n;if(1===e[i]&&(e[i]=2,n.child1))return t.push(n.child1),e.push(1),n.child1;if(2===e[i]&&(e[i]=3,n.child2))return t.push(n.child2),e.push(1),n.child2;t.pop(),e.pop()}},close:function(){t.length=0}}}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=function(t){var e=[],i=t.max||1/0,n=t.create||function(){return{}},o=t.allocate||function(){},a=t.release||function(){},s=t.discard||function(){},r=0,l=0,h=0,c=0;this.max=function(t){return"number"==typeof t?(i=t,this):i},this.size=function(){return e.length},this.allocate=function(){var t;return e.length>0?t=e.shift():(r++,t=n()),l++,o(t),t},this.release=function(t){e.length<i?(h++,a(t),e.push(t)):(c++,s(t))},this.toString=function(){return" +"+r+" >"+l+" <"+h+" -"+c+" ="+e.length+"/"+i}}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=function(t,e){var i=s.now();++r.toiCalls,t.state=v.e_unknown,t.t=e.tMax;var h=e.proxyA,c=e.proxyB,u=e.sweepA,y=e.sweepB;u.normalize(),y.normalize();var b=e.tMax,x=h.m_radius+c.m_radius,S=l.max(o.linearSlop,x-3*o.linearSlop),k=.25*o.linearSlop;n&&a.assert(S>k);var w=0,A=o.maxTOIIterations,P=0,T=new g,C=new d;for(C.proxyA=e.proxyA,C.proxyB=e.proxyB,C.useRadii=!1;;){var I=m.identity(),B=m.identity();u.getTransform(I,w),y.getTransform(B,w),C.transformA=I,C.transformB=B;var L=new f;if(p(L,T,C),L.distance<=0){t.state=v.e_overlapped,t.t=0;break}if(L.distance<S+k){t.state=v.e_touching,t.t=w;break}var E=new _;E.initialize(T,h,u,c,y,w);for(var M=!1,R=b,D=0;;){var O=E.findMinSeparation(R);E.indexA,E.indexB;if(O>S+k){t.state=v.e_separated,t.t=b,M=!0;break}if(O>S-k){w=R;break}var F=E.evaluate(w);E.indexA,E.indexB;if(F<S-k){t.state=v.e_failed,t.t=w,M=!0;break}if(F<=S+k){t.state=v.e_touching,t.t=w,M=!0;break}for(var j=0,U=w,N=R;;){var V;V=1&j?U+(S-F)*(N-U)/(O-F):.5*(U+N),++j,++r.toiRootIters;var G=E.evaluate(V);E.indexA,E.indexB;if(l.abs(G-S)<k){R=V;break}if(G>S?(U=V,F=G):(N=V,O=G),50==j)break}if(r.toiMaxRootIters=l.max(r.toiMaxRootIters,j),++D==o.maxPolygonVertices)break}if(++P,++r.toiIters,M)break;if(P==A){t.state=v.e_failed,t.t=w;break}}r.toiMaxIters=l.max(r.toiMaxIters,P);var X=s.diff(i);r.toiMaxTime=l.max(r.toiMaxTime,X),r.toiTime+=X},t.exports.Input=function(){this.proxyA=new y,this.proxyB=new y,this.sweepA=new u,this.sweepB=new u,this.tMax},t.exports.Output=v;var o=i(7),a=i(4),s=i(57),r=i(30),l=i(3),h=i(2),c=(i(10),i(11),i(13),i(6)),u=i(12),m=i(5),p=(i(14),i(15),i(25)),d=p.Input,f=p.Output,y=p.Proxy,g=p.Cache;function v(){this.state,this.t}v.e_unknown=0,v.e_failed=1,v.e_overlapped=2,v.e_touching=3,v.e_separated=4,r.toiTime=0,r.toiMaxTime=0,r.toiCalls=0,r.toiIters=0,r.toiMaxIters=0,r.toiRootIters=0,r.toiMaxRootIters=0;function _(){this.m_proxyA=new y,this.m_proxyB=new y,this.m_sweepA,this.m_sweepB,this.m_type,this.m_localPoint=h.zero(),this.m_axis=h.zero()}_.prototype.initialize=function(t,e,i,o,s,r){this.m_proxyA=e,this.m_proxyB=o;var l=t.count;n&&a.assert(0<l&&l<3),this.m_sweepA=i,this.m_sweepB=s;var u=m.identity(),p=m.identity();if(this.m_sweepA.getTransform(u,r),this.m_sweepB.getTransform(p,r),1==l){this.m_type=1;var d=this.m_proxyA.getVertex(t.indexA[0]),f=this.m_proxyB.getVertex(t.indexB[0]),y=m.mulVec2(u,d),g=m.mulVec2(p,f);return this.m_axis.setCombine(1,g,-1,y),k=this.m_axis.normalize()}if(t.indexA[0]==t.indexA[1]){this.m_type=3;var v=o.getVertex(t.indexB[0]),_=o.getVertex(t.indexB[1]);this.m_axis=h.cross(h.sub(_,v),1),this.m_axis.normalize();var b=c.mulVec2(p.q,this.m_axis);this.m_localPoint=h.mid(v,_);g=m.mulVec2(p,this.m_localPoint),d=e.getVertex(t.indexA[0]),y=m.mulVec2(u,d);return(k=h.dot(y,b)-h.dot(g,b))<0&&(this.m_axis=h.neg(this.m_axis),k=-k),k}this.m_type=2;var x=this.m_proxyA.getVertex(t.indexA[0]),S=this.m_proxyA.getVertex(t.indexA[1]);this.m_axis=h.cross(h.sub(S,x),1),this.m_axis.normalize();b=c.mulVec2(u.q,this.m_axis);this.m_localPoint=h.mid(x,S);var k;y=m.mulVec2(u,this.m_localPoint),f=this.m_proxyB.getVertex(t.indexB[0]),g=m.mulVec2(p,f);return(k=h.dot(g,b)-h.dot(y,b))<0&&(this.m_axis=h.neg(this.m_axis),k=-k),k},_.prototype.compute=function(t,e){var i=m.identity(),o=m.identity();switch(this.m_sweepA.getTransform(i,e),this.m_sweepB.getTransform(o,e),this.m_type){case 1:if(t){var s=c.mulTVec2(i.q,this.m_axis),r=c.mulTVec2(o.q,h.neg(this.m_axis));this.indexA=this.m_proxyA.getSupport(s),this.indexB=this.m_proxyB.getSupport(r)}var l=this.m_proxyA.getVertex(this.indexA),u=this.m_proxyB.getVertex(this.indexB),p=m.mulVec2(i,l),d=m.mulVec2(o,u);return h.dot(d,this.m_axis)-h.dot(p,this.m_axis);case 2:var f=c.mulVec2(i.q,this.m_axis);p=m.mulVec2(i,this.m_localPoint);if(t){r=c.mulTVec2(o.q,h.neg(f));this.indexA=-1,this.indexB=this.m_proxyB.getSupport(r)}u=this.m_proxyB.getVertex(this.indexB),d=m.mulVec2(o,u);return h.dot(d,f)-h.dot(p,f);case 3:f=c.mulVec2(o.q,this.m_axis),d=m.mulVec2(o,this.m_localPoint);if(t){s=c.mulTVec2(i.q,h.neg(f));this.indexB=-1,this.indexA=this.m_proxyA.getSupport(s)}l=this.m_proxyA.getVertex(this.indexA),p=m.mulVec2(i,l);return h.dot(p,f)-h.dot(d,f);default:return n&&a.assert(!1),t&&(this.indexA=-1,this.indexB=-1),0}},_.prototype.findMinSeparation=function(t){return this.compute(!0,t)},_.prototype.evaluate=function(t){return this.compute(!1,t)}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=g;var o=i(4),a=i(8),s=i(9),r=i(7),l=i(3),h=i(2),c=i(10),u=i(11),m=i(13),p=i(6),d=(i(12),i(5),i(14),i(15),i(16)),f=0;g.TYPE="revolute-joint",g._super=d,g.prototype=s(g._super.prototype);var y={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1};function g(t,e,i,n){if(!(this instanceof g))return new g(t,e,i,n);t=a(t,y),d.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=g.TYPE,this.m_localAnchorA=n?e.getLocalPoint(n):t.localAnchorA||h.zero(),this.m_localAnchorB=n?i.getLocalPoint(n):t.localAnchorB||h.zero(),this.m_referenceAngle=l.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_impulse=c(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new m,this.m_motorMass,this.m_limitState=f}g.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},g.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},g.prototype.getReferenceAngle=function(){return this.m_referenceAngle},g.prototype.getJointAngle=function(){var t=this.m_bodyA;return this.m_bodyB.m_sweep.a-t.m_sweep.a-this.m_referenceAngle},g.prototype.getJointSpeed=function(){var t=this.m_bodyA;return this.m_bodyB.m_angularVelocity-t.m_angularVelocity},g.prototype.isMotorEnabled=function(){return this.m_enableMotor},g.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},g.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},g.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},g.prototype.getMotorSpeed=function(){return this.m_motorSpeed},g.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},g.prototype.isLimitEnabled=function(){return this.m_enableLimit},g.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},g.prototype.getLowerLimit=function(){return this.m_lowerAngle},g.prototype.getUpperLimit=function(){return this.m_upperAngle},g.prototype.setLimits=function(t,e){n&&o.assert(t<=e),t==this.m_lowerAngle&&e==this.m_upperAngle||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)},g.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},g.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},g.prototype.getReactionForce=function(t){return h.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},g.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},g.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,c=p.neo(e),u=p.neo(o);this.m_rA=p.mulVec2(c,h.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=p.mulVec2(u,h.sub(this.m_localAnchorB,this.m_localCenterB));var m=this.m_invMassA,d=this.m_invMassB,y=this.m_invIA,g=this.m_invIB,v=y+g===0;if(this.m_mass.ex.x=m+d+this.m_rA.y*this.m_rA.y*y+this.m_rB.y*this.m_rB.y*g,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*y-this.m_rB.y*this.m_rB.x*g,this.m_mass.ez.x=-this.m_rA.y*y-this.m_rB.y*g,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=m+d+this.m_rA.x*this.m_rA.x*y+this.m_rB.x*this.m_rB.x*g,this.m_mass.ez.y=this.m_rA.x*y+this.m_rB.x*g,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=y+g,this.m_motorMass=y+g,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(0==this.m_enableMotor||v)&&(this.m_motorImpulse=0),this.m_enableLimit&&0==v){var _=o-e-this.m_referenceAngle;l.abs(this.m_upperAngle-this.m_lowerAngle)<2*r.angularSlop?this.m_limitState=3:_<=this.m_lowerAngle?(1!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=1):_>=this.m_upperAngle?(2!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=2):(this.m_limitState=f,this.m_impulse.z=0)}else this.m_limitState=f;if(t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var b=h.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(m,b),n-=y*(h.cross(this.m_rA,b)+this.m_motorImpulse+this.m_impulse.z),a.addMul(d,b),s+=g*(h.cross(this.m_rB,b)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=s},g.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,a=this.m_invMassA,s=this.m_invMassB,r=this.m_invIA,u=this.m_invIB,m=r+u===0;if(this.m_enableMotor&&3!=this.m_limitState&&0==m){var p=o-i-this.m_motorSpeed,d=-this.m_motorMass*p,y=this.m_motorImpulse,g=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=l.clamp(this.m_motorImpulse+d,-g,g),i-=r*(d=this.m_motorImpulse-y),o+=u*d}if(this.m_enableLimit&&this.m_limitState!=f&&0==m){var v=h.zero();v.addCombine(1,n,1,h.cross(o,this.m_rB)),v.subCombine(1,e,1,h.cross(i,this.m_rA));var _=o-i;p=c(v.x,v.y,_),d=c.neg(this.m_mass.solve33(p));if(3==this.m_limitState)this.m_impulse.add(d);else if(1==this.m_limitState){if(this.m_impulse.z+d.z<0){var b=h.combine(-1,v,this.m_impulse.z,h.neo(this.m_mass.ez.x,this.m_mass.ez.y)),x=this.m_mass.solve22(b);d.x=x.x,d.y=x.y,d.z=-this.m_impulse.z,this.m_impulse.x+=x.x,this.m_impulse.y+=x.y,this.m_impulse.z=0}else this.m_impulse.add(d)}else if(2==this.m_limitState){if(this.m_impulse.z+d.z>0){b=h.combine(-1,v,this.m_impulse.z,h.neo(this.m_mass.ez.x,this.m_mass.ez.y)),x=this.m_mass.solve22(b);d.x=x.x,d.y=x.y,d.z=-this.m_impulse.z,this.m_impulse.x+=x.x,this.m_impulse.y+=x.y,this.m_impulse.z=0}else this.m_impulse.add(d)}var S=h.neo(d.x,d.y);e.subMul(a,S),i-=r*(h.cross(this.m_rA,S)+d.z),n.addMul(s,S),o+=u*(h.cross(this.m_rB,S)+d.z)}else{(p=h.zero()).addCombine(1,n,1,h.cross(o,this.m_rB)),p.subCombine(1,e,1,h.cross(i,this.m_rA));d=this.m_mass.solve22(h.neg(p));this.m_impulse.x+=d.x,this.m_impulse.y+=d.y,e.subMul(a,d),i-=r*h.cross(this.m_rA,d),n.addMul(s,d),o+=u*h.cross(this.m_rB,d)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},g.prototype.solvePositionConstraints=function(t){var e,i=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,o=this.m_bodyB.c_position.c,a=this.m_bodyB.c_position.a,s=p.neo(n),c=p.neo(a),m=0,d=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&this.m_limitState!=f&&0==d){var y=a-n-this.m_referenceAngle,g=0;if(3==this.m_limitState){var v=l.clamp(y-this.m_lowerAngle,-r.maxAngularCorrection,r.maxAngularCorrection);g=-this.m_motorMass*v,m=l.abs(v)}else if(1==this.m_limitState){m=-(v=y-this.m_lowerAngle),v=l.clamp(v+r.angularSlop,-r.maxAngularCorrection,0),g=-this.m_motorMass*v}else if(2==this.m_limitState){m=v=y-this.m_upperAngle,v=l.clamp(v-r.angularSlop,0,r.maxAngularCorrection),g=-this.m_motorMass*v}n-=this.m_invIA*g,a+=this.m_invIB*g}s.set(n),c.set(a);var _=p.mulVec2(s,h.sub(this.m_localAnchorA,this.m_localCenterA)),b=p.mulVec2(c,h.sub(this.m_localAnchorB,this.m_localCenterB));(v=h.zero()).addCombine(1,o,1,b),v.subCombine(1,i,1,_),e=v.length();var x=this.m_invMassA,S=this.m_invMassB,k=this.m_invIA,w=this.m_invIB,A=new u;A.ex.x=x+S+k*_.y*_.y+w*b.y*b.y,A.ex.y=-k*_.x*_.y-w*b.x*b.y,A.ey.x=A.ex.y,A.ey.y=x+S+k*_.x*_.x+w*b.x*b.x;var P=h.neg(A.solve(v));return i.subMul(x,P),n-=k*h.cross(_,P),o.addMul(S,P),a+=w*h.cross(b,P),this.m_bodyA.c_position.c.set(i),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(o),this.m_bodyB.c_position.a=a,e<=r.linearSlop&&m<=r.angularSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=g;var o=i(4),a=i(8),s=i(9),r=i(7),l=i(3),h=i(2),c=i(10),u=i(11),m=i(13),p=i(6),d=(i(12),i(5),i(14),i(15),i(16)),f=0;g.TYPE="prismatic-joint",g._super=d,g.prototype=s(g._super.prototype);var y={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0};function g(t,e,i,n,o){if(!(this instanceof g))return new g(t,e,i,n,o);t=a(t,y),d.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=g.TYPE,this.m_localAnchorA=n?e.getLocalPoint(n):t.localAnchorA||h.zero(),this.m_localAnchorB=n?i.getLocalPoint(n):t.localAnchorB||h.zero(),this.m_localXAxisA=o?e.getLocalVector(o):t.localAxisA||h.neo(1,0),this.m_localXAxisA.normalize(),this.m_localYAxisA=h.cross(1,this.m_localXAxisA),this.m_referenceAngle=l.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_impulse=c(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=f,this.m_axis=h.zero(),this.m_perp=h.zero(),this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_axis,this.m_perp,this.m_s1,this.m_s2,this.m_a1,this.m_a2,this.m_K=new m,this.m_motorMass}g.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},g.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},g.prototype.getLocalAxisA=function(){return this.m_localXAxisA},g.prototype.getReferenceAngle=function(){return this.m_referenceAngle},g.prototype.getJointTranslation=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_bodyB.getWorldPoint(this.m_localAnchorB),i=h.sub(e,t),n=this.m_bodyA.getWorldVector(this.m_localXAxisA);return h.dot(i,n)},g.prototype.getJointSpeed=function(){var t=this.m_bodyA,e=this.m_bodyB,i=p.mulVec2(t.m_xf.q,h.sub(this.m_localAnchorA,t.m_sweep.localCenter)),n=p.mulVec2(e.m_xf.q,h.sub(this.m_localAnchorB,e.m_sweep.localCenter)),o=h.add(t.m_sweep.c,i),a=h.add(e.m_sweep.c,n),s=h.sub(a,o),r=p.mulVec2(t.m_xf.q,this.m_localXAxisA),l=t.m_linearVelocity,c=e.m_linearVelocity,u=t.m_angularVelocity,m=e.m_angularVelocity;return h.dot(s,h.cross(u,r))+h.dot(r,h.sub(h.addCross(c,m,n),h.addCross(l,u,i)))},g.prototype.isLimitEnabled=function(){return this.m_enableLimit},g.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},g.prototype.getLowerLimit=function(){return this.m_lowerTranslation},g.prototype.getUpperLimit=function(){return this.m_upperTranslation},g.prototype.setLimits=function(t,e){n&&o.assert(t<=e),t==this.m_lowerTranslation&&e==this.m_upperTranslation||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)},g.prototype.isMotorEnabled=function(){return this.m_enableMotor},g.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},g.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},g.prototype.setMaxMotorForce=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t},g.prototype.getMotorSpeed=function(){return this.m_motorSpeed},g.prototype.getMotorForce=function(t){return t*this.m_motorImpulse},g.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},g.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},g.prototype.getReactionForce=function(t){return h.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis).mul(t)},g.prototype.getReactionTorque=function(t){return t*this.m_impulse.y},g.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,c=this.m_bodyB.c_velocity.v,u=this.m_bodyB.c_velocity.w,m=p.neo(i),d=p.neo(s),y=p.mulVec2(m,h.sub(this.m_localAnchorA,this.m_localCenterA)),g=p.mulVec2(d,h.sub(this.m_localAnchorB,this.m_localCenterB)),v=h.zero();v.addCombine(1,a,1,g),v.subCombine(1,e,1,y);var _=this.m_invMassA,b=this.m_invMassB,x=this.m_invIA,S=this.m_invIB;this.m_axis=p.mulVec2(m,this.m_localXAxisA),this.m_a1=h.cross(h.add(v,y),this.m_axis),this.m_a2=h.cross(g,this.m_axis),this.m_motorMass=_+b+x*this.m_a1*this.m_a1+S*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_perp=p.mulVec2(m,this.m_localYAxisA),this.m_s1=h.cross(h.add(v,y),this.m_perp),this.m_s2=h.cross(g,this.m_perp);h.cross(y,this.m_perp);var k=_+b+x*this.m_s1*this.m_s1+S*this.m_s2*this.m_s2,w=x*this.m_s1+S*this.m_s2,A=x*this.m_s1*this.m_a1+S*this.m_s2*this.m_a2,P=x+S;0==P&&(P=1);var T=x*this.m_a1+S*this.m_a2,C=_+b+x*this.m_a1*this.m_a1+S*this.m_a2*this.m_a2;if(this.m_K.ex.set(k,w,A),this.m_K.ey.set(w,P,T),this.m_K.ez.set(A,T,C),this.m_enableLimit){var I=h.dot(this.m_axis,v);l.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*r.linearSlop?this.m_limitState=3:I<=this.m_lowerTranslation?1!=this.m_limitState&&(this.m_limitState=1,this.m_impulse.z=0):I>=this.m_upperTranslation?2!=this.m_limitState&&(this.m_limitState=2,this.m_impulse.z=0):(this.m_limitState=f,this.m_impulse.z=0)}else this.m_limitState=f,this.m_impulse.z=0;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var B=h.combine(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),L=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,E=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;n.subMul(_,B),o-=x*L,c.addMul(b,B),u+=S*E}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.set(c),this.m_bodyB.c_velocity.w=u},g.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,a=this.m_invMassA,s=this.m_invMassB,r=this.m_invIA,u=this.m_invIB;if(this.m_enableMotor&&3!=this.m_limitState){var m=h.dot(this.m_axis,h.sub(n,e))+this.m_a2*o-this.m_a1*i,p=this.m_motorMass*(this.m_motorSpeed-m),d=this.m_motorImpulse,y=t.dt*this.m_maxMotorForce;this.m_motorImpulse=l.clamp(this.m_motorImpulse+p,-y,y),p=this.m_motorImpulse-d;var g=h.mul(p,this.m_axis),v=p*this.m_a1,_=p*this.m_a2;e.subMul(a,g),i-=r*v,n.addMul(s,g),o+=u*_}var b=h.zero();if(b.x+=h.dot(this.m_perp,n)+this.m_s2*o,b.x-=h.dot(this.m_perp,e)+this.m_s1*i,b.y=o-i,this.m_enableLimit&&this.m_limitState!=f){var x=0;x+=h.dot(this.m_axis,n)+this.m_a2*o,x-=h.dot(this.m_axis,e)+this.m_a1*i;m=c(b.x,b.y,x);var S=c(this.m_impulse),k=this.m_K.solve33(c.neg(m));this.m_impulse.add(k),1==this.m_limitState?this.m_impulse.z=l.max(this.m_impulse.z,0):2==this.m_limitState&&(this.m_impulse.z=l.min(this.m_impulse.z,0));var w=h.combine(-1,b,-(this.m_impulse.z-S.z),h.neo(this.m_K.ez.x,this.m_K.ez.y)),A=h.add(this.m_K.solve22(w),h.neo(S.x,S.y));this.m_impulse.x=A.x,this.m_impulse.y=A.y,k=c.sub(this.m_impulse,S);g=h.combine(k.x,this.m_perp,k.z,this.m_axis),v=k.x*this.m_s1+k.y+k.z*this.m_a1,_=k.x*this.m_s2+k.y+k.z*this.m_a2;e.subMul(a,g),i-=r*v,n.addMul(s,g),o+=u*_}else{k=this.m_K.solve22(h.neg(b));this.m_impulse.x+=k.x,this.m_impulse.y+=k.y;g=h.mul(k.x,this.m_perp),v=k.x*this.m_s1+k.y,_=k.x*this.m_s2+k.y;e.subMul(a,g),i-=r*v,n.addMul(s,g),o+=u*_}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},g.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,a=p.neo(i),s=p.neo(o),d=this.m_invMassA,f=this.m_invMassB,y=this.m_invIA,g=this.m_invIB,v=p.mulVec2(a,h.sub(this.m_localAnchorA,this.m_localCenterA)),_=p.mulVec2(s,h.sub(this.m_localAnchorB,this.m_localCenterB)),b=h.sub(h.add(n,_),h.add(e,v)),x=p.mulVec2(a,this.m_localXAxisA),S=h.cross(h.add(b,v),x),k=h.cross(_,x),w=p.mulVec2(a,this.m_localYAxisA),A=h.cross(h.add(b,v),w),P=h.cross(_,w),T=c(),C=h.zero();C.x=h.dot(w,b),C.y=o-i-this.m_referenceAngle;var I=l.abs(C.x),B=l.abs(C.y),L=r.linearSlop,E=r.maxLinearCorrection,M=!1,R=0;if(this.m_enableLimit){var D=h.dot(x,b);l.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*L?(R=l.clamp(D,-E,E),I=l.max(I,l.abs(D)),M=!0):D<=this.m_lowerTranslation?(R=l.clamp(D-this.m_lowerTranslation+L,-E,0),I=l.max(I,this.m_lowerTranslation-D),M=!0):D>=this.m_upperTranslation&&(R=l.clamp(D-this.m_upperTranslation-L,0,E),I=l.max(I,D-this.m_upperTranslation),M=!0)}if(M){var O=d+f+y*A*A+g*P*P,F=y*A+g*P,j=y*A*S+g*P*k;0==(G=y+g)&&(G=1);var U=y*S+g*k,N=d+f+y*S*S+g*k*k;(X=new m).ex.set(O,F,j),X.ey.set(F,G,U),X.ez.set(j,U,N);var V=c();V.x=C.x,V.y=C.y,V.z=R,T=X.solve33(c.neg(V))}else{var G,X;O=d+f+y*A*A+g*P*P,F=y*A+g*P;0==(G=y+g)&&(G=1),(X=new u).ex.set(O,F),X.ey.set(F,G);var z=X.solve(h.neg(C));T.x=z.x,T.y=z.y,T.z=0}var H=h.combine(T.x,w,T.z,x),W=T.x*A+T.y+T.z*S,J=T.x*P+T.y+T.z*k;return e.subMul(d,H),i-=y*W,n.addMul(f,H),o+=g*J,this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=n,this.m_bodyB.c_position.a=o,I<=r.linearSlop&&B<=r.angularSlop}},function(t,e,i){(function(n,o){var a;!function(n){var s=n.Promise,r=s&&"resolve"in s&&"reject"in s&&"all"in s&&"race"in s&&function(){var t;return new s(function(e){t=e}),"function"==typeof t}();e?(e.Promise=r?s:T,e.Polyfill=T):void 0===(a=function(){return r?s:T}.call(e,i,e,t))||(t.exports=a);var l="pending",h="sealed",c="fulfilled",u="rejected",m=function(){};function p(t){return"[object Array]"===Object.prototype.toString.call(t)}var d,f=void 0!==o?o:setTimeout,y=[];function g(){for(var t=0;t<y.length;t++)y[t][0](y[t][1]);y=[],d=!1}function v(t,e){y.push([t,e]),d||(d=!0,f(g,0))}function _(t){var e=t.owner,i=e.state_,n=e.data_,o=t[i],a=t.then;if("function"==typeof o){i=c;try{n=o(n)}catch(t){k(a,t)}}b(a,n)||(i===c&&x(a,n),i===u&&k(a,n))}function b(t,e){var i;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var n=e.then;if("function"==typeof n)return n.call(e,function(n){i||(i=!0,e!==n?x(t,n):S(t,n))},function(e){i||(i=!0,k(t,e))}),!0}}catch(e){return i||k(t,e),!0}return!1}function x(t,e){t!==e&&b(t,e)||S(t,e)}function S(t,e){t.state_===l&&(t.state_=h,t.data_=e,v(A,t))}function k(t,e){t.state_===l&&(t.state_=h,t.data_=e,v(P,t))}function w(t){var e=t.then_;t.then_=void 0;for(var i=0;i<e.length;i++)_(e[i])}function A(t){t.state_=c,w(t)}function P(t){t.state_=u,w(t)}function T(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof T==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function i(t){k(e,t)}try{t(function(t){x(e,t)},i)}catch(t){i(t)}}(t,this)}T.prototype={constructor:T,state_:l,then_:null,data_:void 0,then:function(t,e){var i={owner:this,then:new this.constructor(m),fulfilled:t,rejected:e};return this.state_===c||this.state_===u?v(_,i):this.then_.push(i),i.then},catch:function(t){return this.then(null,t)}},T.all=function(t){if(!p(t))throw new TypeError("You must pass an array to Promise.all().");return new this(function(e,i){var n=[],o=0;function a(t){return o++,function(i){n[t]=i,--o||e(n)}}for(var s,r=0;r<t.length;r++)(s=t[r])&&"function"==typeof s.then?s.then(a(r),i):n[r]=s;o||e(n)})},T.race=function(t){if(!p(t))throw new TypeError("You must pass an array to Promise.race().");return new this(function(e,i){for(var n,o=0;o<t.length;o++)(n=t[o])&&"function"==typeof n.then?n.then(e,i):e(n)})},T.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this(function(e){e(t)})},T.reject=function(t){return new this(function(e,i){i(t)})}}("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this)}).call(this,i(23),i(48).setImmediate)},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,s,r=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var h in i=Object(arguments[l]))o.call(i,h)&&(r[h]=i[h]);if(n){s=n(i);for(var c=0;c<s.length;c++)a.call(i,s[c])&&(r[s[c]]=i[s[c]])}}return r}},function(t,e,i){(function(t){!function(t){const e=t.PIXI;function i(t){if((t=t||{fill:13421772}).default)t.focused=t.focused||t.default,t.disabled=t.disabled||t.default;else{let e=t;(t={}).default=t.focused=t.disabled=e}return function(i,n,o){let a=t[o.toLowerCase()],s=new e.Graphics;return a.fill&&s.beginFill(a.fill),a.stroke&&s.lineStyle(a.stroke.width||1,a.stroke.color||0,a.stroke.alpha||1),a.rounded?s.drawRoundedRect(0,0,i,n,a.rounded):s.drawRect(0,0,i,n),s.endFill(),s.closePath(),s}}t.exportTo[0][t.exportTo[1]]=class extends e.Container{constructor(t){super(),this._input_style=Object.assign({position:"absolute",background:"none",border:"none",outline:"none",transformOrigin:"0 0",lineHeight:"1"},t.input),t.box?this._box_generator="function"==typeof t.box?t.box:new i(t.box):this._box_generator=null,this._input_style.hasOwnProperty("multiline")?(this._multiline=!!this._input_style.multiline,delete this._input_style.multiline):this._multiline=!1,this._box_cache={},this._previous={},this._dom_added=!1,this._dom_visible=!0,this._placeholder="",this._placeholderColor=11119017,this._selection=[0,0],this._restrict_value="",this._createDOMInput(),this.substituteText=!0,this._setState("DEFAULT"),this._addListeners()}get substituteText(){return this._substituted}set substituteText(t){this._substituted!=t&&(this._substituted=t,t?(this._createSurrogate(),this._dom_visible=!1):(this._destroySurrogate(),this._dom_visible=!0),this.placeholder=this._placeholder,this._update())}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this._substituted?(this._updateSurrogate(),this._dom_input.placeholder=""):this._dom_input.placeholder=t}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._dom_input.disabled=t,this._setState(t?"DISABLED":"DEFAULT")}get maxLength(){return this._max_length}set maxLength(t){this._max_length=t,this._dom_input.setAttribute("maxlength",t)}get restrict(){return this._restrict_regex}set restrict(t){t instanceof RegExp?("^"!==(t=t.toString().slice(1,-1)).charAt(0)&&(t="^"+t),"$"!==t.charAt(t.length-1)&&(t+="$"),t=new RegExp(t)):t=new RegExp("^["+t+"]*$"),this._restrict_regex=t}get text(){return this._dom_input.value}set text(t){this._dom_input.value=t,this._substituted&&this._updateSurrogate()}get htmlInput(){return this._dom_input}focus(){this._substituted&&!this.dom_visible&&this._setDOMInputVisible(!0),this._dom_input.focus()}blur(){this._dom_input.blur()}select(){this.focus(),this._dom_input.select()}setInputStyle(t,e){this._input_style[t]=e,this._dom_input.style[t]=e,!this._substituted||"fontFamily"!==t&&"fontSize"!==t||this._updateFontMetrics(),this._last_renderer&&this._update()}destroy(t){this._destroyBoxCache(),super.destroy(t)}_createDOMInput(){this._multiline?(this._dom_input=document.createElement("textarea"),this._dom_input.style.resize="none"):(this._dom_input=document.createElement("input"),this._dom_input.type="text");for(let t in this._input_style)this._dom_input.style[t]=this._input_style[t]}_addListeners(){this.on("added",this._onAdded.bind(this)),this.on("removed",this._onRemoved.bind(this)),this._dom_input.addEventListener("keydown",this._onInputKeyDown.bind(this)),this._dom_input.addEventListener("input",this._onInputInput.bind(this)),this._dom_input.addEventListener("keyup",this._onInputKeyUp.bind(this)),this._dom_input.addEventListener("focus",this._onFocused.bind(this)),this._dom_input.addEventListener("blur",this._onBlurred.bind(this))}_onInputKeyDown(t){this._selection=[this._dom_input.selectionStart,this._dom_input.selectionEnd],this.emit("keydown",t.keyCode)}_onInputInput(t){this._restrict_regex&&this._applyRestriction(),this._substituted&&this._updateSubstitution(),this.emit("input",this.text)}_onInputKeyUp(t){this.emit("keyup",t.keyCode)}_onFocused(){this._setState("FOCUSED"),this.emit("focus")}_onBlurred(){this._setState("DEFAULT"),this.emit("blur")}_onAdded(){document.body.appendChild(this._dom_input),this._dom_input.style.display="none",this._dom_added=!0}_onRemoved(){document.body.removeChild(this._dom_input),this._dom_added=!1}_setState(t){this.state=t,this._updateBox(),this._substituted&&this._updateSubstitution()}renderWebGL(t){super.renderWebGL(t),this._renderInternal(t)}renderCanvas(t){super.renderCanvas(t),this._renderInternal(t)}render(t){super.render(t),this._renderInternal(t)}_renderInternal(t){this._resolution=t.resolution,this._last_renderer=t,this._canvas_bounds=this._getCanvasBounds(),this._needsUpdate()&&this._update()}_update(){this._updateDOMInput(),this._substituted&&this._updateSurrogate(),this._updateBox()}_updateBox(){this._box_generator&&(this._needsNewBoxCache()&&this._buildBoxCache(),this.state==this._previous.state&&this._box==this._box_cache[this.state]||(this._box&&this.removeChild(this._box),this._box=this._box_cache[this.state],this.addChildAt(this._box,0),this._previous.state=this.state))}_updateSubstitution(){"FOCUSED"===this.state?(this._dom_visible=!0,this._surrogate.visible=0===this.text.length):(this._dom_visible=!1,this._surrogate.visible=!0),this._updateDOMInput(),this._updateSurrogate()}_updateDOMInput(){this._canvas_bounds&&(this._dom_input.style.top=(this._canvas_bounds.top||0)+"px",this._dom_input.style.left=(this._canvas_bounds.left||0)+"px",this._dom_input.style.transform=this._pixiMatrixToCSS(this._getDOMRelativeWorldTransform()),this._dom_input.style.opacity=this.worldAlpha,this._setDOMInputVisible(this.worldVisible&&this._dom_visible),this._previous.canvas_bounds=this._canvas_bounds,this._previous.world_transform=this.worldTransform.clone(),this._previous.world_alpha=this.worldAlpha,this._previous.world_visible=this.worldVisible)}_applyRestriction(){this._restrict_regex.test(this.text)?this._restrict_value=this.text:(this.text=this._restrict_value,this._dom_input.setSelectionRange(this._selection[0],this._selection[1]))}_needsUpdate(){return!this._comparePixiMatrices(this.worldTransform,this._previous.world_transform)||!this._compareClientRects(this._canvas_bounds,this._previous.canvas_bounds)||this.worldAlpha!=this._previous.world_alpha||this.worldVisible!=this._previous.world_visible}_needsNewBoxCache(){let t=this._getDOMInputBounds();return!this._previous.input_bounds||t.width!=this._previous.input_bounds.width||t.height!=this._previous.input_bounds.height}_createSurrogate(){this._surrogate_hitbox=new e.Graphics,this._surrogate_hitbox.alpha=0,this._surrogate_hitbox.interactive=!0,this._surrogate_hitbox.cursor="text",this._surrogate_hitbox.on("pointerdown",this._onSurrogateFocus.bind(this)),this.addChild(this._surrogate_hitbox),this._surrogate_mask=new e.Graphics,this.addChild(this._surrogate_mask),this._surrogate=new e.Text("",{}),this.addChild(this._surrogate),this._surrogate.mask=this._surrogate_mask,this._updateFontMetrics(),this._updateSurrogate()}_updateSurrogate(){let t=this._deriveSurrogatePadding(),e=this._getDOMInputBounds();switch(this._surrogate.style=this._deriveSurrogateStyle(),this._surrogate.style.padding=Math.max.apply(Math,t),this._surrogate.y=this._multiline?t[0]:(e.height-this._surrogate.height)/2,this._surrogate.x=t[3],this._surrogate.text=this._deriveSurrogateText(),this._surrogate.style.align){case"left":this._surrogate.x=t[3];break;case"center":this._surrogate.x=.5*e.width-.5*this._surrogate.width;break;case"right":this._surrogate.x=e.width-t[1]-this._surrogate.width}this._updateSurrogateHitbox(e),this._updateSurrogateMask(e,t)}_updateSurrogateHitbox(t){this._surrogate_hitbox.clear(),this._surrogate_hitbox.beginFill(0),this._surrogate_hitbox.drawRect(0,0,t.width,t.height),this._surrogate_hitbox.endFill(),this._surrogate_hitbox.interactive=!this._disabled}_updateSurrogateMask(t,e){this._surrogate_mask.clear(),this._surrogate_mask.beginFill(0),this._surrogate_mask.drawRect(e[3],0,t.width-e[3]-e[1],t.height),this._surrogate_mask.endFill()}_destroySurrogate(){this._surrogate&&(this.removeChild(this._surrogate),this.removeChild(this._surrogate_hitbox),this._surrogate.destroy(),this._surrogate_hitbox.destroy(),this._surrogate=null,this._surrogate_hitbox=null)}_onSurrogateFocus(){this._setDOMInputVisible(!0),setTimeout(this._ensureFocus.bind(this),10)}_ensureFocus(){this._hasFocus()||this.focus()}_deriveSurrogateStyle(){let t=new e.TextStyle;for(var i in this._input_style)switch(i){case"color":t.fill=this._input_style.color;break;case"fontFamily":case"fontSize":case"fontWeight":case"fontVariant":case"fontStyle":t[i]=this._input_style[i];break;case"letterSpacing":t.letterSpacing=parseFloat(this._input_style.letterSpacing);break;case"textAlign":t.align=this._input_style.textAlign}return this._multiline&&(t.lineHeight=parseFloat(t.fontSize),t.wordWrap=!0,t.wordWrapWidth=this._getDOMInputBounds().width),0===this._dom_input.value.length&&(t.fill=this._placeholderColor),t}_deriveSurrogatePadding(){let t=this._input_style.textIndent?parseFloat(this._input_style.textIndent):0;if(this._input_style.padding&&this._input_style.padding.length>0){let e=this._input_style.padding.trim().split(" ");if(1==e.length){let i=parseFloat(e[0]);return[i,i,i,i+t]}if(2==e.length){let i=parseFloat(e[0]),n=parseFloat(e[1]);return[i,n,i,n+t]}if(4==e.length){let i=e.map(t=>parseFloat(t));return i[3]+=t,i}}return[0,0,0,t]}_deriveSurrogateText(){return 0===this._dom_input.value.length?this._placeholder:this._dom_input.value}_updateFontMetrics(){const t=this._deriveSurrogateStyle().toFontString();this._font_metrics=e.TextMetrics.measureFont(t)}_buildBoxCache(){this._destroyBoxCache();let t=["DEFAULT","FOCUSED","DISABLED"],e=this._getDOMInputBounds();for(let i in t)this._box_cache[t[i]]=this._box_generator(e.width,e.height,t[i]);this._previous.input_bounds=e}_destroyBoxCache(){this._box&&(this.removeChild(this._box),this._box=null);for(let t in this._box_cache)this._box_cache[t].destroy(),this._box_cache[t]=null,delete this._box_cache[t]}_hasFocus(){return document.activeElement===this._dom_input}_setDOMInputVisible(t){this._dom_input.style.display=t?"block":"none"}_getCanvasBounds(){let t=this._last_renderer.view.getBoundingClientRect(),e={top:t.top,left:t.left,width:t.width,height:t.height};return e.left+=window.scrollX,e.top+=window.scrollY,e}_getDOMInputBounds(){let t=!1;this._dom_added||(document.body.appendChild(this._dom_input),t=!0);let e=this._dom_input.style.transform,i=this._dom_input.style.display;this._dom_input.style.transform="",this._dom_input.style.display="block";let n=this._dom_input.getBoundingClientRect();return this._dom_input.style.transform=e,this._dom_input.style.display=i,t&&document.body.removeChild(this._dom_input),n}_getDOMRelativeWorldTransform(){let t=this._last_renderer.view.getBoundingClientRect(),e=this.worldTransform.clone();return e.scale(this._resolution,this._resolution),e.scale(t.width/this._last_renderer.width,t.height/this._last_renderer.height),e}_pixiMatrixToCSS(t){return"matrix("+[t.a,t.b,t.c,t.d,t.tx,t.ty].join(",")+")"}_comparePixiMatrices(t,e){return!(!t||!e)&&t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d&&t.tx==e.tx&&t.ty==e.ty}_compareClientRects(t,e){return!(!t||!e)&&t.left==e.left&&t.top==e.top&&t.width==e.width&&t.height==e.height}}}("object"==typeof PIXI?{PIXI:PIXI,exportTo:[PIXI,"TextInput"]}:{PIXI:i(1),exportTo:[t,"exports"]})}).call(this,i(36)(t))},function(t,e,i){"use strict";(function(t){var e=i(44),n=i(45),o=i.n(n);
/*!
 * @pixi/polyfill - v5.2.4
 * Compiled Sun, 03 May 2020 22:38:52 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
window.Promise||(window.Promise=e.Polyfill),Object.assign||(Object.assign=o.a);var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!a.performance||!a.performance.now){var s=Date.now();a.performance||(a.performance={}),a.performance.now=function(){return Date.now()-s}}for(var r=Date.now(),l=["ms","moz","webkit","o"],h=0;h<l.length&&!a.requestAnimationFrame;++h){var c=l[h];a.requestAnimationFrame=a[c+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c+"CancelAnimationFrame"]||a[c+"CancelRequestAnimationFrame"]}a.requestAnimationFrame||(a.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+r-e;return i<0&&(i=0),r=e,setTimeout(function(){r=Date.now(),t(performance.now())},i)}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array)}).call(this,i(23))},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(o.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new a(o.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(49),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(23))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,o,a,s,r,l=1,h={},c=!1,u=t.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(t);m=m&&m.setTimeout?m:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((a=new MessageChannel).port1.onmessage=function(t){d(t.data)},n=function(t){a.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(o=u.documentElement,n=function(t){var e=u.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):n=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",r=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),n=function(e){t.postMessage(s+e,"*")}),m.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var o={callback:t,args:e};return h[l]=o,n(l),l++},m.clearImmediate=p}function p(t){delete h[t]}function d(t){if(c)setTimeout(d,0,t);else{var e=h[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{p(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(23),i(33))},function(t,e,i){(function(t,n){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(a){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var r,l=2147483647,h=36,c=1,u=26,m=38,p=700,d=72,f=128,y="-",g=/^xn--/,v=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=h-c,S=Math.floor,k=String.fromCharCode;function w(t){throw new RangeError(b[t])}function A(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function P(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+A((t=t.replace(_,".")).split("."),e).join(".")}function T(t){for(var e,i,n=[],o=0,a=t.length;o<a;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<a?56320==(64512&(i=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),o--):n.push(e);return n}function C(t){return A(t,function(t){var e="";return t>65535&&(e+=k((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=k(t)}).join("")}function I(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function B(t,e,i){var n=0;for(t=i?S(t/p):t>>1,t+=S(t/e);t>x*u>>1;n+=h)t=S(t/x);return S(n+(x+1)*t/(t+m))}function L(t){var e,i,n,o,a,s,r,m,p,g,v,_=[],b=t.length,x=0,k=f,A=d;for((i=t.lastIndexOf(y))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&w("not-basic"),_.push(t.charCodeAt(n));for(o=i>0?i+1:0;o<b;){for(a=x,s=1,r=h;o>=b&&w("invalid-input"),((m=(v=t.charCodeAt(o++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:h)>=h||m>S((l-x)/s))&&w("overflow"),x+=m*s,!(m<(p=r<=A?c:r>=A+u?u:r-A));r+=h)s>S(l/(g=h-p))&&w("overflow"),s*=g;A=B(x-a,e=_.length+1,0==a),S(x/e)>l-k&&w("overflow"),k+=S(x/e),x%=e,_.splice(x++,0,k)}return C(_)}function E(t){var e,i,n,o,a,s,r,m,p,g,v,_,b,x,A,P=[];for(_=(t=T(t)).length,e=f,i=0,a=d,s=0;s<_;++s)(v=t[s])<128&&P.push(k(v));for(n=o=P.length,o&&P.push(y);n<_;){for(r=l,s=0;s<_;++s)(v=t[s])>=e&&v<r&&(r=v);for(r-e>S((l-i)/(b=n+1))&&w("overflow"),i+=(r-e)*b,e=r,s=0;s<_;++s)if((v=t[s])<e&&++i>l&&w("overflow"),v==e){for(m=i,p=h;!(m<(g=p<=a?c:p>=a+u?u:p-a));p+=h)A=m-g,x=h-g,P.push(k(I(g+A%x,0))),m=S(A/x);P.push(k(I(m,0))),a=B(i,b,n==o),i=0,++n}++i,++e}return P.join("")}r={version:"1.4.1",ucs2:{decode:T,encode:C},decode:L,encode:E,toASCII:function(t){return P(t,function(t){return v.test(t)?"xn--"+E(t):t})},toUnicode:function(t){return P(t,function(t){return g.test(t)?L(t.slice(4).toLowerCase()):t})}},void 0===(o=function(){return r}.call(e,i,e,t))||(t.exports=o)}()}).call(this,i(36)(t),i(23))},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(53),e.encode=e.stringify=i(54)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,a){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var r=/\+/g;t=t.split(e);var l=1e3;a&&"number"==typeof a.maxKeys&&(l=a.maxKeys);var h=t.length;l>0&&h>l&&(h=l);for(var c=0;c<h;++c){var u,m,p,d,f=t[c].replace(r,"%20"),y=f.indexOf(i);y>=0?(u=f.substr(0,y),m=f.substr(y+1)):(u=f,m=""),p=decodeURIComponent(u),d=decodeURIComponent(m),n(s,p)?o(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,r){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?a(s(t),function(s){var r=encodeURIComponent(n(s))+i;return o(t[s])?a(t[s],function(t){return r+encodeURIComponent(n(t))}).join(e):r+encodeURIComponent(n(t[s]))}).join(e):r?encodeURIComponent(n(r))+i+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,o=(i(7),i(4)),a=i(3),s=i(18),r=i(39);function l(){this.m_tree=new r,this.m_proxyCount=0,this.m_moveBuffer=[],this.queryCallback=this.queryCallback.bind(this)}t.exports=l,l.prototype.getUserData=function(t){return this.m_tree.getUserData(t)},l.prototype.testOverlap=function(t,e){var i=this.m_tree.getFatAABB(t),n=this.m_tree.getFatAABB(e);return s.testOverlap(i,n)},l.prototype.getFatAABB=function(t){return this.m_tree.getFatAABB(t)},l.prototype.getProxyCount=function(){return this.m_proxyCount},l.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},l.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},l.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},l.prototype.query=function(t,e){this.m_tree.query(t,e)},l.prototype.rayCast=function(t,e){this.m_tree.rayCast(t,e)},l.prototype.shiftOrigin=function(t){this.m_tree.shiftOrigin(t)},l.prototype.createProxy=function(t,e){n&&o.assert(s.isValid(t));var i=this.m_tree.createProxy(t,e);return this.m_proxyCount++,this.bufferMove(i),i},l.prototype.destroyProxy=function(t){this.unbufferMove(t),this.m_proxyCount--,this.m_tree.destroyProxy(t)},l.prototype.moveProxy=function(t,e,i){n&&o.assert(s.isValid(e)),this.m_tree.moveProxy(t,e,i)&&this.bufferMove(t)},l.prototype.touchProxy=function(t){this.bufferMove(t)},l.prototype.bufferMove=function(t){this.m_moveBuffer.push(t)},l.prototype.unbufferMove=function(t){for(var e=0;e<this.m_moveBuffer.length;++e)this.m_moveBuffer[e]==t&&(this.m_moveBuffer[e]=null)},l.prototype.updatePairs=function(t){for(n&&o.assert("function"==typeof t),this.m_callback=t;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),null!==this.m_queryProxyId){var e=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(e,this.queryCallback)}},l.prototype.queryCallback=function(t){if(t==this.m_queryProxyId)return!0;var e=a.min(t,this.m_queryProxyId),i=a.max(t,this.m_queryProxyId),n=this.m_tree.getUserData(e),o=this.m_tree.getUserData(i);return this.m_callback(n,o),!0}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,o="undefined"!=typeof ASSERT&&ASSERT;t.exports=g,t.exports.TimeStep=y;var a=i(7),s=i(4),r=i(2),l=i(3),h=i(29),c=i(19),u=i(16),m=i(41),p=m.Input,d=m.Output,f=i(25);f.Input,f.Output,f.Proxy,f.Cache;function y(t){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}function g(t){this.m_world=t,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}y.prototype.reset=function(t){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=t,this.inv_dt=0==t?0:1/t,this.dtRatio=t*this.inv_dt0},g.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},g.prototype.addBody=function(t){o&&s.assert(t instanceof h,"Not a Body!",t),this.m_bodies.push(t)},g.prototype.addContact=function(t){o&&s.assert(t instanceof c,"Not a Contact!",t),this.m_contacts.push(t)},g.prototype.addJoint=function(t){o&&s.assert(t instanceof u,"Not a Joint!",t),this.m_joints.push(t)},g.prototype.solveWorld=function(t){for(var e=this.m_world,i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1;for(var n=e.m_contactList;n;n=n.m_next)n.m_islandFlag=!1;for(var a=e.m_jointList;a;a=a.m_next)a.m_islandFlag=!1;for(var r=this.m_stack,l=e.m_bodyList;l;l=l.m_next)if(0,!l.m_islandFlag&&0!=l.isAwake()&&0!=l.isActive()&&!l.isStatic()){for(this.clear(),r.push(l),l.m_islandFlag=!0;r.length>0;){i=r.pop();if(o&&s.assert(1==i.isActive()),this.addBody(i),i.setAwake(!0),!i.isStatic()){for(var h=i.m_contactList;h;h=h.next){var c=h.contact;if(!c.m_islandFlag&&(0!=c.isEnabled()&&0!=c.isTouching())){var u=c.m_fixtureA.m_isSensor,m=c.m_fixtureB.m_isSensor;if(!u&&!m)this.addContact(c),c.m_islandFlag=!0,(d=h.other).m_islandFlag||(r.push(d),d.m_islandFlag=!0)}}for(var p=i.m_jointList;p;p=p.next){var d;if(1!=p.joint.m_islandFlag)0!=(d=p.other).isActive()&&(this.addJoint(p.joint),p.joint.m_islandFlag=!0,d.m_islandFlag||(r.push(d),d.m_islandFlag=!0))}}}this.solveIsland(t);for(var f=0;f<this.m_bodies.length;++f){(i=this.m_bodies[f]).isStatic()&&(i.m_islandFlag=!1)}}},g.prototype.solveIsland=function(t){for(var e=this.m_world,i=e.m_gravity,o=e.m_allowSleep,s=t.dt,h=0;h<this.m_bodies.length;++h){var c=this.m_bodies[h],u=r.clone(c.m_sweep.c),m=c.m_sweep.a,p=r.clone(c.m_linearVelocity),d=c.m_angularVelocity;c.m_sweep.c0.set(c.m_sweep.c),c.m_sweep.a0=c.m_sweep.a,c.isDynamic()&&(p.addMul(s*c.m_gravityScale,i),p.addMul(s*c.m_invMass,c.m_force),d+=s*c.m_invI*c.m_torque,p.mul(1/(1+s*c.m_linearDamping)),d*=1/(1+s*c.m_angularDamping)),c.c_position.c=u,c.c_position.a=m,c.c_velocity.v=p,c.c_velocity.w=d}for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].initConstraint(t)}n&&this.printBodies("M: ");for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].initVelocityConstraint(t)}if(n&&this.printBodies("R: "),t.warmStarting)for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].warmStartConstraint(t)}n&&this.printBodies("Q: ");for(h=0;h<this.m_joints.length;++h){this.m_joints[h].initVelocityConstraints(t)}n&&this.printBodies("E: ");for(h=0;h<t.velocityIterations;++h){for(var f=0;f<this.m_joints.length;++f){this.m_joints[f].solveVelocityConstraints(t)}for(f=0;f<this.m_contacts.length;++f){this.m_contacts[f].solveVelocityConstraint(t)}}n&&this.printBodies("D: ");for(h=0;h<this.m_contacts.length;++h){this.m_contacts[h].storeConstraintImpulses(t)}n&&this.printBodies("C: ");for(h=0;h<this.m_bodies.length;++h){c=this.m_bodies[h],u=r.clone(c.c_position.c),m=c.c_position.a,p=r.clone(c.c_velocity.v),d=c.c_velocity.w;var y=r.mul(s,p);if(r.lengthSquared(y)>a.maxTranslationSquared){var g=a.maxTranslation/y.length();p.mul(g)}var v=s*d;if(v*v>a.maxRotationSquared)d*=g=a.maxRotation/l.abs(v);u.addMul(s,p),m+=s*d,c.c_position.c.set(u),c.c_position.a=m,c.c_velocity.v.set(p),c.c_velocity.w=d}n&&this.printBodies("B: ");var _=!1;for(h=0;h<t.positionIterations;++h){var b=0;for(f=0;f<this.m_contacts.length;++f){var x=this.m_contacts[f].solvePositionConstraint(t);b=l.min(b,x)}var S=b>=-3*a.linearSlop,k=!0;for(f=0;f<this.m_joints.length;++f){var w=this.m_joints[f].solvePositionConstraints(t);k=k&&w}if(S&&k){_=!0;break}}n&&this.printBodies("L: ");for(h=0;h<this.m_bodies.length;++h){(c=this.m_bodies[h]).m_sweep.c.set(c.c_position.c),c.m_sweep.a=c.c_position.a,c.m_linearVelocity.set(c.c_velocity.v),c.m_angularVelocity=c.c_velocity.w,c.synchronizeTransform()}if(this.postSolveIsland(),o){var A=1/0,P=a.linearSleepToleranceSqr,T=a.angularSleepToleranceSqr;for(h=0;h<this.m_bodies.length;++h){(c=this.m_bodies[h]).isStatic()||(0==c.m_autoSleepFlag||c.m_angularVelocity*c.m_angularVelocity>T||r.lengthSquared(c.m_linearVelocity)>P?(c.m_sleepTime=0,A=0):(c.m_sleepTime+=s,A=l.min(A,c.m_sleepTime)))}if(A>=a.timeToSleep&&_)for(h=0;h<this.m_bodies.length;++h){(c=this.m_bodies[h]).setAwake(!1)}}},g.prototype.printBodies=function(t){for(var e=0;e<this.m_bodies.length;++e){var i=this.m_bodies[e];s.debug(t,i.c_position.a,i.c_position.c.x,i.c_position.c.y,i.c_velocity.w,i.c_velocity.v.x,i.c_velocity.v.y)}};var v=new y;function _(){this.normalImpulses=[],this.tangentImpulses=[]}g.prototype.solveWorldTOI=function(t){var e=this.m_world;if(e.m_stepComplete){for(var i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1,i.m_sweep.alpha0=0;for(var r=e.m_contactList;r;r=r.m_next)r.m_toiFlag=!1,r.m_islandFlag=!1,r.m_toiCount=0,r.m_toi=1}for(;;){var h=null,c=1;for(r=e.m_contactList;r;r=r.m_next)if(0!=r.isEnabled()&&!(r.m_toiCount>a.maxSubSteps)){var u=1;if(r.m_toiFlag)u=r.m_toi;else{var f=r.getFixtureA(),y=r.getFixtureB();if(f.isSensor()||y.isSensor())continue;var g=f.getBody(),_=y.getBody();o&&s.assert(g.isDynamic()||_.isDynamic());var b=g.isAwake()&&!g.isStatic(),x=_.isAwake()&&!_.isStatic();if(0==b&&0==x)continue;var S=g.isBullet()||!g.isDynamic(),k=_.isBullet()||!_.isDynamic();if(0==S&&0==k)continue;var w=g.m_sweep.alpha0;g.m_sweep.alpha0<_.m_sweep.alpha0?(w=_.m_sweep.alpha0,g.m_sweep.advance(w)):_.m_sweep.alpha0<g.m_sweep.alpha0&&(w=g.m_sweep.alpha0,_.m_sweep.advance(w)),o&&s.assert(w<1);var A=r.getChildIndexA(),P=r.getChildIndexB(),T=(g.m_sweep,_.m_sweep,new p);T.proxyA.set(f.getShape(),A),T.proxyB.set(y.getShape(),P),T.sweepA.set(g.m_sweep),T.sweepB.set(_.m_sweep),T.tMax=1;var C=new d;m(C,T);var I=C.t;u=C.state==d.e_touching?l.min(w+(1-w)*I,1):1,r.m_toi=u,r.m_toiFlag=!0}u<c&&(h=r,c=u)}if(null==h||1-10*l.EPSILON<c){e.m_stepComplete=!0;break}f=h.getFixtureA(),y=h.getFixtureB(),g=f.getBody(),_=y.getBody();var B=g.m_sweep.clone(),L=_.m_sweep.clone();if(g.advance(c),_.advance(c),h.update(e),h.m_toiFlag=!1,++h.m_toiCount,0!=h.isEnabled()&&0!=h.isTouching()){g.setAwake(!0),_.setAwake(!0),this.clear(),this.addBody(g),this.addBody(_),this.addContact(h),g.m_islandFlag=!0,_.m_islandFlag=!0,h.m_islandFlag=!0;for(var E=[g,_],M=0;M<E.length;++M){if((N=E[M]).isDynamic())for(var R=N.m_contactList;R;R=R.next){var D=R.contact;if(!D.m_islandFlag){var O=R.other;if(!O.isDynamic()||N.isBullet()||O.isBullet()){var F=D.m_fixtureA.m_isSensor,j=D.m_fixtureB.m_isSensor;if(!F&&!j){var U=O.m_sweep.clone();0==O.m_islandFlag&&O.advance(c),D.update(e),0!=D.isEnabled()&&0!=D.isTouching()?(D.m_islandFlag=!0,this.addContact(D),O.m_islandFlag||(O.m_islandFlag=!0,O.isStatic()||O.setAwake(!0),this.addBody(O))):(O.m_sweep.set(U),O.synchronizeTransform())}}}}}v.reset((1-c)*t.dt),v.dtRatio=1,v.positionIterations=20,v.velocityIterations=t.velocityIterations,v.warmStarting=!1,this.solveIslandTOI(v,g,_);for(M=0;M<this.m_bodies.length;++M){var N;if((N=this.m_bodies[M]).m_islandFlag=!1,N.isDynamic()){N.synchronizeFixtures();for(R=N.m_contactList;R;R=R.next)R.contact.m_toiFlag=!1,R.contact.m_islandFlag=!1}}if(e.findNewContacts(),e.m_subStepping){e.m_stepComplete=!1;break}}else h.setEnabled(!1),g.m_sweep.set(B),_.m_sweep.set(L),g.synchronizeTransform(),_.synchronizeTransform()}if(n)for(i=e.m_bodyList;i;i=i.m_next)r=i.m_sweep.c,i.m_sweep.a,i.m_linearVelocity,i.m_angularVelocity},g.prototype.solveIslandTOI=function(t,e,i){this.m_world;for(var n=0;n<this.m_bodies.length;++n){(u=this.m_bodies[n]).c_position.c.set(u.m_sweep.c),u.c_position.a=u.m_sweep.a,u.c_velocity.v.set(u.m_linearVelocity),u.c_velocity.w=u.m_angularVelocity}for(var n=0;n<this.m_contacts.length;++n){this.m_contacts[n].initConstraint(t)}for(n=0;n<t.positionIterations;++n){for(var o=0,s=0;s<this.m_contacts.length;++s){var h=this.m_contacts[s].solvePositionConstraintTOI(t,e,i);o=l.min(o,h)}if(o>=-1.5*a.linearSlop)break}e.m_sweep.c0.set(e.c_position.c),e.m_sweep.a0=e.c_position.a,i.m_sweep.c0.set(i.c_position.c),i.m_sweep.a0=i.c_position.a;for(n=0;n<this.m_contacts.length;++n){this.m_contacts[n].initVelocityConstraint(t)}for(n=0;n<t.velocityIterations;++n)for(s=0;s<this.m_contacts.length;++s){this.m_contacts[s].solveVelocityConstraint(t)}var c=t.dt;for(n=0;n<this.m_bodies.length;++n){var u=this.m_bodies[n],m=r.clone(u.c_position.c),p=u.c_position.a,d=r.clone(u.c_velocity.v),f=u.c_velocity.w,y=r.mul(c,d);if(r.dot(y,y)>a.maxTranslationSquared){var g=a.maxTranslation/y.length();d.mul(g)}var v=c*f;if(v*v>a.maxRotationSquared)f*=g=a.maxRotation/l.abs(v);m.addMul(c,d),p+=c*f,u.c_position.c=m,u.c_position.a=p,u.c_velocity.v=d,u.c_velocity.w=f,u.m_sweep.c=m,u.m_sweep.a=p,u.m_linearVelocity=d,u.m_angularVelocity=f,u.synchronizeTransform()}this.postSolveIsland()},g.prototype.postSolveIsland=function(){for(var t=new _,e=0;e<this.m_contacts.length;++e){for(var i=this.m_contacts[e],n=0;n<i.v_points.length;++n)t.normalImpulses.push(i.v_points[n].normalImpulse),t.tangentImpulses.push(i.v_points[n].tangentImpulse);this.m_world.postSolve(i,t)}}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports.now=function(){return Date.now()},t.exports.diff=function(t){return Date.now()-t}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=a;i(4);var n=i(9),o=i(24);function a(t,e,i,n){if(!(this instanceof a))return new a(t,e,i,n);a._super.call(this),this._setAsBox(t,e,i,n)}a._super=o,a.prototype=n(a._super.prototype),a.TYPE="polygon"},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,o=i(4),a=i(5),s=i(2),r=i(19),l=i(21),h=i(26);r.addType(h.TYPE,h.TYPE,function(t,e,i,a,s,r,l){n&&o.assert(i.getType()==h.TYPE),n&&o.assert(r.getType()==h.TYPE),m(t,i.getShape(),e,r.getShape(),s)});var c=s.zero(),u=s.zero();function m(t,e,i,n,o){t.pointCount=0;var r=a.mulVec2_(i,e.m_p,c),h=a.mulVec2_(o,n.m_p,u),m=s.distanceSquared(h,r),p=e.m_radius+n.m_radius;m>p*p||(t.type=l.e_circles,t.localPoint.set(e.m_p),t.localNormal.setZero(),t.pointCount=1,t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=l.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=l.e_vertex)}e.CollideCircles=m},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,o=i(4),a=i(5),s=i(2),r=i(19),l=i(21),h=i(27),c=i(31),u=i(26);r.addType(h.TYPE,u.TYPE,function(t,e,i,a,s,r,l){n&&o.assert(i.getType()==h.TYPE),n&&o.assert(r.getType()==u.TYPE);var c=i.getShape(),m=r.getShape();x(t,c,e,m,s)}),r.addType(c.TYPE,u.TYPE,function(t,e,i,a,s,r,l){n&&o.assert(i.getType()===c.TYPE),n&&o.assert(r.getType()===u.TYPE);var h=i.getShape();h.getChildEdge(m,a);var p=m,d=r.getShape();x(t,p,e,d,s)});var m=new h;var p=s.zero(),d=s.zero(),f=s.zero(),y=s.zero(),g=s.zero(),v=s.zero(),_=s.zero(),b=s.zero();function x(t,e,i,r,h){t.pointCount=0;var c=a.mulTVec2_(i,a.mulVec2_(h,r.m_p,b),d),u=e.m_vertex1,m=e.m_vertex2,x=s.sub_(m,u,p),S=s.dot(x,s.sub_(m,c,b)),k=s.dot(x,s.sub_(c,u,b)),w=e.m_radius+r.m_radius;if(k<=0){var A=f.setVec2(u),P=s.sub(c,A,y);if(s.dot(P,P)>w*w)return;if(e.m_hasVertex0){var T=e.m_vertex0,C=u,I=s.sub_(C,T,v);if(s.dot(I,s.sub(C,c,b))>0)return}return t.type=l.e_circles,t.localNormal.setZero(),t.localPoint.set(A),t.pointCount=1,t.points[0].localPoint.set(r.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=l.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=l.e_vertex)}if(S<=0){A=f.setVec2(m),P=s.sub_(c,A,y);if(s.dot(P,P)>w*w)return;if(e.m_hasVertex3){var B=e.m_vertex3,L=m,E=s.sub_(B,L,_);if(s.dot(E,s.sub_(c,L,b))>0)return}return t.type=l.e_circles,t.localNormal.setZero(),t.localPoint.set(A),t.pointCount=1,t.points[0].localPoint.set(r.m_p),t.points[0].id.cf.indexA=1,t.points[0].id.cf.typeA=l.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=l.e_vertex)}var M=s.dot(x,x);n&&o.assert(M>0);A=f.setCombine(S/M,u,k/M,m),P=s.sub_(c,A,y);if(!(s.dot(P,P)>w*w)){var R=g.setXY(-x.y,x.x);s.dot(R,s.sub_(c,u,b))<0&&R.set(-R.x,-R.y),R.normalize(),t.type=l.e_faceA,t.localNormal.set(R),t.localPoint.set(u),t.pointCount=1,t.points[0].localPoint.set(r.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=l.e_face,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=l.e_vertex}}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,o=i(4),a=i(5),s=i(6),r=i(2),l=i(7),h=i(21),c=i(19),u=i(24);t.exports=L,c.addType(u.TYPE,u.TYPE,function(t,e,i,a,s,r,l){n&&o.assert(i.getType()==u.TYPE),n&&o.assert(r.getType()==u.TYPE),L(t,i.getShape(),e,r.getShape(),s)});var m,p,d=r.zero(),f=r.zero(),y=a.identity();function g(t,e,i,n){for(var o=t.m_count,l=i.m_count,h=t.m_normals,c=t.m_vertices,u=i.m_vertices,g=a.mulTXf_(n,e,y),v=0,_=-1/0,b=0;b<o;++b){for(var x=s.mulVec2_(g.q,h[b],f),S=a.mulVec2_(g,c[b],d),k=1/0,w=0;w<l;++w){var A=r.dot(x,u[w])-r.dot(x,S);A<k&&(k=A)}k>_&&(_=k,v=b)}m=_,p=v}var v=r.zero(),_=r.zero();var b=r.zero(),x=r.zero(),S=r.zero(),k=r.zero(),w=r.zero(),A=r.zero(),P=r.zero(),T=r.zero(),C=[new h.clipVertex,new h.clipVertex],I=[new h.clipVertex,new h.clipVertex],B=[new h.clipVertex,new h.clipVertex];function L(t,e,i,c,u){t.pointCount=0;var d=e.m_radius+c.m_radius;g(e,i,c,u);var f=p,y=m;if(!(y>d)){g(c,u,e,i);var L=p;if(!(m>d)){var E,M,R,D,O,F;m>y+.1*l.linearSlop?(E=c,M=e,R=u,D=i,O=L,t.type=h.e_faceB,F=1):(E=e,M=c,R=i,D=u,O=f,t.type=h.e_faceA,F=0);var j=B;B[0].init(),B[1].init(),function(t,e,i,l,c,u){var m=e.m_normals,p=c.m_count,d=c.m_vertices,f=c.m_normals;n&&o.assert(0<=l&&l<e.m_count);for(var y=s.mulTVec2_(u.q,s.mulVec2_(i.q,m[l],v),_),g=0,b=1/0,x=0;x<p;++x){var S=r.dot(y,f[x]);S<b&&(b=S,g=x)}var k=g,w=k+1<p?k+1:0;t[0].v=a.mulVec2(u,d[k]),t[0].id.cf.indexA=l,t[0].id.cf.indexB=k,t[0].id.cf.typeA=h.e_face,t[0].id.cf.typeB=h.e_vertex,t[1].v=a.mulVec2(u,d[w]),t[1].id.cf.indexA=l,t[1].id.cf.indexB=w,t[1].id.cf.typeA=h.e_face,t[1].id.cf.typeB=h.e_vertex}(j,E,R,O,M,D);var U=E.m_count,N=E.m_vertices,V=O,G=O+1<U?O+1:0,X=A.set(N[V]),z=P.set(N[G]),H=r.sub_(z,X,k);H.normalize();var W=r.crossVec2Num_(H,1,w),J=r.combine_(.5,X,.5,z,b),Y=s.mulVec2_(R.q,H,x),q=r.crossVec2Num_(Y,1,S);X=a.mulVec2_(R,X,X),z=a.mulVec2_(R,z,z);var Z=r.dot(q,X),K=-r.dot(Y,X)+d,$=r.dot(Y,z)+d;C[0].init(),C[1].init(),I[0].init(),I[1].init();var Q=C,tt=I;if(!(h.clipSegmentToLine(Q,j,r.neg_(Y,T),K,V)<l.maxManifoldPoints||h.clipSegmentToLine(tt,Q,Y,$,G)<l.maxManifoldPoints)){t.localNormal.set(W),t.localPoint.set(J);for(var et=0,it=0;it<l.maxManifoldPoints;++it){if(r.dot(q,tt[it].v)-Z<=d){var nt=t.points[it];if(nt.init(),nt.localPoint.set(a.mulTVec2(D,tt[it].v,T)),nt.id.set(tt[it].id),F){var ot=nt.id.cf,at=ot.indexA,st=ot.indexB,rt=ot.typeA,lt=ot.typeB;ot.indexA=st,ot.indexB=at,ot.typeA=lt,ot.typeB=rt}++et}}t.pointCount=et}}}}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,o=i(4),a=i(3),s=i(5),r=i(2),l=i(21),h=i(19),c=i(26),u=i(24);h.addType(u.TYPE,c.TYPE,function(t,e,i,h,y,g,v){n&&o.assert(i.getType()===u.TYPE),n&&o.assert(g.getType()===c.TYPE),function(t,e,i,n,o){t.pointCount=0;for(var h=s.mulVec2_(o,n.m_p,m),c=s.mulTVec2_(i,h,p),u=0,y=-1/0,g=e.m_radius+n.m_radius,v=e.m_count,_=e.m_vertices,b=e.m_normals,x=0;x<v;++x){var S=r.dot(b[x],r.sub_(c,_[x],d));if(S>g)return;S>y&&(y=S,u=x)}var k=u,w=k+1<v?k+1:0,A=_[k],P=_[w];if(y<a.EPSILON)return t.pointCount=1,t.type=l.e_faceA,t.localNormal.set(b[u]),t.localPoint.setCombine(.5,A,.5,P),t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=l.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=l.e_vertex);var T=r.dot(r.sub_(c,A,d),r.sub_(P,A,f)),C=r.dot(r.sub_(c,P,d),r.sub_(A,P,f));if(T<=0){if(r.distanceSquared(c,A)>g*g)return;t.pointCount=1,t.type=l.e_faceA,t.localNormal.setCombine(1,c,-1,A),t.localNormal.normalize(),t.localPoint.set(A),t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=l.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=l.e_vertex}else if(C<=0){if(r.distanceSquared(c,P)>g*g)return;t.pointCount=1,t.type=l.e_faceA,t.localNormal.setCombine(1,c,-1,P),t.localNormal.normalize(),t.localPoint.set(P),t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=l.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=l.e_vertex}else{var I=r.mid(A,P),y=r.dot(c,b[k])-r.dot(I,b[k]);if(y>g)return;t.pointCount=1,t.type=l.e_faceA,t.localNormal.set(b[k]),t.localPoint.set(I),t.points[0].localPoint.set(n.m_p),t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=l.e_vertex,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=l.e_vertex}}(t,i.getShape(),e,g.getShape(),y)});var m=r.zero(),p=r.zero(),d=r.zero(),f=r.zero()},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,o=i(4),a=i(3),s=i(5),r=i(2),l=i(6),h=i(7),c=i(19),u=i(21),m=i(27),p=i(31),d=i(24);c.addType(m.TYPE,d.TYPE,function(t,e,i,a,s,r,l){n&&o.assert(i.getType()===m.TYPE),n&&o.assert(r.getType()===d.TYPE),V(t,i.getShape(),e,r.getShape(),s)}),c.addType(p.TYPE,d.TYPE,function(t,e,i,a,s,r,l){n&&o.assert(i.getType()===p.TYPE),n&&o.assert(r.getType()===d.TYPE);var h=i.getShape(),c=f;h.getChildEdge(c,a),V(t,c,e,r.getShape(),s)});var f=new m;var y=-1,g=1,v=2;function _(){this.type,this.index,this.separation}var b=new _,x=new _,S=new function(){this.vertices=[],this.normals=[],this.count=0;for(var t=0;t<h.maxPolygonVertices;t++)this.vertices.push(r.zero()),this.normals.push(r.zero())},k=new function(){this.i1=-1,this.i2=-1,this.v1=r.zero(),this.v2=r.zero(),this.normal=r.zero(),this.sideNormal1=r.zero(),this.sideOffset1=0,this.sideNormal2=r.zero(),this.sideOffset2=0},w=r.zero(),A=(r.zero(),r.zero()),P=r.zero(),T=r.zero(),C=r.zero(),I=r.zero(),B=r.zero(),L=r.zero(),E=r.zero(),M=r.zero(),R=r.zero(),D=r.zero(),O=r.zero(),F=s.identity(),j=[new u.clipVertex,new u.clipVertex],U=[new u.clipVertex,new u.clipVertex],N=[new u.clipVertex,new u.clipVertex];function V(t,e,i,n,o){var c=s.mulTXf_(i,o,F),m=s.mulVec2_(c,n.m_centroid,T),p=e.m_vertex0,d=e.m_vertex1,f=e.m_vertex2,_=e.m_vertex3,V=e.m_hasVertex0,G=e.m_hasVertex3,X=r.sub_(f,d,C);X.normalize();var z=I.setXY(X.y,-X.x),H=r.dot(z,r.sub_(m,d,w)),W=0,J=0,Y=!1,q=!1;if(V){var Z=r.sub_(d,p,B);Z.normalize();var K=L.setXY(Z.y,-Z.x);Y=r.cross(Z,X)>=0,W=r.dot(K,m)-r.dot(K,p)}if(G){var $=r.sub_(_,f,E);$.normalize();var Q=M.set($.y,-$.x);q=r.cross(X,$)>0,J=r.dot(Q,m)-r.dot(Q,f)}var tt=0,et=R.setZero(),it=D.setZero(),nt=O.setZero();V&&G?Y&&q?(tt=W>=0||H>=0||J>=0)?(et.set(z),it.set(K),nt.set(Q)):(et.setMul(-1,z),it.setMul(-1,z),nt.setMul(-1,z)):Y?(tt=W>=0||H>=0&&J>=0)?(et.set(z),it.set(K),nt.set(z)):(et.setMul(-1,z),it.setMul(-1,Q),nt.setMul(-1,z)):q?(tt=J>=0||W>=0&&H>=0)?(et.set(z),it.set(z),nt.set(Q)):(et.setMul(-1,z),it.setMul(-1,z),nt.setMul(-1,K)):(tt=W>=0&&H>=0&&J>=0)?(et.set(z),it.set(z),nt.set(z)):(et.setMul(-1,z),it.setMul(-1,Q),nt.setMul(-1,K)):V?Y?(tt=W>=0||H>=0)?(et.set(z),it.set(K),nt.setMul(-1,z)):(et.setMul(-1,z),it.set(z),nt.setMul(-1,z)):(tt=W>=0&&H>=0)?(et.set(z),it.set(z),nt.setMul(-1,z)):(et.setMul(-1,z),it.set(z),nt.setMul(-1,K)):G?q?(tt=H>=0||J>=0)?(et.set(z),it.setMul(-1,z),nt.set(Q)):(et.setMul(-1,z),it.setMul(-1,z),nt.set(z)):(tt=H>=0&&J>=0)?(et.set(z),it.setMul(-1,z),nt.set(z)):(et.setMul(-1,z),it.setMul(-1,Q),nt.set(z)):(tt=H>=0)?(et.set(z),it.setMul(-1,z),nt.setMul(-1,z)):(et.setMul(-1,z),it.set(z),nt.set(z)),S.count=n.m_count;for(var ot=0;ot<n.m_count;++ot)S.vertices[ot]=s.mulVec2_(c,n.m_vertices[ot],S.vertices[ot]),S.normals[ot]=l.mulVec2_(c.q,n.m_normals[ot],S.normals[ot]);var at=2*h.polygonRadius;t.pointCount=0,b.type=g,b.index=tt?0:1,b.separation=1/0;for(ot=0;ot<S.count;++ot){(rt=r.dot(et,r.sub(S.vertices[ot],d,w)))<b.separation&&(b.separation=rt)}if(b.type!==y&&!(b.separation>at)){x.type=y,x.index=-1,x.separation=-1/0;var st=P.set(-et.y,et.x);for(ot=0;ot<S.count;++ot){var rt,lt=A.set(S.normals[ot]).neg(),ht=r.dot(lt,r.sub_(S.vertices[ot],d,w)),ct=r.dot(lt,r.sub_(S.vertices[ot],f,w));if((rt=a.min(ht,ct))>at){x.type=v,x.index=ot,x.separation=rt;break}if(r.dot(lt,st)>=0){if(r.dot(r.sub_(lt,nt,w),et)<-h.angularSlop)continue}else if(r.dot(r.sub_(lt,it,w),et)<-h.angularSlop)continue;rt>x.separation&&(x.type=v,x.index=ot,x.separation=rt)}if(!(x.type!==y&&x.separation>at)){var ut;ut=x.type===y?b:x.separation>.98*b.separation+.001?x:b,N[0].init(),N[1].init();var mt=N;if(ut.type===g){t.type=u.e_faceA;var pt=0,dt=r.dot(et,S.normals[0]);for(ot=1;ot<S.count;++ot){var ft=r.dot(et,S.normals[ot]);ft<dt&&(dt=ft,pt=ot)}var yt=pt,gt=yt+1<S.count?yt+1:0;mt[0].v.set(S.vertices[yt]),mt[0].id.cf.indexA=0,mt[0].id.cf.indexB=yt,mt[0].id.cf.typeA=u.e_face,mt[0].id.cf.typeB=u.e_vertex,mt[1].v.set(S.vertices[gt]),mt[1].id.cf.indexA=0,mt[1].id.cf.indexB=gt,mt[1].id.cf.typeA=u.e_face,mt[1].id.cf.typeB=u.e_vertex,tt?(k.i1=0,k.i2=1,k.v1.set(d),k.v2.set(f),k.normal.set(z)):(k.i1=1,k.i2=0,k.v1.set(f),k.v2.set(d),k.normal.set(z).neg())}else t.type=u.e_faceB,mt[0].v.set(d),mt[0].id.cf.indexA=0,mt[0].id.cf.indexB=ut.index,mt[0].id.cf.typeA=u.e_vertex,mt[0].id.cf.typeB=u.e_face,mt[1].v.set(f),mt[1].id.cf.indexA=0,mt[1].id.cf.indexB=ut.index,mt[1].id.cf.typeA=u.e_vertex,mt[1].id.cf.typeB=u.e_face,k.i1=ut.index,k.i2=k.i1+1<S.count?k.i1+1:0,k.v1.set(S.vertices[k.i1]),k.v2.set(S.vertices[k.i2]),k.normal.set(S.normals[k.i1]);k.sideNormal1.set(k.normal.y,-k.normal.x),k.sideNormal2.setMul(-1,k.sideNormal1),k.sideOffset1=r.dot(k.sideNormal1,k.v1),k.sideOffset2=r.dot(k.sideNormal2,k.v2),j[0].init(),j[1].init(),U[0].init(),U[1].init();var vt=j,_t=U;if(!(u.clipSegmentToLine(vt,mt,k.sideNormal1,k.sideOffset1,k.i1)<h.maxManifoldPoints||u.clipSegmentToLine(_t,vt,k.sideNormal2,k.sideOffset2,k.i2)<h.maxManifoldPoints)){ut.type===g?(t.localNormal.set(k.normal),t.localPoint.set(k.v1)):(t.localNormal.set(n.m_normals[k.i1]),t.localPoint.set(n.m_vertices[k.i1]));var bt=0;for(ot=0;ot<h.maxManifoldPoints;++ot){if(r.dot(k.normal,r.sub_(_t[ot].v,k.v1,w))<=at){var xt=t.points[bt];ut.type===g?(xt.localPoint=s.mulTVec2_(c,_t[ot].v,xt.localPoint),xt.id.set(_t[ot].id)):(xt.localPoint.set(_t[ot].v),xt.id.cf.typeA=_t[ot].id.cf.typeB,xt.id.cf.typeB=_t[ot].id.cf.typeA,xt.id.cf.indexA=_t[ot].id.cf.indexB,xt.id.cf.indexB=_t[ot].id.cf.indexA),++bt}}t.pointCount=bt}}}}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var n=i(8),o=i(9),a=i(7),s=i(3),r=i(2),l=(i(10),i(11),i(13),i(6)),h=(i(12),i(5),i(14),i(15),i(16));u.TYPE="distance-joint",u._super=h,u.prototype=o(u._super.prototype);var c={frequencyHz:0,dampingRatio:0};function u(t,e,i,o,a){if(!(this instanceof u))return new u(t,e,i,o,a);if(i&&o&&"m_type"in o&&"x"in i&&"y"in i){var l=i;i=o,o=l}t=n(t,c),h.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=u.TYPE,this.m_localAnchorA=o?e.getLocalPoint(o):t.localAnchorA||r.zero(),this.m_localAnchorB=a?i.getLocalPoint(a):t.localAnchorB||r.zero(),this.m_length=s.isFinite(t.length)?t.length:r.distance(e.getWorldPoint(this.m_localAnchorA),i.getWorldPoint(this.m_localAnchorB)),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}u.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},u.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},u.prototype.setLength=function(t){this.m_length=t},u.prototype.getLength=function(){return this.m_length},u.prototype.setFrequency=function(t){this.m_frequencyHz=t},u.prototype.getFrequency=function(){return this.m_frequencyHz},u.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},u.prototype.getDampingRatio=function(){return this.m_dampingRatio},u.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},u.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},u.prototype.getReactionForce=function(t){return r.mul(this.m_impulse,this.m_u).mul(t)},u.prototype.getReactionTorque=function(t){return 0},u.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,h=this.m_bodyB.c_position.c,c=this.m_bodyB.c_position.a,u=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,p=l.neo(i),d=l.neo(c);this.m_rA=l.mulVec2(p,r.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=l.mulVec2(d,r.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=r.sub(r.add(h,this.m_rB),r.add(e,this.m_rA));var f=this.m_u.length();f>a.linearSlop?this.m_u.mul(1/f):this.m_u.set(0,0);var y=r.cross(this.m_rA,this.m_u),g=r.cross(this.m_rB,this.m_u),v=this.m_invMassA+this.m_invIA*y*y+this.m_invMassB+this.m_invIB*g*g;if(this.m_mass=0!=v?1/v:0,this.m_frequencyHz>0){var _=f-this.m_length,b=2*s.PI*this.m_frequencyHz,x=2*this.m_mass*this.m_dampingRatio*b,S=this.m_mass*b*b,k=t.dt;this.m_gamma=k*(x+k*S),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=_*k*S*this.m_gamma,v+=this.m_gamma,this.m_mass=0!=v?1/v:0}else this.m_gamma=0,this.m_bias=0;if(t.warmStarting){this.m_impulse*=t.dtRatio;var w=r.mul(this.m_impulse,this.m_u);n.subMul(this.m_invMassA,w),o-=this.m_invIA*r.cross(this.m_rA,w),u.addMul(this.m_invMassB,w),m+=this.m_invIB*r.cross(this.m_rB,w)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.set(u),this.m_bodyB.c_velocity.w=m},u.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,a=r.add(e,r.cross(i,this.m_rA)),s=r.add(n,r.cross(o,this.m_rB)),l=r.dot(this.m_u,s)-r.dot(this.m_u,a),h=-this.m_mass*(l+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=h;var c=r.mul(h,this.m_u);e.subMul(this.m_invMassA,c),i-=this.m_invIA*r.cross(this.m_rA,c),n.addMul(this.m_invMassB,c),o+=this.m_invIB*r.cross(this.m_rB,c),this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(n),this.m_bodyB.c_velocity.w=o},u.prototype.solvePositionConstraints=function(t){if(this.m_frequencyHz>0)return!0;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,h=l.neo(i),c=l.neo(o),u=l.mulSub(h,this.m_localAnchorA,this.m_localCenterA),m=l.mulSub(c,this.m_localAnchorB,this.m_localCenterB),p=r.sub(r.add(n,m),r.add(e,u)),d=p.normalize()-this.m_length;d=s.clamp(d,-a.maxLinearCorrection,a.maxLinearCorrection);var f=-this.m_mass*d,y=r.mul(f,p);return e.subMul(this.m_invMassA,y),i-=this.m_invIA*r.cross(u,y),n.addMul(this.m_invMassB,y),o+=this.m_invIB*r.cross(m,y),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=o,s.abs(d)<a.linearSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=p;var o=i(4),a=i(8),s=i(9),r=(i(7),i(3)),l=i(2),h=(i(10),i(11)),c=(i(13),i(6)),u=(i(12),i(5),i(14),i(15),i(16));p.TYPE="friction-joint",p._super=u,p.prototype=s(p._super.prototype);var m={maxForce:0,maxTorque:0};function p(t,e,i,n){if(!(this instanceof p))return new p(t,e,i,n);t=a(t,m),u.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=p.TYPE,this.m_localAnchorA=n?e.getLocalPoint(n):t.localAnchorA||l.zero(),this.m_localAnchorB=n?i.getLocalPoint(n):t.localAnchorB||l.zero(),this.m_linearImpulse=l.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}p.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},p.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},p.prototype.setMaxForce=function(t){n&&o.assert(r.isFinite(t)&&t>=0),this.m_maxForce=t},p.prototype.getMaxForce=function(){return this.m_maxForce},p.prototype.setMaxTorque=function(t){n&&o.assert(r.isFinite(t)&&t>=0),this.m_maxTorque=t},p.prototype.getMaxTorque=function(){return this.m_maxTorque},p.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},p.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},p.prototype.getReactionForce=function(t){return l.mul(t,this.m_linearImpulse)},p.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},p.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,r=c.neo(e),u=c.neo(o);this.m_rA=c.mulVec2(r,l.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=c.mulVec2(u,l.sub(this.m_localAnchorB,this.m_localCenterB));var m=this.m_invMassA,p=this.m_invMassB,d=this.m_invIA,f=this.m_invIB,y=new h;if(y.ex.x=m+p+d*this.m_rA.y*this.m_rA.y+f*this.m_rB.y*this.m_rB.y,y.ex.y=-d*this.m_rA.x*this.m_rA.y-f*this.m_rB.x*this.m_rB.y,y.ey.x=y.ex.y,y.ey.y=m+p+d*this.m_rA.x*this.m_rA.x+f*this.m_rB.x*this.m_rB.x,this.m_linearMass=y.getInverse(),this.m_angularMass=d+f,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var g=l.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);i.subMul(m,g),n-=d*(l.cross(this.m_rA,g)+this.m_angularImpulse),a.addMul(p,g),s+=f*(l.cross(this.m_rB,g)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=s},p.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,a=this.m_invMassA,s=this.m_invMassB,c=this.m_invIA,u=this.m_invIB,m=t.dt,p=o-i,d=-this.m_angularMass*p,f=this.m_angularImpulse,y=m*this.m_maxTorque;this.m_angularImpulse=r.clamp(this.m_angularImpulse+d,-y,y),i-=c*(d=this.m_angularImpulse-f),o+=u*d;p=l.sub(l.add(n,l.cross(o,this.m_rB)),l.add(e,l.cross(i,this.m_rA))),d=l.neg(h.mulVec2(this.m_linearMass,p)),f=this.m_linearImpulse;this.m_linearImpulse.add(d);y=m*this.m_maxForce;this.m_linearImpulse.lengthSquared()>y*y&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(y)),d=l.sub(this.m_linearImpulse,f),e.subMul(a,d),i-=c*l.cross(this.m_rA,d),n.addMul(s,d),o+=u*l.cross(this.m_rB,d),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},p.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=f;var o=i(4),a=i(8),s=i(9),r=i(7),l=i(3),h=i(2),c=(i(10),i(11),i(13),i(6)),u=(i(12),i(5),i(14),i(15),i(16)),m=i(42),p=i(43);f.TYPE="gear-joint",f._super=u,f.prototype=s(f._super.prototype);var d={ratio:1};function f(t,e,i,s,r,y){if(!(this instanceof f))return new f(t,e,i,s,r,y);var g,v;t=a(t,d),u.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=f.TYPE,n&&o.assert(s.m_type===m.TYPE||s.m_type===p.TYPE),n&&o.assert(r.m_type===m.TYPE||r.m_type===p.TYPE),this.m_joint1=s||t.joint1,this.m_joint2=r||t.joint2,this.m_ratio=l.isFinite(y)?y:t.ratio,this.m_type1=this.m_joint1.getType(),this.m_type2=this.m_joint2.getType(),this.m_bodyC=this.m_joint1.getBodyA(),this.m_bodyA=this.m_joint1.getBodyB();var _=this.m_bodyA.m_xf,b=this.m_bodyA.m_sweep.a,x=this.m_bodyC.m_xf,S=this.m_bodyC.m_sweep.a;if(this.m_type1===m.TYPE){var k=this.m_joint1;this.m_localAnchorC=k.m_localAnchorA,this.m_localAnchorA=k.m_localAnchorB,this.m_referenceAngleA=k.m_referenceAngle,this.m_localAxisC=h.zero(),g=b-S-this.m_referenceAngleA}else{var w=this.m_joint1;this.m_localAnchorC=w.m_localAnchorA,this.m_localAnchorA=w.m_localAnchorB,this.m_referenceAngleA=w.m_referenceAngle,this.m_localAxisC=w.m_localXAxisA;var A=this.m_localAnchorC,P=c.mulTVec2(x.q,h.add(c.mul(_.q,this.m_localAnchorA),h.sub(_.p,x.p)));g=h.dot(P,this.m_localAxisC)-h.dot(A,this.m_localAxisC)}this.m_bodyD=this.m_joint2.getBodyA(),this.m_bodyB=this.m_joint2.getBodyB();var T=this.m_bodyB.m_xf,C=this.m_bodyB.m_sweep.a,I=this.m_bodyD.m_xf,B=this.m_bodyD.m_sweep.a;if(this.m_type2===m.TYPE){k=this.m_joint2;this.m_localAnchorD=k.m_localAnchorA,this.m_localAnchorB=k.m_localAnchorB,this.m_referenceAngleB=k.m_referenceAngle,this.m_localAxisD=h.zero(),v=C-B-this.m_referenceAngleB}else{w=this.m_joint2;this.m_localAnchorD=w.m_localAnchorA,this.m_localAnchorB=w.m_localAnchorB,this.m_referenceAngleB=w.m_referenceAngle,this.m_localAxisD=w.m_localXAxisA;var L=this.m_localAnchorD,E=c.mulTVec2(I.q,h.add(c.mul(T.q,this.m_localAnchorB),h.sub(T.p,I.p)));v=h.dot(E,this.m_localAxisD)-h.dot(L,this.m_localAxisD)}this.m_constant=g+this.m_ratio*v,this.m_impulse=0,this.m_lcA,this.m_lcB,this.m_lcC,this.m_lcD,this.m_mA,this.m_mB,this.m_mC,this.m_mD,this.m_iA,this.m_iB,this.m_iC,this.m_iD,this.m_JvAC,this.m_JvBD,this.m_JwA,this.m_JwB,this.m_JwC,this.m_JwD,this.m_mass}f.prototype.getJoint1=function(){return this.m_joint1},f.prototype.getJoint2=function(){return this.m_joint2},f.prototype.setRatio=function(t){n&&o.assert(l.isFinite(t)),this.m_ratio=t},f.prototype.getRatio=function(){return this.m_ratio},f.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},f.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},f.prototype.getReactionForce=function(t){return h.mul(this.m_impulse,this.m_JvAC).mul(t)},f.prototype.getReactionTorque=function(t){return t*(this.m_impulse*this.m_JwA)},f.prototype.initVelocityConstraints=function(t){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,r=this.m_bodyC.c_position.a,l=this.m_bodyC.c_velocity.v,u=this.m_bodyC.c_velocity.w,p=this.m_bodyD.c_position.a,d=this.m_bodyD.c_velocity.v,f=this.m_bodyD.c_velocity.w,y=c.neo(e),g=c.neo(o),v=c.neo(r),_=c.neo(p);if(this.m_mass=0,this.m_type1==m.TYPE)this.m_JvAC=h.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var b=c.mulVec2(v,this.m_localAxisC),x=c.mulSub(v,this.m_localAnchorC,this.m_lcC),S=c.mulSub(y,this.m_localAnchorA,this.m_lcA);this.m_JvAC=b,this.m_JwC=h.cross(x,b),this.m_JwA=h.cross(S,b),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==m.TYPE)this.m_JvBD=h.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{b=c.mulVec2(_,this.m_localAxisD);var k=c.mulSub(_,this.m_localAnchorD,this.m_lcD),w=c.mulSub(g,this.m_localAnchorB,this.m_lcB);this.m_JvBD=h.mul(this.m_ratio,b),this.m_JwD=this.m_ratio*h.cross(k,b),this.m_JwB=this.m_ratio*h.cross(w,b),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.warmStarting?(i.addMul(this.m_mA*this.m_impulse,this.m_JvAC),n+=this.m_iA*this.m_impulse*this.m_JwA,a.addMul(this.m_mB*this.m_impulse,this.m_JvBD),s+=this.m_iB*this.m_impulse*this.m_JwB,l.subMul(this.m_mC*this.m_impulse,this.m_JvAC),u-=this.m_iC*this.m_impulse*this.m_JwC,d.subMul(this.m_mD*this.m_impulse,this.m_JvBD),f-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(a),this.m_bodyB.c_velocity.w=s,this.m_bodyC.c_velocity.v.set(l),this.m_bodyC.c_velocity.w=u,this.m_bodyD.c_velocity.v.set(d),this.m_bodyD.c_velocity.w=f},f.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,a=this.m_bodyC.c_velocity.v,s=this.m_bodyC.c_velocity.w,r=this.m_bodyD.c_velocity.v,l=this.m_bodyD.c_velocity.w,c=h.dot(this.m_JvAC,e)-h.dot(this.m_JvAC,a)+h.dot(this.m_JvBD,n)-h.dot(this.m_JvBD,r);c+=this.m_JwA*i-this.m_JwC*s+(this.m_JwB*o-this.m_JwD*l);var u=-this.m_mass*c;this.m_impulse+=u,e.addMul(this.m_mA*u,this.m_JvAC),i+=this.m_iA*u*this.m_JwA,n.addMul(this.m_mB*u,this.m_JvBD),o+=this.m_iB*u*this.m_JwB,a.subMul(this.m_mC*u,this.m_JvAC),s-=this.m_iC*u*this.m_JwC,r.subMul(this.m_mD*u,this.m_JvBD),l-=this.m_iD*u*this.m_JwD,this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(n),this.m_bodyB.c_velocity.w=o,this.m_bodyC.c_velocity.v.set(a),this.m_bodyC.c_velocity.w=s,this.m_bodyD.c_velocity.v.set(r),this.m_bodyD.c_velocity.w=l},f.prototype.solvePositionConstraints=function(t){var e,i,n,o,a,s,l,u,p=this.m_bodyA.c_position.c,d=this.m_bodyA.c_position.a,f=this.m_bodyB.c_position.c,y=this.m_bodyB.c_position.a,g=this.m_bodyC.c_position.c,v=this.m_bodyC.c_position.a,_=this.m_bodyD.c_position.c,b=this.m_bodyD.c_position.a,x=c.neo(d),S=c.neo(y),k=c.neo(v),w=c.neo(b),A=0;if(this.m_type1==m.TYPE)n=h.zero(),a=1,l=1,A+=this.m_iA+this.m_iC,e=d-v-this.m_referenceAngleA;else{var P=c.mulVec2(k,this.m_localAxisC),T=c.mulSub(k,this.m_localAnchorC,this.m_lcC),C=c.mulSub(x,this.m_localAnchorA,this.m_lcA);n=P,l=h.cross(T,P),a=h.cross(C,P),A+=this.m_mC+this.m_mA+this.m_iC*l*l+this.m_iA*a*a;var I=h.sub(this.m_localAnchorC,this.m_lcC),B=c.mulTVec2(k,h.add(C,h.sub(p,g)));e=h.dot(h.sub(B,I),this.m_localAxisC)}if(this.m_type2==m.TYPE)o=h.zero(),s=this.m_ratio,u=this.m_ratio,A+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),i=y-b-this.m_referenceAngleB;else{P=c.mulVec2(w,this.m_localAxisD);var L=c.mulSub(w,this.m_localAnchorD,this.m_lcD),E=c.mulSub(S,this.m_localAnchorB,this.m_lcB);o=h.mul(this.m_ratio,P),u=this.m_ratio*h.cross(L,P),s=this.m_ratio*h.cross(E,P),A+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*u*u+this.m_iB*s*s;var M=h.sub(this.m_localAnchorD,this.m_lcD),R=c.mulTVec2(w,h.add(E,h.sub(f,_)));i=h.dot(R,this.m_localAxisD)-h.dot(M,this.m_localAxisD)}var D=e+this.m_ratio*i-this.m_constant,O=0;return A>0&&(O=-D/A),p.addMul(this.m_mA*O,n),d+=this.m_iA*O*a,f.addMul(this.m_mB*O,o),y+=this.m_iB*O*s,g.subMul(this.m_mC*O,n),v-=this.m_iC*O*l,_.subMul(this.m_mD*O,o),b-=this.m_iD*O*u,this.m_bodyA.c_position.c.set(p),this.m_bodyA.c_position.a=d,this.m_bodyB.c_position.c.set(f),this.m_bodyB.c_position.a=y,this.m_bodyC.c_position.c.set(g),this.m_bodyC.c_position.a=v,this.m_bodyD.c_position.c.set(_),this.m_bodyD.c_position.a=b,0<r.linearSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=p;var o=i(4),a=i(8),s=i(9),r=(i(7),i(3)),l=i(2),h=(i(10),i(11)),c=(i(13),i(6)),u=(i(12),i(5),i(14),i(15),i(16));p.TYPE="motor-joint",p._super=u,p.prototype=s(p._super.prototype);var m={maxForce:1,maxTorque:1,correctionFactor:.3};function p(t,e,i){if(!(this instanceof p))return new p(t,e,i);t=a(t,m),u.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=p.TYPE,this.m_linearOffset=t.linearOffset?t.linearOffset:e.getLocalPoint(i.getPosition());var n=e.getAngle(),o=i.getAngle();this.m_angularOffset=o-n,this.m_linearImpulse=l.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_correctionFactor=t.correctionFactor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_linearError,this.m_angularError,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}p.prototype.setMaxForce=function(t){n&&o.assert(r.isFinite(t)&&t>=0),this.m_maxForce=t},p.prototype.getMaxForce=function(){return this.m_maxForce},p.prototype.setMaxTorque=function(t){n&&o.assert(r.isFinite(t)&&t>=0),this.m_maxTorque=t},p.prototype.getMaxTorque=function(){return this.m_maxTorque},p.prototype.setCorrectionFactor=function(t){n&&o.assert(r.isFinite(t)&&0<=t&&t<=1),this.m_correctionFactor=t},p.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},p.prototype.setLinearOffset=function(t){t.x==this.m_linearOffset.x&&t.y==this.m_linearOffset.y||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset=t)},p.prototype.getLinearOffset=function(){return this.m_linearOffset},p.prototype.setAngularOffset=function(t){t!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=t)},p.prototype.getAngularOffset=function(){return this.m_angularOffset},p.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},p.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},p.prototype.getReactionForce=function(t){return l.mul(t,this.m_linearImpulse)},p.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},p.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,r=this.m_bodyB.c_velocity.v,u=this.m_bodyB.c_velocity.w,m=c.neo(i),p=c.neo(s);this.m_rA=c.mulVec2(m,l.neg(this.m_localCenterA)),this.m_rB=c.mulVec2(p,l.neg(this.m_localCenterB));var d=this.m_invMassA,f=this.m_invMassB,y=this.m_invIA,g=this.m_invIB,v=new h;if(v.ex.x=d+f+y*this.m_rA.y*this.m_rA.y+g*this.m_rB.y*this.m_rB.y,v.ex.y=-y*this.m_rA.x*this.m_rA.y-g*this.m_rB.x*this.m_rB.y,v.ey.x=v.ex.y,v.ey.y=d+f+y*this.m_rA.x*this.m_rA.x+g*this.m_rB.x*this.m_rB.x,this.m_linearMass=v.getInverse(),this.m_angularMass=y+g,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=l.zero(),this.m_linearError.addCombine(1,a,1,this.m_rB),this.m_linearError.subCombine(1,e,1,this.m_rA),this.m_linearError.sub(c.mulVec2(m,this.m_linearOffset)),this.m_angularError=s-i-this.m_angularOffset,t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var _=l.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);n.subMul(d,_),o-=y*(l.cross(this.m_rA,_)+this.m_angularImpulse),r.addMul(f,_),u+=g*(l.cross(this.m_rB,_)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=r,this.m_bodyB.c_velocity.w=u},p.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,a=this.m_invMassA,s=this.m_invMassB,c=this.m_invIA,u=this.m_invIB,m=t.dt,p=t.inv_dt,d=o-i+p*this.m_correctionFactor*this.m_angularError,f=-this.m_angularMass*d,y=this.m_angularImpulse,g=m*this.m_maxTorque;this.m_angularImpulse=r.clamp(this.m_angularImpulse+f,-g,g),i-=c*(f=this.m_angularImpulse-y),o+=u*f,(d=l.zero()).addCombine(1,n,1,l.cross(o,this.m_rB)),d.subCombine(1,e,1,l.cross(i,this.m_rA)),d.addMul(p*this.m_correctionFactor,this.m_linearError);f=l.neg(h.mulVec2(this.m_linearMass,d)),y=l.clone(this.m_linearImpulse);this.m_linearImpulse.add(f);g=m*this.m_maxForce;this.m_linearImpulse.clamp(g),f=l.sub(this.m_linearImpulse,y),e.subMul(a,f),i-=c*l.cross(this.m_rA,f),n.addMul(s,f),o+=u*l.cross(this.m_rB,f),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},p.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=d;var o=i(4),a=i(8),s=i(9),r=i(3),l=i(2),h=(i(10),i(11)),c=(i(13),i(6)),u=(i(12),i(5)),m=(i(14),i(15),i(16));d.TYPE="mouse-joint",d._super=m,d.prototype=s(d._super.prototype);var p={maxForce:0,frequencyHz:5,dampingRatio:.7};function d(t,e,i,s){if(!(this instanceof d))return new d(t,e,i,s);t=a(t,p),m.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=d.TYPE,n&&o.assert(r.isFinite(t.maxForce)&&t.maxForce>=0),n&&o.assert(r.isFinite(t.frequencyHz)&&t.frequencyHz>=0),n&&o.assert(r.isFinite(t.dampingRatio)&&t.dampingRatio>=0),this.m_targetA=s?l.clone(s):t.target||l.zero(),this.m_localAnchorB=u.mulTVec2(i.getTransform(),this.m_targetA),this.m_maxForce=t.maxForce,this.m_impulse=l.zero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0,this.m_rB=l.zero(),this.m_localCenterB=l.zero(),this.m_invMassB=0,this.m_invIB=0,this.mass=new h,this.m_C=l.zero()}d.prototype.setTarget=function(t){0==this.m_bodyB.isAwake()&&this.m_bodyB.setAwake(!0),this.m_targetA=l.clone(t)},d.prototype.getTarget=function(){return this.m_targetA},d.prototype.setMaxForce=function(t){this.m_maxForce=t},d.getMaxForce=function(){return this.m_maxForce},d.prototype.setFrequency=function(t){this.m_frequencyHz=t},d.prototype.getFrequency=function(){return this.m_frequencyHz},d.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},d.prototype.getDampingRatio=function(){return this.m_dampingRatio},d.prototype.getAnchorA=function(){return l.clone(this.m_targetA)},d.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},d.prototype.getReactionForce=function(t){return l.mul(t,this.m_impulse)},d.prototype.getReactionTorque=function(t){return 0*t},d.prototype.shiftOrigin=function(t){this.m_targetA.sub(t)},d.prototype.initVelocityConstraints=function(t){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyB.c_position,i=this.m_bodyB.c_velocity,a=e.c,s=e.a,u=i.v,m=i.w,p=c.neo(s),d=this.m_bodyB.getMass(),f=2*r.PI*this.m_frequencyHz,y=2*d*this.m_dampingRatio*f,g=d*(f*f),v=t.dt;n&&o.assert(y+v*g>r.EPSILON),this.m_gamma=v*(y+v*g),0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=v*g*this.m_gamma,this.m_rB=c.mulVec2(p,l.sub(this.m_localAnchorB,this.m_localCenterB));var _=new h;_.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,_.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,_.ey.x=_.ex.y,_.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=_.getInverse(),this.m_C.set(a),this.m_C.addCombine(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),m*=.98,t.warmStarting?(this.m_impulse.mul(t.dtRatio),u.addMul(this.m_invMassB,this.m_impulse),m+=this.m_invIB*l.cross(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),i.v.set(u),i.w=m},d.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyB.c_velocity,i=l.clone(e.v),n=e.w,o=l.cross(n,this.m_rB);o.add(i),o.addCombine(1,this.m_C,this.m_gamma,this.m_impulse),o.neg();var a=h.mulVec2(this.m_mass,o),s=l.clone(this.m_impulse);this.m_impulse.add(a);var r=t.dt*this.m_maxForce;this.m_impulse.clamp(r),a=l.sub(this.m_impulse,s),i.addMul(this.m_invMassB,a),n+=this.m_invIB*l.cross(this.m_rB,a),e.v.set(i),e.w=n},d.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=p;var o=i(4),a=i(8),s=i(9),r=i(7),l=i(3),h=i(2),c=(i(10),i(11),i(13),i(6)),u=(i(12),i(5),i(14),i(15),i(16));p.TYPE="pulley-joint",p.MIN_PULLEY_LENGTH=2,p._super=u,p.prototype=s(p._super.prototype);var m={collideConnected:!0};function p(t,e,i,s,r,c,d,f){if(!(this instanceof p))return new p(t,e,i,s,r,c,d,f);t=a(t,m),u.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=p.TYPE,this.m_groundAnchorA=s||(t.groundAnchorA||h.neo(-1,1)),this.m_groundAnchorB=r||(t.groundAnchorB||h.neo(1,1)),this.m_localAnchorA=c?e.getLocalPoint(c):t.localAnchorA||h.neo(-1,0),this.m_localAnchorB=d?i.getLocalPoint(d):t.localAnchorB||h.neo(1,0),this.m_lengthA=l.isFinite(t.lengthA)?t.lengthA:h.distance(c,s),this.m_lengthB=l.isFinite(t.lengthB)?t.lengthB:h.distance(d,r),this.m_ratio=l.isFinite(f)?f:t.ratio,n&&o.assert(f>l.EPSILON),this.m_constant=this.m_lengthA+this.m_ratio*this.m_lengthB,this.m_impulse=0,this.m_uA,this.m_uB,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}p.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},p.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},p.prototype.getLengthA=function(){return this.m_lengthA},p.prototype.getLengthB=function(){return this.m_lengthB},p.prototype.getRatio=function(){return this.m_ratio},p.prototype.getCurrentLengthA=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_groundAnchorA;return h.distance(t,e)},p.prototype.getCurrentLengthB=function(){var t=this.m_bodyB.getWorldPoint(this.m_localAnchorB),e=this.m_groundAnchorB;return h.distance(t,e)},p.prototype.shiftOrigin=function(t){this.m_groundAnchorA.sub(t),this.m_groundAnchorB.sub(t)},p.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},p.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},p.prototype.getReactionForce=function(t){return h.mul(this.m_impulse,this.m_uB).mul(t)},p.prototype.getReactionTorque=function(t){return 0},p.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,a=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,l=this.m_bodyB.c_velocity.v,u=this.m_bodyB.c_velocity.w,m=c.neo(i),p=c.neo(s);this.m_rA=c.mulVec2(m,h.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=c.mulVec2(p,h.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=h.sub(h.add(e,this.m_rA),this.m_groundAnchorA),this.m_uB=h.sub(h.add(a,this.m_rB),this.m_groundAnchorB);var d=this.m_uA.length(),f=this.m_uB.length();d>10*r.linearSlop?this.m_uA.mul(1/d):this.m_uA.setZero(),f>10*r.linearSlop?this.m_uB.mul(1/f):this.m_uB.setZero();var y=h.cross(this.m_rA,this.m_uA),g=h.cross(this.m_rB,this.m_uB),v=this.m_invMassA+this.m_invIA*y*y,_=this.m_invMassB+this.m_invIB*g*g;if(this.m_mass=v+this.m_ratio*this.m_ratio*_,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.warmStarting){this.m_impulse*=t.dtRatio;var b=h.mul(-this.m_impulse,this.m_uA),x=h.mul(-this.m_ratio*this.m_impulse,this.m_uB);n.addMul(this.m_invMassA,b),o+=this.m_invIA*h.cross(this.m_rA,b),l.addMul(this.m_invMassB,x),u+=this.m_invIB*h.cross(this.m_rB,x)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v=l,this.m_bodyB.c_velocity.w=u},p.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,a=h.add(e,h.cross(i,this.m_rA)),s=h.add(n,h.cross(o,this.m_rB)),r=-h.dot(this.m_uA,a)-this.m_ratio*h.dot(this.m_uB,s),l=-this.m_mass*r;this.m_impulse+=l;var c=h.mul(-l,this.m_uA),u=h.mul(-this.m_ratio*l,this.m_uB);e.addMul(this.m_invMassA,c),i+=this.m_invIA*h.cross(this.m_rA,c),n.addMul(this.m_invMassB,u),o+=this.m_invIB*h.cross(this.m_rB,u),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},p.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,a=c.neo(i),s=c.neo(o),u=c.mulVec2(a,h.sub(this.m_localAnchorA,this.m_localCenterA)),m=c.mulVec2(s,h.sub(this.m_localAnchorB,this.m_localCenterB)),p=h.sub(h.add(e,this.m_rA),this.m_groundAnchorA),d=h.sub(h.add(n,this.m_rB),this.m_groundAnchorB),f=p.length(),y=d.length();f>10*r.linearSlop?p.mul(1/f):p.setZero(),y>10*r.linearSlop?d.mul(1/y):d.setZero();var g=h.cross(u,p),v=h.cross(m,d),_=this.m_invMassA+this.m_invIA*g*g,b=this.m_invMassB+this.m_invIB*v*v,x=_+this.m_ratio*this.m_ratio*b;x>0&&(x=1/x);var S=this.m_constant-f-this.m_ratio*y,k=l.abs(S),w=-x*S,A=h.mul(-w,p),P=h.mul(-this.m_ratio*w,d);return e.addMul(this.m_invMassA,A),i+=this.m_invIA*h.cross(u,A),n.addMul(this.m_invMassB,P),o+=this.m_invIB*h.cross(m,P),this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=n,this.m_bodyB.c_position.a=o,k<r.linearSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=m;var n=i(8),o=i(9),a=i(7),s=i(3),r=i(2),l=(i(10),i(11),i(13),i(6)),h=(i(12),i(5),i(14),i(15),i(16)),c=0;m.TYPE="rope-joint",m._super=h,m.prototype=o(m._super.prototype);var u={maxLength:0};function m(t,e,i,o){if(!(this instanceof m))return new m(t,e,i,o);t=n(t,u),h.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=m.TYPE,this.m_localAnchorA=o?e.getLocalPoint(o):t.localAnchorA||r.neo(-1,0),this.m_localAnchorB=o?i.getLocalPoint(o):t.localAnchorB||r.neo(1,0),this.m_maxLength=t.maxLength,this.m_mass=0,this.m_impulse=0,this.m_length=0,this.m_state=c,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}m.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},m.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},m.prototype.setMaxLength=function(t){this.m_maxLength=t},m.prototype.getMaxLength=function(){return this.m_maxLength},m.prototype.getLimitState=function(){return this.m_state},m.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},m.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},m.prototype.getReactionForce=function(t){return r.mul(this.m_impulse,this.m_u).mul(t)},m.prototype.getReactionTorque=function(t){return 0},m.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,o=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_position.c,h=this.m_bodyB.c_position.a,u=this.m_bodyB.c_velocity.v,m=this.m_bodyB.c_velocity.w,p=l.neo(i),d=l.neo(h);this.m_rA=l.mulSub(p,this.m_localAnchorA,this.m_localCenterA),this.m_rB=l.mulSub(d,this.m_localAnchorB,this.m_localCenterB),this.m_u=r.zero(),this.m_u.addCombine(1,s,1,this.m_rB),this.m_u.subCombine(1,e,1,this.m_rA),this.m_length=this.m_u.length();var f=this.m_length-this.m_maxLength;if(this.m_state=f>0?2:c,!(this.m_length>a.linearSlop))return this.m_u.setZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.mul(1/this.m_length);var y=r.cross(this.m_rA,this.m_u),g=r.cross(this.m_rB,this.m_u),v=this.m_invMassA+this.m_invIA*y*y+this.m_invMassB+this.m_invIB*g*g;if(this.m_mass=0!=v?1/v:0,t.warmStarting){this.m_impulse*=t.dtRatio;var _=r.mul(this.m_impulse,this.m_u);n.subMul(this.m_invMassA,_),o-=this.m_invIA*r.cross(this.m_rA,_),u.addMul(this.m_invMassB,_),m+=this.m_invIB*r.cross(this.m_rB,_)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=o,this.m_bodyB.c_velocity.v.set(u),this.m_bodyB.c_velocity.w=m},m.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,a=r.addCross(e,i,this.m_rA),l=r.addCross(n,o,this.m_rB),h=this.m_length-this.m_maxLength,c=r.dot(this.m_u,r.sub(l,a));h<0&&(c+=t.inv_dt*h);var u=-this.m_mass*c,m=this.m_impulse;this.m_impulse=s.min(0,this.m_impulse+u),u=this.m_impulse-m;var p=r.mul(u,this.m_u);e.subMul(this.m_invMassA,p),i-=this.m_invIA*r.cross(this.m_rA,p),n.addMul(this.m_invMassB,p),o+=this.m_invIB*r.cross(this.m_rB,p),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},m.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,h=l.neo(i),c=l.neo(o),u=l.mulSub(h,this.m_localAnchorA,this.m_localCenterA),m=l.mulSub(c,this.m_localAnchorB,this.m_localCenterB),p=r.zero();p.addCombine(1,n,1,m),p.subCombine(1,e,1,u);var d=p.normalize(),f=d-this.m_maxLength;f=s.clamp(f,0,a.maxLinearCorrection);var y=-this.m_mass*f,g=r.mul(y,p);return e.subMul(this.m_invMassA,g),i-=this.m_invIA*r.cross(u,g),n.addMul(this.m_invMassB,g),o+=this.m_invIB*r.cross(m,g),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=o,d-this.m_maxLength<a.linearSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=p;var n=i(8),o=i(9),a=i(7),s=i(3),r=i(2),l=i(10),h=(i(11),i(13)),c=i(6),u=(i(12),i(5),i(14),i(15),i(16));p.TYPE="weld-joint",p._super=u,p.prototype=o(p._super.prototype);var m={frequencyHz:0,dampingRatio:0};function p(t,e,i,o){if(!(this instanceof p))return new p(t,e,i,o);t=n(t,m),u.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=p.TYPE,this.m_localAnchorA=o?e.getLocalPoint(o):t.localAnchorA||r.zero(),this.m_localAnchorB=o?i.getLocalPoint(o):t.localAnchorB||r.zero(),this.m_referenceAngle=s.isFinite(t.referenceAngle)?t.referenceAngle:i.getAngle()-e.getAngle(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=l(),this.m_bias=0,this.m_gamma=0,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new h}p.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},p.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},p.prototype.getReferenceAngle=function(){return this.m_referenceAngle},p.prototype.setFrequency=function(t){this.m_frequencyHz=t},p.prototype.getFrequency=function(){return this.m_frequencyHz},p.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},p.prototype.getDampingRatio=function(){return this.m_dampingRatio},p.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},p.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},p.prototype.getReactionForce=function(t){return r.neo(this.m_impulse.x,this.m_impulse.y).mul(t)},p.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},p.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,u=c.neo(e),m=c.neo(o);this.m_rA=c.mulVec2(u,r.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=c.mulVec2(m,r.sub(this.m_localAnchorB,this.m_localCenterB));var p=this.m_invMassA,d=this.m_invMassB,f=this.m_invIA,y=this.m_invIB,g=new h;if(g.ex.x=p+d+this.m_rA.y*this.m_rA.y*f+this.m_rB.y*this.m_rB.y*y,g.ey.x=-this.m_rA.y*this.m_rA.x*f-this.m_rB.y*this.m_rB.x*y,g.ez.x=-this.m_rA.y*f-this.m_rB.y*y,g.ex.y=g.ey.x,g.ey.y=p+d+this.m_rA.x*this.m_rA.x*f+this.m_rB.x*this.m_rB.x*y,g.ez.y=this.m_rA.x*f+this.m_rB.x*y,g.ex.z=g.ez.x,g.ey.z=g.ez.y,g.ez.z=f+y,this.m_frequencyHz>0){g.getInverse22(this.m_mass);var v=f+y,_=v>0?1/v:0,b=o-e-this.m_referenceAngle,x=2*s.PI*this.m_frequencyHz,S=2*_*this.m_dampingRatio*x,k=_*x*x,w=t.dt;this.m_gamma=w*(S+w*k),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=b*w*k*this.m_gamma,v+=this.m_gamma,this.m_mass.ez.z=0!=v?1/v:0}else 0==g.ez.z?(g.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(g.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(t.warmStarting){this.m_impulse.mul(t.dtRatio);var A=r.neo(this.m_impulse.x,this.m_impulse.y);i.subMul(p,A),n-=f*(r.cross(this.m_rA,A)+this.m_impulse.z),a.addMul(d,A),l+=y*(r.cross(this.m_rB,A)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},p.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,o=this.m_bodyB.c_velocity.w,a=this.m_invMassA,s=this.m_invMassB,c=this.m_invIA,u=this.m_invIB;if(this.m_frequencyHz>0){var m=o-i,p=-this.m_mass.ez.z*(m+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=p,i-=c*p,o+=u*p,(y=r.zero()).addCombine(1,n,1,r.cross(o,this.m_rB)),y.subCombine(1,e,1,r.cross(i,this.m_rA));var d=r.neg(h.mulVec2(this.m_mass,y));this.m_impulse.x+=d.x,this.m_impulse.y+=d.y;var f=r.clone(d);e.subMul(a,f),i-=c*r.cross(this.m_rA,f),n.addMul(s,f),o+=u*r.cross(this.m_rB,f)}else{var y;(y=r.zero()).addCombine(1,n,1,r.cross(o,this.m_rB)),y.subCombine(1,e,1,r.cross(i,this.m_rA));m=o-i;var g=l(y.x,y.y,m),v=l.neg(h.mulVec3(this.m_mass,g));this.m_impulse.add(v);f=r.neo(v.x,v.y);e.subMul(a,f),i-=c*(r.cross(this.m_rA,f)+v.z),n.addMul(s,f),o+=u*(r.cross(this.m_rB,f)+v.z)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=o},p.prototype.solvePositionConstraints=function(t){var e,i,n=this.m_bodyA.c_position.c,o=this.m_bodyA.c_position.a,u=this.m_bodyB.c_position.c,m=this.m_bodyB.c_position.a,p=c.neo(o),d=c.neo(m),f=this.m_invMassA,y=this.m_invMassB,g=this.m_invIA,v=this.m_invIB,_=c.mulVec2(p,r.sub(this.m_localAnchorA,this.m_localCenterA)),b=c.mulVec2(d,r.sub(this.m_localAnchorB,this.m_localCenterB)),x=new h;if(x.ex.x=f+y+_.y*_.y*g+b.y*b.y*v,x.ey.x=-_.y*_.x*g-b.y*b.x*v,x.ez.x=-_.y*g-b.y*v,x.ex.y=x.ey.x,x.ey.y=f+y+_.x*_.x*g+b.x*b.x*v,x.ez.y=_.x*g+b.x*v,x.ex.z=x.ez.x,x.ey.z=x.ez.y,x.ez.z=g+v,this.m_frequencyHz>0){(k=r.zero()).addCombine(1,u,1,b),k.subCombine(1,n,1,_),e=k.length(),i=0;var S=r.neg(x.solve22(k));n.subMul(f,S),o-=g*r.cross(_,S),u.addMul(y,S),m+=v*r.cross(b,S)}else{var k;(k=r.zero()).addCombine(1,u,1,b),k.subCombine(1,n,1,_);var w=m-o-this.m_referenceAngle;e=k.length(),i=s.abs(w);var A=l(k.x,k.y,w),P=l();if(x.ez.z>0)P=l.neg(x.solve33(A));else{var T=r.neg(x.solve22(k));P.set(T.x,T.y,0)}S=r.neo(P.x,P.y);n.subMul(f,S),o-=g*(r.cross(_,S)+P.z),u.addMul(y,S),m+=v*(r.cross(b,S)+P.z)}return this.m_bodyA.c_position.c=n,this.m_bodyA.c_position.a=o,this.m_bodyB.c_position.c=u,this.m_bodyB.c_position.a=m,e<=a.linearSlop&&i<=a.angularSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var n=i(8),o=i(9),a=i(7),s=i(3),r=i(2),l=(i(10),i(11),i(13),i(6)),h=(i(12),i(5),i(14),i(15),i(16));u.TYPE="wheel-joint",u._super=h,u.prototype=o(u._super.prototype);var c={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7};function u(t,e,i,o,a){if(!(this instanceof u))return new u(t,e,i,o,a);t=n(t,c),h.call(this,t,e,i),e=this.m_bodyA,i=this.m_bodyB,this.m_type=u.TYPE,this.m_localAnchorA=o?e.getLocalPoint(o):t.localAnchorA||r.zero(),this.m_localAnchorB=o?i.getLocalPoint(o):t.localAnchorB||r.zero(),this.m_localAxis=a?e.getLocalVector(a):t.localAxisA||r.neo(1,0),this.m_localXAxisA=this.m_localAxis,this.m_localYAxisA=r.cross(1,this.m_localXAxisA),this.m_mass=0,this.m_impulse=0,this.m_motorMass=0,this.m_motorImpulse=0,this.m_springMass=0,this.m_springImpulse=0,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableMotor=t.enableMotor,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=0,this.m_gamma=0,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_ax=r.zero(),this.m_ay=r.zero(),this.m_sAx,this.m_sBx,this.m_sAy,this.m_sBy}u.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},u.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},u.prototype.getLocalAxisA=function(){return this.m_localXAxisA},u.prototype.getJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.getWorldPoint(this.m_localAnchorA),n=e.getWorldPoint(this.m_localAnchorB),o=r.sub(n,i),a=t.getWorldVector(this.m_localXAxisA);return r.dot(o,a)},u.prototype.getJointSpeed=function(){var t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t},u.prototype.isMotorEnabled=function(){return this.m_enableMotor},u.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},u.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},u.prototype.getMotorSpeed=function(){return this.m_motorSpeed},u.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},u.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},u.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},u.prototype.setSpringFrequencyHz=function(t){this.m_frequencyHz=t},u.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},u.prototype.setSpringDampingRatio=function(t){this.m_dampingRatio=t},u.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},u.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},u.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},u.prototype.getReactionForce=function(t){return r.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax).mul(t)},u.prototype.getReactionTorque=function(t){return t*this.m_motorImpulse},u.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_invMassA,i=this.m_invMassB,n=this.m_invIA,o=this.m_invIB,a=this.m_bodyA.c_position.c,h=this.m_bodyA.c_position.a,c=this.m_bodyA.c_velocity.v,u=this.m_bodyA.c_velocity.w,m=this.m_bodyB.c_position.c,p=this.m_bodyB.c_position.a,d=this.m_bodyB.c_velocity.v,f=this.m_bodyB.c_velocity.w,y=l.neo(h),g=l.neo(p),v=l.mulVec2(y,r.sub(this.m_localAnchorA,this.m_localCenterA)),_=l.mulVec2(g,r.sub(this.m_localAnchorB,this.m_localCenterB));if((k=r.zero()).addCombine(1,m,1,_),k.subCombine(1,a,1,v),this.m_ay=l.mulVec2(y,this.m_localYAxisA),this.m_sAy=r.cross(r.add(k,v),this.m_ay),this.m_sBy=r.cross(_,this.m_ay),this.m_mass=e+i+n*this.m_sAy*this.m_sAy+o*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=l.mulVec2(y,this.m_localXAxisA),this.m_sAx=r.cross(r.add(k,v),this.m_ax),this.m_sBx=r.cross(_,this.m_ax);var b=e+i+n*this.m_sAx*this.m_sAx+o*this.m_sBx*this.m_sBx;if(b>0){this.m_springMass=1/b;var x=r.dot(k,this.m_ax),S=2*s.PI*this.m_frequencyHz,k=2*this.m_springMass*this.m_dampingRatio*S,w=this.m_springMass*S*S,A=t.dt;this.m_gamma=A*(k+A*w),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=x*A*w*this.m_gamma,this.m_springMass=b+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=n+o,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.warmStarting){this.m_impulse*=t.dtRatio,this.m_springImpulse*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var P=r.combine(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),T=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,C=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;c.subMul(this.m_invMassA,P),u-=this.m_invIA*T,d.addMul(this.m_invMassB,P),f+=this.m_invIB*C}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(c),this.m_bodyA.c_velocity.w=u,this.m_bodyB.c_velocity.v.set(d),this.m_bodyB.c_velocity.w=f},u.prototype.solveVelocityConstraints=function(t){var e=this.m_invMassA,i=this.m_invMassB,n=this.m_invIA,o=this.m_invIB,a=this.m_bodyA.c_velocity.v,l=this.m_bodyA.c_velocity.w,h=this.m_bodyB.c_velocity.v,c=this.m_bodyB.c_velocity.w,u=r.dot(this.m_ax,h)-r.dot(this.m_ax,a)+this.m_sBx*c-this.m_sAx*l,m=-this.m_springMass*(u+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=m;var p=r.mul(m,this.m_ax),d=m*this.m_sAx,f=m*this.m_sBx;a.subMul(e,p),l-=n*d,h.addMul(i,p);u=(c+=o*f)-l-this.m_motorSpeed,m=-this.m_motorMass*u;var y=this.m_motorImpulse,g=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=s.clamp(this.m_motorImpulse+m,-g,g),l-=n*(m=this.m_motorImpulse-y),c+=o*m;u=r.dot(this.m_ay,h)-r.dot(this.m_ay,a)+this.m_sBy*c-this.m_sAy*l,m=-this.m_mass*u;this.m_impulse+=m;p=r.mul(m,this.m_ay),d=m*this.m_sAy,f=m*this.m_sBy;a.subMul(e,p),l-=n*d,h.addMul(i,p),c+=o*f,this.m_bodyA.c_velocity.v.set(a),this.m_bodyA.c_velocity.w=l,this.m_bodyB.c_velocity.v.set(h),this.m_bodyB.c_velocity.w=c},u.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,h=l.neo(i),c=l.neo(o),u=l.mulVec2(h,r.sub(this.m_localAnchorA,this.m_localCenterA)),m=l.mulVec2(c,r.sub(this.m_localAnchorB,this.m_localCenterB)),p=r.zero();p.addCombine(1,n,1,m),p.subCombine(1,e,1,u);var d,f=l.mulVec2(h,this.m_localYAxisA),y=r.cross(r.add(p,u),f),g=r.cross(m,f),v=r.dot(p,f),_=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;d=0!=_?-v/_:0;var b=r.mul(d,f),x=d*y,S=d*g;return e.subMul(this.m_invMassA,b),i-=this.m_invIA*x,n.addMul(this.m_invMassB,b),o+=this.m_invIB*S,this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=o,s.abs(v)<=a.linearSlop}},function(t,e,i){"use strict";i.r(e);var n={stepTimesEachFrame:10,bulletTimeTargetVelocity:10,roadFatalMinLength:.5,listResistance:2,resolution:1,pixel2meter:.0625,meter2pixel:16,bikeCommonAnimation:"myLaya/laya/assets/animations/bike.json",bikeScale:.25,bikeRadius:.734375,bikeSprintRadius:1.5,bikeDensity:1,bikeJumpingRotation:-30,jumpCommonMaxCount:2,bikeJumpExtraCountdown:[20,18,16,14,12,10],bikeLeftMargin:150,bikeCameraMinY:540,bikeCameraMaxY:740,bikeGameOverAngularVelocity:50,testbedSpeed:1,fps:60,maskHeight:420,maskColorStop:[{offset:0,opacity:0},{offset:.25,opacity:.5},{offset:.75,opacity:1},{offset:1,opacity:1}],edgeHeight:20,edgeColorStop:[{offset:1,opacity:0},{offset:0,opacity:.75}],bikeVelocity:20,gravity:-200,jumpForce:5e3,mapBasePath:"myLaya/laya/pages/Map/",finalFlagImagePath:"images/flag.png",accFrame:420,startScene:{endlessText:{fontSize:50,fill:"red"},mapText:{fontSize:50,fill:"green"}},gameOverScene:{msgText:{fontSize:100,fill:"red"},buttonText:{fontSize:50,fill:"white"}},fatalEdgeAngleRange:[Math.PI/180*80,Math.PI/180*100],goldCoinAniJson:"myLaya/laya/assets/animations/gold-coin-animation.json",accGemAniJson:"images/crystal-jet-animation.json",fireWallAniJson:"images/firewall-animation.json",birdAniJson:"images/bird-animation.json",horizontalParallaxDepth:[.75,.5,.25,0],verticalParallaxDepth:[.75,.5,.25,0],bgY:[0,280,560],bikeGameOverOffsetHeight:30,bikeAdjustHeightOffset:[-250,-100],bgOffsetHeight:360,enableCameraAutoZoom:1,cameraAutoZoomCoefficient:.5,defaultBgmPath:"myLaya/laya/assets/sounds/SoundBGM002.mp3",mainBgmPath:"myLaya/laya/assets/sounds/SoundBGM002.mp3",defaultBgScale:[1,1,1],mapList:[{scenePath:"Test",texture:{side:"images/TextureScorpiusRoad01SideSkin.png",top:"images/TextureScorpiusRoad01TopSkin.png",bg:["images/TextureScorpiusBackground01.png","images/TextureScorpiusBackground02.png","images/TextureScorpiusBackground03.png"]},bgY:[0,280,560],horizontalParallaxDepth:[.75,.5,.25,0],verticalParallaxDepth:[.75,.5,.25,0],bikeVelocity:20,gravity:-200,jumpForce:5e3}],endlessMode:{baseScenePath:"myLaya/laya/pages/RoadSection/"}};n.endlessMode.sceneList=[{texture:{side:"images/Aquarius/TextureAquariusRoad01SideSkin.png",top:"images/Aquarius/TextureAquariusRoad01TopSkin.png",bg:["images/Aquarius/TextureAquariusBackground01.png","images/Aquarius/TextureAquariusBackground02.png","images/Aquarius/TextureAquariusBackground03.png"]},horizontalParallaxDepth:[.9,.8,.5,0],verticalParallaxDepth:[1,1,.8,0],bikeVelocity:20,gravity:-50,jumpForce:12800,roadSectionList:[[{scenePath:"Test/0/Test"},{scenePath:"Test/0/Test2"}],[{scenePath:"Test/1/Test"},{scenePath:"Test/1/Test2"}]]}],n.enableCameraAutoZoom=1,n.cameraAutoZoomCommonScale=2,n.cameraAutoZoomScaleSpeed=.01,n.imagePath={bikeParticle:"images/particles/bike.png",itemAccGem:"images/item-acc.png",bubble:"images/bubble.png",racetrackPlayer:"myLaya/laya/assets/images/racetrack-player.png",racetrackEnemy:"myLaya/laya/assets/images/racetrack-npc.png",rebornArrow:"myLaya/laya/assets/images/UI_Respawn_ArrowS.png",start1:"myLaya/laya/assets/images/start-1.png",start2:"myLaya/laya/assets/images/start-2.png",start3:"myLaya/laya/assets/images/start-3.png",startGo:"myLaya/laya/assets/images/start-go.png",randomItem:"myLaya/laya/assets/animations/Random.json",rankText1:"myLaya/laya/assets/images/no-1.png",rankText2:"myLaya/laya/assets/images/no-2.png",rankText3:"myLaya/laya/assets/images/no-3.png",rankText4:"myLaya/laya/assets/images/no-4.png",speedUpNotice:"myLaya/laya/assets/animations/speed-up.json",lockedLevel:"myLaya/laya/assets/images/icon_mapbtn_lock.png",enabledLevel:"myLaya/laya/assets/images/icon_mapbtn.png",selectedLevel:"myLaya/laya/assets/images/icon_mapbtn_select.png"},n.emitterPath={bike:"images/particles/bike.json"},n.startImagePath={ui:"images/ui.json"},n.bike={density:1,deadCompleteTime:500,adjustHeightVelocity:.25},n.enemy={count:3,contactPlayerAlpha:.5},n.sceneItemImagePath={groundStab:"images/ground_stab.json"},n.i18nPath="dist/i18n.json",n.starCount=3;var o,a,s,r=n;function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}r.meter2distance=.2,r.designWidth=1280,r.designHeight=720,r.bikeLeftMargin=350,r.bikeCameraMinY=540,r.bikeCameraMaxY=540,r.maskHeight=0,r.bikeVelocity=30,r.gravity=-175,r.jumpForce=250,r.bikeCommonAnimation="myLaya/laya/assets/animations/bike.json",r.bikeCommonAnimationPos=[0,-40],r.bikeSprintAnimation="myLaya/laya/assets/animations/sprint.json",r.bikeSprintAnimationPos=[0,-40],r.bikeJumpingAnimation={1:{atlasPath:"myLaya/laya/assets/animations/xiaoxin_run2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/xiaoxin_run2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/xiaoxin_run3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/xiaoxin_run3.json",animationName:"xiaoxin_run",interval:5}},r.bikeSpringAnimation={path:"myLaya/laya/assets/animations/xiaoxin_run2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},r.bikeRotateAnimation={path:"myLaya/laya/assets/animations/xiaoxin_run5.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},r.bikeFallingAnimation={path:"myLaya/laya/assets/animations/xiaoxin_run4.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},r.bikeScale=1,r.bikeRadius=3,r.bikeDensity=.12,r.bikeSprintRadius=11,r.bikeJumpingRotation=0,r.forbidenCameraVerticalMove=1,r.defaultItemRandomTable={PowerJump:1,UnlimitedJump:1},r.mapList=[{scenePath:"Test004",texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}},{scenePath:"Test004",texture:{side:"images/map/stg20/l_stg20Road01SideSkin.png",top:"images/map/stg20/l_stg20Road01TopSkin.png",side2:"images/map/stg20/l_stg20Road02SideSkin.png",top2:"images/map/stg20/l_stg20Road02TopSkin.png",bg:["images/map/stg20/l_stg20_01.png","images/map/stg20/l_stg20_02.png"],mainCover:"images/map/stg20/l_stg20Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}},{scenePath:"Test004",texture:{side:"images/map/stg06/l_stg06Road01SideSkin.png",top:"images/map/stg06/l_stg06Road01TopSkin.png",side2:"images/map/stg06/l_stg06Road02SideSkin.png",top2:"images/map/stg06/l_stg06Road02TopSkin.png",bg:["images/map/stg06/l_stg06_01.png","images/map/stg06/l_stg06_02.png"],mainCover:"images/map/stg06/l_stg06Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}},{scenePath:"Test004",texture:{side:"images/map/stg04/l_stg04Road01SideSkin.png",top:"images/map/stg04/l_stg04Road01TopSkin.png",side2:"images/map/stg04/l_stg04Road02SideSkin.png",top2:"images/map/stg04/l_stg04Road02TopSkin.png",bg:["images/map/stg04/l_stg04_01.png","images/map/stg04/l_stg04_02.png"],mainCover:"images/map/stg04/l_stg04Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}},{scenePath:"Test004",texture:{side:"images/map/stg02/l_stg02Road01SideSkin.png",top:"images/map/stg02/l_stg02Road01TopSkin.png",side2:"images/map/stg02/l_stg02Road02SideSkin.png",top2:"images/map/stg02/l_stg02Road02TopSkin.png",bg:["images/map/stg02/l_stg02_01.png","images/map/stg02/l_stg02_02.png"],mainCover:"images/map/stg02/l_stg02Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}},{scenePath:"Test004",texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}},{scenePath:"Test004",texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}},{scenePath:"Test004",texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}},{scenePath:"Test004",texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}},{scenePath:"Test004",texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}},{scenePath:"Test004",texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}},{scenePath:"Test004",texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{1:{BlockSight:100,Thunder:1,BananaPeel:400,Accelerate:1,PowerJump:100,UnlimitedJump:100,Invincible:20},2:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:5,BananaPeel:200,Accelerate:5,PowerJump:10,UnlimitedJump:10,Invincible:50},3:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:20,BananaPeel:200,Accelerate:20,PowerJump:10,UnlimitedJump:10,Invincible:50},4:{Decelerate:100,WeakenJump:100,BlockSight:10,SpiderWeb:10,Seal:10,Thunder:200,BananaPeel:100,Accelerate:200,PowerJump:10,UnlimitedJump:10,Invincible:100}}}],r.roadSections={"1-1":["Random/Random111-00214102"],"111-11":["Random/Random111-00110101","Random/Random111-00110102","Random/Random111-00110103","Random/Random111-00110104","Random/Random111-00110105"],"111-21":["Random/Random111-00000101","Random/Random111-00000102","Random/Random111-00000103","Random/Random111-00000104","Random/Random111-00000105","Random/Random111-00000106","Random/Random111-00000107","Random/Random111-00000108","Random/Random111-00000109","Random/Random111-00000110","Random/Random111-00000111","Random/Random111-00000112","Random/Random111-00000113","Random/Random111-00000114","Random/Random111-00000115","Random/Random111-00001101","Random/Random111-00001102","Random/Random111-00001103","Random/Random111-00001601","Random/Random111-00001701","Random/Random111-00002101","Random/Random111-00002102","Random/Random111-00002103","Random/Random111-00002104","Random/Random111-00002105","Random/Random111-00002106","Random/Random111-00002107"],"111-31":["Random/Random111-00211101","Random/Random111-00211102","Random/Random111-00211103","Random/Random111-00211104","Random/Random111-00211105","Random/Random111-00211501","Random/Random111-00211502","Random/Random111-00211503","Random/Random111-00211601","Random/Random111-00211602","Random/Random111-00211603","Random/Random111-00211604","Random/Random111-00211701","Random/Random111-00211702","Random/Random111-00212101","Random/Random111-00212102","Random/Random111-00212103","Random/Random111-00212104","Random/Random111-00212105","Random/Random111-00212201","Random/Random111-00212202","Random/Random111-00212203","Random/Random111-00214101","Random/Random111-00214102","Random/Random111-00214103","Random/Random111-00214104","Random/Random111-00214201","Random/Random111-00214202","Random/Random111-00214203","Random/Random111-00215101","Random/Random111-00215501","Random/Random111-00215601","Random/Random111-00217101"],"111-123":["Random/Random111-00000101","Random/Random111-00000102","Random/Random111-00000103","Random/Random111-00000104","Random/Random111-00000105","Random/Random111-00000106","Random/Random111-00000107","Random/Random111-00000108","Random/Random111-00000109","Random/Random111-00000110","Random/Random111-00000111","Random/Random111-00000112","Random/Random111-00000113","Random/Random111-00000114","Random/Random111-00000115","Random/Random111-00001101","Random/Random111-00001102","Random/Random111-00001103","Random/Random111-00001601","Random/Random111-00001701","Random/Random111-00002101","Random/Random111-00002102","Random/Random111-00002103","Random/Random111-00002104","Random/Random111-00002105","Random/Random111-00002106","Random/Random111-00002107","Random/Random111-00211101","Random/Random111-00211102","Random/Random111-00211103","Random/Random111-00211104","Random/Random111-00211105","Random/Random111-00211501","Random/Random111-00211502","Random/Random111-00211503","Random/Random111-00211601","Random/Random111-00211602","Random/Random111-00211603","Random/Random111-00211604","Random/Random111-00211701","Random/Random111-00211702","Random/Random111-00212101","Random/Random111-00212102","Random/Random111-00212103","Random/Random111-00212104","Random/Random111-00212105","Random/Random111-00212201","Random/Random111-00212202","Random/Random111-00212203","Random/Random111-00214101","Random/Random111-00214102","Random/Random111-00214103","Random/Random111-00214104","Random/Random111-00214201","Random/Random111-00214202","Random/Random111-00214203","Random/Random111-00215101","Random/Random111-00215501","Random/Random111-00215601","Random/Random111-00217101"],"999-1":["Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00000101","Item/Item111-00001101","Item/Item111-00002101","Item/Item111-00003101","Item/Item111-00003101","Item/Item111-00003101","Item/Item111-00004101","Item/Item111-00004101","Item/Item111-00004101","Item/Item111-00005101","Item/Item111-00005101","Item/Item111-00005101","Item/Item111-00006101","Item/Item111-00006101","Item/Item111-00006101","Item/Item111-00001111","Item/Item111-00002111","Item/Item111-00003111","Item/Item111-00003111","Item/Item111-00003111","Item/Item111-00004111","Item/Item111-00004111","Item/Item111-00004111","Item/Item111-00005111","Item/Item111-00005111","Item/Item111-00005111","Item/Item111-00006111","Item/Item111-00006111","Item/Item111-00006111","Item/Item111-00001121","Item/Item111-00002121","Item/Item111-00003121","Item/Item111-00003121","Item/Item111-00003121","Item/Item111-00004121","Item/Item111-00004121","Item/Item111-00004121","Item/Item111-00005121","Item/Item111-00005121","Item/Item111-00005121","Item/Item111-00006121","Item/Item111-00006121","Item/Item111-00006121"],"101-1":[],"101-11":[],"101-21":[],"101-31":[],"101-41":[],"101-51":[],"101-61":[],"101-71":[],"101-81":[],"101-91":[],"101-101":[]},r.endlessMode.default={roadSectionList:[{list:["111-11"],length:2e3,velocity:1},{list:["111-21"],length:2e3,velocity:1},{list:["111-21"],length:2e3,velocity:1},{list:["111-123"],length:2e3,velocity:1.2},{list:["111-123"],length:2e3,velocity:1.2},{list:["999-1"],length:500,velocity:1.2},{list:["111-123"],length:2e3,velocity:1.2},{list:["111-123"],length:2e3,velocity:1.2},{list:["111-123"],length:2e3,velocity:1.2},{list:["111-123"],length:2e3,velocity:1.4},{list:["111-123"],length:2e3,velocity:1.4},{list:["111-123"],length:2e3,velocity:1.4},{list:["999-1"],length:500,velocity:1.4},{list:["111-123"],length:2e3,velocity:1.4},{list:["111-123"],length:2e3,velocity:1.4},{list:["111-123"],length:2e3,velocity:1.4},{list:["111-123"],length:2e3,velocity:1.4},{list:["111-123"],length:2e3,velocity:1.4},{list:["111-123"],length:2e3,velocity:1.4},{list:["111-123"],length:2e3,velocity:1.4},{list:["999-1"],length:500,velocity:1.4},{list:["111-123"],length:2e3,velocity:1.6},{list:["111-123"],length:2e3,velocity:1.6},{list:["111-123"],length:2e3,velocity:1.6},{list:["111-123"],length:2e3,velocity:1.6},{list:["111-123"],length:2e3,velocity:1.6},{list:["111-123"],length:2e3,velocity:1.6},{list:["111-123"],length:2e3,velocity:1.6},{list:["999-1"],length:500,velocity:1.6},{list:["111-123"],length:2e3,velocity:1.6},{list:["111-123"],length:2e3,velocity:1.6},{list:["111-123"],length:2e3,velocity:1.6},{list:["111-123"],length:2e3,velocity:1.6},{list:["111-123"],length:2e3,velocity:1.8},{list:["111-123"],length:2e3,velocity:1.8},{list:["111-123"],length:2e3,velocity:1.8},{list:["111-123"],length:2e3,velocity:1.8},{list:["999-1"],length:500,velocity:1.8},{list:["111-123"],length:2e3,velocity:1.8},{list:["111-123"],length:2e3,velocity:1.8},{list:["111-123"],length:2e3,velocity:1.8},{list:["111-123"],length:2e3,velocity:1.8}],infiniteRoadSectionList:[{list:["111-31"],length:2e3,velocity:2},{list:["111-31"],length:2e3,velocity:2},{list:["111-31"],length:2e3,velocity:2},{list:["111-31"],length:2e3,velocity:2},{list:["999-1"],length:500,velocity:2},{list:["111-31"],length:2e3,velocity:2},{list:["111-31"],length:2e3,velocity:2},{list:["111-31"],length:2e3,velocity:2},{list:["111-31"],length:2e3,velocity:2},{list:["111-31"],length:2e3,velocity:2},{list:["111-31"],length:2e3,velocity:2}]},r.endlessMode.sceneList=[{id:0,name:"Select Map1",texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],shopCover:"images/map/stg40/l_stg40Map.png",mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}},{id:1,name:"Select Map2",unlockInfo:{title:"MapUnlockTitle2",dsc:"MapUnlockDescribe2",image:"images/map/DX2_Aries/TextureDX2_AriesBackground-1.png",imageScale:1.1},texture:{side:"images/map/stg20/l_stg20Road01SideSkin.png",top:"images/map/stg20/l_stg20Road01TopSkin.png",side2:"images/map/stg20/l_stg20Road02SideSkin.png",top2:"images/map/stg20/l_stg20Road02TopSkin.png",bg:["images/map/stg20/l_stg20_01.png","images/map/stg20/l_stg20_02.png"],shopCover:"images/map/stg20/l_stg20Map.png",mainCover:"images/map/stg20/l_stg20Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}},{id:2,name:"Select Map3",unlockInfo:{title:"MapUnlockTitle3",dsc:"MapUnlockDescribe3",image:"images/map/DX2_Aquarius/TextureDX2_AquariusBackground-1.png",imageScale:1.1},texture:{side:"images/map/stg06/l_stg06Road01SideSkin.png",top:"images/map/stg06/l_stg06Road01TopSkin.png",side2:"images/map/stg06/l_stg06Road02SideSkin.png",top2:"images/map/stg06/l_stg06Road02TopSkin.png",bg:["images/map/stg06/l_stg06_01.png","images/map/stg06/l_stg06_02.png"],shopCover:"images/map/stg06/l_stg06Map.png",mainCover:"images/map/stg06/l_stg06Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}},{id:3,name:"Select Map4",unlockInfo:{title:"MapUnlockTitle4",dsc:"MapUnlockDescribe4",image:"images/map/DX3_IceAge/TextureDX3_IceAgeBackground-1.png",imageScale:1.1},texture:{side:"images/map/stg04/l_stg04Road01SideSkin.png",top:"images/map/stg04/l_stg04Road01TopSkin.png",side2:"images/map/stg04/l_stg04Road02SideSkin.png",top2:"images/map/stg04/l_stg04Road02TopSkin.png",bg:["images/map/stg04/l_stg04_01.png","images/map/stg04/l_stg04_02.png"],shopCover:"images/map/stg04/l_stg04Map.png",mainCover:"images/map/stg04/l_stg04Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}},{id:4,name:"Select Map5",unlockInfo:{title:"MapUnlockTitle5",dsc:"MapUnlockDescribe5",image:"images/map/DX3_Rococo/TextureDX3_RococoBackground-1.png",imageScale:1.1},texture:{side:"images/map/stg02/l_stg02Road01SideSkin.png",top:"images/map/stg02/l_stg02Road01TopSkin.png",side2:"images/map/stg02/l_stg02Road02SideSkin.png",top2:"images/map/stg02/l_stg02Road02TopSkin.png",bg:["images/map/stg02/l_stg02_01.png","images/map/stg02/l_stg02_02.png"],shopCover:"images/map/stg02/l_stg02Map.png",mainCover:"images/map/stg02/l_stg02Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}},{id:5,name:"Select Map6",unlockInfo:{title:"MapUnlockTitle6",dsc:"MapUnlockDescribe6",image:"images/map/DX2_Pisces/TextureDX2_PiscesBackground-1.png",imageScale:1.1},texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],shopCover:"images/map/stg40/l_stg40Map.png",mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}},{id:6,name:"Select Map7",unlockInfo:{title:"MapUnlockTitle7",dsc:"MapUnlockDescribe7",image:"images/map/DX3_SengokuPeriod/TextureDX3_SengokuPeriodBackground-1.png",imageScale:1.1},texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],shopCover:"images/map/stg40/l_stg40Map.png",mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}},{id:7,name:"Select Map8",unlockInfo:{title:"MapUnlockTitle8",dsc:"MapUnlockDescribe8",image:"images/map/DX1_Beijing/TextureDX1_BeijingBackground-1.png",imageScale:1.1},texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],shopCover:"images/map/stg40/l_stg40Map.png",mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}},{id:8,name:"Select Map9",unlockInfo:{title:"MapUnlockTitle9",dsc:"MapUnlockDescribe9",image:"images/map/DX1_Newyork/TextureDX1_NewyorkBackground-1.png",imageScale:1.1},texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],shopCover:"images/map/stg40/l_stg40Map.png",mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}},{id:9,name:"Select Map10",unlockInfo:{title:"MapUnlockTitle10",dsc:"MapUnlockDescribe10",image:"images/map/DX1_Tokyo/TextureDX1_TokyoBackground-1.png",imageScale:1.1},texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],shopCover:"images/map/stg40/l_stg40Map.png",mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}},{id:10,name:"Select Map11",unlockInfo:{title:"MapUnlockTitle11",dsc:"MapUnlockDescribe11",image:"images/map/DX3_TheJurassic/TextureDX3_TheJurassicBackground-1.png",imageScale:1.1},texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],shopCover:"images/map/stg40/l_stg40Map.png",mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}},{id:11,name:"Select Map12",unlockInfo:{title:"MapUnlockTitle12",dsc:"MapUnlockDescribe12",image:"images/map/DX3_MiddleAge/TextureDX3_MiddleAgeBackground-1.png",imageScale:1.1},texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],shopCover:"images/map/stg40/l_stg40Map.png",mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",distanceNotice:[200,400,600,800,1e3,1200,1400,1600,1800,2e3,2200,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,8400,9600,10800,12e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,55e3,6e4,65e3,7e4,75e3,8e4,85e3,9e4,95e3,1e5],roadSectionList:[],infiniteRoadSectionList:[],itemRandomTable:{PowerJump:2,UnlimitedJump:2,Magnet:2,Invincible:2,Sprint:1}}],r.endlessMode.rebornTimes=3,r.startRoadLength=3500,r.endlessMode.rewardRoad={roadPath:["myLaya/laya/pages/RoadSection/Special/Special111-00000101.scene.json","myLaya/laya/pages/RoadSection/Special/Special111-00000101.scene.json","myLaya/laya/pages/RoadSection/Special/Special111-00001101.scene.json","myLaya/laya/pages/RoadSection/Special/Special111-00001101.scene.json","myLaya/laya/pages/RoadSection/Special/Special111-00000111.scene.json","myLaya/laya/pages/RoadSection/Special/Special111-00001111.scene.json","myLaya/laya/pages/RoadSection/Special/Special111-00000121.scene.json","myLaya/laya/pages/RoadSection/Special/Special111-00001121.scene.json"],maxValue:500,endInvincibleDuration:5,lightAnimationDuration:1e3,endDistance:2e3},r.bgY=[0,0,256],r.maskColorStop=[{offset:0,opacity:0},{offset:.25,opacity:.5},{offset:.75,opacity:1},{offset:1,opacity:1}],r.jumpCommonMaxCount=2,r.bikeJumpExtraCountdown=[2e3,2e3],r.enableCameraAutoZoom=0,r.cameraAutoZoomCommonScale=1.5,r.cameraAutoZoomScaleSpeed=.02,r.bgOffsetHeight=380,r.bgMinHeightInView=1e3,r.portableItemButtonPosList=[[100,200],[100,100]],r.rebornDragDuration=1,r.rebornFloatFrame=300,r.rebornFloatVelocity=10,r.bikeVelocityLevel=[.8,.9,1,1.1],r.bikeJumpLevel=[1.4,1.3,1.2,1.1],r.bikeList=[{id:0,imagePath:"",scale:[0,0],anchor:[.5,.5],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/bike.json",bikeSprintAnimation:"myLaya/laya/assets/animations/sprint.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/xiaoxin_run2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/xiaoxin_run2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/xiaoxin_run3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/xiaoxin_run3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/xiaoxin_run2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/xiaoxin_run5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/xiaoxin_run4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike1",dsc:"Info-bike-1",index:1,highJump:"Normal",size:"Small",quality:0,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:0,slowFalling:0,coinPercent:[1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.4,1.45,1.5,1.55,1.6,1.65,1.7,1.75,1.8,1.85,1.9,1.95,2],distancePercent:[1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.4,1.45,1.5,1.55,1.6,1.65,1.7,1.75,1.8,1.85,1.9,1.95,2],scorePercent:[1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.4,1.45,1.5,1.55,1.6,1.65,1.7,1.75,1.8,1.85,1.9,1.95,2],expPercent:[1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.4,1.45,1.5,1.55,1.6,1.65,1.7,1.75,1.8,1.85,1.9,1.95,2]},{id:1,imagePath:"",scale:[.5,.5],anchor:[.6,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns1010-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns1010-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1010-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1010-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1010-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1010-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1010-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1010-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1010-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike2",dsc:"Info-bike-2",index:2,highJump:"Normal",size:"Small",quality:0,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:0,slowFalling:0},{id:4,imagePath:"",scale:[.4,.4],anchor:[.62,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5400-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5400-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5400-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5400-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5400-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5400-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5400-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5400-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5400-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike3",dsc:"Info-bike-3",index:3,highJump:"Normal",size:"Small",quality:0,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:0,slowFalling:0},{id:11,imagePath:"",scale:[.5,.5],anchor:[.63,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns1030-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns1030-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1030-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1030-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1030-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1030-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1030-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1030-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1030-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike4",dsc:"Info-bike-4",index:4,highJump:"Normal",size:"Small",quality:0,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:0,slowFalling:0},{id:13,imagePath:"",scale:[.5,.5],anchor:[1,.5],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns1020-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns1020-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1020-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1020-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1020-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1020-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1020-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1020-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1020-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike5",dsc:"Info-bike-5",index:5,highJump:"Normal",size:"Small",quality:0,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:0,slowFalling:0},{id:15,imagePath:"",scale:[.5,.5],anchor:[.5,.8],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns1040-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns1040-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1040-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1040-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1040-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns1040-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1040-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1040-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns1040-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike6",dsc:"Info-bike-6",index:6,highJump:"Normal",size:"Small",quality:0,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:0,slowFalling:0},{id:2,imagePath:"",scale:[.5,.5],anchor:[.63,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns6480-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns6480-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6480-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6480-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6480-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6480-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns6480-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns6480-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns6480-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike7",dsc:"Info-bike-7",index:7,highJump:"Normal",size:"Small",quality:1,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:1,slowFalling:0},{id:5,imagePath:"",scale:[.5,.5],anchor:[.63,.7],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns2020-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns2020-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2020-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2020-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2020-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2020-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2020-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2020-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2020-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike8",dsc:"Info-bike-8",index:8,highJump:"Normal",size:"Small",quality:1,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:1,slowFalling:0},{id:6,imagePath:"",scale:[.5,.5],anchor:[.63,.7],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns2030-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns2030-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2030-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2030-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2030-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2030-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2030-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2030-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2030-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike9",dsc:"Info-bike-9",index:9,highJump:"Normal",size:"Small",quality:1,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:1,slowFalling:0},{id:20,imagePath:"",scale:[.5,.5],anchor:[.5,.6],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns2040-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns2040-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2040-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2040-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2040-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2040-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2040-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2040-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2040-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike10",dsc:"Info-bike-10",index:10,highJump:"Normal",size:"Middle",quality:1,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:1,slowFalling:0},{id:8,imagePath:"",scale:[.45,.45],anchor:[.5,.5],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns2060-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns2060-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2060-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2060-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2060-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2060-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2060-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2060-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2060-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike11",dsc:"Info-bike-11",index:11,highJump:"Normal",size:"Middle",quality:1,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:1,slowFalling:0},{id:41,imagePath:"",scale:[.4,.4],anchor:[.45,.68],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns2090-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns2090-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2090-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2090-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2090-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns2090-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2090-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2090-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns2090-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike12",dsc:"Info-bike-12",index:12,highJump:"Normal",size:"Middle",quality:1,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[],rotatable:1,slowFalling:0},{id:21,imagePath:"",scale:[.5,.5],anchor:[.5,.86],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns3010-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns3010-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns3010-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns3010-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns3010-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns3010-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns3010-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns3010-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns3010-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike13",dsc:"Info-bike-13",index:13,highJump:"Normal",size:"Small",quality:2,velocityPercent:.9,densityPercent:1.2,bikeJumpExtraCountdown:[2e3],rotatable:1,slowFalling:0},{id:22,imagePath:"",scale:[.5,.5],anchor:[.48,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5250-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5250-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5250-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5250-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5250-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5250-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5250-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5250-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5250-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike14",dsc:"Info-bike-14",index:14,highJump:"Normal",size:"Small",quality:2,velocityPercent:.9,densityPercent:1.2,bikeJumpExtraCountdown:[2e3],rotatable:1,slowFalling:0},{id:23,imagePath:"",scale:[.5,.5],anchor:[.77,.7],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5040-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5040-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5040-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5040-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5040-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5040-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5040-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5040-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5040-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike15",dsc:"Info-bike-15",index:15,highJump:"Normal",size:"Small",quality:2,velocityPercent:.9,densityPercent:1.2,bikeJumpExtraCountdown:[2e3],rotatable:1,slowFalling:0},{id:7,imagePath:"",scale:[.4,.4],anchor:[.63,.7],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5020-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5020-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5020-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5020-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5020-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5020-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5020-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5020-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5020-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike16",dsc:"Info-bike-16",index:16,highJump:"Easy",size:"Small",quality:2,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[2e3],rotatable:1,slowFalling:0},{id:42,imagePath:"",scale:[.5,.5],anchor:[.28,1.1],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5070-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5070-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5070-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5070-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5070-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5070-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5070-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5070-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5070-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike17",dsc:"Info-bike-17",index:17,highJump:"Easy",size:"Small",quality:2,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[2e3],rotatable:1,slowFalling:0},{id:43,imagePath:"",scale:[.5,.5],anchor:[.46,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5140-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5140-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5140-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5140-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5140-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5140-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5140-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5140-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5140-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike18",dsc:"Info-bike-18",index:18,highJump:"Easy",size:"Middle",quality:2,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[2e3],rotatable:1,slowFalling:0},{id:51,imagePath:"",scale:[.35,.35],anchor:[.71,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5130-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5130-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5130-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5130-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5130-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5130-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5130-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5130-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5130-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike19",dsc:"Info-bike-19",index:19,highJump:"Hard",size:"Middle",quality:2,velocityPercent:1.1,densityPercent:1.2,bikeJumpExtraCountdown:[2e3],rotatable:1,slowFalling:0},{id:53,imagePath:"",scale:[.35,.35],anchor:[.71,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns3030-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns3030-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns3030-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns3030-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns3030-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns3030-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns3030-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns3030-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns3030-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike20",dsc:"Info-bike-20",index:20,highJump:"Hard",size:"Middle",quality:2,velocityPercent:1.1,densityPercent:1.2,bikeJumpExtraCountdown:[2e3],rotatable:1,slowFalling:0},{id:54,imagePath:"",scale:[.35,.35],anchor:[.71,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5490-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5490-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5490-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5490-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5490-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5490-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5490-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5490-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5490-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike21",dsc:"Info-bike-21",index:21,highJump:"Hard",size:"Middle",quality:2,velocityPercent:1.1,densityPercent:1.2,bikeJumpExtraCountdown:[2e3],rotatable:1,slowFalling:0},{id:19,imagePath:"",scale:[.5,.5],anchor:[.5,1.25],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5310-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5310-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5310-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5310-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5310-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5310-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5310-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5310-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5310-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike22",dsc:"Info-bike-22",index:22,highJump:"Easy",size:"Small",quality:3,velocityPercent:.8,densityPercent:1.2,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:10,imagePath:"",scale:[.5,.5],anchor:[.71,.65],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5530-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5530-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5530-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5530-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5530-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5530-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5530-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5530-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5530-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike23",dsc:"Info-bike-23",index:23,highJump:"Easy",size:"Small",quality:3,velocityPercent:.8,densityPercent:1.1,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:12,imagePath:"",scale:[.5,.5],anchor:[.71,.6],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5160-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5160-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5160-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5160-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5160-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5160-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5160-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5160-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5160-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike24",dsc:"Info-bike-24",index:24,highJump:"Easy",size:"Middle",quality:3,velocityPercent:.8,densityPercent:1,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:9,imagePath:"",scale:[.5,.5],anchor:[.45,.35],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5620-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5620-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5620-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5620-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5620-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5620-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5620-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5620-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5620-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike25",dsc:"Info-bike-25",index:25,highJump:"Hard",size:"Middle",quality:3,velocityPercent:.9,densityPercent:1.2,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:24,imagePath:"",scale:[.5,.5],anchor:[.55,.3],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5220-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5220-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5220-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5220-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5220-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5220-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5220-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5220-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5220-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike26",dsc:"Info-bike-26",index:26,highJump:"Hard",size:"Middle",quality:3,velocityPercent:.9,densityPercent:1.1,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:18,imagePath:"",scale:[.5,.5],anchor:[.5,.6],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5280-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5280-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5280-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5280-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5280-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5280-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5280-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5280-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5280-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike27",dsc:"Info-bike-27",index:27,highJump:"Hard",size:"Middle",quality:3,velocityPercent:.9,densityPercent:1,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:14,imagePath:"",scale:[.5,.5],anchor:[1.05,1.08],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5260-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5260-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5260-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5260-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5260-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5260-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5260-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5260-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5260-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike28",dsc:"Info-bike-28",index:28,highJump:"Normal",size:"Small",quality:3,velocityPercent:1,densityPercent:1.2,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:16,imagePath:"",scale:[.5,.5],anchor:[.59,.71],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns6180-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns6180-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6180-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6180-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6180-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6180-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns6180-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns6180-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns6180-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike29",dsc:"Info-bike-29",index:29,highJump:"Normal",size:"Big",quality:3,velocityPercent:1,densityPercent:1.1,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:17,imagePath:"",scale:[.5,.5],anchor:[.69,.8],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5460-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5460-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5460-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5460-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5460-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5460-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5460-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5460-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5460-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike30",dsc:"Info-bike-30",index:30,highJump:"Normal",size:"Small",quality:3,velocityPercent:1,densityPercent:1,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:3,imagePath:"",scale:[.5,.5],anchor:[.52,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5150-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5150-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5150-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5150-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5150-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5150-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5150-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5150-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5150-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike31",dsc:"Info-bike-31",index:31,highJump:"Hard",size:"Big",quality:3,velocityPercent:1.1,densityPercent:1.2,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:52,imagePath:"",scale:[.35,.35],anchor:[.71,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5570-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5570-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5570-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5570-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5570-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5570-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5570-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5570-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5570-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike32",dsc:"Info-bike-32",index:32,highJump:"Hard",size:"Big",quality:3,velocityPercent:1.1,densityPercent:1.1,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:25,imagePath:"",scale:[.5,.5],anchor:[.6,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns6120-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns6120-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6120-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6120-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6120-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns6120-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns6120-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns6120-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns6120-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike33",dsc:"Info-bike-33",index:33,highJump:"Hard",size:"Big",quality:3,velocityPercent:1.1,densityPercent:1,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:34,imagePath:"",scale:[.5,.5],anchor:[.6,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5050-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5050-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5050-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5050-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5050-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5050-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5050-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5050-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5050-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike34",dsc:"Info-bike-34",index:34,highJump:"Hard",size:"Big",quality:3,velocityPercent:1.2,densityPercent:1.2,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:35,imagePath:"",scale:[.5,.5],anchor:[.6,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5180-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5180-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5180-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5180-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5180-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5180-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5180-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5180-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5180-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike35",dsc:"Info-bike-35",index:35,highJump:"Hard",size:"Big",quality:3,velocityPercent:1.2,densityPercent:1.1,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1},{id:36,imagePath:"",scale:[.5,.5],anchor:[.6,.73],position:[0,0],bikeCommonAnimation:"myLaya/laya/assets/animations/cosplay/sns5600-1.json",bikeSprintAnimation:"myLaya/laya/assets/animations/cosplay/sns5600-6.json",bikeJumpingAnimation:{1:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5600-2.json",animationName:"xiaoxin_run",interval:5},2:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5600-2.json",animationName:"xiaoxin_run",interval:5},3:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5600-3.json",animationName:"xiaoxin_run",interval:5},4:{atlasPath:"myLaya/laya/assets/animations/cosplay/sns5600-3.json",animationName:"xiaoxin_run",interval:5}},bikeSpringAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5600-2.json",name:"xiaoxin_run",speed:.2,pos:[0,-40]},bikeRotateAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5600-5.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},bikeFallingAnimation:{path:"myLaya/laya/assets/animations/cosplay/sns5600-4.json",name:"xiaoxin_run",speed:.4,pos:[0,-40]},name:"Select Bike36",dsc:"Info-bike-36",index:36,highJump:"Hard",size:"Big",quality:3,velocityPercent:1.2,densityPercent:1,bikeJumpExtraCountdown:[2e3,2e3],rotatable:1,slowFalling:1}],r.freeDrawInterval=28800,r.notice={fill:"white",fontSize:40,margin:10,backgroundColor:0,backgroundAlpha:.5,positionY:100,duration:2e3,fadeDuration:250},r.mainScene={bikeSprite:{velocityX:0,animationSpeed:.5}},r.drawScene={bikeSprite:{y:100},res:{drawSound:"myLaya/laya/assets/sounds/Sound0028.mp3"}},r.bikeScene={res:{upgradeSound:"myLaya/laya/assets/sounds/se_icon_select.mp3"},bikeList:{isHorizontal:1}},r.gameScene={velocityStateImgList:[{maxVelocity:1,imgPath:"myLaya/laya/assets/images/game-scene/ui_spd_1.png"},{maxVelocity:1.2,imgPath:"myLaya/laya/assets/images/game-scene/ui_spd_2.png"},{maxVelocity:1.4,imgPath:"myLaya/laya/assets/images/game-scene/ui_spd_3.png"},{maxVelocity:1.6,imgPath:"myLaya/laya/assets/images/game-scene/ui_spd_4.png"},{maxVelocity:1.8,imgPath:"myLaya/laya/assets/images/game-scene/ui_spd_5.png"},{maxVelocity:2,imgPath:"myLaya/laya/assets/images/game-scene/ui_spd_6.png"}]},r.levelUpScene={bulletTimeMaxValueAddIcon:{scale:.8}},r.shopScene={radioDistance:270,enableListMove:!1},r.infoScene={coin:{texture:"myLaya/laya/assets/images/icon-coin.png",name:"Coin",dsc:"dsc-Coin"},diamond:{texture:"myLaya/laya/assets/images/icon-diamond.png",name:"Diamond",dsc:"dsc-Diamond"},exp:{texture:"myLaya/laya/assets/images/icon-exp.png",name:"Exp",dsc:"dsc-Exp"},bulletTimeMaxValue:{texture:"myLaya/laya/assets/images/bullet-time-slot.png",name:"bulletTime",dsc:"dsc-bulletTime"}},r.moneyList=[{getDiamond:345,costMoney:30,getCoin:0,costDiamond:0},{getDiamond:132,costMoney:12,getCoin:0,costDiamond:0},{getDiamond:63,costMoney:6,getCoin:0,costDiamond:0},{getDiamond:10,costMoney:1,getCoin:0,costDiamond:0},{getDiamond:0,costMoney:0,getCoin:34500,costDiamond:300},{getDiamond:0,costMoney:0,getCoin:13200,costDiamond:120},{getDiamond:0,costMoney:0,getCoin:6300,costDiamond:60},{getDiamond:0,costMoney:0,getCoin:1e3,costDiamond:10}],r.presentList=[{id:1,dsc:"UnlockAllBike",costMoney:50},{id:2,dsc:"UnlockAllEndlessScene",costMoney:200},{id:3,dsc:"Money2DCPresentDsc",costMoney:1,getDiamond:50,getCoin:5e3},{id:4,dsc:"Money2DCPresentDsc",costMoney:6,getDiamond:150,getCoin:15e3}],r.rewardGoldList=[{rewardCoin:2e3,onlineMinutes:0},{rewardCoin:2e3,onlineMinutes:10},{rewardCoin:2e3,onlineMinutes:30},{rewardCoin:2e3,onlineMinutes:60}],r.rewardDiamondList=[{rewardDiamond:50,onlineMinutes:0},{rewardDiamond:50,onlineMinutes:10},{rewardDiamond:50,onlineMinutes:30},{rewardDiamond:50,onlineMinutes:60}],r.buttonClickScale=.9,r.buttonClickOffset=10,r.item={smallFireWall:{bodyWidth:40,bodyHeight:350},bigFireWall:{bodyWidth:40,bodyHeight:610},bird:{table:{default:{animationJsonPath:"images/bird-animation.json",animationName:"Bird",animationSpeed:.25,animationPos:[0,0],bodyWidth:64,bodyHeight:40,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,appearSoundPath:"myLaya/laya/assets/sounds/SE310.mp3",isAbleToBeTrampled:1,isAbleToBeJacked:0,forwardVelocity:-10,isMoveUpDown:1,upDownCoefficient:10,upDownStep:.1,bulletTimeValueTrampled:1,bulletTimeValueJacked:2,scaleRange:[.95,1.05],scaleDuration:250},10000:{animationJsonPath:"images/trap/enm01.json",animationName:"enm01",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm01-2.json",animationName:"enm01-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:87,bodyHeight:96,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:0,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:50,bulletTimeValueJacked:50,scaleRange:[.95,1.05],scaleDuration:250},10020:{animationJsonPath:"images/trap/enm04.json",animationName:"enm04",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm04-2.json",animationName:"enm04-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:87,bodyHeight:96,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:0,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:500,bulletTimeValueJacked:500,scaleRange:[.95,1.05],scaleDuration:250},10040:{animationJsonPath:"images/trap/enm05.json",animationName:"enm05",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm05-2.json",animationName:"enm05-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:87,bodyHeight:96,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:0,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:1e3,bulletTimeValueJacked:1e3,scaleRange:[.95,1.05],scaleDuration:250},10100:{animationJsonPath:"images/trap/enm03.json",animationName:"enm03",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm03-2.json",animationName:"enm03-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:96,bodyHeight:90,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:0,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:50,bulletTimeValueJacked:50,scaleRange:[.95,1.05],scaleDuration:250},10120:{animationJsonPath:"images/trap/enm06.json",animationName:"enm06",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm06-2.json",animationName:"enm06-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:96,bodyHeight:90,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:0,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:500,bulletTimeValueJacked:500,scaleRange:[.95,1.05],scaleDuration:250},10140:{animationJsonPath:"images/trap/enm07.json",animationName:"enm07",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm07-2.json",animationName:"enm07-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:96,bodyHeight:90,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:0,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:1e3,bulletTimeValueJacked:1e3,scaleRange:[.95,1.05],scaleDuration:250},10110:{animationJsonPath:"images/trap/enm06.json",animationName:"enm06",animationSpeed:1,animationPos:[0,0],bodyWidth:96,bodyHeight:90,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:-10,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:7,bulletTimeValueJacked:8,scaleRange:[.95,1.05],scaleDuration:250},10200:{animationJsonPath:"images/trap/enm11.json",animationName:"enm11",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm11-2.json",animationName:"enm11-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:96,bodyHeight:82,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:-10,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:50,bulletTimeValueJacked:50,scaleRange:[.95,1.05],scaleDuration:250},10220:{animationJsonPath:"images/trap/enm12.json",animationName:"enm12",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm12-2.json",animationName:"enm12-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:195,bodyHeight:164,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:-10,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:100,bulletTimeValueJacked:100,scaleRange:[.95,1.05],scaleDuration:250},10300:{animationJsonPath:"images/trap/enm10.json",animationName:"enm10",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm10-2.json",animationName:"enm10-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:104,bodyHeight:96,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:0,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:75,bulletTimeValueJacked:75,scaleRange:[.95,1.05],scaleDuration:250},10400:{animationJsonPath:"images/trap/enm02.json",animationName:"enm02",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm02-2.json",animationName:"enm02-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:73,bodyHeight:144,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:0,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:100,bulletTimeValueJacked:100,scaleRange:[.95,1.05],scaleDuration:250},10500:{animationJsonPath:"images/trap/enm13.json",animationName:"enm13",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm13-2.json",animationName:"enm13-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:120,bodyHeight:111,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:0,isMoveUpDown:1,upDownCoefficient:20,upDownStep:.01,bulletTimeValueTrampled:100,bulletTimeValueJacked:100},10600:{animationJsonPath:"images/trap/enm14.json",animationName:"enm14",animationSpeed:1,animationPos:[0,0],bulletTimeAnimation:{animationJsonPath:"images/trap/enm14-2.json",animationName:"enm14-2",animationSpeed:1,animationPos:[0,0]},bodyWidth:77,bodyHeight:78,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:1,isAbleToBeJacked:1,forwardVelocity:0,isMoveUpDown:1,upDownCoefficient:7,upDownStep:.07,bulletTimeValueTrampled:30,bulletTimeValueJacked:30,scaleRange:[.95,1.05],scaleDuration:250},12000:{animationJsonPath:"images/trap/trap_cld.json",animationName:"trap_cld",animationSpeed:1,animationPos:[0,0],bodyWidth:189,bodyHeight:96,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:0,isAbleToBeJacked:0,forwardVelocity:0,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:50,bulletTimeValueJacked:50,scaleRange:[.95,1.05],scaleDuration:250},12100:{animationJsonPath:"images/trap/trp_gas.json",animationName:"trp_gas",animationSpeed:.3,animationPos:[0,0],bodyWidth:54,bodyHeight:92,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,isAbleToBeTrampled:0,isAbleToBeJacked:0,forwardVelocity:0,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:50,bulletTimeValueJacked:50},12200:{animationJsonPath:"images/trap/trap_fire.json",animationName:"trap_fire",animationSpeed:.3,animationPos:[0,0],bodyWidth:98,bodyHeight:60,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,appearSoundPath:"myLaya/laya/assets/sounds/SE022.mp3",isAbleToBeTrampled:0,isAbleToBeJacked:0,forwardVelocity:-30,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:50,bulletTimeValueJacked:50},12300:{animationJsonPath:"images/trap/firewall-animation-2.json",animationName:"firewall",animationSpeed:.3,animationPos:[0,0],bodyWidth:32,bodyHeight:403,contactBikeVelocity:55,contactBirdImpulse:125,strikedBirdImpulse:1250,strikedBirdAngularVelocity:50,appearSoundPath:"",isAbleToBeTrampled:0,isAbleToBeJacked:0,forwardVelocity:0,isMoveUpDown:0,upDownCoefficient:0,upDownStep:0,bulletTimeValueTrampled:50,bulletTimeValueJacked:50}}},Cloud:{table:{default:{animationJsonPath:"images/trap/enm01.json",animationName:"enm01",animationSpeed:1,animationPos:[0,0],bodyWidth:87,bodyHeight:96}}},groundStab:{animationSpeed:.1,staticFrame:2},upDownPlatform:{table:{1:{isStartUp:!0,velocity:30,topOffset:100,bottomOffset:100},11:{isStartUp:!0,velocity:0,topOffset:0,bottomOffset:0},430:{isStartUp:!0,velocity:5,topOffset:25,bottomOffset:0},431:{isStartUp:!0,velocity:5,topOffset:20,bottomOffset:5},432:{isStartUp:!0,velocity:5,topOffset:15,bottomOffset:10},433:{isStartUp:!0,velocity:5,topOffset:10,bottomOffset:15},434:{isStartUp:!0,velocity:5,topOffset:5,bottomOffset:20},435:{isStartUp:!1,velocity:5,topOffset:0,bottomOffset:25},436:{isStartUp:!1,velocity:5,topOffset:5,bottomOffset:20},437:{isStartUp:!1,velocity:5,topOffset:10,bottomOffset:15},438:{isStartUp:!1,velocity:5,topOffset:15,bottomOffset:10},439:{isStartUp:!1,velocity:5,topOffset:20,bottomOffset:5},450:{isStartUp:!0,velocity:100,topOffset:25,bottomOffset:0},451:{isStartUp:!0,velocity:100,topOffset:20,bottomOffset:5},452:{isStartUp:!0,velocity:100,topOffset:15,bottomOffset:10},453:{isStartUp:!0,velocity:100,topOffset:10,bottomOffset:15},454:{isStartUp:!0,velocity:100,topOffset:5,bottomOffset:20},455:{isStartUp:!1,velocity:100,topOffset:0,bottomOffset:25},456:{isStartUp:!1,velocity:100,topOffset:5,bottomOffset:20},457:{isStartUp:!1,velocity:100,topOffset:10,bottomOffset:15},458:{isStartUp:!1,velocity:100,topOffset:15,bottomOffset:10},459:{isStartUp:!1,velocity:100,topOffset:20,bottomOffset:5},470:{isStartUp:!1,velocity:100,topOffset:90,bottomOffset:0},471:{isStartUp:!0,velocity:100,topOffset:80,bottomOffset:10},472:{isStartUp:!0,velocity:100,topOffset:70,bottomOffset:20},473:{isStartUp:!0,velocity:100,topOffset:60,bottomOffset:30},474:{isStartUp:!0,velocity:100,topOffset:50,bottomOffset:40},475:{isStartUp:!0,velocity:100,topOffset:40,bottomOffset:50},476:{isStartUp:!0,velocity:100,topOffset:30,bottomOffset:60},477:{isStartUp:!0,velocity:100,topOffset:20,bottomOffset:70},478:{isStartUp:!0,velocity:100,topOffset:10,bottomOffset:80},479:{isStartUp:!0,velocity:100,topOffset:0,bottomOffset:90},910:{isStartUp:!0,velocity:1e3,topOffset:10,bottomOffset:10},1010:{isStartUp:!0,velocity:1e3,topOffset:0,bottomOffset:0},1015:{isStartUp:!0,velocity:1500,topOffset:0,bottomOffset:0},1020:{isStartUp:!0,velocity:2e3,topOffset:0,bottomOffset:0}}},rollingStone:{appearSoundPath:"myLaya/laya/assets/sounds/Sound0316.mp3",strikedImpulse:12500,strikedAngularVelocity:50,table:{1:{angularVelocity:10},10:{angularVelocity:0},20:{angularVelocity:-10}}},fireBall:{appearSoundPath:"myLaya/laya/assets/sounds/Sound0311.mp3",strikedImpulse:12500,strikedAngularVelocity:50,table:{1:{velocity:-300},30:{velocity:-300},103:{velocity:30}}},Spring:{table:{default:{animations:{common:{path:"images/trap/jmp_0.json",name:"jmp_0",speed:1,pos:[0,-30]},ing:{path:"images/trap/jmp_0.json",name:"jmp_0",speed:1,pos:[0,0]},ended:{path:"images/trap/jmp_1.json",name:"jmp_1",speed:1,pos:[0,-50]}},bodyWidth:100,bodyHeight:70,contactBikeVelocity:95,scaleRange:[.95,1.05],scaleDuration:250}}},EatableItem:{table:{0:{portable:0,effect:"GoldCoin",value:1,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:1,rewardProgressValue:1},55555:{portable:0,effect:"GoldCoin",value:5,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:5,rewardProgressValue:1},66666:{portable:0,effect:"GoldCoin",value:10,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:10,rewardProgressValue:1},333:{portable:0,effect:"Star",value:1,attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},444:{portable:0,effect:"Exp",value:5,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:4,rewardProgressValue:1},2000:{portable:0,effect:"Exp",value:1,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:1,rewardProgressValue:1},2001:{portable:0,effect:"Exp",value:1,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:1,rewardProgressValue:1},2002:{portable:0,effect:"Exp",value:1,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:1,rewardProgressValue:1},2010:{portable:0,effect:"Exp",value:2,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:2,rewardProgressValue:1},2011:{portable:0,effect:"Exp",value:2,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:2,rewardProgressValue:1},2012:{portable:0,effect:"Exp",value:2,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:2,rewardProgressValue:1},2020:{portable:0,effect:"Exp",value:30,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:30,rewardProgressValue:1},2030:{portable:0,effect:"Exp",value:40,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:40,rewardProgressValue:1},2031:{portable:0,effect:"Exp",value:40,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:40,rewardProgressValue:1},2040:{portable:0,effect:"Exp",value:50,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:50,rewardProgressValue:1},2050:{portable:0,effect:"Exp",value:50,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:50,rewardProgressValue:1},2060:{portable:0,effect:"Exp",value:60,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:60,rewardProgressValue:1},2070:{portable:0,effect:"Exp",value:300,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:300,rewardProgressValue:1,forwardVelocity:-5,isMoveUpDown:1,upDownCoefficient:.5,upDownStep:.1},2071:{portable:0,effect:"Exp",value:300,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:300,rewardProgressValue:1,forwardVelocity:-5,isMoveUpDown:1,upDownCoefficient:.5,upDownStep:.1},2072:{portable:0,effect:"Exp",value:300,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:300,rewardProgressValue:1,forwardVelocity:-5,isMoveUpDown:1,upDownCoefficient:.5,upDownStep:.1},2080:{portable:0,effect:"Exp",value:500,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:500,rewardProgressValue:1,forwardVelocity:0,isMoveUpDown:1,upDownCoefficient:10,upDownStep:.05},2081:{portable:0,effect:"Exp",value:500,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:500,rewardProgressValue:1,forwardVelocity:0,isMoveUpDown:1,upDownCoefficient:10,upDownStep:.05},2090:{portable:0,effect:"Exp",value:1e3,attractedByMagnet:1,attractedBySprint:1,bulletTimeValue:1e3,rewardProgressValue:1},1:{portable:0,effect:"Decelerate",animationJsonPath:"images/trap/crystal_grider.json",animationName:"crystal_grider",animationSpeed:.1},6:{portable:0,effect:"WeakenJump",animationJsonPath:"images/trap/crystal_frog.json",animationName:"crystal_frog",animationSpeed:.1},21:{portable:0,effect:"BlockSight",animationJsonPath:"images/trap/crystal_ninja.json",animationName:"crystal_ninja",animationSpeed:.1},26:{portable:0,effect:"SpiderWeb",animationJsonPath:"images/trap/cobweb.json",animationName:"cobweb",animationSpeed:.1},31:{portable:0,effect:"Seal",animationJsonPath:"images/trap/crystal_icon2.json",animationName:"crystal_icon2",animationSpeed:.1},36:{portable:0,effect:"Thunder",animationJsonPath:"images/trap/crystal_icon1.json",animationName:"crystal_icon1",animationSpeed:.1},101:{portable:0,effect:"Accelerate",value:1,attractedByMagnet:0,attractedBySprint:1,animationJsonPath:"images/item/crystal_jet.json",animationName:"crystal_jet",animationSpeed:.1,bulletTimeValue:100},106:{portable:0,effect:"PowerJump",attractedByMagnet:0,attractedBySprint:1,animationJsonPath:"images/item/crystal_drill.json",animationName:"crystal_drill",animationSpeed:.1,bulletTimeValue:100},111:{portable:0,effect:"UnlimitedJump",attractedByMagnet:0,attractedBySprint:1,animationJsonPath:"images/item/crystal_wing.json",animationName:"crystal_wing",animationSpeed:.1,bulletTimeValue:100},121:{portable:0,effect:"Magnet",attractedByMagnet:0,attractedBySprint:1,animationJsonPath:"images/item/crystal_dragon.json",animationName:"crystal_dragon",animationSpeed:.1,bulletTimeValue:100},126:{portable:0,effect:"Magnet",attractedByMagnet:0,attractedBySprint:1,animationJsonPath:"images/item/itm_swe07_1.json",animationName:"itm_swe07_1",animationSpeed:.1,bulletTimeValue:50,fixedDuration:1},131:{portable:0,effect:"Invincible",attractedByMagnet:0,attractedBySprint:1,animationJsonPath:"images/item/crystal_invincible.json",animationName:"crystal_invincible",animationSpeed:.1,bulletTimeValue:100},141:{portable:0,effect:"Sprint",attractedByMagnet:0,attractedBySprint:1,animationJsonPath:"images/item/crystal_super.json",animationName:"crystal_super",animationSpeed:.1,bulletTimeValue:100},9999:{portable:0,effect:"Random",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},10:{portable:1,effect:"Decelerate",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},60:{portable:1,effect:"WeakenJump",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},210:{portable:1,effect:"BlockSight",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},260:{portable:1,effect:"SpiderWeb",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},1031:{portable:1,effect:"Seal",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},1036:{portable:1,effect:"Thunder",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},1041:{portable:1,effect:"BananaPeel",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},1010:{portable:1,effect:"Accelerate",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},1060:{portable:1,effect:"PowerJump",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},1110:{portable:1,effect:"UnlimitedJump",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},1210:{portable:1,effect:"Magnet",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},1310:{portable:1,effect:"Invincible",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},1410:{portable:1,effect:"Sprint",attractedByMagnet:0,attractedBySprint:1,bulletTimeValue:100},99990:{portable:1,effect:"Random",attractedByMagnet:0,attractedBySprint:1,animationJsonPath:"images/item/Random.json",animationName:"Random",animationSpeed:.1,bulletTimeValue:100}}}},r.defaultItemImagePath="myLaya/laya/assets/images/crystal_grider_09.png",r.effect={GoldCoin:{isHelpful:1},Star:{isHelpful:1},Exp:{isHelpful:1},Decelerate:{duration:5,rate:-.5,isHelpful:0,targetType:1,imagePath:"myLaya/laya/assets/images/crystal_grider_09.png",bearerBuffEffectPath:"myLaya/laya/assets/prefabs/eff_slow.prefab.json",buffIconImagePath:"myLaya/laya/assets/images/crystal_grider_00.png",useSound:"myLaya/laya/assets/sounds/Buff0010.mp3",sufferSound:"myLaya/laya/assets/sounds/Buff0001.mp3",name:"Select Item1",dsc:"Info-item-1"},WeakenJump:{duration:5,rate:-.5,isHelpful:0,targetType:1,imagePath:"myLaya/laya/assets/images/crystal_frog_09.png",bearerBuffEffectPath:"myLaya/laya/assets/prefabs/eff_sjump.prefab.json",buffIconImagePath:"myLaya/laya/assets/images/crystal_frog_00.png",useSound:"myLaya/laya/assets/sounds/Buff0060.mp3",sufferSound:"myLaya/laya/assets/sounds/Buff0006.mp3",name:"Select Item2",dsc:"Info-item-2"},BlockSight:{duration:5,isHelpful:0,targetType:0,imagePath:"myLaya/laya/assets/images/crystal_ninja_09.png",bearerBuffEffectPath:"myLaya/laya/assets/prefabs/eff_inkfish.prefab.json",buffIconImagePath:"myLaya/laya/assets/images/crystal_ninja_00.png",useSound:"myLaya/laya/assets/sounds/Buff0210.mp3",sufferSound:"myLaya/laya/assets/sounds/Buff0021.mp3",name:"Select Item3",dsc:"Info-item-3"},SpiderWeb:{duration:1/0,isHelpful:0,jumpForce:50,breakTimes:3,targetType:1,imagePath:"myLaya/laya/assets/images/crystal_propeller_09.png",bearerBuffEffectPath:"myLaya/laya/assets/prefabs/SpiderWebBearerBuffEffect.prefab.json",buffIconImagePath:"myLaya/laya/assets/images/crystal_propeller_00.png",useSound:"myLaya/laya/assets/sounds/Buff0260.mp3",sufferSound:"myLaya/laya/assets/sounds/Buff0026.mp3",name:"Select Item4",dsc:"Info-item-4"},Seal:{duration:5,isHelpful:0,targetType:1,imagePath:"myLaya/laya/assets/images/crystal_icon2_09.png",bearerBuffEffectPath:"myLaya/laya/assets/prefabs/eff_closed.prefab.json",buffIconImagePath:"myLaya/laya/assets/images/crystal_icon2_00.png",useSound:"myLaya/laya/assets/sounds/Buff1031.mp3",sufferSound:"myLaya/laya/assets/sounds/Buff0031.mp3",name:"Select Item5",dsc:"Info-item-5"},Thunder:{isHelpful:0,targetType:2,imagePath:"myLaya/laya/assets/images/crystal_icon1_09.png",userUsedEffectPath:"myLaya/laya/assets/prefabs/SpellThunderEffect3.prefab.json",bearerSufferedEffectPath:"myLaya/laya/assets/prefabs/ThunderEffect3.prefab.json",useSound:"myLaya/laya/assets/sounds/Buff1036.mp3",sufferSound:"myLaya/laya/assets/sounds/Buff0036.mp3",name:"Select Item6",dsc:"Info-item-6"},Accelerate:{duration:5,rate:1,isHelpful:1,imagePath:"myLaya/laya/assets/images/crystal_jet_09.png",bearerBuffEffectPath:"myLaya/laya/assets/prefabs/eff_speedup.prefab.json",buffIconImagePath:"myLaya/laya/assets/images/crystal_jet_00.png",name:"Select Item101",dsc:"Info-item-101"},PowerJump:{duration:5,rate:.5,isHelpful:1,imagePath:"myLaya/laya/assets/images/crystal_drill_09.png",bearerBuffEffectPath:"myLaya/laya/assets/prefabs/eff_bjump.prefab.json",buffIconImagePath:"myLaya/laya/assets/images/crystal_drill_00.png",sufferSound:"myLaya/laya/assets/sounds/Buff0106.mp3",name:"Select Item102",dsc:"Info-item-102"},UnlimitedJump:{duration:3,isHelpful:1,imagePath:"myLaya/laya/assets/images/crystal_wing_09.png",bearerBuffEffectPath:"myLaya/laya/assets/prefabs/eff_fly.prefab.json",buffIconImagePath:"myLaya/laya/assets/images/crystal_wing_00.png",sufferSound:"myLaya/laya/assets/sounds/Buff0111.mp3",name:"Select Item103",dsc:"Info-item-103"},Magnet:{duration:3,isHelpful:1,velocity:1500,imagePath:"myLaya/laya/assets/images/crystal_dragon_09.png",bearerBuffEffectPath:"myLaya/laya/assets/prefabs/eff_mag_01.prefab.json",buffIconImagePath:"myLaya/laya/assets/images/crystal_dragon_00.png",sufferSound:"myLaya/laya/assets/sounds/Buff0121.mp3",name:"Select Item104",dsc:"Info-item-104"},BananaPeel:{peelPrefabPath:"myLaya/laya/assets/prefabs/BananaPeel.prefab.json",imagePath:"myLaya/laya/assets/images/crystal_icon3_09.png",bearerSufferedEffectPath:"myLaya/laya/assets/prefabs/BananaPeel2.prefab.json",useSound:"myLaya/laya/assets/sounds/Buff1041.mp3",sufferSound:"myLaya/laya/assets/sounds/Buff0041.mp3",name:"Select Item7",dsc:"Info-item-7"},Invincible:{duration:3,isHelpful:1,scale:3,twinkleInterval:5,twinkleAlpha:1,imagePath:"myLaya/laya/assets/images/crystal_invincible_09.png",buffIconImagePath:"myLaya/laya/assets/images/crystal_invincible_00.png",sufferSound:"myLaya/laya/assets/sounds/Buff0121.mp3",endInvincibleDuration:2,name:"Select Item105",dsc:"Info-item-105"},Sprint:{duration:3,isHelpful:1,velocity:1e3,imagePath:"myLaya/laya/assets/images/crystal_super_09.png",bearerBuffEffectPath:"myLaya/laya/assets/prefabs/eff_rocket.prefab.json",buffIconImagePath:"myLaya/laya/assets/images/crystal_super_00.png",sufferSound:"myLaya/laya/assets/sounds/Buff0121.mp3",endInvincibleDuration:2,name:"Select Item106",dsc:"Info-item-106"},LittleInvincible:{twinkleInterval:5,twinkleAlpha:.5}},r.rankScore=[2e3,1e3,500,10],r.rankMode={costInfo:{coin:[0],resetStartTime:new Date(2e3,1,1,0,0,0,0).getTime(),resetCycle:864e5}},r.diamondDrawCost=50,r.diamondRebornCost=50,r.racetrack={startX:30,startY:80,playerYInterval:5,totalLength:420},r.enemy.contactPlayerAlpha=.2,r.bike.coinPercent=[1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.4,1.45,1.5,1.55,1.6,1.65,1.7,1.75,1.8,1.85,1.9,1.95,2],r.bike.distancePercent=[1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.4,1.45,1.5,1.55,1.6,1.65,1.7,1.75,1.8,1.85,1.9,1.95,2],r.bike.scorePercent=[1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.4,1.45,1.5,1.55,1.6,1.65,1.7,1.75,1.8,1.85,1.9,1.95,2],r.bike.expPercent=[1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.4,1.45,1.5,1.55,1.6,1.65,1.7,1.75,1.8,1.85,1.9,1.95,2],r.enemy.spiderWebBreakIntervalFrame=12,r.itemUseHistory={duration:5,fontSize:25,lineHeight:35,partSpace:5,selfNameColor:"#bfd5ed",enemyNameColor:"#f6b8af",commonTextColor:"white",stroke:"black",strokeThickness:3,iconSale:.25},r.buff={text:{fill:"white",fontSize:80,stroke:"black",strokeThickness:20},textPosition:[0,140],iconInterval:30,containerY:60,iconScale:.25},r.rebornPosOffsetHeight=-100,r.home={floorStartY:180,homeWidth:720,homeHeight:1280,defaultPetsJumpInterval:2,defaultPetsJumpRotation:5,defaultPetsVelocity:1,removeItemButtonImagePath:"myLaya/laya/assets/images/ButtonClose_Gray.png",defaultSceneItemScale:1,defaultIconItemScale:.2,edgeMoveOffset:{x:50,y:50},edgeMoveVelocity:{x:5,y:5},spoilsMaxCount:100,petsMaxCount:20,petsOfTheSameKindMaxCount:1,types:["backgrounds","floors","spoils","pets"],backgrounds:[{id:1,path:"images/home/background/TextureDX2_TaurusBackground-1.png",itemScale:1.41},{id:2,path:"images/home/background/TextureDX2_AriesBackground-1.png",itemScale:1.41,unlockConditions:[[1,2e3],[2,50],[6,3e3],[11,10]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"BackgroundUnlockTitle2",dsc:"BackgroundUnlockDescribe2",image:"images/home/background/TextureDX2_AriesBackground-1.png",imageScale:1.1}},{id:3,path:"images/home/background/TextureDX2_CapricornBackground-1.png",itemScale:1.41,unlockConditions:[[1,2e3],[2,50],[6,6e3],[11,30]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"BackgroundUnlockTitle3",dsc:"BackgroundUnlockDescribe3",image:"images/home/background/TextureDX2_CapricornBackground-1.png",imageScale:1.1}},{id:4,path:"images/home/background/TextureDX2_ScorpiusBackground-1.png",itemScale:1.41,unlockConditions:[[1,2e3],[2,50],[6,18e3],[11,45]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"BackgroundUnlockTitle4",dsc:"BackgroundUnlockDescribe4",image:"images/home/background/TextureDX2_ScorpiusBackground-1.png",imageScale:1.1}},{id:5,path:"images/home/background/TextureDX2_AquariusBackground-1.png",itemScale:1.41,unlockConditions:[[1,2e3],[2,50],[6,3e4],[11,55]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"BackgroundUnlockTitle5",dsc:"BackgroundUnlockDescribe5",image:"images/home/background/TextureDX2_AquariusBackground-1.png",imageScale:1.1}},{id:6,path:"images/home/background/TextureDX2_CancerBackground-1.png",itemScale:1.41,unlockConditions:[[1,2e3],[2,50],[6,42e3],[11,62]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"BackgroundUnlockTitle6",dsc:"BackgroundUnlockDescribe6",image:"images/home/background/TextureDX2_CancerBackground-1.png",imageScale:1.1}},{id:7,path:"images/home/background/TextureDX2_GeminiBackground-1.png",itemScale:1.41,unlockConditions:[[1,2e3],[2,50],[6,54e3],[11,66]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"BackgroundUnlockTitle7",dsc:"BackgroundUnlockDescribe7",image:"images/home/background/TextureDX2_GeminiBackground-1.png",imageScale:1.1}},{id:8,path:"images/home/background/TextureDX2_LeoBackground-1.png",itemScale:1.41,unlockConditions:[[1,2e3],[2,50],[6,66e3],[11,70]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"BackgroundUnlockTitle8",dsc:"BackgroundUnlockDescribe8",image:"images/home/background/TextureDX2_LeoBackground-1.png",imageScale:1.1}},{id:9,path:"images/home/background/TextureDX2_LibraBackground-1.png",itemScale:1.41,unlockConditions:[[1,2e3],[2,50],[6,78e3],[11,74]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"BackgroundUnlockTitle9",dsc:"BackgroundUnlockDescribe9",image:"images/home/background/TextureDX2_LibraBackground-1.png",imageScale:1.1}},{id:10,path:"images/home/background/TextureDX2_PiscesBackground-1.png",itemScale:1.41,unlockConditions:[[1,5e3],[2,100],[7,5],[11,60]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:.05,expPercent:.05},unlockInfo:{title:"BackgroundUnlockTitle10",dsc:"BackgroundUnlockDescribe10",image:"images/home/background/TextureDX2_PiscesBackground-1.png",imageScale:1.1}},{id:11,path:"images/home/background/TextureDX2_SagittariusBackground-1.png",itemScale:1.41,unlockConditions:[[1,5e3],[2,100],[8,5],[11,60]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:.05,expPercent:.05},unlockInfo:{title:"BackgroundUnlockTitle11",dsc:"BackgroundUnlockDescribe11",image:"images/home/background/TextureDX2_SagittariusBackground-1.png",imageScale:1.1}},{id:12,path:"images/home/background/TextureDX2_VirgoBackground-1.png",itemScale:1.41,unlockConditions:[[1,5e3],[2,100],[9,5],[11,60]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:.05,expPercent:.05},unlockInfo:{title:"BackgroundUnlockTitle12",dsc:"BackgroundUnlockDescribe12",image:"images/home/background/TextureDX2_VirgoBackground-1.png",imageScale:1.1}}],floors:[{id:1,path:"images/home/floor/floor001.png",itemScale:1},{id:2,path:"images/home/floor/floor002.png",itemScale:1,unlockConditions:[[1,2e3],[2,50],[4,72e3],[11,15]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"FloorUnlockTitle2",dsc:"FloorUnlockDescribe2",image:"images/home/floor/floor002.png",imageScale:.27}},{id:3,path:"images/home/floor/floor003.png",itemScale:1,unlockConditions:[[1,2e3],[2,50],[4,432e3],[11,40]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"FloorUnlockTitle3",dsc:"FloorUnlockDescribe3",image:"images/home/floor/floor003.png",imageScale:.27}},{id:4,path:"images/home/floor/floor004.png",itemScale:1,unlockConditions:[[1,2e3],[4,864e3],[11,50]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"FloorUnlockTitle4",dsc:"FloorUnlockDescribe4",image:"images/home/floor/floor004.png",imageScale:.27}},{id:5,path:"images/home/floor/floor005.png",itemScale:1,unlockConditions:[[1,2e3],[2,50],[4,1296e3],[11,60]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"FloorUnlockTitle5",dsc:"FloorUnlockDescribe5",image:"images/home/floor/floor005.png",imageScale:.27}},{id:6,path:"images/home/floor/floor006.png",itemScale:1,unlockConditions:[[1,2e3],[2,50],[4,1728e3],[11,65]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"FloorUnlockTitle6",dsc:"FloorUnlockDescribe6",image:"images/home/floor/floor006.png",imageScale:.27}},{id:7,path:"images/home/floor/floor007.png",itemScale:1,unlockConditions:[[1,2e3],[2,50],[4,216e4],[11,69]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"FloorUnlockTitle7",dsc:"FloorUnlockDescribe7",image:"images/home/floor/floor007.png",imageScale:.27}}],spoils:[{id:102,path:"images/home/item/decoDX2_Taurus-102.png",itemScale:.4,iconScale:.3,unlockConditions:[[1,1e3],[2,25],[12,2,5]],unlockRewards:{coinPercent:.05,distancePercent:0,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle1",dsc:"SpoilUnlockDescribe1",image:"images/home/item/decoDX2_Taurus-102.png",imageScale:1}},{id:101,path:"images/home/item/decoDX2_Taurus-101.png",itemScale:.5,iconScale:.4,unlockConditions:[[1,1e3],[2,25],[12,3,5]],unlockRewards:{coinPercent:0,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle2",dsc:"SpoilUnlockDescribe2",image:"images/home/item/decoDX2_Taurus-101.png",imageScale:1}},{id:111,path:"images/home/item/decoDX2_Virgo-101.png",itemScale:.5,iconScale:.4,unlockConditions:[[1,1e3],[2,25],[12,4,5]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle3",dsc:"SpoilUnlockDescribe3",image:"images/home/item/decoDX2_Virgo-101.png",imageScale:1}},{id:22,path:"images/home/item/decoDX1_Beijing-8.png",itemScale:1,iconScale:.7,unlockConditions:[[1,1e3],[2,25],[12,5,5]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:0,expPercent:.05},unlockInfo:{title:"SpoilUnlockTitle4",dsc:"SpoilUnlockDescribe4",image:"images/home/item/decoDX1_Beijing-8.png",imageScale:2}},{id:1,path:"images/home/item/decoDX2_Aquarius-101.png",itemScale:.5,iconScale:.4,unlockConditions:[[1,1e3],[2,25],[13,30]],unlockRewards:{coinPercent:.05,distancePercent:0,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle5",dsc:"SpoilUnlockDescribe5",image:"images/home/item/decoDX2_Aquarius-101.png",imageScale:1}},{id:73,path:"images/home/item/decoDX2_Pisces-101.png",itemScale:.5,iconScale:.4,unlockConditions:[[1,1e3],[2,25],[13,45]],unlockRewards:{coinPercent:0,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle6",dsc:"SpoilUnlockDescribe6",image:"images/home/item/decoDX2_Pisces-101.png",imageScale:1}},{id:21,path:"images/home/item/decoDX1_Beijing-6.png",itemScale:.7,iconScale:.6,unlockConditions:[[1,1e3],[2,25],[13,60]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle7",dsc:"SpoilUnlockDescribe7",image:"images/home/item/decoDX1_Beijing-6.png",imageScale:1.6}},{id:61,path:"images/home/item/decoDX1_Beijing-7.png",itemScale:.8,iconScale:.7,unlockConditions:[[1,1e3],[2,25],[13,75]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:0,expPercent:.05},unlockInfo:{title:"SpoilUnlockTitle8",dsc:"SpoilUnlockDescribe8",image:"images/home/item/decoDX1_Beijing-7.png",imageScale:2}},{id:41,path:"images/home/item/decoDX2_Gemini-101.png",itemScale:.4,iconScale:.3,unlockConditions:[[1,1e3],[2,25],[11,32]],unlockRewards:{coinPercent:.05,distancePercent:0,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle9",dsc:"SpoilUnlockDescribe9",image:"images/home/item/decoDX2_Gemini-101.png",imageScale:1}},{id:42,path:"images/home/item/decoDX2_Gemini-102.png",itemScale:.4,iconScale:.3,unlockConditions:[[1,1e3],[2,25],[11,34]],unlockRewards:{coinPercent:0,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle10",dsc:"SpoilUnlockDescribe10",image:"images/home/item/decoDX2_Gemini-102.png",imageScale:1}},{id:91,path:"images/home/item/decoDX2_Scorpius-2.png",itemScale:.4,iconScale:.3,unlockConditions:[[1,1e3],[2,25],[11,36]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle11",dsc:"SpoilUnlockDescribe11",image:"images/home/item/decoDX2_Scorpius-2.png",imageScale:1}},{id:92,path:"images/home/item/decoDX2_Scorpius-3.png",itemScale:.4,iconScale:.3,unlockConditions:[[1,1e3],[2,25],[11,38]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:0,expPercent:.05},unlockInfo:{title:"SpoilUnlockTitle12",dsc:"SpoilUnlockDescribe12",image:"images/home/item/decoDX2_Scorpius-3.png",imageScale:1}},{id:54,path:"images/home/item/decoDX2_Leo-104.png",itemScale:.5,iconScale:.3,unlockConditions:[[1,1e3],[2,25],[5,3e3],[11,42]],unlockRewards:{coinPercent:.05,distancePercent:0,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle13",dsc:"SpoilUnlockDescribe13",image:"images/home/item/decoDX2_Leo-104.png",imageScale:1}},{id:53,path:"images/home/item/decoDX2_Leo-103.png",itemScale:.5,iconScale:.4,unlockConditions:[[1,1e3],[2,25],[5,3600],[11,46]],unlockRewards:{coinPercent:0,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle14",dsc:"SpoilUnlockDescribe14",image:"images/home/item/decoDX2_Leo-103.png",imageScale:1}},{id:62,path:"images/home/item/decoDX2_Libra-102.png",itemScale:.5,iconScale:.4,unlockConditions:[[1,1e3],[2,25],[5,4200],[11,52]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle15",dsc:"SpoilUnlockDescribe15",image:"images/home/item/decoDX2_Libra-102.png",imageScale:1}},{id:141,path:"images/home/item/decoDX1_Newyork-6.png",itemScale:.9,iconScale:.7,unlockConditions:[[1,1e3],[2,25],[5,4800],[11,57]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:0,expPercent:.05},unlockInfo:{title:"SpoilUnlockTitle16",dsc:"SpoilUnlockDescribe16",image:"images/home/item/decoDX1_Newyork-6.png",imageScale:2}},{id:32,path:"images/home/item/decoDX2_Capricorn-101.png",itemScale:.5,iconScale:.4,unlockConditions:[[1,1e3],[2,25],[4,712800],[11,59]],unlockRewards:{coinPercent:.05,distancePercent:0,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle17",dsc:"SpoilUnlockDescribe17",image:"images/home/item/decoDX2_Capricorn-101.png",imageScale:1}},{id:52,path:"images/home/item/decoDX2_Leo-101.png",itemScale:.5,iconScale:.4,unlockConditions:[[1,1e3],[2,25],[4,950400],[11,64]],unlockRewards:{coinPercent:0,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle18",dsc:"SpoilUnlockDescribe18",image:"images/home/item/decoDX2_Leo-101.png",imageScale:1}},{id:51,path:"images/home/item/decoDX2_Leo-3.png",itemScale:.5,iconScale:.4,unlockConditions:[[1,1e3],[2,25],[4,1188e3],[11,68]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle19",dsc:"SpoilUnlockDescribe19",image:"images/home/item/decoDX2_Leo-3.png",imageScale:1}},{id:142,path:"images/home/item/decoDX1_Newyork-4.png",itemScale:.8,iconScale:.7,unlockConditions:[[1,1e3],[2,25],[4,1425600],[11,72]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:0,expPercent:.05},unlockInfo:{title:"SpoilUnlockTitle20",dsc:"SpoilUnlockDescribe20",image:"images/home/item/decoDX1_Newyork-4.png",imageScale:1.8}},{id:31,path:"images/home/item/decoDX2_Capricorn-1.png",itemScale:.5,iconScale:.4,unlockConditions:[[1,1e3],[2,25],[6,21e3],[11,61]],unlockRewards:{coinPercent:.05,distancePercent:0,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle21",dsc:"SpoilUnlockDescribe21",image:"images/home/item/decoDX2_Capricorn-1.png",imageScale:1}},{id:71,path:"images/home/item/decoDX2_Pisces-1.png",itemScale:.5,iconScale:.3,unlockConditions:[[1,1e3],[2,25],[6,27e3],[11,66]],unlockRewards:{coinPercent:0,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle22",dsc:"SpoilUnlockDescribe22",image:"images/home/item/decoDX2_Pisces-1.png",imageScale:1}},{id:55,path:"images/home/item/decoDX2_Leo-105.png",itemScale:.5,iconScale:.3,unlockConditions:[[1,1e3],[2,25],[6,33e3],[11,70]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:0},unlockInfo:{title:"SpoilUnlockTitle23",dsc:"SpoilUnlockDescribe23",image:"images/home/item/decoDX2_Leo-105.png",imageScale:1}},{id:72,path:"images/home/item/decoDX2_Pisces-2.png",itemScale:.5,iconScale:.4,unlockConditions:[[1,1e3],[2,25],[6,39e3],[11,74]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:0,expPercent:.05},unlockInfo:{title:"SpoilUnlockTitle24",dsc:"SpoilUnlockDescribe24",image:"images/home/item/decoDX2_Pisces-2.png",imageScale:1}},{id:33,path:"images/home/item/decoDX2_Capricorn-102.png",itemScale:.4,iconScale:.2,unlockConditions:[[1,5e3],[2,100],[5,6e3],[11,40]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:.05,expPercent:.05},unlockInfo:{title:"SpoilUnlockTitle25",dsc:"SpoilUnlockDescribe25",image:"images/home/item/decoDX2_Capricorn-102.png",imageScale:.7}},{id:82,path:"images/home/item/decoDX2_Sagittarius-101.png",itemScale:.55,iconScale:.22,unlockConditions:[[1,5e3],[2,100],[7,20],[11,40]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:.05,expPercent:.05},unlockInfo:{title:"SpoilUnlockTitle26",dsc:"SpoilUnlockDescribe26",image:"images/home/item/decoDX2_Sagittarius-101.png",imageScale:.9}},{id:74,path:"images/home/item/decoDX2_Pisces-102.png",itemScale:.5,iconScale:.18,unlockConditions:[[1,5e3],[2,100],[8,20],[11,40]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:.05,expPercent:.05},unlockInfo:{title:"SpoilUnlockTitle27",dsc:"SpoilUnlockDescribe27",image:"images/home/item/decoDX2_Pisces-102.png",imageScale:.8}},{id:81,path:"images/home/item/decoDX2_Sagittarius-1.png",itemScale:.4,iconScale:.2,unlockConditions:[[1,5e3],[2,100],[9,20],[11,40]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:.05,expPercent:.05},unlockInfo:{title:"SpoilUnlockTitle28",dsc:"SpoilUnlockDescribe28",image:"images/home/item/decoDX2_Sagittarius-1.png",imageScale:.7}}],pets:[{id:101,path:"images/home/item/decoDX2_Taurus-1.png",itemScale:.4,iconScale:.3,petsJumpInterval:.8,petsJumpRotation:10,petsVelocity:2,unlockConditions:[[1,2e3],[2,50],[10,3]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"PetUnlockTitle1",dsc:"PetUnlockDescribe1",image:"images/home/item/decoDX2_Taurus-1.png",imageScale:1}},{id:41,path:"images/home/item/decoDX2_Gemini-1.png",itemScale:.6,iconScale:.4,petsJumpInterval:1.4,petsJumpRotation:10,petsVelocity:1,unlockConditions:[[1,2e3],[2,50],[10,6]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"PetUnlockTitle2",dsc:"PetUnlockDescribe2",image:"images/home/item/decoDX2_Gemini-1.png",imageScale:1.2}},{id:11,path:"images/home/item/decoDX2_Aries-1.png",itemScale:.5,iconScale:.4,petsJumpInterval:1.2,petsJumpRotation:10,petsVelocity:.5,unlockConditions:[[1,2e3],[2,50],[10,12]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"PetUnlockTitle3",dsc:"PetUnlockDescribe3",image:"images/home/item/decoDX2_Aries-1.png",imageScale:1}},{id:42,path:"images/home/item/decoDX2_Gemini-2.png",itemScale:.4,iconScale:.3,petsJumpInterval:1.5,petsJumpRotation:10,petsVelocity:1,unlockConditions:[[1,2e3],[2,50],[10,18]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"PetUnlockTitle4",dsc:"PetUnlockDescribe4",image:"images/home/item/decoDX2_Gemini-2.png",imageScale:1}},{id:21,path:"images/home/item/decoDX2_Cancer-1.png",itemScale:.4,iconScale:.3,petsJumpInterval:1.3,petsJumpRotation:10,petsVelocity:1,unlockConditions:[[1,2e3],[2,50],[6,19200],[11,51]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"PetUnlockTitle5",dsc:"PetUnlockDescribe5",image:"images/home/item/decoDX2_Cancer-1.png",imageScale:1}},{id:51,path:"images/home/item/decoDX2_Leo-4.png",itemScale:.4,iconScale:.3,petsJumpInterval:1.05,petsJumpRotation:10,petsVelocity:1,unlockConditions:[[1,2e3],[2,50],[6,28800],[11,60]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"PetUnlockTitle6",dsc:"PetUnlockDescribe6",image:"images/home/item/decoDX2_Leo-4.png",imageScale:1}},{id:52,path:"images/home/item/decoDX2_Leo-5.png",itemScale:.4,iconScale:.3,petsJumpInterval:1.15,petsJumpRotation:10,petsVelocity:1,unlockConditions:[[1,2e3],[2,50],[6,38400],[11,65]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"PetUnlockTitle7",dsc:"PetUnlockDescribe7",image:"images/home/item/decoDX2_Leo-5.png",imageScale:1}},{id:53,path:"images/home/item/decoDX2_Leo-6.png",itemScale:.4,iconScale:.3,petsJumpInterval:1.25,petsJumpRotation:10,petsVelocity:1,unlockConditions:[[1,2e3],[2,50],[6,52800],[11,71]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"PetUnlockTitle8",dsc:"PetUnlockDescribe8",image:"images/home/item/decoDX2_Leo-6.png",imageScale:1}},{id:2,path:"images/home/item/decoDX2_Aquarius-3.png",itemScale:.5,iconScale:.4,petsJumpInterval:1.1,petsJumpRotation:10,petsVelocity:1,unlockConditions:[[1,2e3],[2,50],[4,918e3],[11,56]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"PetUnlockTitle9",dsc:"PetUnlockDescribe9",image:"images/home/item/decoDX2_Aquarius-3.png",imageScale:1}},{id:1,path:"images/home/item/decoDX2_Aquarius-1.png",itemScale:.5,iconScale:.4,petsJumpInterval:1,petsJumpRotation:10,petsVelocity:1,unlockConditions:[[1,2e3],[2,50],[4,1285200],[11,63]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"PetUnlockTitle10",dsc:"PetUnlockDescribe10",image:"images/home/item/decoDX2_Aquarius-1.png",imageScale:1}},{id:121,path:"images/home/item/decoDX1_Newyork-2.png",itemScale:1,iconScale:.8,petsJumpInterval:1.35,petsJumpRotation:10,petsVelocity:1.5,unlockConditions:[[1,2e3],[2,50],[4,1652400],[11,67]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:0,expPercent:0},unlockInfo:{title:"PetUnlockTitle11",dsc:"PetUnlockDescribe11",image:"images/home/item/decoDX1_Newyork-2.png",imageScale:2}},{id:91,path:"images/home/item/decoDX2_Scorpius-1.png",itemScale:.5,iconScale:.4,petsJumpInterval:1.35,petsJumpRotation:10,petsVelocity:1.5,unlockConditions:[[1,2e3],[2,50],[4,2386800],[11,73]],unlockRewards:{coinPercent:0,distancePercent:0,scorePercent:.05,expPercent:.05},unlockInfo:{title:"PetUnlockTitle12",dsc:"PetUnlockDescribe12",image:"images/home/item/decoDX2_Scorpius-1.png",imageScale:1}},{id:102,path:"images/home/item/decoDX2_Taurus-3.png",itemScale:.6,iconScale:.4,petsJumpInterval:1,petsJumpRotation:10,petsVelocity:2,unlockConditions:[[1,5e3],[2,100],[5,9e3],[11,50]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:.05,expPercent:.05},unlockInfo:{title:"PetUnlockTitle13",dsc:"PetUnlockDescribe13",image:"images/home/item/decoDX2_Taurus-3.png",imageScale:1}},{id:61,path:"images/home/item/decoDX2_Libra-1.png",itemScale:.7,iconScale:.4,petsJumpInterval:2,petsJumpRotation:5,petsVelocity:.5,unlockConditions:[[1,5e3],[2,100],[7,10],[11,50]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:.05,expPercent:.05},unlockInfo:{title:"PetUnlockTitle14",dsc:"PetUnlockDescribe14",image:"images/home/item/decoDX2_Libra-1.png",imageScale:1}},{id:122,path:"images/home/item/decoDX1_Newyork-1.png",itemScale:1.2,iconScale:.8,petsJumpInterval:1.35,petsJumpRotation:10,petsVelocity:1.5,unlockConditions:[[1,5e3],[2,100],[8,10],[11,50]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:.05,expPercent:.05},unlockInfo:{title:"PetUnlockTitle15",dsc:"PetUnlockDescribe15",image:"images/home/item/decoDX1_Newyork-1.png",imageScale:2}},{id:131,path:"images/home/item/decoDX1_Beijing-1.png",itemScale:1.2,iconScale:.8,petsJumpInterval:1.35,petsJumpRotation:10,petsVelocity:1.5,unlockConditions:[[1,5e3],[2,100],[9,10],[11,50]],unlockRewards:{coinPercent:.05,distancePercent:.05,scorePercent:.05,expPercent:.05},unlockInfo:{title:"PetUnlockTitle16",dsc:"PetUnlockDescribe16",image:"images/home/item/decoDX1_Beijing-1.png",imageScale:2}}]},r.conditions={1:"${0} Gold Coins",2:"${0} Diamonds",3:"Need to unlock Map: ${0}",4:"Total distance required to reach ${0}m",5:"Total farthest distance required to reach ${0}m",6:"Score required to reach ${0}",7:"Need to rank ${0}st in total distance",8:"Need to rank ${0}st in farthest distance",9:"Need to rank ${0}st in score",10:"Need to takes ${0} times map game",11:"Need to reach level ${0}",12:"Need to get through level ${0}-${1}",13:"Need to get ${0} game level stars"},r.conditionsEnum={costCoin:1,costDiamond:2,unlockMap:3,distance:4,distanceRecord:5,score:6,totalDistanceRank:7,farthestDistanceRank:8,scoreRank:9,mapGameTimes:10,level:11,gameLevel:12,gameLevelStar:13},window.ipConfig&&window.ipConfig.innerHTML.length?r.serverUrl=window.ipConfig.innerText:r.serverUrl="//localhost:10001",r.rankStartTime=new Date(2019,6,1,0,0,0),r.rankRefreshInterval=604800,r.bike.rankText={positionX:50,positionY:-50},r.bike.enemyNameText={style:{fill:"white",fontSize:20},positionY:-120},r.bike.enemyHeadImage={positionY:-150,width:30,height:30},r.defaultEnemyHeadImagePath="myLaya/laya/assets/images/UserIconDefault.png",r.soundPath={firstJump:"myLaya/laya/assets/sounds/SoundSE101.mp3",secondJump:"myLaya/laya/assets/sounds/SoundSE102.mp3",extraJump:"myLaya/laya/assets/sounds/SoundSE103.mp3",eatGoldCoin:"myLaya/laya/assets/sounds/329.mp3",eatStar:"myLaya/laya/assets/sounds/SE009.mp3",eatExp:"myLaya/laya/assets/sounds/333.mp3",eatAccGem:"myLaya/laya/assets/sounds/SE202.mp3",die:"myLaya/laya/assets/sounds/SE104.mp3",throughFlag:"myLaya/laya/assets/sounds/SoundBGM202.mp3",eatRandomItem:"myLaya/laya/assets/sounds/Buff9999.mp3",bubbleFloat:"myLaya/laya/assets/sounds/Sound0017.mp3",bubbleDestroy:"myLaya/laya/assets/sounds/Sound0329.mp3",countdown:"myLaya/laya/assets/sounds/SoundSE006.mp3",startLevel:"myLaya/laya/assets/sounds/SoundSE007.mp3",guideCountDown:"myLaya/laya/assets/sounds/SoundSE006.mp3",guideStartGo:"myLaya/laya/assets/sounds/SoundSE007.mp3",jack:"myLaya/laya/assets/sounds/shinchan_057.mp3",trample:"myLaya/laya/assets/sounds/shinchan_058.mp3",spring:"myLaya/laya/assets/sounds/SE011.mp3",strike:"myLaya/laya/assets/sounds/shinchan_056.mp3",warning:"myLaya/laya/assets/sounds/SE021.mp3"},r.guideAction={delayFrame:30,startScale:10},r.preparationRandomEffectList={endless:["PowerJump","PowerJump","UnlimitedJump","UnlimitedJump","Magnet","Magnet","Invincible","Invincible","Sprint"],map:["Decelerate","WeakenJump","BlockSight","SpiderWeb","Seal","Thunder","BananaPeel","Accelerate","PowerJump","UnlimitedJump","Invincible","Sprint"],gameLevel:["Accelerate","Accelerate","Accelerate","PowerJump","PowerJump","PowerJump","UnlimitedJump","UnlimitedJump","UnlimitedJump","Magnet","Magnet","Magnet","Invincible","Invincible","Invincible","Sprint"]},r.preparationRandomBikeList={endless:[21,22,23,7,42,43,51,53,54,21,22,23,7,42,43,51,53,54,19,10,12,9,24,18,14,16,17,3,52,25,34,35,36],map:[21,22,23,7,42,43,51,53,54,21,22,23,7,42,43,51,53,54,19,10,12,9,24,18,14,16,17,3,52,25,34,35,36],gameLevel:[21,22,23,7,42,43,51,53,54,21,22,23,7,42,43,51,53,54,19,10,12,9,24,18,14,16,17,3,52,25,34,35,36]},r.giftList=[{onlineMinutes:0,rewardCoin:2e3,rewardDiamond:50},{onlineMinutes:5,rewardCoin:2500,rewardDiamond:60},{onlineMinutes:10,rewardCoin:3e3,rewardDiamond:70},{onlineMinutes:15,rewardCoin:3500,rewardDiamond:80},{onlineMinutes:30,rewardCoin:4e3,rewardDiamond:90}],r.resetRewardHour=0,r.signRewardList=[{diamond:200},{bike:2},{coin:1e4},{diamond:300},{bike:20},{coin:15e3},{bike:7,coin:2e4,diamond:400}],r.advertDrawBikeTime=3,r.minLoadingTime=3,r.tipCount=9,r.animationSpeed={speedUpNotice:.2,randomItem:.1},r.lockSystems={drawButton:{condition:[12,1,2],title:"SystemUnlockTitle1",dsc:"SystemUnlockDescribe1",image:"myLaya/laya/assets/images/english/NewContent-21.png",imageScale:1},signButton:{condition:[12,2,1],title:"SystemUnlockTitle11",dsc:"SystemUnlockDescribe11",image:"myLaya/laya/assets/images/english/NewContent-25.png",imageScale:1},giftButton:{condition:[12,2,3],title:"SystemUnlockTitle12",dsc:"SystemUnlockDescribe12",image:"myLaya/laya/assets/images/english/NewContent-24.png",imageScale:1},shopButton:{condition:[12,2,5],title:"SystemUnlockTitle13",dsc:"SystemUnlockDescribe13",image:"myLaya/laya/assets/images/english/NewContent-23.png",imageScale:1},mapModeButton:{condition:[12,2,2],title:"SystemUnlockTitle2",dsc:"SystemUnlockDescribe2",image:"myLaya/laya/assets/images/english/NewContent-1.png",imageScale:1},rankButton:{condition:[12,3,1],title:"SystemUnlockTitle3",dsc:"SystemUnlockDescribe3",image:"myLaya/laya/assets/images/english/NewContent-22.png",imageScale:1},homeButton:{condition:[10,9999],title:"SystemUnlockTitle4",dsc:"SystemUnlockDescribe4",image:"myLaya/laya/assets/images/ButtonSocial_Blue.png",imageScale:1},preparationScene:{condition:[11,1]},bikeButton:{condition:[12,1,3],title:"SystemUnlockTitle6",dsc:"SystemUnlockDescribe6",image:"myLaya/laya/assets/images/english/NewContent-11.png",imageScale:1},endlessModeButton:{condition:[12,1,4],title:"SystemUnlockTitle5",dsc:"SystemUnlockDescribe5",image:"myLaya/laya/assets/images/english/NewContent-2.png",imageScale:1},upgradePanelButton:{condition:[12,2,4],title:"SystemUnlockTitle7",dsc:"SystemUnlockDescribe7",image:"myLaya/laya/assets/images/english/NewContent-16.png",imageScale:1}},r.gameLevelMode={rebornTimes:1,mapList:[{starCountUnlockNeeded:0,dsc:"Select Map1",mainCover:"images/map/stg40/l_stg40Map.png",texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"]},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{Accelerate:3,PowerJump:3,UnlimitedJump:3,Magnet:3,Invincible:3,Sprint:1},levelList:["myLaya/laya/pages/Map/Map-1-1.scene.json","myLaya/laya/pages/Map/Map-1-2.scene.json","myLaya/laya/pages/Map/Map-1-3.scene.json","myLaya/laya/pages/Map/Map-1-4.scene.json","myLaya/laya/pages/Map/Map-1-5.scene.json"],rewardList:[{coin:1e3,diamond:20},{coin:1e3,diamond:20},{bike:1,diamond:20},{coin:1e3,diamond:20},{bike:4,diamond:20}]},{starCountUnlockNeeded:8,dsc:"Select Map2",mainCover:"images/map/stg20/l_stg20Map.png",texture:{side:"images/map/stg20/l_stg20Road01SideSkin.png",top:"images/map/stg20/l_stg20Road01TopSkin.png",side2:"images/map/stg20/l_stg20Road02SideSkin.png",top2:"images/map/stg20/l_stg20Road02TopSkin.png",bg:["images/map/stg20/l_stg20_01.png","images/map/stg20/l_stg20_02.png"]},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{Accelerate:3,PowerJump:3,UnlimitedJump:3,Magnet:3,Invincible:3,Sprint:1},levelList:["myLaya/laya/pages/Map/Map-2-1.scene.json","myLaya/laya/pages/Map/Map-2-2.scene.json","myLaya/laya/pages/Map/Map-2-3.scene.json","myLaya/laya/pages/Map/Map-2-4.scene.json","myLaya/laya/pages/Map/Map-2-5.scene.json"],rewardList:[{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{bike:13,diamond:20}]},{starCountUnlockNeeded:25,dsc:"Select Map3",mainCover:"images/map/stg06/l_stg06Map.png",texture:{side:"images/map/stg06/l_stg06Road01SideSkin.png",top:"images/map/stg06/l_stg06Road01TopSkin.png",side2:"images/map/stg06/l_stg06Road02SideSkin.png",top2:"images/map/stg06/l_stg06Road02TopSkin.png",bg:["images/map/stg06/l_stg06_01.png","images/map/stg06/l_stg06_02.png"]},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{Accelerate:3,PowerJump:3,UnlimitedJump:3,Magnet:3,Invincible:3,Sprint:1},levelList:["myLaya/laya/pages/Map/Map-3-1.scene.json","myLaya/laya/pages/Map/Map-3-2.scene.json","myLaya/laya/pages/Map/Map-3-3.scene.json","myLaya/laya/pages/Map/Map-3-4.scene.json","myLaya/laya/pages/Map/Map-3-5.scene.json"],rewardList:[{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{bike:15,diamond:20}]},{starCountUnlockNeeded:999,dsc:"Select Map4",mainCover:"images/map/stg04/l_stg04Map.png",texture:{side:"images/map/stg04/l_stg04Road01SideSkin.png",top:"images/map/stg04/l_stg04Road01TopSkin.png",side2:"images/map/stg04/l_stg04Road02SideSkin.png",top2:"images/map/stg04/l_stg04Road02TopSkin.png",bg:["images/map/stg04/l_stg04_01.png","images/map/stg04/l_stg04_02.png"]},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{Accelerate:3,PowerJump:3,UnlimitedJump:3,Magnet:3,Invincible:3,Sprint:1},levelList:["myLaya/laya/pages/Map/Map-4-1.scene.json","myLaya/laya/pages/Map/Map-4-2.scene.json","myLaya/laya/pages/Map/Map-4-3.scene.json","myLaya/laya/pages/Map/Map-4-4.scene.json","myLaya/laya/pages/Map/Map-4-5.scene.json"],rewardList:[{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{bike:5,diamond:20}]},{starCountUnlockNeeded:999,dsc:"Select Map5",mainCover:"images/map/stg02/l_stg02Map.png",texture:{side:"images/map/stg02/l_stg02Road01SideSkin.png",top:"images/map/stg02/l_stg02Road01TopSkin.png",side2:"images/map/stg02/l_stg02Road02SideSkin.png",top2:"images/map/stg02/l_stg02Road02TopSkin.png",bg:["images/map/stg02/l_stg02_01.png","images/map/stg02/l_stg02_02.png"]},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM002.mp3",itemRandomTableList:{Accelerate:3,PowerJump:3,UnlimitedJump:3,Magnet:3,Invincible:3,Sprint:1},levelList:["myLaya/laya/pages/Map/Map-5-1.scene.json","myLaya/laya/pages/Map/Map-5-2.scene.json","myLaya/laya/pages/Map/Map-5-3.scene.json","myLaya/laya/pages/Map/Map-5-4.scene.json","myLaya/laya/pages/Map/Map-5-5.scene.json"],rewardList:[{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{bike:6,diamond:20}]}]},r.firstDrawBikeID=11,r.drawWeightList=[{type:"bike",id:0,weight:8834},{type:"bike",id:1,weight:8834},{type:"bike",id:4,weight:8833},{type:"bike",id:11,weight:8833},{type:"bike",id:13,weight:8833},{type:"bike",id:15,weight:8833},{type:"bike",id:2,weight:5e3},{type:"bike",id:5,weight:5e3},{type:"bike",id:6,weight:5e3},{type:"bike",id:20,weight:5e3},{type:"bike",id:8,weight:5e3},{type:"bike",id:41,weight:5e3},{type:"bike",id:21,weight:500},{type:"bike",id:22,weight:500},{type:"bike",id:23,weight:500},{type:"bike",id:7,weight:4e3},{type:"bike",id:42,weight:4e3},{type:"bike",id:43,weight:4e3},{type:"bike",id:51,weight:500},{type:"bike",id:53,weight:500},{type:"bike",id:54,weight:500},{type:"bike",id:19,weight:32},{type:"bike",id:10,weight:6},{type:"bike",id:12,weight:2},{type:"bike",id:9,weight:128},{type:"bike",id:24,weight:26},{type:"bike",id:18,weight:6},{type:"bike",id:14,weight:1280},{type:"bike",id:16,weight:256},{type:"bike",id:17,weight:64},{type:"bike",id:3,weight:128},{type:"bike",id:52,weight:26},{type:"bike",id:25,weight:6},{type:"bike",id:34,weight:32},{type:"bike",id:35,weight:6},{type:"bike",id:36,weight:2},{type:"coin",number:5e3,weight:2e4},{type:"diamond",number:75,weight:5e3}],r.playerLevelNeededExp=[0,2e3,4050,6150,8300,10500,12750,15050,17400,19800,22250,24750,27300,29900,32550,35250,38e3,40800,43650,46550,49500,52500,55550,58650,61800,65e3,68250,71550,74900,78300,81800,85400,89100,92900,96800,100800,104900,109100,113400,117800,122300,126900,131600,136400,141300,146300,151400,156600,161900,167300,172900,178700,184700,190900,197300,203900,210700,217700,224900,232300,240100,248300,256900,265900,275300,285100,295300,305900,316900,328300,340500,353500,367300,381900,397300,413500,430500,448300,466900,486300,507300,529900,554100,579900,607300,636300,666900,699100,732900,768300,806900,848700,893700,941900,993300,1047900,1105700,1166700,1230900,1298300],r.upgradeBike={costCoin:[100,150,200,250,300,400,500,600,700,800,1e3,1200,1400,1600,1800,2200,2600,3e3,3400,3800,4600,5400,6200,7e3,7800,9400,11e3,12600,14200,15800,19e3,22200,25400,28600,31800,38200,44600,51e3,57400,63800,76600,89400,102200,115e3,127800,153400,179e3,204600],addedValueEachTime:.5,maxValue:6,playerLevelLimitTimes:[0,0,0,0,4,4,4,4,4,8,8,8,8,8,12,12,12,12,12,16,16,16,16,16,20,20,20,20,20,24,24,24,24,24,28,28,28,28,28,32,32,32,32,32,36,36,36,36,36,38,38,38,38,38,40,40,40,40,40,42,42,42,42,42,44,44,44,44,44,46,46,46,46,46,48],animation:{startSpeed:10,startTurns:1,uniformSpeed:5,uniformTurns:2,endTurns:1,endSpeed:10,twinkleSpeed:5,twinkleTurn:5},items:["Magnet","UnlimitedJump","Invincible","Sprint"]},r.eatItemAnimation={duration:200,yOffset:100},r.defaultRedPoint={imagePath:"",scale:1,positionX:1,positionY:.2},r.bikeRotateByMoveDirection=0,r.bikeBasicVelocity=20,r.framesForChangeImageInBasicVelocity=2,r.gameLevelScene={bikeSpriteScale:.8,bikeSpriteOffsetX:60,bikeSpriteOffsetY:10},r.imageText={bonus:{charWidth:24,charHeight:28,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_0.png",1:"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_1.png",2:"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_2.png",3:"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_3.png",4:"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_4.png",5:"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_5.png",6:"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_6.png",7:"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_7.png",8:"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_8.png",9:"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_9.png","+":"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_11.png","%":"myLaya/laya/assets/images/image-text/bonus/bonus_number_01_13.png"}},bonuspt:{charWidth:25,charHeight:40,charImgPathTable:(o={0:"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_0.png",1:"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_1.png",2:"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_2.png",3:"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_3.png",4:"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_4.png",5:"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_5.png",6:"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_6.png",7:"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_7.png",8:"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_8.png",9:"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_9.png",",":"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_10.png",".":"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_11.png",x:"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_12.png","+":"myLaya/laya/assets/images/image-text/bonuspt/bonuspt_number_02_13.png"},l(o,"额","myLaya/laya/assets/images/image-text/bonuspt/font_1002_1251.png"),l(o,"外","myLaya/laya/assets/images/image-text/bonuspt/font_1002_1252.png"),l(o,"经","myLaya/laya/assets/images/image-text/bonuspt/font_1002_1041.png"),l(o,"验","myLaya/laya/assets/images/image-text/bonuspt/font_1002_1042.png"),l(o,"钱","myLaya/laya/assets/images/image-text/bonuspt/font_1002_1011.png"),l(o,"币","myLaya/laya/assets/images/image-text/bonuspt/font_1002_1012.png"),o)},bonuspt3:{charWidth:34,charHeight:36,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_0.png",1:"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_1.png",2:"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_2.png",3:"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_3.png",4:"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_4.png",5:"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_5.png",6:"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_6.png",7:"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_7.png",8:"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_8.png",9:"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_9.png",",":"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_10.png",".":"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_11.png",x:"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_12.png","+":"myLaya/laya/assets/images/image-text/bonuspt-3/bonuspt_number_03_13.png"}},exp:{charWidth:24,charHeight:28,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/exp/exp_number_01_0.png",1:"myLaya/laya/assets/images/image-text/exp/exp_number_01_1.png",2:"myLaya/laya/assets/images/image-text/exp/exp_number_01_2.png",3:"myLaya/laya/assets/images/image-text/exp/exp_number_01_3.png",4:"myLaya/laya/assets/images/image-text/exp/exp_number_01_4.png",5:"myLaya/laya/assets/images/image-text/exp/exp_number_01_5.png",6:"myLaya/laya/assets/images/image-text/exp/exp_number_01_6.png",7:"myLaya/laya/assets/images/image-text/exp/exp_number_01_7.png",8:"myLaya/laya/assets/images/image-text/exp/exp_number_01_8.png",9:"myLaya/laya/assets/images/image-text/exp/exp_number_01_9.png",",":"myLaya/laya/assets/images/image-text/exp/exp_number_01_10.png"}},font_3:{charWidth:14,charHeight:20,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/font_3/font_3_0.png",1:"myLaya/laya/assets/images/image-text/font_3/font_3_1.png",2:"myLaya/laya/assets/images/image-text/font_3/font_3_2.png",3:"myLaya/laya/assets/images/image-text/font_3/font_3_3.png",4:"myLaya/laya/assets/images/image-text/font_3/font_3_4.png",5:"myLaya/laya/assets/images/image-text/font_3/font_3_5.png",6:"myLaya/laya/assets/images/image-text/font_3/font_3_6.png",7:"myLaya/laya/assets/images/image-text/font_3/font_3_7.png",8:"myLaya/laya/assets/images/image-text/font_3/font_3_8.png",9:"myLaya/laya/assets/images/image-text/font_3/font_3_9.png"}},font_4:{charWidth:15,charHeight:25,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/font_4/font_4_0.png",1:"myLaya/laya/assets/images/image-text/font_4/font_4_1.png",2:"myLaya/laya/assets/images/image-text/font_4/font_4_2.png",3:"myLaya/laya/assets/images/image-text/font_4/font_4_3.png",4:"myLaya/laya/assets/images/image-text/font_4/font_4_4.png",5:"myLaya/laya/assets/images/image-text/font_4/font_4_5.png",6:"myLaya/laya/assets/images/image-text/font_4/font_4_6.png",7:"myLaya/laya/assets/images/image-text/font_4/font_4_7.png",8:"myLaya/laya/assets/images/image-text/font_4/font_4_8.png",9:"myLaya/laya/assets/images/image-text/font_4/font_4_9.png",":":"myLaya/laya/assets/images/image-text/font_4/font_4_31.png","/":"myLaya/laya/assets/images/image-text/font_4/font_4_33.png"}},font_5:{charWidth:15,charHeight:25,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/font_5/font_5_0.png",1:"myLaya/laya/assets/images/image-text/font_5/font_5_1.png",2:"myLaya/laya/assets/images/image-text/font_5/font_5_2.png",3:"myLaya/laya/assets/images/image-text/font_5/font_5_3.png",4:"myLaya/laya/assets/images/image-text/font_5/font_5_4.png",5:"myLaya/laya/assets/images/image-text/font_5/font_5_5.png",6:"myLaya/laya/assets/images/image-text/font_5/font_5_6.png",7:"myLaya/laya/assets/images/image-text/font_5/font_5_7.png",8:"myLaya/laya/assets/images/image-text/font_5/font_5_8.png",9:"myLaya/laya/assets/images/image-text/font_5/font_5_9.png",":":"myLaya/laya/assets/images/image-text/font_5/font_5_31.png"}},font_102:{charWidth:34,charHeight:35,charImgPathTable:(a={1:"myLaya/laya/assets/images/image-text/font_102/font_102_1.png",2:"myLaya/laya/assets/images/image-text/font_102/font_102_2.png",3:"myLaya/laya/assets/images/image-text/font_102/font_102_3.png",4:"myLaya/laya/assets/images/image-text/font_102/font_102_4.png",5:"myLaya/laya/assets/images/image-text/font_102/font_102_5.png",6:"myLaya/laya/assets/images/image-text/font_102/font_102_6.png",7:"myLaya/laya/assets/images/image-text/font_102/font_102_7.png"},l(a,"第","myLaya/laya/assets/images/image-text/font_102/font_102_1201.png"),l(a,"天","myLaya/laya/assets/images/image-text/font_102/font_102_1202.png"),a)},font_303:{charWidth:30,charHeight:26,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/font_303/font_303_0.png",1:"myLaya/laya/assets/images/image-text/font_303/font_303_1.png",2:"myLaya/laya/assets/images/image-text/font_303/font_303_2.png",3:"myLaya/laya/assets/images/image-text/font_303/font_303_3.png",4:"myLaya/laya/assets/images/image-text/font_303/font_303_4.png",5:"myLaya/laya/assets/images/image-text/font_303/font_303_5.png",6:"myLaya/laya/assets/images/image-text/font_303/font_303_6.png",7:"myLaya/laya/assets/images/image-text/font_303/font_303_7.png",8:"myLaya/laya/assets/images/image-text/font_303/font_303_8.png",9:"myLaya/laya/assets/images/image-text/font_303/font_303_9.png","%":"myLaya/laya/assets/images/image-text/font_303/font_303_32.png",">":"myLaya/laya/assets/images/image-text/font_303/font_303_40.png"}},font_401:{charWidth:30,charHeight:24,charImgPathTable:l({0:"myLaya/laya/assets/images/image-text/font_401/font_401_0.png",1:"myLaya/laya/assets/images/image-text/font_401/font_401_1.png",2:"myLaya/laya/assets/images/image-text/font_401/font_401_2.png",3:"myLaya/laya/assets/images/image-text/font_401/font_401_3.png",4:"myLaya/laya/assets/images/image-text/font_401/font_401_4.png",5:"myLaya/laya/assets/images/image-text/font_401/font_401_5.png",6:"myLaya/laya/assets/images/image-text/font_401/font_401_6.png",7:"myLaya/laya/assets/images/image-text/font_401/font_401_7.png",8:"myLaya/laya/assets/images/image-text/font_401/font_401_8.png",9:"myLaya/laya/assets/images/image-text/font_401/font_401_9.png","/":"myLaya/laya/assets/images/image-text/font_401/font_401_33.png",".":"myLaya/laya/assets/images/image-text/font_401/font_401_35.png"},"秒","myLaya/laya/assets/images/image-text/font_401/font_401_1211.png")},font_603:{charWidth:22,charHeight:28,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/font_603/font_603_0.png",1:"myLaya/laya/assets/images/image-text/font_603/font_603_1.png",2:"myLaya/laya/assets/images/image-text/font_603/font_603_2.png",3:"myLaya/laya/assets/images/image-text/font_603/font_603_3.png",4:"myLaya/laya/assets/images/image-text/font_603/font_603_4.png",5:"myLaya/laya/assets/images/image-text/font_603/font_603_5.png",6:"myLaya/laya/assets/images/image-text/font_603/font_603_6.png",7:"myLaya/laya/assets/images/image-text/font_603/font_603_7.png",8:"myLaya/laya/assets/images/image-text/font_603/font_603_8.png",9:"myLaya/laya/assets/images/image-text/font_603/font_603_9.png",":":"myLaya/laya/assets/images/image-text/font_603/font_603_31.png"}},font_901:{charWidth:22,charHeight:27,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/font_901/font_901_0.png",1:"myLaya/laya/assets/images/image-text/font_901/font_901_1.png",2:"myLaya/laya/assets/images/image-text/font_901/font_901_2.png",3:"myLaya/laya/assets/images/image-text/font_901/font_901_3.png",4:"myLaya/laya/assets/images/image-text/font_901/font_901_4.png",5:"myLaya/laya/assets/images/image-text/font_901/font_901_5.png",6:"myLaya/laya/assets/images/image-text/font_901/font_901_6.png",7:"myLaya/laya/assets/images/image-text/font_901/font_901_7.png",8:"myLaya/laya/assets/images/image-text/font_901/font_901_8.png",9:"myLaya/laya/assets/images/image-text/font_901/font_901_9.png","/":"myLaya/laya/assets/images/image-text/font_901/font_901_33.png","-":"myLaya/laya/assets/images/image-text/font_901/font_901_36.png"}},medal:{charWidth:24,charHeight:28,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/medal/medal_number_01_0.png",1:"myLaya/laya/assets/images/image-text/medal/medal_number_01_1.png",2:"myLaya/laya/assets/images/image-text/medal/medal_number_01_2.png",3:"myLaya/laya/assets/images/image-text/medal/medal_number_01_3.png",4:"myLaya/laya/assets/images/image-text/medal/medal_number_01_4.png",5:"myLaya/laya/assets/images/image-text/medal/medal_number_01_5.png",6:"myLaya/laya/assets/images/image-text/medal/medal_number_01_6.png",7:"myLaya/laya/assets/images/image-text/medal/medal_number_01_7.png",8:"myLaya/laya/assets/images/image-text/medal/medal_number_01_8.png",9:"myLaya/laya/assets/images/image-text/medal/medal_number_01_9.png",",":"myLaya/laya/assets/images/image-text/medal/medal_number_01_10.png"}},meter:{charWidth:24,charHeight:28,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/meter/meter_number_01_0.png",1:"myLaya/laya/assets/images/image-text/meter/meter_number_01_1.png",2:"myLaya/laya/assets/images/image-text/meter/meter_number_01_2.png",3:"myLaya/laya/assets/images/image-text/meter/meter_number_01_3.png",4:"myLaya/laya/assets/images/image-text/meter/meter_number_01_4.png",5:"myLaya/laya/assets/images/image-text/meter/meter_number_01_5.png",6:"myLaya/laya/assets/images/image-text/meter/meter_number_01_6.png",7:"myLaya/laya/assets/images/image-text/meter/meter_number_01_7.png",8:"myLaya/laya/assets/images/image-text/meter/meter_number_01_8.png",9:"myLaya/laya/assets/images/image-text/meter/meter_number_01_9.png",",":"myLaya/laya/assets/images/image-text/meter/meter_number_01_10.png",".":"myLaya/laya/assets/images/image-text/meter/meter_number_01_12.png"}},plus:{charWidth:24,charHeight:28,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/plus/plus_number_01_0.png",1:"myLaya/laya/assets/images/image-text/plus/plus_number_01_1.png",2:"myLaya/laya/assets/images/image-text/plus/plus_number_01_2.png",3:"myLaya/laya/assets/images/image-text/plus/plus_number_01_3.png",4:"myLaya/laya/assets/images/image-text/plus/plus_number_01_4.png",5:"myLaya/laya/assets/images/image-text/plus/plus_number_01_5.png",6:"myLaya/laya/assets/images/image-text/plus/plus_number_01_6.png",7:"myLaya/laya/assets/images/image-text/plus/plus_number_01_7.png",8:"myLaya/laya/assets/images/image-text/plus/plus_number_01_8.png",9:"myLaya/laya/assets/images/image-text/plus/plus_number_01_9.png",",":"myLaya/laya/assets/images/image-text/plus/plus_number_01_10.png","+":"myLaya/laya/assets/images/image-text/plus/plus_number_01_11.png","(":"myLaya/laya/assets/images/image-text/plus/plus_number_01_13.png",")":"myLaya/laya/assets/images/image-text/plus/plus_number_01_14.png"}},theme:{charWidth:20,charHeight:26,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/theme/theme_num0.png",1:"myLaya/laya/assets/images/image-text/theme/theme_num1.png",2:"myLaya/laya/assets/images/image-text/theme/theme_num2.png",3:"myLaya/laya/assets/images/image-text/theme/theme_num3.png",4:"myLaya/laya/assets/images/image-text/theme/theme_num4.png",5:"myLaya/laya/assets/images/image-text/theme/theme_num5.png",6:"myLaya/laya/assets/images/image-text/theme/theme_num6.png",7:"myLaya/laya/assets/images/image-text/theme/theme_num7.png",8:"myLaya/laya/assets/images/image-text/theme/theme_num8.png",9:"myLaya/laya/assets/images/image-text/theme/theme_num9.png",m:"myLaya/laya/assets/images/image-text/theme/theme_milesunit_jp.png"}},theme2:{charWidth:20,charHeight:26,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/theme-2/theme-2_num0.png",1:"myLaya/laya/assets/images/image-text/theme-2/theme-2_num1.png",2:"myLaya/laya/assets/images/image-text/theme-2/theme-2_num2.png",3:"myLaya/laya/assets/images/image-text/theme-2/theme-2_num3.png",4:"myLaya/laya/assets/images/image-text/theme-2/theme-2_num4.png",5:"myLaya/laya/assets/images/image-text/theme-2/theme-2_num5.png",6:"myLaya/laya/assets/images/image-text/theme-2/theme-2_num6.png",7:"myLaya/laya/assets/images/image-text/theme-2/theme-2_num7.png",8:"myLaya/laya/assets/images/image-text/theme-2/theme-2_num8.png",9:"myLaya/laya/assets/images/image-text/theme-2/theme-2_num9.png",m:"myLaya/laya/assets/images/image-text/theme-2/theme-2_milesunit_jp.png"}},rank:{charWidth:52,charHeight:62,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/rank/rank_number_02_0.png",1:"myLaya/laya/assets/images/image-text/rank/rank_number_02_1.png",2:"myLaya/laya/assets/images/image-text/rank/rank_number_02_2.png",3:"myLaya/laya/assets/images/image-text/rank/rank_number_02_3.png",4:"myLaya/laya/assets/images/image-text/rank/rank_number_02_4.png",5:"myLaya/laya/assets/images/image-text/rank/rank_number_02_5.png",6:"myLaya/laya/assets/images/image-text/rank/rank_number_02_6.png",7:"myLaya/laya/assets/images/image-text/rank/rank_number_02_7.png",8:"myLaya/laya/assets/images/image-text/rank/rank_number_02_8.png",9:"myLaya/laya/assets/images/image-text/rank/rank_number_02_9.png"}},ranking:{charWidth:42,charHeight:46,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/ranking/ranking_0.png",1:"myLaya/laya/assets/images/image-text/ranking/ranking_1.png",2:"myLaya/laya/assets/images/image-text/ranking/ranking_2.png",3:"myLaya/laya/assets/images/image-text/ranking/ranking_3.png",4:"myLaya/laya/assets/images/image-text/ranking/ranking_4.png",5:"myLaya/laya/assets/images/image-text/ranking/ranking_5.png",6:"myLaya/laya/assets/images/image-text/ranking/ranking_6.png",7:"myLaya/laya/assets/images/image-text/ranking/ranking_7.png",8:"myLaya/laya/assets/images/image-text/ranking/ranking_8.png",9:"myLaya/laya/assets/images/image-text/ranking/ranking_9.png"}},score:{charWidth:30,charHeight:38,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/score/score_number_02_0.png",1:"myLaya/laya/assets/images/image-text/score/score_number_02_1.png",2:"myLaya/laya/assets/images/image-text/score/score_number_02_2.png",3:"myLaya/laya/assets/images/image-text/score/score_number_02_3.png",4:"myLaya/laya/assets/images/image-text/score/score_number_02_4.png",5:"myLaya/laya/assets/images/image-text/score/score_number_02_5.png",6:"myLaya/laya/assets/images/image-text/score/score_number_02_6.png",7:"myLaya/laya/assets/images/image-text/score/score_number_02_7.png",8:"myLaya/laya/assets/images/image-text/score/score_number_02_8.png",9:"myLaya/laya/assets/images/image-text/score/score_number_02_9.png",",":"myLaya/laya/assets/images/image-text/score/score_number_02_10.png",".":"myLaya/laya/assets/images/image-text/score/score_number_02_11.png","%":"myLaya/laya/assets/images/image-text/score/score_number_02_12.png","?":"myLaya/laya/assets/images/image-text/score/score_number_02_14.png"}},ui_fvr_gauge:{charWidth:20,charHeight:22,charImgPathTable:{0:"myLaya/laya/assets/images/image-text/ui_fvr_gauge/ui_fvr_gauge_number_01_0.png",1:"myLaya/laya/assets/images/image-text/ui_fvr_gauge/ui_fvr_gauge_number_01_1.png",2:"myLaya/laya/assets/images/image-text/ui_fvr_gauge/ui_fvr_gauge_number_01_2.png",3:"myLaya/laya/assets/images/image-text/ui_fvr_gauge/ui_fvr_gauge_number_01_3.png",4:"myLaya/laya/assets/images/image-text/ui_fvr_gauge/ui_fvr_gauge_number_01_4.png",5:"myLaya/laya/assets/images/image-text/ui_fvr_gauge/ui_fvr_gauge_number_01_5.png",6:"myLaya/laya/assets/images/image-text/ui_fvr_gauge/ui_fvr_gauge_number_01_6.png",7:"myLaya/laya/assets/images/image-text/ui_fvr_gauge/ui_fvr_gauge_number_01_7.png",8:"myLaya/laya/assets/images/image-text/ui_fvr_gauge/ui_fvr_gauge_number_01_8.png",9:"myLaya/laya/assets/images/image-text/ui_fvr_gauge/ui_fvr_gauge_number_01_9.png","%":"myLaya/laya/assets/images/image-text/ui_fvr_gauge/ui_fvr_gauge_number_01_10.png"}}},r.levelUpReward=[{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20},{coin:1e3,diamond:20}],r.bulletTimeTargetVelocity=10,r.stepTimesEachFrame=2,r.bulletTime={maxValue:[700,710,720,730,740,750,760,770,780,790,800,810,820,830,840,850,860,870,880,890,900,910,920,930,940,950,960,970,980,990,1e3,1010,1020,1030,1040],usableMinValue:500,startUpCostValue:200,reduceValuePerSecond:50,addValueDistance:100,addValuePerDistance:100,filmImagePath:"myLaya/laya/assets/images/bullet-time-film.png",filmImageMoveVelocity:400,filmImageAppearDuration:200,addValueInBulletTime:0,lineAnimationPath:"myLaya/laya/assets/animations/bullet-time-line.json",lineAnimationSpeed:.25,lineAnimationMoveVelocity:-6,line:{minCountInScreen:2,maxCountInScreen:5,randomOffset:10,createLineRatePerFrame:.01},endInvincibleDuration:2,rewardAddTimes:1},r.guideMode={mapConfig:{scenePath:"myLaya/laya/pages/Map/Practice-1.scene.json",texture:{side:"images/map/stg40/l_stg40Road01SideSkin.png",top:"images/map/stg40/l_stg40Road01TopSkin.png",side2:"images/map/stg40/l_stg40Road02SideSkin.png",top2:"images/map/stg40/l_stg40Road02TopSkin.png",bg:["images/map/stg40/l_stg40_01.png","images/map/stg40/l_stg40_02.png"],mainCover:"images/map/stg40/l_stg40Map.png"},horizontalParallaxDepth:[.9,.5,0],verticalParallaxDepth:[1,.9,0],bgY:[0,0],bgScale:[1,1],bikeVelocity:30,gravity:-175,jumpForce:250,bgmPath:"myLaya/laya/assets/sounds/BGM003.mp3",itemRandomTable:{Magnet:1}}},r.playerEffect={ground:{animationJsonPath:"images/eff_jump_01.json",animationName:"eff_jump_01",animationSpeed:.08,animationPos:[-40,-20],followPlayer:0},air:{animationJsonPath:"images/eff_jump_01_2.json",animationName:"eff_jump_01_2",animationSpeed:.15,animationPos:[-120,40],followPlayer:0},follow:{animationJsonPath:"images/eff_run_02.json",animationName:"eff_run_02",animationSpeed:.2,animationPos:[-250,-25]},trampled:[{animationJsonPath:"images/eff_atk_01.json",animationName:"eff_atk_01",animationSpeed:.2,animationPos:[-100,-40]},{animationJsonPath:"images/eff_atk_02.json",animationName:"eff_atk_02",animationSpeed:.1,animationPos:[-140,-130]},{animationJsonPath:"images/eff_atk_03.json",animationName:"eff_atk_03",animationSpeed:.1,animationPos:[-100,-200]}],jacked:[{animationJsonPath:"images/eff_atk_01.json",animationName:"eff_atk_01",animationSpeed:.2,animationPos:[-100,-40]}],striked:[{animationJsonPath:"images/eff_atk_01.json",animationName:"eff_atk_01",animationSpeed:.2,animationPos:[-100,-40]},{animationJsonPath:"images/eff_atk_02.json",animationName:"eff_atk_02",animationSpeed:.1,animationPos:[-140,-130]}],bulletTime:[{animationJsonPath:"images/eff_sweat_01.json",animationName:"eff_sweat_01",animationSpeed:.5,animationPos:[-120,-120],followPlayer:1,loop:1}]},r.randomItemAnimation={speed:.2,times:2},r.useItemAnimation={duration:400,scale:2},r.getStarAnimation={startScale:5,startAlpha:.5,duration:1e3},r.warningAnimation={warnSpritePath:"myLaya/laya/assets/images/warn-1.png",warningDistance:700,disWarningDistance:100,warningMinVelocity:29},r.addExtraScoreAnimation={appearDuration:250,showDuration:500,disappearAnimation:250,startMoveX:-200,endMoveX:0},r.resolveAnimation={starAnimation:{startScale:3,startAlpha:.5,duration:500},numberAnimation:{duration:500},doubleIconAnimation:{startScale:3,startAlpha:.5,duration:500},getIconAnimation:{startScale:3,startAlpha:.5,duration:500},newRecordAnimation:{startScale:5,startAlpha:.5,duration:500}},r.levelIconTable={0:"myLaya/laya/assets/images/skill-star-1.png",1:"myLaya/laya/assets/images/skill-star-2.png",2:"myLaya/laya/assets/images/skill-star-3.png",3:"myLaya/laya/assets/images/skill-star-4.png",4:"myLaya/laya/assets/images/skill-star-5.png"},r.guideRectCornerRadius=.25,r.movingBackground={x:.3,y:.3},r.UIGuide=(l(s={},"闯关模式",{startInFirstTimeShowMainScene:1,startInUnlockSystem:"",guidePanelList:[{scene:"MainScene",panel:"Guide-1-1",showMask:1,showDuration:0,showUtilClick:"gamelevelModeButton"},{scene:"GameLevelScene",panel:"Guide-1-11",showMask:1,showDuration:0,showUtilClick:"glBtn1"},{scene:"PreparationScene",panel:"Guide-1-21",showMask:1,showDuration:0,showUtilClick:"firstTimePanel"},{scene:"PreparationScene",panel:"Guide-1-31",showMask:1,showDuration:0,showUtilClick:"startButton"}]}),l(s,"抽奖",{startInFirstTimeShowMainScene:0,startInUnlockSystem:"drawButton",guidePanelList:[{scene:"GameLevelScene",panel:"Guide-11-1",showMask:1,showDuration:0,showUtilClick:"returnButton"},{scene:"MainScene",panel:"Guide-11-11",showMask:1,showDuration:0,showUtilClick:"drawButton"},{scene:"DrawScene",panel:"Guide-11-21",showMask:1,showDuration:0,showUtilClick:"drawButton"},{scene:"DrawScene",panel:"Guide-11-31",showMask:0,showDuration:3,showUtilClick:""},{scene:"DrawScene",panel:"Guide-11-41",showMask:1,showDuration:0,showUtilClick:"guidePanel"}]}),l(s,"角色扮演",{startInFirstTimeShowMainScene:0,startInUnlockSystem:"bikeButton",guidePanelList:[{scene:"GameLevelScene",panel:"Guide-21-1",showMask:1,showDuration:0,showUtilClick:"returnButton"},{scene:"MainScene",panel:"Guide-21-11",showMask:1,showDuration:0,showUtilClick:"bikeButton"},{scene:"BikeScene",panel:"Guide-21-21",showMask:1,showDuration:0,showUtilClick:"guidePanel"}]}),l(s,"无尽旅程",{startInFirstTimeShowMainScene:0,startInUnlockSystem:"endlessModeButton",guidePanelList:[{scene:"GameLevelScene",panel:"Guide-31-1",showMask:1,showDuration:0,showUtilClick:"returnButton"},{scene:"MainScene",panel:"Guide-31-11",showMask:1,showDuration:0,showUtilClick:"endlessModeButton"},{scene:"PreparationScene",panel:"Guide-31-21",showMask:1,showDuration:0,showUtilClick:"startButton"}]}),l(s,"签到",{startInFirstTimeShowMainScene:0,startInUnlockSystem:"signButton",guidePanelList:[{scene:"GameLevelScene",panel:"Guide-41-1",showMask:1,showDuration:0,showUtilClick:"returnButton"},{scene:"MainScene",panel:"Guide-41-11",showMask:1,showDuration:0,showUtilClick:"signButton"},{scene:"SignScene",panel:"Guide-41-21",showMask:1,showDuration:0,showUtilClick:"guidePanel"},{scene:"SignScene",panel:"Guide-41-31",showMask:1,showDuration:0,showUtilClick:"guidePanel"}]}),l(s,"排名竞赛",{startInFirstTimeShowMainScene:0,startInUnlockSystem:"mapModeButton",guidePanelList:[{scene:"GameLevelScene",panel:"Guide-51-1",showMask:1,showDuration:0,showUtilClick:"returnButton"},{scene:"MainScene",panel:"Guide-51-11",showMask:1,showDuration:0,showUtilClick:"mapModeButton"},{scene:"PreparationScene",panel:"Guide-51-21",showMask:1,showDuration:0,showUtilClick:"guidePanel"}]}),l(s,"礼包",{startInFirstTimeShowMainScene:0,startInUnlockSystem:"giftButton",guidePanelList:[{scene:"GameLevelScene",panel:"Guide-61-1",showMask:1,showDuration:0,showUtilClick:"returnButton"},{scene:"MainScene",panel:"Guide-61-11",showMask:1,showDuration:0,showUtilClick:"giftButton"},{scene:"GiftScene",panel:"Guide-61-21",showMask:1,showDuration:0,showUtilClick:"guidePanel"},{scene:"GiftScene",panel:"Guide-61-31",showMask:1,showDuration:0,showUtilClick:"guidePanel"}]}),l(s,"自行车能力",{startInFirstTimeShowMainScene:0,startInUnlockSystem:"upgradePanelButton",guidePanelList:[{scene:"GameLevelScene",panel:"Guide-71-1",showMask:1,showDuration:0,showUtilClick:"returnButton"},{scene:"MainScene",panel:"Guide-71-11",showMask:1,showDuration:0,showUtilClick:"bikeButton"},{scene:"BikeScene",panel:"Guide-71-21",showMask:1,showDuration:0,showUtilClick:"upgradePanelButton"},{scene:"BikeScene",panel:"Guide-71-31",showMask:1,showDuration:0,showUtilClick:"upgradeButton"}]}),l(s,"福利",{startInFirstTimeShowMainScene:0,startInUnlockSystem:"shopButton",guidePanelList:[{scene:"GameLevelScene",panel:"Guide-81-1",showMask:1,showDuration:0,showUtilClick:"returnButton"},{scene:"MainScene",panel:"Guide-81-11",showMask:1,showDuration:0,showUtilClick:"shopButton"},{scene:"ShopScene",panel:"Guide-81-21",showMask:1,showDuration:0,showUtilClick:"guidePanel"},{scene:"ShopScene",panel:"Guide-81-31",showMask:1,showDuration:0,showUtilClick:"guidePanel"}]}),l(s,"排行",{startInFirstTimeShowMainScene:0,startInUnlockSystem:"rankButton",guidePanelList:[{scene:"GameLevelScene",panel:"Guide-91-1",showMask:1,showDuration:0,showUtilClick:"returnButton"},{scene:"MainScene",panel:"Guide-91-11",showMask:1,showDuration:0,showUtilClick:"rankButton"},{scene:"RankScene",panel:"Guide-91-21",showMask:1,showDuration:0,showUtilClick:"guidePanel"},{scene:"RankScene",panel:"Guide-91-31",showMask:1,showDuration:0,showUtilClick:"guidePanel"},{scene:"RankScene",panel:"Guide-91-41",showMask:1,showDuration:0,showUtilClick:"guidePanel"}]}),l(s,"无尽模式界面引导",{startInFirstTimeShowMainScene:0,startInUnlockSystem:"",startInEndlessGameBegin:1,startInLevelGameBegin:0,startInMapGameBegin:0,guidePanelList:[{scene:"GameScene",panel:"Guide0",showMask:0,showDuration:6,showUtilClick:""},{scene:"GameScene",panel:"Guide1",showMask:0,showDuration:5,showUtilClick:""},{scene:"GameScene",panel:"Guide2",showMask:0,showDuration:5,showUtilClick:""},{scene:"GameScene",panel:"Guide3",showMask:0,showDuration:5,showUtilClick:""},{scene:"GameScene",panel:"Guide4",showMask:0,showDuration:5,showUtilClick:""}]}),l(s,"排名模式界面引导",{startInFirstTimeShowMainScene:0,startInUnlockSystem:"",startInEndlessGameBegin:0,startInLevelGameBegin:0,startInMapGameBegin:1,guidePanelList:[{scene:"GameScene",panel:"Guide100",showMask:0,showDuration:1,showUtilClick:""},{scene:"GameScene",panel:"Guide101",showMask:0,showDuration:5,showUtilClick:""},{scene:"GameScene",panel:"Guide102",showMask:0,showDuration:5,showUtilClick:""},{scene:"GameScene",panel:"Guide103",showMask:0,showDuration:5,showUtilClick:""},{scene:"GameScene",panel:"Guide104",showMask:0,showDuration:5,showUtilClick:""}]}),s),r.rotateStatus={enterDuration:500,rewardAddTimes:1},r.double={exp:1,coin:1,bulletTimeValue:0,rewardProgressValue:0},r.doubleAnimation={duration:750,yOffset:100,yStartOffset:-100,endAlpha:.5},r.loadingImagePathList=["images/loading/anim_load01.png","images/loading/anim_load02.png","images/loading/anim_load03.png","images/loading/anim_load04.png","images/loading/anim_load05.png","images/loading/anim_load06.png","images/loading/anim_load07.png","images/loading/anim_load08.png"],r.slowFallingCoeffient=.75,r.abilityList=[{id:"TripleJump",name:"name-TripleJump",dsc:"dsc-TripleJump",icon:"images/special_skill/special_skill-1.png"},{id:"FourJump",name:"name-FourJump",dsc:"dsc-FourJump",icon:"images/special_skill/special_skill-2.png"},{id:"Rotate",name:"name-Rotate",dsc:"dsc-Rotate",icon:"images/special_skill/special_skill-11.png"},{id:"SlowFalling",name:"name-SlowFalling",dsc:"dsc-SlowFalling",icon:"images/special_skill/special_skill-21.png"}];var h,c,u=r,m=i(1),p=function(){function t(t,e,i){this.value=t,this.time=e,this.next=null,this.isStepped=!1,this.ease=i?"function"==typeof i?i:c.generateEase(i):null}return t.createList=function(e){if("list"in e){var i=e.list,n=void 0,o=i[0],a=o.value,s=o.time,r=n=new t("string"==typeof a?c.hexToRGB(a):a,s,e.ease);if(i.length>2||2===i.length&&i[1].value!==a)for(var l=1;l<i.length;++l){var h=i[l],u=h.value,m=h.time;n.next=new t("string"==typeof u?c.hexToRGB(u):u,m),n=n.next}return r.isStepped=!!e.isStepped,r}var p=new t("string"==typeof e.start?c.hexToRGB(e.start):e.start,0);return e.end!==e.start&&(p.next=new t("string"==typeof e.end?c.hexToRGB(e.end):e.end,1)),p},t}(),d=m;function f(t){return h(t)}h=parseInt(/^(\d+)\./.exec(m.VERSION)[1],10)<5?d.Texture.fromImage:d.Texture.from,function(t){t.verbose=!1,t.DEG_TO_RADS=Math.PI/180,t.rotatePoint=function(e,i){if(e){e*=t.DEG_TO_RADS;var n=Math.sin(e),o=Math.cos(e),a=i.x*o-i.y*n,s=i.x*n+i.y*o;i.x=a,i.y=s}},t.combineRGBComponents=function(t,e,i){return t<<16|e<<8|i},t.normalize=function(e){var i=1/t.length(e);e.x*=i,e.y*=i},t.scaleBy=function(t,e){t.x*=e,t.y*=e},t.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.hexToRGB=function(t,e){var i;return e||(e={}),"#"===t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8===t.length&&(i=t.substr(0,2),t=t.substr(2)),e.r=parseInt(t.substr(0,2),16),e.g=parseInt(t.substr(2,2),16),e.b=parseInt(t.substr(4,2),16),i&&(e.a=parseInt(i,16)),e},t.generateEase=function(t){var e=t.length,i=1/e;return function(n){var o=e*n|0,a=(n-o*i)*e,s=t[o]||t[e-1];return s.s+a*(2*(1-a)*(s.cp-s.s)+a*(s.e-s.s))}},t.getBlendMode=function(t){if(!t)return m.BLEND_MODES.NORMAL;for(t=t.toUpperCase();t.indexOf(" ")>=0;)t=t.replace(" ","_");return m.BLEND_MODES[t]||m.BLEND_MODES.NORMAL},t.createSteppedGradient=function(e,i){void 0===i&&(i=10),("number"!=typeof i||i<=0)&&(i=10);var n=new p(t.hexToRGB(e[0].value),e[0].time);n.isStepped=!0;for(var o=n,a=e[0],s=1,r=e[s],l=1;l<i;++l){for(var h=l/i;h>r.time;)a=r,r=e[++s];h=(h-a.time)/(r.time-a.time);var c=t.hexToRGB(a.value),u=t.hexToRGB(r.value),m={r:(u.r-c.r)*h+c.r,g:(u.g-c.g)*h+c.g,b:(u.b-c.b)*h+c.b};o.next=new p(m,l/i),o=o.next}return n}}(c||(c={}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function g(t,e){function i(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function v(t){return this.ease&&(t=this.ease(t)),(this.next.value-this.current.value)*t+this.current.value}function _(t){this.ease&&(t=this.ease(t));var e=this.current.value,i=this.next.value,n=(i.r-e.r)*t+e.r,o=(i.g-e.g)*t+e.g,a=(i.b-e.b)*t+e.b;return c.combineRGBComponents(n,o,a)}function b(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;return t=(t-this.current.time)/(this.next.time-this.current.time),(this.next.value-this.current.value)*t+this.current.value}function x(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;t=(t-this.current.time)/(this.next.time-this.current.time);var e=this.current.value,i=this.next.value,n=(i.r-e.r)*t+e.r,o=(i.g-e.g)*t+e.g,a=(i.b-e.b)*t+e.b;return c.combineRGBComponents(n,o,a)}function S(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;return this.current.value}function k(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;var e=this.current.value;return c.combineRGBComponents(e.r,e.g,e.b)}var w,A=function(){function t(t){void 0===t&&(t=!1),this.current=null,this.next=null,this.isColor=!!t,this.interpolate=null,this.ease=null}return t.prototype.reset=function(t){this.current=t,this.next=t.next,this.next&&this.next.time>=1?this.interpolate=this.isColor?_:v:t.isStepped?this.interpolate=this.isColor?k:S:this.interpolate=this.isColor?x:b,this.ease=this.current.ease},t}(),P=function(t){function e(i){var n=t.call(this)||this;return n.emitter=i,n.anchor.x=n.anchor.y=.5,n.velocity=new m.Point,n.rotationSpeed=0,n.rotationAcceleration=0,n.maxLife=0,n.age=0,n.ease=null,n.extraData=null,n.alphaList=new A,n.speedList=new A,n.speedMultiplier=1,n.acceleration=new m.Point,n.maxSpeed=NaN,n.scaleList=new A,n.scaleMultiplier=1,n.colorList=new A(!0),n._doAlpha=!1,n._doScale=!1,n._doSpeed=!1,n._doAcceleration=!1,n._doColor=!1,n._doNormalMovement=!1,n._oneOverLife=0,n.next=null,n.prev=null,n.init=n.init,n.Particle_init=e.prototype.init,n.update=n.update,n.Particle_update=e.prototype.update,n.Sprite_destroy=t.prototype.destroy,n.Particle_destroy=e.prototype.destroy,n.applyArt=n.applyArt,n.kill=n.kill,n}return g(e,t),e.prototype.init=function(){this.age=0,this.velocity.x=this.speedList.current.value*this.speedMultiplier,this.velocity.y=0,c.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=c.DEG_TO_RADS,this.rotationSpeed*=c.DEG_TO_RADS,this.rotationAcceleration*=c.DEG_TO_RADS,this.alpha=this.alphaList.current.value,this.scale.x=this.scale.y=this.scaleList.current.value,this._doAlpha=!!this.alphaList.current.next,this._doSpeed=!!this.speedList.current.next,this._doScale=!!this.scaleList.current.next,this._doColor=!!this.colorList.current.next,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.speedList.current.value||this._doAcceleration,this._oneOverLife=1/this.maxLife;var t=this.colorList.current.value;this.tint=c.combineRGBComponents(t.r,t.g,t.b),this.visible=!0},e.prototype.applyArt=function(t){this.texture=t||m.Texture.EMPTY},e.prototype.update=function(t){if(this.age+=t,this.age>=this.maxLife||this.age<0)return this.kill(),-1;var e=this.age*this._oneOverLife;if(this.ease&&(e=4===this.ease.length?this.ease(e,0,1,1):this.ease(e)),this._doAlpha&&(this.alpha=this.alphaList.interpolate(e)),this._doScale){var i=this.scaleList.interpolate(e)*this.scaleMultiplier;this.scale.x=this.scale.y=i}if(this._doNormalMovement){var n=void 0,o=void 0;if(this._doSpeed){var a=this.speedList.interpolate(e)*this.speedMultiplier;c.normalize(this.velocity),c.scaleBy(this.velocity,a),n=this.velocity.x*t,o=this.velocity.y*t}else if(this._doAcceleration){var s=this.velocity.x,r=this.velocity.y;if(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.maxSpeed){var l=c.length(this.velocity);l>this.maxSpeed&&c.scaleBy(this.velocity,this.maxSpeed/l)}n=(s+this.velocity.x)/2*t,o=(r+this.velocity.y)/2*t}else n=this.velocity.x*t,o=this.velocity.y*t;this.position.x+=n,this.position.y+=o}if(this._doColor&&(this.tint=this.colorList.interpolate(e)),0!==this.rotationAcceleration){var h=this.rotationSpeed+this.rotationAcceleration*t;this.rotation+=(this.rotationSpeed+h)/2*t,this.rotationSpeed=h}else 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*t:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x));return e},e.prototype.kill=function(){this.emitter.recycle(this)},e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_destroy(),this.emitter=this.velocity=this.colorList=this.scaleList=this.alphaList=this.speedList=this.ease=this.next=this.prev=null},e.parseArt=function(t){var e;for(e=t.length;e>=0;--e)"string"==typeof t[e]&&(t[e]=f(t[e]));if(c.verbose)for(e=t.length-1;e>0;--e)if(t[e].baseTexture!==t[e-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}return t},e.parseData=function(t){return t},e}(m.Sprite),T=function(){function t(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}return t.prototype.init=function(t){if(t&&t.length)if(Array.isArray(t[0]))for(var e=0;e<t.length;++e)for(var i=t[e],n=i[0],o=1;o<i.length;++o){var a=i[o];this.segments.push({p1:n,p2:a,l:0}),n=a}else for(n=t[0],e=1;e<t.length;++e){a=t[e];this.segments.push({p1:n,p2:a,l:0}),n=a}else this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});for(e=0;e<this.segments.length;++e){var s=this.segments[e],r=s.p1,l=s.p2,h=Math.sqrt((l.x-r.x)*(l.x-r.x)+(l.y-r.y)*(l.y-r.y));this.segments[e].l=h,this.totalLength+=h,this.countingLengths.push(this.totalLength)}},t.prototype.getRandomPoint=function(t){var e,i,n=Math.random()*this.totalLength;if(1===this.segments.length)e=this.segments[0],i=n;else for(var o=0;o<this.countingLengths.length;++o)if(n<this.countingLengths[o]){e=this.segments[o],i=0===o?n:n-this.countingLengths[o-1];break}i/=e.l||1;var a=e.p1,s=e.p2;t.x=a.x+i*(s.x-a.x),t.y=a.y+i*(s.y-a.y)},t}(),C=m;w=parseInt(/^(\d+)\./.exec(m.VERSION)[1],10)<5?C.ticker.shared:C.Ticker.shared;var I=new m.Point,B=function(){function t(t,e,i){this._currentImageIndex=-1,this._particleConstructor=P,this.particleImages=null,this.startAlpha=null,this.startSpeed=null,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=null,this.minimumScaleMultiplier=1,this.startColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.spawnPolygonalChain=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._currentImageIndex=-1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,e&&i&&this.init(e,i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}return Object.defineProperty(t.prototype,"orderedArt",{get:function(){return-1!==this._currentImageIndex},set:function(t){this._currentImageIndex=t?0:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency="number"==typeof t&&t>0?t:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"particleConstructor",{get:function(){return this._particleConstructor},set:function(t){if(t!==this._particleConstructor){this._particleConstructor=t,this.cleanup();for(var e=this._poolFirst;e;e=e.next)e.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this.cleanup(),this._parent=t},enumerable:!0,configurable:!0}),t.prototype.init=function(t,e){if(t&&e){this.cleanup(),this._origConfig=e,this._origArt=t,t=Array.isArray(t)?t.slice():[t];var i=this._particleConstructor;this.particleImages=i.parseArt?i.parseArt(t):t,e.alpha?this.startAlpha=p.createList(e.alpha):this.startAlpha=new p(1,0),e.speed?(this.startSpeed=p.createList(e.speed),this.minimumSpeedMultiplier=("minimumSpeedMultiplier"in e?e.minimumSpeedMultiplier:e.speed.minimumSpeedMultiplier)||1):(this.minimumSpeedMultiplier=1,this.startSpeed=new p(0,0));var n=e.acceleration;n&&(n.x||n.y)?(this.startSpeed.next=null,this.acceleration=new m.Point(n.x,n.y),this.maxSpeed=e.maxSpeed||NaN):this.acceleration=new m.Point,e.scale?(this.startScale=p.createList(e.scale),this.minimumScaleMultiplier=("minimumScaleMultiplier"in e?e.minimumScaleMultiplier:e.scale.minimumScaleMultiplier)||1):(this.startScale=new p(1,0),this.minimumScaleMultiplier=1),e.color?this.startColor=p.createList(e.color):this.startColor=new p({r:255,g:255,b:255},0),e.startRotation?(this.minStartRotation=e.startRotation.min,this.maxStartRotation=e.startRotation.max):this.minStartRotation=this.maxStartRotation=0,e.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!e.noRotation:this.noRotation=!1,e.rotationSpeed?(this.minRotationSpeed=e.rotationSpeed.min,this.maxRotationSpeed=e.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.rotationAcceleration=e.rotationAcceleration||0,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,this.particleBlendMode=c.getBlendMode(e.blendMode),e.ease?this.customEase="function"==typeof e.ease?e.ease:c.generateEase(e.ease):this.customEase=null,i.parseData?this.extraData=i.parseData(e.extraData):this.extraData=e.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,e.particlesPerWave&&e.particlesPerWave>1&&(this.particlesPerWave=e.particlesPerWave),this.particleSpacing=0,this.angleStart=0,this.parseSpawnType(e),this.frequency=e.frequency,this.spawnChance="number"==typeof e.spawnChance&&e.spawnChance>0?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos=new m.Point,this.spawnPos=new m.Point(e.pos.x,e.pos.y),this.initAdditional(t,e),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===e.emit||!!e.emit,this.autoUpdate=!!e.autoUpdate,this.orderedArt=!!e.orderedArt}},t.prototype.initAdditional=function(t,e){},t.prototype.parseSpawnType=function(t){var e;switch(t.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var i=t.spawnRect;this.spawnRect=new m.Rectangle(i.x,i.y,i.w,i.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,e=t.spawnCircle,this.spawnCircle=new m.Circle(e.x,e.y,e.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,e=t.spawnCircle,this.spawnCircle=new m.Circle(e.x,e.y,e.r),this.spawnCircle.minRadius=e.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particleSpacing=t.particleSpacing,this.angleStart=t.angleStart?t.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;case"polygonalChain":this.spawnType="polygonalChain",this._spawnFunc=this._spawnPolygonalChain,this.spawnPolygonalChain=new T(t.spawnPolygon);break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint}},t.prototype.recycle=function(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t===this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount},t.prototype.rotate=function(t){if(this.rotation!==t){var e=t-this.rotation;this.rotation=t,c.rotatePoint(e,this.spawnPos),this._posChanged=!0}},t.prototype.updateSpawnPos=function(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e},t.prototype.updateOwnerPos=function(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e},t.prototype.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(t.prototype,"emit",{get:function(){return this._emit},set:function(t){this._emit=!!t,this._emitterLife=this.emitterLifetime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){this._autoUpdate&&!t?w.remove(this.update,this):!this._autoUpdate&&t&&w.add(this.update,this),this._autoUpdate=!!t},enumerable:!0,configurable:!0}),t.prototype.playOnceAndDestroy=function(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t},t.prototype.playOnce=function(t){this.emit=!0,this._completeCallback=t},t.prototype.update=function(t){if(this._autoUpdate&&(t=t/m.settings.TARGET_FPMS/1e3),this._parent){var e,i,n,o,a;for(i=this._activeParticlesFirst;i;i=n)n=i.next,i.update(t);this._prevPosIsValid&&(o=this._prevEmitterPos.x,a=this._prevEmitterPos.y);var s=this.ownerPos.x+this.spawnPos.x,r=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var l=void 0;if(l=this.minLifetime===this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<l){var h=void 0,c=void 0;if(this._prevPosIsValid&&this._posChanged){var u=1+this._spawnTimer/t;h=(s-o)*u+o,c=(r-a)*u+a}else h=s,c=r;e=0;for(var p=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);e<p;++e)if(!(this.spawnChance<1&&Math.random()>=this.spawnChance)){var d=void 0;if(this._poolFirst?(d=this._poolFirst,this._poolFirst=this._poolFirst.next,d.next=null):d=new this.particleConstructor(this),this.particleImages.length>1?-1!==this._currentImageIndex?(d.applyArt(this.particleImages[this._currentImageIndex++]),(this._currentImageIndex<0||this._currentImageIndex>=this.particleImages.length)&&(this._currentImageIndex=0)):d.applyArt(this.particleImages[Math.floor(Math.random()*this.particleImages.length)]):d.applyArt(this.particleImages[0]),d.alphaList.reset(this.startAlpha),1!==this.minimumSpeedMultiplier&&(d.speedMultiplier=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier),d.speedList.reset(this.startSpeed),d.acceleration.x=this.acceleration.x,d.acceleration.y=this.acceleration.y,d.maxSpeed=this.maxSpeed,1!==this.minimumScaleMultiplier&&(d.scaleMultiplier=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier),d.scaleList.reset(this.startScale),d.colorList.reset(this.startColor),this.minRotationSpeed===this.maxRotationSpeed?d.rotationSpeed=this.minRotationSpeed:d.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,d.rotationAcceleration=this.rotationAcceleration,d.noRotation=this.noRotation,d.maxLife=l,d.blendMode=this.particleBlendMode,d.ease=this.customEase,d.extraData=this.extraData,this.applyAdditionalProperties(d),this._spawnFunc(d,h,c,e),d.init(),d.parent){var f=this._parent.children;if(f[0]===d)f.shift();else if(f[f.length-1]===d)f.pop();else{var y=f.indexOf(d);f.splice(y,1)}this.addAtBack?f.unshift(d):f.push(d)}else this.addAtBack?this._parent.addChildAt(d,0):this._parent.addChild(d);this._activeParticlesLast?(this._activeParticlesLast.next=d,d.prev=this._activeParticlesLast,this._activeParticlesLast=d):this._activeParticlesLast=this._activeParticlesFirst=d,++this.particleCount,d.update(-this._spawnTimer)}}this._spawnTimer+=this._frequency}}if(this._posChanged&&(this._prevEmitterPos.x=s,this._prevEmitterPos.y=r,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){var g=this._completeCallback;this._completeCallback=null,g()}this._destroyWhenComplete&&this.destroy()}}},t.prototype.applyAdditionalProperties=function(t){},t.prototype._spawnPoint=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,t.position.x=e,t.position.y=i},t.prototype._spawnRect=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,I.x=Math.random()*this.spawnRect.width+this.spawnRect.x,I.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&c.rotatePoint(this.rotation,I),t.position.x=e+I.x,t.position.y=i+I.y},t.prototype._spawnCircle=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,I.x=Math.random()*this.spawnCircle.radius,I.y=0,c.rotatePoint(360*Math.random(),I),I.x+=this.spawnCircle.x,I.y+=this.spawnCircle.y,0!==this.rotation&&c.rotatePoint(this.rotation,I),t.position.x=e+I.x,t.position.y=i+I.y},t.prototype._spawnRing=function(t,e,i){var n=this.spawnCircle;this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,n.minRadius!==n.radius?I.x=Math.random()*(n.radius-n.minRadius)+n.minRadius:I.x=n.radius,I.y=0;var o=360*Math.random();t.rotation+=o,c.rotatePoint(o,I),I.x+=this.spawnCircle.x,I.y+=this.spawnCircle.y,0!==this.rotation&&c.rotatePoint(this.rotation,I),t.position.x=e+I.x,t.position.y=i+I.y},t.prototype._spawnPolygonalChain=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,this.spawnPolygonalChain.getRandomPoint(I),0!==this.rotation&&c.rotatePoint(this.rotation,I),t.position.x=e+I.x,t.position.y=i+I.y},t.prototype._spawnBurst=function(t,e,i,n){0===this.particleSpacing?t.rotation=360*Math.random():t.rotation=this.angleStart+this.particleSpacing*n+this.rotation,t.position.x=e,t.position.y=i},t.prototype.cleanup=function(){var t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t),t.parent&&t.parent.removeChild(t);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},t.prototype.destroy=function(){var t;this.autoUpdate=!1,this.cleanup();for(var e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.startScale=this.startAlpha=this.startSpeed=this.customEase=this._completeCallback=null},t}(),L=new m.Point,E=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],M=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(E).join("|"),"g");(function(t){function e(e){var i=t.call(this,e)||this;return i.path=null,i.initialRotation=0,i.initialPosition=new m.Point,i.movement=0,i}g(e,t),e.prototype.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0&&this.path){if(this._doSpeed){var i=this.speedList.interpolate(e)*this.speedMultiplier;this.movement+=i*t}else{i=this.speedList.current.value*this.speedMultiplier;this.movement+=i*t}L.x=this.movement,L.y=this.path(this.movement),c.rotatePoint(this.initialRotation,L),this.position.x=this.initialPosition.x+L.x,this.position.y=this.initialPosition.y+L.y}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},e.parseArt=function(t){return P.parseArt(t)},e.parseData=function(t){var e={};if(t&&t.path)try{e.path=function(t){for(var e=t.match(M),i=e.length-1;i>=0;--i)E.indexOf(e[i])>=0&&(e[i]="Math."+e[i]);return t=e.join(""),new Function("x","return "+t+";")}(t.path)}catch(t){c.verbose&&console.error("PathParticle: error in parsing path expression"),e.path=null}else c.verbose&&console.error("PathParticle requires a path string in extraData!"),e.path=null;return e}})(P),function(t){function e(e){var i=t.call(this,e)||this;return i.textures=null,i.duration=0,i.framerate=0,i.elapsed=0,i.loop=!1,i}g(e,t),e.prototype.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},e.prototype.applyArt=function(t){this.textures=t.textures,this.framerate=t.framerate,this.duration=t.duration,this.loop=t.loop},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0){this.elapsed+=t,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var i=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[i]||m.Texture.EMPTY}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.textures=null},e.parseArt=function(t){for(var e=[],i=0;i<t.length;++i){for(var n=t[i],o=e[i]={},a=o.textures=[],s=n.textures,r=0;r<s.length;++r){var l=s[r];if("string"==typeof l)a.push(f(l));else if(l instanceof m.Texture)a.push(l);else{var h=l.count||1;for(l="string"==typeof l.texture?f(l.texture):l.texture;h>0;--h)a.push(l)}}"matchLife"===n.framerate?(o.framerate=-1,o.duration=0,o.loop=!1):(o.loop=!!n.loop,o.framerate=n.framerate>0?n.framerate:60,o.duration=a.length/o.framerate)}return e}}(P);var R=i(46),D=m.Application,O=m.Loader.shared,F=O.resources,j=m.Container,U=m.Texture,N=m.Graphics,V=m.Sprite,G=m.TilingSprite,X=m.AnimatedSprite,z=m.Text,H=m.TextStyle,W=m.NineSlicePlane,J=B,Y=m.Rectangle,q=m.filters,Z=R;function K(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,o=!1,a=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==r.return||r.return()}finally{if(o)throw a}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"removeItemFromArray",value:function(t,e){var i=t.findIndex(function(t){return e===t});-1!==i&&t.splice(i,1)}},{key:"angle2radius",value:function(t){return t/180*Math.PI}},{key:"radius2angle",value:function(t){return t/Math.PI*180}},{key:"createLinearGradientMask",value:function(t,e,i){var n=document.createElement("canvas");n.width=t,n.height=e;var o=n.getContext("2d"),a=o.createLinearGradient(0,0,0,e);return i.forEach(function(t){var e=t.offset,i=t.opacity;return a.addColorStop(e,"rgba(0, 0, 0, ".concat(i,")"))}),o.fillStyle=a,o.fillRect(0,0,t,e),n}},{key:"calcPointDistance",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}},{key:"getPathRect",value:function(t){for(var e=t[0],i=t[0],n=t[1],o=t[1],a=0;a<t.length-1;a+=2){var s=t[a],r=t[a+1];s>e?e=s:s<i&&(i=s),r>n?n=r:r<o&&(o=r)}return{x:i,y:o,width:e-i,height:n-o}}},{key:"calcRadians",value:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i>0?Math.atan(n/i):i<0?Math.atan(n/i)+Math.PI:0===i?n>0?Math.PI/2:n<0?Math.PI/2*3:0:void 0}},{key:"getLast",value:function(t){return t[t.length-1]}},{key:"keys",value:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}},{key:"values",value:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}},{key:"getTexturePointColor",value:function(t,e,i){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var o=n.getContext("2d");o.drawImage(t.baseTexture.resource.source,0,0,t.width,t.height);var a=o.getImageData(e,i,1,1).data;return 256*a[0]*256+256*a[1]+a[2]}},{key:"isPointInRect",value:function(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}},{key:"successive",value:function(t,e,i){return t<e&&t+i>e||t>e&&t+i<e||t===e?{value:e,final:!0}:{value:t+i,final:!1}}},{key:"randomWithWeight",value:function(t){for(var e=t.reduce(function(t,e){return t+e},0)*Math.random(),i=0,n=0;i<t.length;i++)if((n+=t[i])>e)return i;return-1}},{key:"getCDTimeString",value:function(t){var e=function(t){return t<10?"0".concat(t):"".concat(t)},i=(t=Math.ceil(t/1e3))%60,n=(t=(t-i)/60)%60;return"".concat(e((t-n)/60),":").concat(e(n),":").concat(e(i))}},{key:"getCDTimeStringWithoutHour",value:function(t){var e=function(t){return t<10?"0".concat(t):"".concat(t)},i=(t=Math.ceil(t/1e3))%60;return"".concat(e((t-i)/60),":").concat(e(i))}},{key:"isIOS",value:function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}},{key:"intList",value:function(t,e){for(var i=[],n=t;n<=e;n++)i.push(n);return i}},{key:"randomChoose",value:function(t){return t[Math.floor(Math.random()*t.length)]}},{key:"randomChooseMulti",value:function(t,e){for(var i=t.map(function(t){return t}),n=[];e&&i.length;){var o=Math.floor(Math.random()*i.length),a=K(i.splice(o,1),1)[0];n.push(a),e--}return n}},{key:"randomInRange",value:function(t,e){return t+(e-t)*Math.random()}},{key:"randomIntInRange",value:function(t,e){return t+Math.floor((e-t+1)*Math.random())}},{key:"randomList",value:function(t){for(var e=[];t.length;){var i=Math.floor(Math.random()*t.length);e.push(t[i]),t.splice(i,1)}return e}},{key:"copyProps",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}},{key:"getDistanceFromPointToLine",value:function(t,e,i){if(e.x>i.x){var n=e;e=i,i=n}var o=Math.atan((i.y-e.y)/(i.x-e.x)),a=t.y-e.y-Math.tan(o)*(t.x-e.x);return Math.cos(o)*a}},{key:"clone",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"formatName",value:function(t){return t[0].toUpperCase()+t.substring(1)}}],(i=null)&&$(e.prototype,i),n&&$(e,n),t}(),tt=i(20),et=tt.Vec2,it=tt.World,nt=tt.Edge,ot=tt.Circle,at=tt.Polygon,st=tt.Box,rt={showFPS:0,debug:0,removeAllEnemy:0,fixedMapID:-1,showDeadLine:0,showBikeState:0,cameraFollowEnemy:0,unlockAllSystem:1,showCollider:0,singlePlayerMode:1,openAllLevel:1,forceShowBeginnerGuide:0,forceShowUIGuide:2,forceShowUIGuideList:[],testUnlockSystemGuide:""};function lt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ht=["/board/get_total_mileage_board","/board/get_farest_mileage_board","/board/get_score_board","/board/get_total_mileage_board_history","/board/get_farest_mileage_board_history","/board/get_score_board_history"],ct=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,(i=[{key:"request",value:function(t,e,i,n,o,a){var s=this;if(n=n||function(){},o=o||function(){},rt.singlePlayerMode)return n({key:"0",response:{}});var r=new XMLHttpRequest;if(r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var t;try{t=JSON.parse(r.responseText)}catch(e){t={key:"0",response:{}}}t.response&&t.response.sessionId&&(s.sessionId=t.response.sessionId),"0"===t.key?n(t):(a||App.showNotice(t.message),o(t))}else a||App.showTip(App.getText("NetworkBusy")),o&&o({message:"Network request failed"})},"GET"===e){i&&void 0!==this.sessionId&&(i.sessionId=this.sessionId);var l=[];for(var h in i)i.hasOwnProperty(h)&&l.push("".concat(encodeURIComponent(h),"=").concat(encodeURIComponent(i[h])));l.length&&(t+="?"+l.join("&")),r.open(e,t),r.send(i)}else"POST"===e&&(i&&void 0!==this.sessionId&&i.append("sessionId",this.sessionId),r.open(e,t),r.send(i))}},{key:"requestRegister",value:function(t,e,i,n){var o=new FormData;o.append("username",t),o.append("password",e),this.request(u.serverUrl+"/user/register","POST",o,i,n)}},{key:"requestLogin",value:function(t,e,i){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.defaultEnemyHeadImagePath,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0,l=new FormData;l.append("username",t),l.append("password",e),this.request(u.serverUrl+"/user/login","POST",l,function(){localStorage.username=t,localStorage.password=e,n.requestLoadData(function(){Pt.set(Pt.playername,i),Pt.set(Pt.headurl,o),n.requestSaveSocialData({playername:i,headurl:o}),a.apply(void 0,arguments),window.TDGA&&TDGA.Account({accountId:t,accountType:1,accountName:t})},s)},s,r)}},{key:"requestLoadData",value:function(t,e){var i=this;this.request(u.serverUrl+"/player/load_data","GET",{},function(e){i.request(u.serverUrl+"/board/get_farest_mileage_board","GET",{},function(i){var n=i.response;e.response.data?Pt.init(JSON.parse(e.response.data),n.periodIdx,e.response.createTime):Pt.init({},n.periodIdx),Pt.setData(e.response),t(e)})},e)}},{key:"requestSaveData",value:function(t){var e=new FormData;e.append("data",JSON.stringify(t)),this.request(u.serverUrl+"/player/save_data","POST",e)}},{key:"requestUpdateTotalMileage",value:function(t,e,i){var n=new FormData;n.append("value",t),this.request(u.serverUrl+"/board/update_total_mileage","POST",n,e,i)}},{key:"requestUpdateFarthestMileage",value:function(t,e,i){var n=new FormData;n.append("value",t),this.request(u.serverUrl+"/board/update_farest_mileage","POST",n,e,i)}},{key:"requestUpdateScore",value:function(t,e,i){var n=new FormData;n.append("value",t),this.request(u.serverUrl+"/board/update_score","POST",n,e,i)}},{key:"requestSaveSocialData",value:function(t,e,i){var n=t.home,o=void 0===n?Pt.get(Pt.homeData):n,a=t.playername,s=void 0===a?Pt.get(Pt.playername):a,r=t.headurl,l=void 0===r?Pt.get(Pt.headurl):r,h=t.exp,c=void 0===h?Pt.get(Pt.exp):h,m=new FormData,p={home:o,playername:s,headurl:l,exp:c};m.append("data",JSON.stringify(p)),this.request(u.serverUrl+"/player/save_social_data","POST",m,e,i)}},{key:"requestLoadSocialData",value:function(t,e,i){this.request(u.serverUrl+"/player/load_social_data","GET",{name:t},e,i)}},{key:"requestGetRank",value:function(t,e,i){this.request(u.serverUrl+t,"GET",{},function(t){var i,n=(new Date).getTime(),o=u.rankStartTime.getTime(),a=1e3*u.rankRefreshInterval,s=o+Math.ceil((n-o)/a)*a;i=t.response&&t.response.boards?t.response.boards:[],e(i,s)},i)}},{key:"requestRandomPlayerInfo",value:function(t,e){var i=this,n=0,o=[];ht.forEach(function(a){i.requestGetRank(a,function(a){if(o=o.concat(a.map(function(t){return t.username})),++n===ht.length){o=(o=Array.from(new Set(o))).filter(function(t){return t!==localStorage.username}),o=Q.randomChooseMulti(o,t),n=0;var s=[];o.length?o.forEach(function(t){return i.requestLoadSocialData(t,function(t){var i=(t=JSON.parse(t.response)).playername,a=t.headurl;s.push({playername:i,headurl:a}),++n===o.length&&e(s)})}):e(s)}})})}}])&&lt(e.prototype,i),n&&lt(e,n),t}());function ut(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var mt={},pt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"registerEvent",value:function(t,e){void 0===mt[t]&&(mt[t]=[]),mt[t].push(e)}},{key:"unregisterEvent",value:function(t,e){mt[t]&&Q.removeItemFromArray(mt[t],e)}},{key:"dispatchEvent",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];mt[t]&&mt[t].forEach(function(t){return t.apply(void 0,i)})}}],(i=null)&&ut(e.prototype,i),n&&ut(e,n),t}();function dt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ft=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,(i=[{key:"start",value:function(){this.startGiftCountDown(),this.startResetRewardTimer(),this.startOnlineTime()}},{key:"restartGiftCountDown",value:function(){var t=Pt.get(Pt.giftIndex,0),e=u.giftList[t];e&&(Pt.set(Pt.remainGiftOnlineMinutes,e.onlineMinutes),this.startGiftCountDown())}},{key:"startGiftCountDown",value:function(){var t=this,e=Pt.get(Pt.giftIndex,0);u.giftList[e]&&(this.giftRemainTime=60*Pt.get(Pt.remainGiftOnlineMinutes,0),this.giftRemainTime<0?this.giftRemainTime=0:this.giftRemainTime>0&&(clearInterval(this.giftCountDownTimer),this.giftCountDownTimer=setInterval(function(){t.giftRemainTime--;var e=Pt.get(Pt.remainGiftOnlineMinutes,0),i=Math.ceil(t.giftRemainTime/60);e!==i&&Pt.set(Pt.remainGiftOnlineMinutes,i),t.giftRemainTime<=0&&(clearInterval(t.giftCountDownTimer),Pt.set(Pt.remainGiftOnlineMinutes,0))},1e3)))}},{key:"getGiftRemainTime",value:function(){return this.giftRemainTime}},{key:"hasGift",value:function(){var t=Pt.get(Pt.giftIndex,0);return void 0!==u.giftList[t]}},{key:"startResetRewardTimer",value:function(){var t=this;(new Date).getTime()>=Pt.get(Pt.nextResetTime,0)&&this.reset(),setInterval(function(){(new Date).getTime()>=Pt.get(Pt.nextResetTime,0)&&t.reset()},1e3)}},{key:"setResetRewardHour",value:function(){var t,e=new Date;e.setSeconds(0),e.setMinutes(0),e.setMilliseconds(0),e.getHours()>=u.resetRewardHour?(e.setHours(u.resetRewardHour),t=e.getTime()+864e5):(e.setHours(u.resetRewardHour),t=e.getTime()),Pt.set(Pt.nextResetTime,t)}},{key:"reset",value:function(){this.setResetRewardHour(),Pt.set(Pt.giftIndex,0),Pt.set(Pt.remainGiftOnlineMinutes,u.giftList[0].onlineMinutes),this.startGiftCountDown(),Pt.set(Pt.receivedCoinList,[]),Pt.set(Pt.receivedDiamondList,[]),Pt.set(Pt.onlineTime,0),Pt.set(Pt.drawAdvertTimes,0),pt.dispatchEvent("UpdatePoint")}},{key:"getOnlineTime",value:function(){return this.onlineTime}},{key:"startOnlineTime",value:function(){var t=this;this.onlineTime=Pt.get(Pt.onlineTime,0),setInterval(function(){var e=Math.floor(t.onlineTime/60);t.onlineTime++,e!==Math.floor(t.onlineTime/60)&&Pt.set(Pt.onlineTime,t.onlineTime)},1e3)}},{key:"isSignRewardReceived",value:function(t){return t<=Pt.get(Pt.receivedSignReward,-1)}},{key:"isSignRewardReceivable",value:function(t){if(0===t)return!0;var e=new Date(Pt.createTime);e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0);var i=new Date;return i.setMilliseconds(0),i.setSeconds(0),i.setMinutes(0),i.setHours(0),t<=(i-e)/1e3/60/60/24}},{key:"hasReceivableSignReward",value:function(){var t=Pt.get(Pt.receivedSignReward,-1)+1;return void 0!==u.signRewardList[t]&&ft.isSignRewardReceivable(t)}},{key:"hasSignReward",value:function(){return void 0!==u.signRewardList[Pt.get(Pt.receivedSignReward,-1)+1]}}])&&dt(e.prototype,i),n&&dt(e,n),t}()),yt=ft;function gt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var vt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,(i=[{key:"init",value:function(){this.timer=setInterval(this.check.bind(this),1e3),this.check()}},{key:"check",value:function(){var t=this.getCurrentTime();if(t>=Pt.get(Pt.rankCostNextRefreshTime,0)){var e=u.rankMode.costInfo.resetStartTime,i=u.rankMode.costInfo.resetCycle,n=e+(Math.floor((t-e)/i)+1)*i;Pt.set(Pt.rankCostNextRefreshTime,n),Pt.set(Pt.rankCostLevel,0)}}},{key:"getCurrentTime",value:function(){return(new Date).getTime()}}])&&gt(e.prototype,i),n&&gt(e,n),t}());function _t(t,e){return xt(t)||function(t,e){var i=[],n=!0,o=!1,a=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==r.return||r.return()}finally{if(o)throw a}}return i}(t,e)||bt()}function bt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function xt(t){if(Array.isArray(t))return t}function St(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||kt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function kt(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function wt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var At=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.conditionTable={1:function(){return!1},2:function(){return!1},3:function(t){return!At.isEndlessSceneLocked(t)},4:function(t){return At.get(At.distance,0)>=t},5:function(t){return At.get(At.distanceRecord,0)>=t},6:function(t){return At.get(At.totalScore,0)>t},7:function(t){return 0!==e.data.totalMileageBoardBestRanking&&e.data.totalMileageBoardBestRanking<=t},8:function(t){return 0!==e.data.farestMileageBoardBestRanking&&e.data.farestMileageBoardBestRanking<=t},9:function(t){return 0!==e.data.scoreBoardBestRanking&&e.data.scoreBoardBestRanking<=t},10:function(t){return At.get(At.mapGameTimes,0)>=t},11:function(t){return At.getPlayerLevel().level>=t},12:function(t,e){return!At.isPlayGameLevelFirstTime(t-1,e-1)},13:function(t){return At.getGameLevelStarTotalCount()>=t}}}var e,i,n;return e=t,(i=[{key:"setData",value:function(t){this.data=t}},{key:"init",value:function(t,e,i){var n=this;this.dataTable=t,"number"!=typeof this.dataTable[At.coin]&&(this.dataTable[At.coin]=0),this.createTime=new Date(i),At.get(At.periodIdx)!==e&&this.resetRankData(e),setInterval(function(){(new Date).getTime()>At.get(At.nextRankRefreshTime)&&n.resetRankData()},1e3),0===At.get(At.ownedBikeList,[]).length&&At.set(At.ownedBikeList,[0]);var o=At.get(At.bikeLevelMap,{});At.get(At.ownedBikeList,[]).forEach(function(t){void 0===o[t]&&(o[t]=0)}),At.set(At.bikeLevelMap,o),void 0===At.get(At.selectedBike)&&At.set(At.selectedBike,0),void 0===At.get(At.nextFreeDrawTime)&&At.set(At.nextFreeDrawTime,0),void 0===At.get(At.currentMapScene)&&At.set(At.currentMapScene,Math.floor(Math.random()*u.mapList.length)),void 0===At.get(At.selectedEndlessScene)&&At.set(At.selectedEndlessScene,Math.floor(Math.random()*u.endlessMode.sceneList.length)),void 0===At.get(At.homeData)&&At.set(At.homeData,{bgID:1,floorID:1,spoilsList:[],petsList:[],unlocked:{backgrounds:[],floors:[],spoils:[],pets:[]}}),void 0===At.get(At.preparationDataMap)&&this.refreshPreparationRewards(At.preparationDataMap),void 0===At.get(At.preparationDataEndless)&&this.refreshPreparationRewards(At.preparationDataEndless),void 0===At.get(At.preparationDataGameLevel)&&this.refreshPreparationRewards(At.preparationDataGameLevel),void 0===At.get(At.showedGuide)&&At.set(At.showedGuide,[]),yt.start(),vt.init()}},{key:"set",value:function(t,e){var i=this;this.dataTable[t]=e,clearTimeout(this.timer),this.timer=setTimeout(function(){return ct.requestSaveData(i.dataTable)},100),t!==At.unlockAllEndlessScene&&t!==At.unlockEndlessSceneIDList&&t!==At.distance||this.checkConditions(u.conditionsEnum.unlockMap),t===At.distance&&this.checkConditions(u.conditionsEnum.distance),t===At.distanceRecord&&this.checkConditions(u.conditionsEnum.distanceRecord),t===At.totalScore&&this.checkConditions(u.conditionsEnum.totalScore),t===At.mapGameTimes&&this.checkConditions(u.conditionsEnum.mapGameTimes),t===At.exp&&(this.checkConditions(u.conditionsEnum.level),ct.requestSaveSocialData({exp:e})),t===At.gameLevelData&&(this.checkConditions(u.conditionsEnum.gameLevel),this.checkConditions(u.conditionsEnum.gameLevelStar)),t===At.homeData&&ct.requestSaveSocialData({home:e}),t===At.rankDistance&&0!==e&&ct.requestUpdateTotalMileage(e),t===At.rankDistanceRecord&&0!==e&&ct.requestUpdateFarthestMileage(e),t===At.rankTotalScore&&0!==e&&ct.requestUpdateScore(e)}},{key:"add",value:function(t,e){var i=this.get(t,0)+e;return this.set(t,i),i}},{key:"get",value:function(t,e){var i=this.dataTable[t];return void 0===i&&(i=e),i}},{key:"isHomeItemLocked",value:function(t,e){var i=u.home[t].find(function(t){return t.id===e}).unlockConditions;if(i&&0!==i.length&&-1===At.get(At.homeData).unlocked[t].indexOf(e))return!0}},{key:"isHomeItemSatisfiedCostCondition",value:function(t,e){var i=this;if(!u.home[t].find(function(t){return t.id===e}).unlockConditions.filter(function(t){return-1===[u.conditionsEnum.costCoin,u.conditionsEnum.costDiamond].indexOf(t[0])}).some(function(t){return!i.checkCondition.apply(i,St(t))}))return!0}},{key:"isHomeItemUnlockable",value:function(t,e){var i=u.home[t].find(function(t){return t.id===e}).unlockConditions;return this.checkConditionsUnlockable(i)}},{key:"checkCondition",value:function(t){for(var e,i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return(e=this.conditionTable)[t].apply(e,n)}},{key:"checkConditions",value:function(t){var e,i=this;for(var n in u.lockSystems)if(u.lockSystems.hasOwnProperty(n)){var o=xt(e=u.lockSystems[n].condition)||kt(e)||bt(),a=o[0],s=o.slice(1);if(a===t&&this.checkCondition.apply(this,[a].concat(St(s)))){var r=At.get(At.unlockSystems,[]);-1===r.indexOf(n)&&(r.push(n),At.set(At.unlockSystems,r),u.lockSystems[n].title&&pt.dispatchEvent("UnlockSystem",n))}}u.home.types.some(function(e){return u.home[e].some(function(n){if(At.isHomeItemLocked(e,n.id)&&n.unlockConditions&&n.unlockConditions.find(function(e){return _t(e,1)[0]===t}))return i.isHomeItemUnlockable(e,n.id)})})&&pt.dispatchEvent("UpdatePoint")}},{key:"isEndlessSceneLocked",value:function(t){return!1===At.get(At.unlockAllEndlessScene,!1)&&-1===At.get(At.unlockEndlessSceneIDList,[]).indexOf(t)&&At.get(At.distance,0)<u.endlessMode.sceneList.find(function(e){return e.id===t}).unlockDistance}},{key:"resetRankData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At.get(At.periodIdx)+1;At.set(At.rankDistance,0),At.set(At.rankDistanceRecord,0),At.set(At.rankTotalScore,0),At.set(At.periodIdx,e);var i=(new Date).getTime(),n=u.rankStartTime.getTime(),o=1e3*u.rankRefreshInterval,a=n+Math.ceil((i-n)/o)*o;At.set(At.nextRankRefreshTime,a),ct.request(u.serverUrl+"/player/load_data","GET",{},function(e){t.setData(e.response)})}},{key:"getPlayerName",value:function(){return At.get(At.playername,"")}},{key:"refreshPreparationRewards",value:function(t){var e,i;t===At.preparationDataMap?(e=u.preparationRandomEffectList.map,i=u.preparationRandomBikeList.map):t===At.preparationDataGameLevel?(e=u.preparationRandomEffectList.gameLevel,i=u.preparationRandomBikeList.gameLevel):(e=u.preparationRandomEffectList.endless,i=u.preparationRandomBikeList.endless);var n=Q.randomChooseMulti(e,2),o=Q.randomChoose(i);At.set(t,[{effect:n[0]},{effect:n[1]},{bike:o}])}},{key:"plusBike",value:function(t){var e=!1,i=!1,n=At.get(At.ownedBikeList,[]),o=At.get(At.bikeLevelMap,{}),a=u.bikeList.find(function(e){return e.id===t});return-1===n.indexOf(t)?(n.push(t),At.set(At.ownedBikeList,n),o[t]=0,At.set(At.bikeLevelMap,o)):void 0!==(a.coinPercent||u.bike.coinPercent)[o[t]+1]?(o[t]++,At.set(At.bikeLevelMap,o),e=!0,void 0===(a.coinPercent||u.bike.coinPercent)[o[t]+1]&&(i=!0)):i=!0,{levelUp:e,highestLevel:i}}},{key:"getGameLevelStarTotalCount",value:function(){var t=At.get(At.gameLevelData,{}),e=0;for(var i in t)if(t.hasOwnProperty(i))for(var n in t[i])t[i].hasOwnProperty(n)&&(e+=t[i][n]);return e}},{key:"getGameLevelStarCount",value:function(t,e){var i=At.get(At.gameLevelData,{});return i[t]&&i[t][e]||0}},{key:"isGameLevelLocked",value:function(t,e){if(rt.openAllLevel)return!1;if(this.isGameLevelMapLocked(t))return!0;if(0===e)return!1;var i=At.get(At.gameLevelData,{});return void 0===i[t]||void 0===i[t][e-1]}},{key:"isGameLevelMapLocked",value:function(t){if(0===t)return!1;var e=At.get(At.gameLevelData,{});return void 0===e[t]||!e[t][-1]}},{key:"hasEnoughStarUnlockGameLevelMap",value:function(t){var e=u.gameLevelMode.mapList[t].starCountUnlockNeeded;return this.getGameLevelStarTotalCount()>=e}},{key:"unlockGameLevelMap",value:function(t){var e=At.get(At.gameLevelData,{});void 0===e[t]&&(e[t]={}),void 0===e[t][-1]&&(e[t][-1]=1),At.set(At.gameLevelData,e)}},{key:"setGameLevelStarCount",value:function(t,e,i){var n=At.get(At.gameLevelData,{});void 0===n[t]&&(n[t]={}),(void 0===n[t][e]||n[t][e]<i)&&(n[t][e]=i),At.set(At.gameLevelData,n)}},{key:"isPlayGameLevelFirstTime",value:function(t,e){var i=At.get(At.gameLevelData,{});return void 0===i[t]||void 0===i[t][e]}},{key:"isLatestMap",value:function(t){return t===u.gameLevelMode.mapList[t].length-1}},{key:"isLatestLevelInMap",value:function(t,e){return u.gameLevelMode.mapList[t].levelList.length-1===e}},{key:"getPlayerLevel",value:function(t){t=void 0===t?At.get(At.exp,0):t;for(var e=0;e<u.playerLevelNeededExp.length;e++)if(t>=u.playerLevelNeededExp[e]&&(void 0===u.playerLevelNeededExp[e+1]||t<u.playerLevelNeededExp[e+1])){var i=e+1,n=void 0,o=void 0;return void 0===u.playerLevelNeededExp[e+1]?n=o=u.playerLevelNeededExp[e]-u.playerLevelNeededExp[e-1]:(n=u.playerLevelNeededExp[e+1]-u.playerLevelNeededExp[e],o=t-u.playerLevelNeededExp[e]),{level:i,totalExp:n,curExp:o}}}},{key:"getBikeUpgradeTimes",value:function(t){return(At.get(At.bikeUpgrade,{})[t]||{}).times||0}},{key:"getBikeUpgradeItem",value:function(t,e){return[(At.get(At.bikeUpgrade,{})[t]||{})[e]||0,u.upgradeBike.maxValue]}},{key:"setBikeUpgradeItem",value:function(t,e,i){var n=At.get(At.bikeUpgrade,{}),o=n[t]||{};o[e]=i,o.times=o.times||0,o.times++,n[t]=o,At.set(At.bikeUpgrade,n)}},{key:"upgradeBikeItem",value:function(t){var e=this,i=u.upgradeBike.items.map(function(t,e){return e}).filter(function(i,n){var o=_t(e.getBikeUpgradeItem(t,n),2);return o[0]<o[1]}),n=Q.randomChoose(i),o=_t(At.getBikeUpgradeItem(t,n),1)[0];return At.setBikeUpgradeItem(t,n,Math.floor(10*(o+u.upgradeBike.addedValueEachTime))/10),n}},{key:"getEffectDuration",value:function(t,e,i){var n=u.effect[e].duration;if(!i){var o=u.upgradeBike.items.indexOf(e);if(-1!==o)n+=_t(At.getBikeUpgradeItem(t,o),1)[0]}return n}},{key:"getBikeUpgradeCost",value:function(t){var e=At.getBikeUpgradeTimes(t);return u.upgradeBike.costCoin[e]||Q.getLast(u.upgradeBike.costCoin)}},{key:"getRankModeCostCoin",value:function(){var t=u.rankMode.costInfo.coin[At.get(At.rankCostLevel,0)];return void 0===t?Q.getLast(u.rankMode.costInfo.coin):t}},{key:"hasShopReceivableCoin",value:function(){return u.rewardGoldList.some(function(t,e){return-1===At.get(At.receivedCoinList,[]).indexOf(e)&&yt.getOnlineTime()>=60*t.onlineMinutes})}},{key:"hasShopReceivableDiamond",value:function(){return u.rewardDiamondList.some(function(t,e){return-1===At.get(At.receivedDiamondList,[]).indexOf(e)&&yt.getOnlineTime()>=60*t.onlineMinutes})}},{key:"hasHomeReceivableItem",value:function(){var t=this,e=At.get(At.homeData).unlocked;return u.home.types.some(function(i){return u.home[i].some(function(n){return-1===e[i].indexOf(n.id)&&t.isHomeItemUnlockable(i,n.id)})})}},{key:"hasHomeSubTypeReceivableItem",value:function(t){var e=this,i=At.get(At.homeData).unlocked[t];return u.home[t].some(function(n){return-1===i.indexOf(n.id)&&e.isHomeItemUnlockable(t,n.id)})}},{key:"checkConditionsUnlockable",value:function(t){var e=this;return!!t&&!t.some(function(t){return t[0]===u.conditionsEnum.costCoin?At.get(At.coin,0)<t[1]:t[0]===u.conditionsEnum.costDiamond?At.get(At.diamond,0)<t[1]:!e.checkCondition.apply(e,St(t))})}},{key:"isDrawAble",value:function(){return(new Date).getTime()>=At.get(At.nextFreeDrawTime)||At.get(At.drawAdvertTimes,0)<u.advertDrawBikeTime}},{key:"hasBikeUpgradable",value:function(){var t=this;return At.get(At.ownedBikeList,[]).some(function(e){return t.isBikeUpgradable(e)})}},{key:"hasOwnedBike",value:function(t){return At.get(At.unlockAllBike,!1)||-1!==At.get(At.ownedBikeList,[]).indexOf(t)}},{key:"isBikeUpgradable",value:function(t){if(Et.isSystemLocked("upgradePanelButton"))return!1;if(!At.hasOwnedBike(t))return!1;var e=Q.getLast(u.upgradeBike.playerLevelLimitTimes),i=At.getPlayerLevel().level,n=u.upgradeBike.playerLevelLimitTimes[i-1];return At.getBikeUpgradeTimes(t)<(void 0===n?e:n)&&At.get(At.coin,0)>=At.getBikeUpgradeCost(t)}},{key:"getBulletTimeMaxValue",value:function(t){void 0===t&&(t=this.getPlayerLevel().level);var e=u.bulletTime.maxValue,i=Q.getLast(e),n=e[t-1];return void 0===n?i:n}},{key:"hasCompletedFirstGameGuide",value:function(){for(var t in u.UIGuide){if(u.UIGuide.hasOwnProperty(t))if(u.UIGuide[t].startInFirstTimeShowMainScene)return At.hasCompletedGuide(t)}}},{key:"hasCompletedGuide",value:function(t){return!rt.forceShowUIGuideList.includes(t)&&(0===rt.forceShowUIGuide?-1!==At.get(At.showedGuide).indexOf(t):1!==rt.forceShowUIGuide&&(2===rt.forceShowUIGuide||void 0))}},{key:"completeGuide",value:function(t){var e=At.get(At.showedGuide);e.push(t),At.set(At.showedGuide,e)}},{key:"getBikeVelocityLevel",value:function(t){for(var e=u.bikeList.find(function(e){return e.id===t}),i=0,n=0;n<u.bikeVelocityLevel.length;n++){if(e.velocityPercent<=u.bikeVelocityLevel[n])return i;i++}return i}},{key:"getBikeJumpLevel",value:function(t){for(var e=u.bikeList.find(function(e){return e.id===t}),i=0,n=0;n<u.bikeJumpLevel.length;n++){if(e.densityPercent>=u.bikeJumpLevel[n])return i;i++}return i}},{key:"hasDrawed",value:function(){return At.get(At.hasDrawedFlag,!1)}},{key:"markDrawed",value:function(){if(!At.hasDrawed())return At.set(At.hasDrawedFlag,!0)}},{key:"isBikeHasAbility",value:function(t,e){var i=u.bikeList.find(function(e){return e.id===t});switch(e){case"TripleJump":return 3===this.getBikeJumpCount(t);case"FourJump":return 4===this.getBikeJumpCount(t);case"Rotate":return i.rotatable;case"SlowFalling":return i.slowFalling}}},{key:"getBikeJumpCount",value:function(t){return u.bikeList.find(function(e){return e.id===t}).bikeJumpExtraCountdown.length+u.jumpCommonMaxCount}}])&&wt(e.prototype,i),n&&wt(e,n),t}());At.selectedEndlessScene="0",At.distance="1",At.diamond="2",At.coin="3",At.totalScore="4",At.currentMapScene="5",At.selectedBike="6",At.ownedBikeList="7",At.nextFreeDrawTime="8",At.hasBuyPresentIDList="9",At.unlockAllBike="10",At.unlockAllEndlessScene="11",At.unlockEndlessSceneIDList="12",At.bgmOn="13",At.soundOn="14",At.distanceRecord="15",At.bikeLevelMap="16",At.homeData="17",At.costCoin="18",At.costDiamond="19",At.nextRankRefreshTime="20",At.rankDistance="21",At.rankDistanceRecord="22",At.rankTotalScore="23",At.periodIdx="24",At.playername="25",At.headurl="26",At.preparationDataMap="27",At.preparationDataEndless="28",At.giftIndex="29",At.remainGiftOnlineMinutes="30",At.receivedCoinList="31",At.receivedDiamondList="32",At.nextResetTime="33",At.onlineTime="34",At.receivedSignReward="35",At.drawAdvertTimes="36",At.hasShowHomeHelpScene="37",At.mapGameTimes="38",At.unlockSystems="39",At.endlessGameTimes="40",At.preparationDataGameLevel="41",At.gameLevelData="42",At.exp="43",At.bikeUpgrade="44",At.rankCostLevel="45",At.rankCostNextRefreshTime="46",At.mapModeWatchedAdTimes="47",At.throughGuide="48",At.showedGuide="49",At.hasDrawedFlag="50";var Pt=At;function Tt(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||It(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ct(t){return function(t){if(Array.isArray(t))return t}(t)||It(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function It(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Bt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Lt=new q.ColorMatrixFilter;Lt.greyscale(.4);var Et=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"physicsPos2renderPos",value:function(t){return{x:t.x*u.meter2pixel,y:u.designHeight-t.y*u.meter2pixel}}},{key:"renderPos2PhysicsPos",value:function(t){return et(t.x*u.pixel2meter,(u.designHeight-t.y)*u.pixel2meter)}},{key:"renderY2PhysicsY",value:function(t){return(u.designHeight-t)*u.pixel2meter}},{key:"hexString2Int",value:function(t){return parseInt(t.replace("#",""),16)}},{key:"pointsStr2path",value:function(t){return t.split(",").map(function(t){return parseInt(t)})}},{key:"path2vertices",value:function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(et(t[i],t[i+1]));return e}},{key:"getItemType",value:function(t){return t.label.split("//")[0]}},{key:"isItemType",value:function(t,e){return-1!==t.label.split("//").indexOf(e)}},{key:"getItemProp",value:function(t,e){var i=t.label.split("//").find(function(t){return t.startsWith(e)});if(i)return i.split(":")[1]}},{key:"getBikeConfig",value:function(t,e,i){void 0===e&&(e=Pt.get(Pt.selectedBike,0)),void 0===i&&(i=Pt.get(Pt.bikeLevelMap,{})[e]||0);var n=(u.bikeList.find(function(t){return t.id===e})[t]||u.bike[t])[i];return u.home.types.forEach(function(e){u.home[e].forEach(function(i){i.unlockRewards&&0!==i.unlockRewards.length&&!Pt.isHomeItemLocked(e,i.id)&&(n+=i.unlockRewards[t])})}),Math.floor(100*n)/100}},{key:"getHomeConfig",value:function(t){var e=0;return u.home.types.forEach(function(i){u.home[i].forEach(function(n){n.unlockRewards&&0!==n.unlockRewards.length&&!Pt.isHomeItemLocked(i,n.id)&&(e+=n.unlockRewards[t])})}),e}},{key:"getFrames",value:function(t,e){return void 0===e&&(e=Q.keys(F[t].data.animations)[0]),F[t].data.animations[e].map(function(e){return F[t].textures[e]})}},{key:"moveToTargetPos",value:function(t,e,i){var n=Q.calcRadians(t,e),o=i*Math.cos(n),a=i*Math.sin(n),s=Q.successive(t.x,e.x,o),r=s.value,l=s.final,h=Q.successive(t.y,e.y,a),c=h.value,u=h.final;return{x:r,y:c,final:l&&u}}},{key:"getBikeDsc",value:function(t){return App.getText("BikeDsc",{index:t.index,name:App.getText(t.name),speed:Math.floor(100*t.velocityPercent),jump:Math.floor(100*(2-t.densityPercent)),highJump:App.getText(t.highJump),size:App.getText(t.size)})}},{key:"greySprite",value:function(t,e){t.filters=e?[Lt]:[]}},{key:"findChildByName",value:function(e,i){for(var n=0;n<e.children.length;n++){var o=e.children[n];if(o.uiname===i)return o;var a=t.findChildByName(o,i);if(a)return a}}},{key:"getLockNotice",value:function(t){var e=Ct(u.lockSystems[t].condition),i=e[0],n=e.slice(1),o=App.getText(u.conditions[i],n);return App.getText("LockNotice",{condition:o})}},{key:"isSystemLocked",value:function(t){if(rt.unlockAllSystem)return!1;var e=Ct(u.lockSystems[t].condition),i=e[0],n=e.slice(1);return!Pt.checkCondition.apply(Pt,[i].concat(Tt(n)))}},{key:"showRedPoint",value:function(e,i){var n=t.findChildByName(e,"redPoint");i&&void 0===n&&(u.defaultRedPoint.imagePath?(n=V.from(u.defaultRedPoint.imagePath)).anchor.set(.5,.5):((n=new N).beginFill(16711680),n.drawCircle(0,0,10),n.endFill()),n.x=e.mywidth*u.defaultRedPoint.positionX,n.y=e.myheight*u.defaultRedPoint.positionY,n.scale.set(u.defaultRedPoint.scale,u.defaultRedPoint.scale),n.uiname="redPoint",e.addChild(n)),n&&(n.visible=i)}}],(i=null)&&Bt(e.prototype,i),n&&Bt(e,n),t}();function Mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dt(t,e,i){return e&&Rt(t.prototype,e),i&&Rt(t,i),t}var Ot=function(){function t(e,i,n){Mt(this,t),this.context=e,this.urlList=i,this.onload=n,this.bufferList=[],this.loadCount=0}return Dt(t,[{key:"loadBuffer",value:function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";var n=this;i.onload=function(){n.context.decodeAudioData(i.response,function(t){t&&(n.bufferList[e]=t,++n.loadCount===n.urlList.length&&n.onload(n.bufferList))})},i.onerror=function(){alert("BufferLoader: XHR error")},i.send()}},{key:"load",value:function(){if(0===this.urlList.length)return this.onload([]);for(var t=0;t<this.urlList.length;++t)this.loadBuffer(this.urlList[t],t)}}]),t}(),Ft=new(function(){function t(){Mt(this,t);var e=window.AudioContext||window.webkitAudioContext;this.context=new e,this.bufferTable={},this.soundList=[],pt.registerEvent("GameStop",this.onGameStop.bind(this)),pt.registerEvent("GameStart",this.onGameStart.bind(this))}return Dt(t,[{key:"loadAudioRes",value:function(t,e){var i=this;new Ot(this.context,t,function(n){t.forEach(function(t,e){i.bufferTable[t]=n[e]}),e()}).load()}},{key:"hasLoadedAudio",value:function(t){return void 0!==this.bufferTable[t]}},{key:"playBGM",value:function(t,e){this.bgmSource&&this.bgmSource.buffer===this.bufferTable[t]&&!e||(this.bgmSource&&(this.bgmSource.stop(),this.bgmSource.disconnect()),this.bgmSource=this.context.createBufferSource(),this.bgmSource.buffer=this.bufferTable[t],this.bgmSource.loop=!0,Pt.get(Pt.bgmOn,!0)&&this.bgmSource.connect(this.context.destination),this.bgmSource.start())}},{key:"pauseBGM",value:function(){this.bgmSource&&(this.bgmSource.stop(),this.bgmSource.disconnect()),this.bgmSource=void 0}},{key:"playSound",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=this.context.createBufferSource();this.soundList.push(o),o.buffer=this.bufferTable[t],o.playbackRate.value=n,Pt.get(Pt.soundOn,!0)&&o.connect(this.context.destination),o.start(),o.addEventListener("ended",function(){Q.removeItemFromArray(i.soundList,o),e&&e()})}},{key:"playLoopSound",value:function(t){var e=this.context.createBufferSource();return e.buffer=this.bufferTable[t],e.loop=!0,Pt.get(Pt.soundOn,!0)&&e.connect(this.context.destination),e.start(),e}},{key:"stopLoopSound",value:function(t){t.stop(),t.disconnect()}},{key:"muteBGM",value:function(t){this.bgmSource&&(t?this.bgmSource.disconnect():this.bgmSource.connect(this.context.destination))}},{key:"muteSound",value:function(t){t&&this.soundList.forEach(function(t){return t.disconnect()})}},{key:"onGameStop",value:function(){this.muteBGM(!0)}},{key:"onGameStart",value:function(){Pt.get(Pt.bgmOn,!0)&&this.muteBGM(!1)}}]),t}());function jt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ut(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Nt(t,e){return void 0===t?e:t}var Vt=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMgr=e,this.parent=i,this.world=n,this.thrower=o;var a=function(t,e,i){var n=t.addChild(new V);switch(n.anchor.set(.5,.5),n.scale.set(Nt(i.props.scaleX,1),Nt(i.props.scaleY,1)),n.rotation=Nt(i.props.rotation,0),n.alpha=Nt(i.props.alpha,1),n.visible=Nt(i.props.visible,!0),i.type){case"Image":i.props.skin&&(n.texture=F["myLaya/laya/assets/".concat(i.props.skin)].texture),n.position.set(Nt(i.props.x,0),Nt(i.props.y,0));break;case"Animation":if(i.props.source){n.textures=Et.getFrames("myLaya/laya/assets/".concat(i.props.source),i.props.autoAnimation),n.textureIndex=0,n.texture=n.textures[n.textureIndex],n.interval=Nt(i.props.interval,1);var o=Nt(i.props.x,0),a=Nt(i.props.y,0),s={x:0,y:0},r={x:n.texture.width/2*n.scale.x,y:n.texture.height/2*n.scale.y},l=Q.calcPointDistance(s,r),h=Q.calcRadians(s,r),c=o+Math.cos(h)*l,m=a+Math.sin(h)*l;n.position.set(c,m)}}var p,d=i.child.find(function(t){return"RigidBody"===t.type}),f=e.createBody();switch(d.props.type){case"static":f.setStatic();break;case"kinematic":f.setKinematic();break;case"dynamic":default:f.setDynamic()}return i.child.forEach(function(t){switch(t.type){case"BoxCollider":var e=u.pixel2meter/2*n.scale.x,i=Nt(t.props.width,100)*e,o=Nt(t.props.height,100)*e;p=f.createFixture({shape:st(i,o),isSensor:Nt(t.props.isSensor,!1),friction:0,density:1});break;case"CircleCollider":var a=Nt(t.props.radius,50)*n.scale.x*u.pixel2meter;p=f.createFixture({shape:ot(a),isSensor:Nt(t.props.isSensor,!1),friction:0,density:1})}}),d.props.linearVelocity&&f.setLinearVelocity(et.apply(void 0,Ut(d.props.linearVelocity))),d.props.angularVelocity&&f.setAngularVelocity(d.props.angularVelocity),{sprite:n,body:f,fixture:p}}(i,n,F[u.effect.BananaPeel.peelPrefabPath].data),s=a.sprite,r=a.body,l=a.fixture;this.sprite=s,this.sprite.part=this,this.body=r,this.body.setUserData(this),this.fixture=l,this.fixture.setUserData({isFatal:!0});var h=this.thrower.getBikePhysicalPosition();h=et(h.x,h.y+1),this.body.setPosition(h);var c=Et.physicsPos2renderPos(h),m=c.x,p=c.y;this.sprite.position.set(m,p),this.throwPhysicalY=h.y,this.thrower===this.gameMgr&&(this.sprite.alpha=.5)}var e,i,n;return e=t,(i=[{key:"destroy",value:function(){this.sprite.destroy(),this.world.destroyBody(this.body)}},{key:"update",value:function(){if(this.contactPlayer)return this.gameMgr.removeItem(this);if(this.sprite.textures){this.sprite.textureIndex+=this.gameMgr.stepSpeed;var t=Math.floor(this.sprite.textureIndex/this.sprite.interval);void 0===this.sprite.textures[t]&&(this.sprite.textureIndex=0,t=0),this.sprite.texture=this.sprite.textures[t]}var e=this.body.getPosition(),i=Et.physicsPos2renderPos(e),n=i.x,o=i.y;this.sprite.position.set(n,o),this.sprite.rotation=-this.body.getAngle(),(this.contactSomething||e.y<=this.throwPhysicalY)&&this.body.setStatic()}},{key:"onPreSolve",value:function(){}},{key:"onBeginContact",value:function(t,e){var i=e.getBody().getUserData();i===this.thrower||e.isSensor()||(this.contactSomething=!0,i&&i.isPlayer&&i.isPlayer()&&(this.contactPlayer=!0,this.gameMgr.addEffect(i,u.effect.BananaPeel.bearerSufferedEffectPath),i===this.gameMgr&&Ft.playSound(u.effect.BananaPeel.sufferSound,void 0,this.gameMgr.stepSpeed)))}}])&&jt(e.prototype,i),n&&jt(e,n),t}();function Gt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xt(t,e){return void 0===t?e:t}var zt=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMgr=n,this.animationEndCallback=i;var o=F[e].data,a=o.child.findIndex(function(t){return"Bike"!==t.label}),s=o.child[a],r=new V;switch(r.scale.set(Xt(s.props.scaleX,1),Xt(s.props.scaleY,1)),r.alpha=Xt(s.props.alpha,1),r.visible=Xt(s.props.visible,!0),r.position.set(Xt(s.props.x,0),Xt(s.props.y,0)),s.type){case"Sprite":r.texture=F["myLaya/laya/assets/".concat(s.props.texture)].texture;break;case"Animation":r.textures=Et.getFrames("myLaya/laya/assets/".concat(s.props.source),s.props.autoAnimation),r.textureIndex=0,r.texture=r.textures[r.textureIndex],r.interval=Xt(s.props.interval,1)}this.sprite=r,this.index=a}var e,i,n;return e=t,(i=[{key:"update",value:function(){if(this.sprite.textures){this.sprite.textureIndex+=this.gameMgr.stepSpeed;var t=Math.floor(this.sprite.textureIndex/this.sprite.interval);void 0===this.sprite.textures[t]&&(this.sprite.textureIndex=0,t=0,this.animationEndCallback&&this.animationEndCallback()),this.sprite.texture=this.sprite.textures[t]}}},{key:"destroy",value:function(){this.sprite.destroy()}}])&&Gt(e.prototype,i),n&&Gt(e,n),t}();function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t,e){return(Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qt=function(t){function e(t,i,n,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=Wt(this,Jt(e).call(this,i,n,o)),t.addBikeChild(a.sprite,a.index),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yt(t,e)}(e,zt),e}();function Zt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Kt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.basicValue=e,this.rate=i,this.basicValueRate=n,this.calcFinalValue()}var e,i,n;return e=t,(i=[{key:"setBasicValue",value:function(t){return this.basicValue=t,this.calcFinalValue()}},{key:"setBasicValueRate",value:function(t){return this.basicValueRate=t,this.calcFinalValue()}},{key:"getBasicValueRate",value:function(){return this.basicValueRate}},{key:"increaseValueByRate",value:function(t){return this.rate+=t,this.calcFinalValue()}},{key:"calcFinalValue",value:function(){return this.value=this.basicValue*this.basicValueRate*this.rate,this.value}}])&&Zt(e.prototype,i),n&&Zt(e,n),t}();function $t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Qt=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMgr=o,this.parent=e,this.world=i,this.frames=Et.getFrames(u.sceneItemImagePath.groundStab),this.frameIndex=-1,this.sprite=this.parent.addChild(new V),this.sprite.anchor.set(n.props.anchorX,n.props.anchorY),this.sprite.scale.set(n.props.scaleX,n.props.scaleY),this.sprite.position.set(n.props.x,n.props.y),this.sprite.rotation=void 0===n.props.rotation?0:Q.angle2radius(n.props.rotation),this.body=this.world.createBody(),this.body.setUserData(this),this.body.setPosition(Et.renderPos2PhysicsPos(this.sprite.position)),this.body.setAngle(-this.sprite.rotation),this.update(),Et.isItemType(n,"Static")&&(this.frameIndex=u.item.groundStab.staticFrame/u.item.groundStab.animationSpeed-1,this.update(),this.update=void 0)}var e,i,n;return e=t,(i=[{key:"update",value:function(){var t=Math.floor(this.frameIndex*u.item.groundStab.animationSpeed);this.frameIndex+=this.gameMgr.stepSpeed;var e=Math.floor(this.frameIndex*u.item.groundStab.animationSpeed);if(t!==e){void 0===this.frames[e]&&(this.frameIndex=0,e=0),this.sprite.texture=this.frames[e],this.fixture&&this.body.destroyFixture(this.fixture);var i=this.sprite.texture.width*this.sprite.scale.x*u.pixel2meter,n=this.sprite.texture.height*this.sprite.scale.y*u.pixel2meter;if(0!==i&&0!==n){var o=at([et(-i/2,0),et(i/2,0),et(0,n)]);this.fixture=this.body.createFixture(o),this.fixture.setUserData({isFatal:!0})}}}},{key:"onPreSolve",value:function(){}},{key:"onBeginContact",value:function(){}},{key:"destroy",value:function(){this.sprite.destroy(),this.world.destroyBody(this.body)}}])&&$t(e.prototype,i),n&&$t(e,n),t}();function te(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ee=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMgr=n,this.config=e,this.world=i,this.create(),this.sprite.part=this}var e,i,n;return e=t,(i=[{key:"create",value:function(){switch(this.config.type){case"Circle":this.sprite=new N;var t=Et.hexString2Int(this.config.props.fillColor);this.sprite.beginFill(t).drawCircle(0,0,this.config.props.radius).endFill(),this.sprite.position.set(this.config.props.x,this.config.props.y);var e=this.world.createBody();this.body=e,e.createFixture(ot(this.config.props.radius*u.pixel2meter),{density:0,friction:1}),e.setPosition(Et.renderPos2PhysicsPos(this.config.props)),e.setUserData({type:Et.getItemType(this.config),sprite:this.sprite});break;case"Poly":this.sprite=new N;var i=Et.hexString2Int(this.config.props.fillColor),n=Et.pointsStr2path(this.config.props.points);this.sprite.beginFill(i).drawPolygon(n).endFill(),this.sprite.position.set(this.config.props.x,this.config.props.y);var o=this.world.createBody();this.body=o;var a=Et.path2vertices(n.map(function(t){return t*u.pixel2meter}));o.createFixture(at(a),{density:0,friction:1}),o.setPosition(Et.renderPos2PhysicsPos(this.config.props)),o.setUserData({type:Et.getItemType(this.config),sprite:this.sprite});break;case"Sprite":var s=F[this.config.props.texture].texture;this.sprite=new V(s),this.sprite.position.set(this.config.props.x,this.config.props.y),void 0!==this.config.props.scaleX&&(this.sprite.scale.x=this.config.props.scaleX),void 0!==this.config.props.scaleY&&(this.sprite.scale.y=this.config.props.scaleY);var r=this.world.createBody();this.body=r;var l=s.width/2*this.sprite.scale.x*u.pixel2meter,h=s.height/2*this.sprite.scale.y*u.pixel2meter;r.createFixture(st(l,h),{density:0,friction:1}),r.setPosition(Et.renderPos2PhysicsPos(this.config.props)),this.type=Et.getItemType(this.config),r.setUserData(this)}}},{key:"getRightBorderX",value:function(){return this.sprite.position.x-this.sprite.anchor.x*this.sprite.width+this.sprite.width}},{key:"getLeftBorderX",value:function(){return this.sprite.position.x-this.sprite.anchor.x*this.sprite.width}},{key:"destroy",value:function(){this.world.destroyBody(this.body),this.sprite.destroy()}}])&&te(e.prototype,i),n&&te(e,n),t}();function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oe(t,e){return!e||"object"!==ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var re=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),oe(this,ae(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(e,ee),i=e,(n=[{key:"create",value:function(){this.initAni(),this.sprite=new X(this.frames),this.sprite.position.set(this.config.props.x,this.config.props.y),this.sprite.scale.set(this.config.props.scaleX,this.config.props.scaleY),this.sprite.animationSpeed=this.animationSpeed*this.gameMgr.stepSpeed,this.sprite.play();var t=this.world.createBody();this.body=t;var e=this.frames[0],i=e.width*this.config.props.scaleX/2*u.pixel2meter,n=-e.height*this.config.props.scaleY/2*u.pixel2meter,o=this.bodyWidth*u.pixel2meter/2,a=this.bodyHeight*u.pixel2meter/2,s=st(o,a,et(i,n));t.createFixture(s,{density:0,friction:1}),t.setPosition(Et.renderPos2PhysicsPos(this.config.props)),this.type=Et.getItemType(this.config),t.setUserData(this)}},{key:"changeSpeed",value:function(t){this.sprite.animationSpeed=this.animationSpeed*t}}])&&ne(i.prototype,n),o&&ne(i,o),e}();function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ce(t,e){return!e||"object"!==le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ce(this,ue(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(e,re),i=e,(n=[{key:"initAni",value:function(){for(var t=[],e=1;e<=4;e++)t.push(U.fromFrame("firewallx4B_0".concat(e,".png")));this.frames=t,this.animationSpeed=.25,this.bodyWidth=u.item.smallFireWall.bodyWidth,this.bodyHeight=u.item.smallFireWall.bodyHeight}}])&&he(i.prototype,n),o&&he(i,o),e}();function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ye(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ye(this,ge(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(e,re),i=e,(n=[{key:"initAni",value:function(){for(var t=[],e=1;e<=4;e++)t.push(U.fromFrame("firewallx4_0".concat(e,".png")));this.frames=t,this.animationSpeed=.25,this.bodyWidth=u.item.bigFireWall.bodyWidth,this.bodyHeight=u.item.bigFireWall.bodyHeight}}])&&fe(i.prototype,n),o&&fe(i,o),e}();function be(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Se=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMgr=e,this.container=i,this.world=n,this.config=o;var a=Et.getItemProp(o,"ID")||"default";this.itemConfig=u.item.bird.table[a],void 0===this.itemConfig&&console.error("bird 不存在ID为：".concat(a,"的配置")),this.type=Et.getItemType(this.config),this.itemType="bird",this.createSprite()}var e,i,n;return e=t,(i=[{key:"createSprite",value:function(){var t;this.sprite=this.container.addChild(new V),this.sprite.part=this;var e=this.itemConfig;1!==this.gameMgr.stepSpeed&&this.itemConfig.bulletTimeAnimation&&(e=this.itemConfig.bulletTimeAnimation);var i=Et.getFrames(e.animationJsonPath,e.animationName);this.animation=this.sprite.addChild(new X(i)),this.animation.anchor.set(.5,.5),this.animation.scale.set(this.config.props.scaleX,this.config.props.scaleY),(t=this.animation.position).set.apply(t,be(e.animationPos)),this.animation.animationSpeed=e.animationSpeed*this.gameMgr.stepSpeed,this.animation.play(),this.sprite.anchor.set(this.config.props.anchorX||0,this.config.props.anchorY||0),this.sprite.position.set(this.config.props.x,this.config.props.y)}},{key:"createBody",value:function(){this.isDynamic()?this.body=this.world.createKinematicBody():this.body=this.world.createBody(),this.body.setUserData(this);var t=Et.renderPos2PhysicsPos({x:this.sprite.x,y:this.sprite.y});this.body.setPosition(t);var e=this.itemConfig.bodyWidth/2*u.pixel2meter,i=this.itemConfig.bodyHeight/2*u.pixel2meter,n=25.6*u.pixel2meter*(16*u.pixel2meter)/e/i;if(this.body.createFixture(st(e,i),{density:n,friction:1}),this.baseY=t.y,this.bodyHeight=2*i,this.frame=0,rt.showCollider){var o=new N;o.beginFill();var a=2*e*u.meter2pixel,s=2*i*u.meter2pixel;o.drawRect(-a/2,-s/2,a,s),o.endFill(),this.sprite.addChild(o)}}},{key:"destroy",value:function(){this.body&&this.world.destroyBody(this.body),this.sprite.destroy()}},{key:"update",value:function(){if(u.warningAnimation&&!this.hasShowedWarning&&Math.abs(this.itemConfig.forwardVelocity)>u.warningAnimation.warningMinVelocity)this.gameMgr.isXEnterView(this.getLeftBorderX()-u.warningAnimation.warningDistance)&&this.showWarning();else if(void 0===this.body)this.gameMgr.isItemXEnterView(this)&&(this.scaleFrame=0,this.createBody(),this.itemConfig.appearSoundPath&&this.itemConfig.appearSoundPath.length>0&&Ft.playSound(this.itemConfig.appearSoundPath,void 0,this.gameMgr.stepSpeed));else{if(this.itemConfig.scaleRange){this.scaleFrame+=this.gameMgr.stepSpeed;var t,e=this.itemConfig.scaleDuration/1e3*u.fps*2,i=this.scaleFrame/e,n=i-Math.floor(i);t=n<.5?this.itemConfig.scaleRange[0]+(this.itemConfig.scaleRange[1]-this.itemConfig.scaleRange[0])*n*2:this.itemConfig.scaleRange[0]+(this.itemConfig.scaleRange[1]-this.itemConfig.scaleRange[0])*(1-n)*2,this.sprite.scale.set(t,t)}if(!this.isDead)if(this.striked){this.body.setDynamic();var o=Q.calcRadians(this.striked.bikePos,this.body.getPosition()),a=Math.cos(o)*this.itemConfig.strikedBirdImpulse,s=Math.sin(o)*this.itemConfig.strikedBirdImpulse;this.body.applyLinearImpulse(et(a,s),this.body.getPosition()),this.body.setAngularVelocity(this.itemConfig.strikedBirdAngularVelocity),this.isDead=!0}else if(this.trampled)this.body.setDynamic(),this.body.applyLinearImpulse(et(0,-this.itemConfig.contactBirdImpulse),this.body.getPosition()),this.isDead=!0;else if(this.jacked)this.body.setDynamic(),this.body.applyLinearImpulse(et(0,this.itemConfig.contactBirdImpulse),this.body.getPosition()),this.isDead=!0;else if(this.body.setLinearVelocity(et(this.itemConfig.forwardVelocity,0)),this.isMoveUpDown()){this.frame+=this.itemConfig.upDownStep*this.gameMgr.stepSpeed;var r=this.baseY+Math.sin(this.frame)*this.itemConfig.upDownCoefficient;this.body.setPosition(et(this.body.getPosition().x,r))}var l=Et.physicsPos2renderPos(this.body.getPosition());this.sprite.position.set(l.x,l.y),this.sprite.rotation=-this.body.getAngle()}}},{key:"onBeginContact",value:function(t,e){var i=this;if(!this.isDead){var n=e.getBody(),o=n.getUserData();if(this.gameMgr.isBike(o))if(this.isAbleToBeTrampled()&&n.getPosition().y>=this.body.getPosition().y+this.bodyHeight/2)o.resetJumpStatus(),o.spring?(o.spring(this.itemConfig.contactBikeVelocity),u.soundPath.trample&&Ft.playSound(u.soundPath.trample,void 0,this.gameMgr.stepSpeed)):n.setLinearVelocity(et(n.getLinearVelocity().x,this.itemConfig.contactBikeVelocity)),o.addBulletTime&&o.addBulletTime(this.itemConfig.bulletTimeValueTrampled),o.playPlayerEffect&&u.playerEffect.trampled.forEach(function(t){return o.playPlayerEffect(t,i.sprite)}),this.trampled=!0;else if(this.isAbleToBeJacked()&&n.getPosition().y<=this.body.getPosition().y-this.bodyHeight/2&&o.isBikeLanded&&!o.isBikeLanded())o.resetJumpStatus(),o.jack?(o.jack(-this.itemConfig.contactBikeVelocity),u.soundPath.jack&&Ft.playSound(u.soundPath.jack,void 0,this.gameMgr.stepSpeed)):n.setLinearVelocity(et(n.getLinearVelocity().x,-this.itemConfig.contactBikeVelocity)),o.addBulletTime&&o.addBulletTime(this.itemConfig.bulletTimeValueJacked),o.playPlayerEffect&&u.playerEffect.jacked.forEach(function(t){return o.playPlayerEffect(t,i.sprite)}),this.jacked=!0;else if(o.isInvincible()){var a=n.getPosition(),s=a.x,r=a.y;this.striked={bikePos:{x:s,y:r}},u.soundPath.strike&&Ft.playSound(u.soundPath.strike,void 0,this.gameMgr.stepSpeed),o.playPlayerEffect&&u.playerEffect.striked.forEach(function(t){return o.playPlayerEffect(t,i.sprite)})}else o.setContactFatalEdge(!0)}}},{key:"onPreSolve",value:function(t,e){(this.isDead||this.trampled||this.jacked||this.striked||!this.gameMgr.isBike(e.getBody().getUserData()))&&t.setEnabled(!1)}},{key:"getLeftBorderX",value:function(){return this.sprite.x-this.animation.anchor.x*this.animation.width*this.animation.scale.x}},{key:"getRightBorderX",value:function(){return this.sprite.x+(1-this.animation.anchor.x)*this.animation.width*this.animation.scale.x}},{key:"isAbleToBeTrampled",value:function(){return this.itemConfig.isAbleToBeTrampled}},{key:"isAbleToBeJacked",value:function(){return this.itemConfig.isAbleToBeJacked}},{key:"isDynamic",value:function(){return Et.isItemType(this.config,"UpDown")||this.itemConfig.isMoveUpDown||this.itemConfig.forwardVelocity}},{key:"isMoveUpDown",value:function(){return Et.isItemType(this.config,"UpDown")||this.itemConfig.isMoveUpDown}},{key:"changeSpeed",value:function(t){this.animation.animationSpeed=this.itemConfig.animationSpeed*t,this.itemConfig.bulletTimeAnimation&&this.updateAnimation(1===t?this.itemConfig:this.itemConfig.bulletTimeAnimation)}},{key:"updateAnimation",value:function(t){var e;this.animation.textures=Et.getFrames(t.animationJsonPath,t.animationName),(e=this.animation.position).set.apply(e,be(t.animationPos)),this.animation.animationSpeed=t.animationSpeed*this.gameMgr.stepSpeed}},{key:"showWarning",value:function(){this.hasShowedWarning=!0,this.gameMgr.showWarning(this.sprite)}}])&&xe(e.prototype,i),n&&xe(e,n),t}();function ke(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function we(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ae=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMgr=e,this.container=i,this.world=n,this.config=o;var a=Et.getItemProp(o,"ID")||"default";this.itemConfig=u.item.Cloud.table[a],this.type=Et.getItemType(this.config),this.itemType="Cloud",this.createSprite()}var e,i,n;return e=t,(i=[{key:"createSprite",value:function(){var t;this.sprite=this.container.addChild(new V),this.sprite.part=this;var e=Et.getFrames(this.itemConfig.animationJsonPath,this.itemConfig.animationName);this.animation=this.sprite.addChild(new X(e)),this.animation.anchor.set(.5,.5);var i=this.config.props.scaleX,n=this.config.props.scaleY;this.animation.scale.set(i,n),(t=this.animation.position).set.apply(t,ke(this.itemConfig.animationPos)),this.animation.animationSpeed=this.itemConfig.animationSpeed*this.gameMgr.stepSpeed,this.animation.play();var o=this.animation.textures[0],a=this.config.props.x+o.width/2*i,s=this.config.props.y+o.height/2*n;this.sprite.position.set(a,s)}},{key:"createBody",value:function(){this.body=this.world.createBody(),this.body.setUserData(this);var t=Et.renderPos2PhysicsPos({x:this.sprite.x,y:this.sprite.y});this.body.setPosition(t);var e=this.itemConfig.bodyWidth/2*u.pixel2meter,i=this.itemConfig.bodyHeight/2*u.pixel2meter;if(this.body.createFixture(st(e,i),{density:1,friction:1}),rt.showCollider){var n=new N;n.beginFill();var o=2*e*u.meter2pixel,a=2*i*u.meter2pixel;n.drawRect(-o/2,-a/2,o,a),n.endFill(),this.sprite.addChild(n)}}},{key:"destroy",value:function(){this.body&&this.world.destroyBody(this.body),this.sprite.destroy()}},{key:"update",value:function(){void 0===this.body&&this.gameMgr.isItemXEnterView(this)&&(this.createBody(),this.itemConfig.appearSoundPath&&this.itemConfig.appearSoundPath.length>0&&Ft.playSound(this.itemConfig.appearSoundPath,void 0,this.gameMgr.stepSpeed))}},{key:"onPreSolve",value:function(t,e){this.gameMgr.isBike(e.getBody().getUserData())||t.setEnabled(!1)}},{key:"getLeftBorderX",value:function(){return this.sprite.x-this.animation.anchor.x*this.animation.width*this.animation.scale.x}},{key:"getRightBorderX",value:function(){return this.sprite.x+(1-this.animation.anchor.x)*this.animation.width*this.animation.scale.x}},{key:"changeSpeed",value:function(t){this.animation.animationSpeed=this.itemConfig.animationSpeed*t}}])&&we(e.prototype,i),n&&we(e,n),t}();function Pe(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Te(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ce=function(){function t(e,i,n,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameScene=e,this.parent=i,this.world=n,this.id=o,this.config=a,this.bikeBody=void 0,this.velocity=new Kt(this.config.commonVelocity),this.jumpForce=new Kt(this.config.jumpForce),this.frames=a.frames,this.frameIndex=0,this.setContactFatalEdge(!1),this.jumping=!1,this.jumpCount=0,this.isDead=!1,this.dragBackPos={x:0,y:0},this.deadCompleteTimer=0,this.startDragBikeBack=!1,this.adjustHeight=void 0,this.startAdjustHeight=!1,this.startFloat=!1,this.portableItemList=[],this.effectRemainFrame={},this.initEffectTable(),this.playername=this.config.playername,this.headurl=this.config.headurl,this.onCreate()}var e,i,n;return e=t,(i=[{key:"onCreate",value:function(){var t,e=this;this.bikeOutterContainer=this.parent.addChildAt(new j,0),this.bikeSelfContainer=this.bikeOutterContainer.addChild(new j),this.bikeSelfContainer.scale.set(u.bikeScale,u.bikeScale),this.underBikeContainer=this.bikeSelfContainer.addChild(new j),this.bikeSprite=this.bikeSelfContainer.addChild(new V),this.bikeSprite.anchor.set(.5,.5),this.upBikeContainer=this.bikeSelfContainer.addChild(new j),this.bikeAnimSprite=this.bikeSprite.addChild(new V),this.bikeAnimSprite.anchor.set(.5,.5),this.bikeAnimSprite.texture=this.frames[this.frameIndex],(t=this.bikeAnimSprite.position).set.apply(t,Pe(this.config.animPos));var i=u.bikeList.find(function(t){return t.id===e.id});if(i.imagePath){var n,o,a,s=this.bikeSprite.addChild(new V);s.texture=U.from(i.imagePath),(n=s.anchor).set.apply(n,Pe(i.anchor)),(o=s.scale).set.apply(o,Pe(i.scale)),(a=s.position).set.apply(a,Pe(i.position))}this.bikeBubbleSprite=this.bikeSprite.addChild(new V),this.bikeBubbleSprite.texture=F[u.imagePath.bubble].texture,this.bikeBubbleSprite.anchor.set(.5,.5),this.bikeBubbleSprite.scale.set(1/u.bikeScale,1/u.bikeScale),this.bikeBubbleSprite.visible=!1,this.bikeRankText=this.bikeOutterContainer.addChild(new z(this.getName(),new H(u.bike.enemyNameText.style))),this.bikeRankText.anchor.set(.5,1),this.bikeRankText.position.set(0,u.bike.enemyNameText.positionY),this.bikeHeadImage=this.bikeOutterContainer.addChild(V.from(this.headurl)),this.bikeHeadImage.width=u.bike.enemyHeadImage.width,this.bikeHeadImage.height=u.bike.enemyHeadImage.height,this.bikeHeadImage.anchor.set(.5,1),this.bikeHeadImage.position.set(0,u.bike.enemyHeadImage.positionY),this.bikeBody=this.world.createDynamicBody();var r=u.bikeDensity*(i.densityPercent||u.bikeDensity);this.selfFixture=this.bikeBody.createFixture(ot(u.bikeRadius),{density:r,friction:1}),this.bikeBody.setUserData(this),i.velocityPercent&&this.velocity.setBasicValue(this.config.commonVelocity*i.velocityPercent),this.bikeBody.setLinearVelocity(et(this.velocity.value,0)),this.aiSensor=this.bikeBody.createFixture({shape:ot(5*u.bikeRadius),isSensor:!0});var l=this.jumpForce.value/this.bikeBody.getMass()/u.fps,h=this.calcJumpRadius(this.velocity.value,l,this.world.getGravity().y);this.eatItemSensor=this.bikeBody.createFixture({shape:ot(h),isSensor:!0}),this.stateText=this.bikeSprite.addChild(new z("",new H({fill:"white",fontSize:50}))),this.effectList=[],this.durationEffectTable={},this.emitter=new J(this.parent,[U.from(u.imagePath.bikeParticle)],F[u.emitterPath.bike].data),this.emitter.emit=!1,this.buffIconContainer=this.bikeOutterContainer.addChild(new j),this.buffIconContainer.y=u.buff.containerY,this.buffIconTable={}}},{key:"destroy",value:function(){this.resetJumpStatus(),this.world.destroyBody(this.bikeBody),this.bikeOutterContainer.destroy(),this.emitter.destroy(),clearTimeout(this.deadCompleteTimer)}},{key:"getHead",value:function(){return this.headurl}},{key:"getName",value:function(){return this.playername}},{key:"setPhysicalPosition",value:function(t){this.bikeBody.setPosition(t);var e=Et.physicsPos2renderPos(t);this.bikeOutterContainer.position.set(e)}},{key:"onPreSolve",value:function(t,e,i){if(this.isDead)return t.setEnabled(!1);if(i===this.selfFixture){if(this.gameScene.chtable.player.is(e)||this.gameScene.chtable.enemy.is(e))t.setEnabled(!1);else if(this.gameScene.chtable.road2.is(e)){var n=e.getUserData(),o=n.p1,a=n.p2;Q.getDistanceFromPointToLine(this.bikeBody.getPosition(),o,a)<u.bikeRadius-u.pixel2meter&&t.setEnabled(!1)}var s=e.getUserData();this.isInvincible()&&[Qt,pe,_e].some(function(t){return s instanceof t})&&t.setEnabled(!1)}}},{key:"onBeginContact",value:function(t,e,i){if(i===this.aiSensor){var n=e.getUserData();(n&&(n.isFatal||n.isCliff||n.isDanger)||this.gameScene.chtable.obstacle.is(e))&&(this.isGoToJump=!0)}else if(i===this.eatItemSensor){var o=e.getBody().getUserData();o&&o.isHelpful&&(this.isGoToJump=!0)}else{var a=e.getBody().getUserData();if(a&&a instanceof Se)return;if(a&&a instanceof Ae)return void(this.isInvincible()||this.setContactFatalEdge(!0));if(a&&a instanceof Vt&&a.thrower===this)return;var s=e.getUserData();(this.gameScene.chtable.road.is(e)||s&&s.resetJumpStatus)&&this.resetJumpStatus(),this.gameScene.chtable.obstacle.is(e)?this.setContactFatalEdge(!0):s&&s.isFatal&&(this.isInvincible()||this.setContactFatalEdge(!0),(s=e.getBody().getUserData())&&s.thrower&&pt.dispatchEvent("UseItem",s.thrower,this,"BananaPeel"))}}},{key:"update",value:function(){this.eatEffect&&(this.startEffect(this.eatEffect),delete this.eatEffect),this.frameIndex+=this.gameScene.stepSpeed,this.frameIndex>=this.frames.length&&(this.frameIndex=0),this.bikeAnimSprite.texture=this.frames[Math.floor(this.frameIndex)];var t=this.bikeBody.getPosition(),e=Et.physicsPos2renderPos(t);if(this.bikeOutterContainer.x=e.x,this.bikeOutterContainer.y=e.y,!this.isDead&&!this.jumping){var i=this.bikeBody.getLinearVelocity();u.bikeRotateByMoveDirection&&(this.bikeSelfContainer.rotation=-Math.atan(i.y/i.x))}Q.calcPointDistance(this.bikeBody.getPosition(),this.gameScene.bikeBody.getPosition())<2*u.bikeRadius?this.bikeOutterContainer.alpha=u.enemy.contactPlayerAlpha:this.bikeOutterContainer.alpha=1,this.emitter.updateOwnerPos(this.bikeOutterContainer.x,this.bikeOutterContainer.y),this.emitter.update(1/u.fps)}},{key:"afterUpdate",value:function(){var t=this;if(!this.completeGame&&!1===this.isDead&&this.isContactFatalEdge)return this.bikeBody.setLinearVelocity(et(0,0)),this.bikeBody.setAngularVelocity(u.bikeGameOverAngularVelocity),this.bikeBody.applyLinearImpulse(et(-100,200),this.bikeBody.getPosition()),void this.onDead();if(!this.completeGame&&!1===this.isDead){var e=this.bikeBody.getPosition(),i=this.gameScene.findLowestRoadTopY(this.bikeOutterContainer.x);if(e.y<Et.renderY2PhysicsY(i)-u.bikeGameOverOffsetHeight)return void this.onDead()}if(this.startReborn&&(this.startDragBikeBack=!0,this.rebornDragVelocity=Q.calcPointDistance(this.bikeBody.getPosition(),this.dragBackPos)/u.rebornDragDuration/u.fps,this.bikeBubbleSprite.visible=!0,this.bikeBody.setStatic(),this.bikeBody.setAngle(0),this.bikeSelfContainer.rotation=0,this.startReborn=!1),this.startDragBikeBack)this.dragBikeBack();else if(this.startAdjustHeight)this.adjustBikeHeight();else{for(var n in this.startFloat&&this.floatBike(),!this.completeGame&&this.gameScene.finalPoint&&this.bikeBody.getPosition().x>Et.renderPos2PhysicsPos(this.gameScene.finalPoint).x&&(this.completeGame=!0),!1===this.isDead&&this.bikeBody.setLinearVelocity(et(this.velocity.value,this.bikeBody.getLinearVelocity().y)),!1===this.isDead&&(this.isGoToJump||this.hasEffect("SpiderWeb"))&&(this.hasEffect("SpiderWeb")?this.spiderWebBreakIntervalFrame<=0?(this.isGoToJump=!0,this.spiderWebBreakIntervalFrame=u.enemy.spiderWebBreakIntervalFrame):this.spiderWebBreakIntervalFrame--:this.isGoToJump=!0),!1===this.isDead&&!this.isGoToJump&&this.bikeBody.getLinearVelocity().y<0&&!this.hasRoadUnderBike()&&(this.isGoToJump=!0),!1===this.isDead&&this.isGoToJump&&this.jump(),this.isGoToJump=!1,this.updateEffect(),this.jumpExtraCountdown--,this.updateBuffIcon(),this.effectList.forEach(function(t){return t.update()}),this.durationEffectTable)this.durationEffectTable.hasOwnProperty(n)&&this.durationEffectTable[n].update();if(rt.showBikeState)for(var o in this.stateText.text="",this.effectRemainFrame)this.effectRemainFrame.hasOwnProperty(o)&&(this.effectRemainFrame[o]>0?this.stateText.text+="".concat(o,":").concat(Math.ceil(this.effectRemainFrame[o]/u.fps),"\n"):this.stateText.text+="".concat(o,"\n"));if(0!==this.portableItemList.length&&!this.isDead&&!this.hasEffect("Seal")){var a=this.portableItemList.pop(),s=u.effect[a];if("BananaPeel"===a)this.gameScene.throwBananaPeel(this);else if(s.isHelpful)this.onAteItem(a);else{var r,l=this.gameScene.enemyList.filter(function(e){return e!==t}).concat(this.gameScene);switch(s.targetType){case 1:var h=this.gameScene.getFormerOne(this);r=h?[h]:[];break;case 2:r=l;break;case 0:default:r=[Q.randomChoose(l)]}0===r.length?pt.dispatchEvent("UseItem",this,{getName:function(){return"Air"}},a):r.forEach(function(e){e.onAteItem(a),pt.dispatchEvent("UseItem",t,e,a)})}if(s.userUsedEffectPath){var c=new qt(this,s.userUsedEffectPath,function(){Q.removeItemFromArray(t.effectList,c),c.destroy()},this.gameScene);this.effectList.push(c)}}}}},{key:"onDead",value:function(){this.isDead=!0;var t=this.bikeBody.getPosition();this.dragBackPos={x:t.x,y:t.y},this.deadCompleteTimer=setTimeout(this.onDeadCompleted.bind(this),u.bike.deadCompleteTime),this.resetBikeStatus()}},{key:"onDeadCompleted",value:function(){this.startReborn=!0}},{key:"dragBikeBack",value:function(){var t=this.rebornDragVelocity,e=this.dragBackPos,i=this.bikeBody.getPosition(),n=Q.calcRadians(i,e),o=t*Math.cos(n),a=t*Math.sin(n),s=Q.successive(i.x,e.x,o),r=s.value,l=s.final,h=Q.successive(i.y,e.y,a),c=h.value,m=h.final,p=et(r,c);if(this.bikeBody.setPosition(p),l&&m){this.startDragBikeBack=!1,this.startAdjustHeight=!0;var d=this.gameScene.findAdjustHeight(this.bikeOutterContainer.x);d.y+=Q.randomInRange.apply(Q,Pe(u.bikeAdjustHeightOffset));var f=Et.renderPos2PhysicsPos(d);this.floatTargetPosX=f.x,this.adjustHeight=f.y+u.bikeRadius}}},{key:"adjustBikeHeight",value:function(){var t,e=this.bikeBody.getPosition();e.y<this.adjustHeight?t=e.y+u.bike.adjustHeightVelocity>this.adjustHeight?this.adjustHeight-e.y:u.bike.adjustHeightVelocity:e.y>this.adjustHeight&&(t=e.y-u.bike.adjustHeightVelocity<this.adjustHeight?this.adjustHeight-e.y:-u.bike.adjustHeightVelocity);var i=et(e.x,e.y+t);this.bikeBody.setPosition(i),this.bikeBody.getPosition().y===this.adjustHeight&&(this.startAdjustHeight=!1,this.startFloat=!0,this.bikeBody.setDynamic(),this.bikeFloatFrame=u.rebornFloatFrame)}},{key:"floatBike",value:function(){this.bikeFloatFrame--,0===this.bikeFloatFrame||this.bikeBody.getPosition().x>=this.floatTargetPosX?(this.startFloat=!1,this.bikeBubbleSprite.visible=!1,this.setContactFatalEdge(!1),this.jumping=!1,this.jumpCount=0,this.isDead=!1):(this.bikeBody.applyForceToCenter(et(0,-this.gameScene.gravity*this.bikeBody.getMass())),this.bikeBody.setLinearVelocity(et(u.rebornFloatVelocity,0)))}},{key:"jump",value:function(){if(this.hasEffect("SpiderWeb"))this.bikeBody.applyLinearImpulse(et(0,u.effect.SpiderWeb.jumpForce),this.bikeBody.getPosition()),this.spiderWebRemainBreakTimes-=this.gameScene.stepSpeed,this.spiderWebRemainBreakTimes<=0&&(delete this.effectRemainFrame.SpiderWeb,this.effectTable.SpiderWeb.end&&this.effectTable.SpiderWeb.end(),this.durationEffectTable.SpiderWeb&&(this.durationEffectTable.SpiderWeb.destroy(),delete this.durationEffectTable.SpiderWeb),this.removeBuffIcon("SpiderWeb"));else if(this.jumpCount<u.jumpCommonMaxCount||this.jumpExtraCountdown>0){var t=this.bikeBody.getLinearVelocity();switch(this.bikeBody.setLinearVelocity(et(t.x,0)),this.bikeBody.applyLinearImpulse(et(0,this.jumpForce.value),this.bikeBody.getPosition()),this.jumping=!0,this.jumpCount++,this.jumpExtraCountdown=u.bikeJumpExtraCountdown[this.jumpCount-u.jumpCommonMaxCount],this.bikeSelfContainer.rotation=Q.angle2radius(u.bikeJumpingRotation),this.jumpCount){case 1:break;case 2:this.emitter.playOnce();break;default:this.emitter.playOnce()}}}},{key:"resetJumpStatus",value:function(){this.jumping=!1,this.jumpCount=0}},{key:"onAteItem",value:function(t,e){switch(t){case"PortableItem":this.portableItemList.push(e);break;case"GoldCoin":case"Star":case"Exp":break;case"Thunder":this.isInvincible()||this.setContactFatalEdge(!0),this.gameScene.addEffect(this,u.effect.Thunder.bearerSufferedEffectPath);break;default:var i=u.effect[t];if(this.isInvincible()&&i&&!i.isHelpful)return;this.eatEffect=t}}},{key:"startEffect",value:function(t){var e=this;if(!this.isDead){if(this.effectRemainFrame[t])this.effectTable[t]&&this.effectTable[t].cover&&this.effectTable[t].cover();else{this.effectTable[t]&&this.effectTable[t].start&&this.effectTable[t].start();var i=u.effect[t];if(i.bearerBuffEffectPath&&(this.durationEffectTable[t]=new qt(this,i.bearerBuffEffectPath,void 0,this.gameScene)),i.bearerSufferedEffectPath){var n=new qt(this,i.bearerSufferedEffectPath,function(){n.destroy(),Q.removeItemFromArray(e.effectList,n)},this.gameScene);this.effectList.push(n)}i.buffIconImagePath&&this.addBuffIcon(t)}this.effectRemainFrame[t]=u.effect[t].duration*u.fps}}},{key:"updateEffect",value:function(){for(var t in this.effectRemainFrame)this.effectRemainFrame.hasOwnProperty(t)?(this.effectRemainFrame[t]-=this.gameScene.stepSpeed,this.effectRemainFrame[t]<=0&&(delete this.effectRemainFrame[t],this.effectTable[t]&&this.effectTable[t].end&&this.effectTable[t].end(),this.removeBuffIcon(t),this.durationEffectTable[t]&&(this.durationEffectTable[t].destroy(),delete this.durationEffectTable[t]))):this.effectTable[t]&&this.effectTable[t].update&&this.effectTable[t].update()}},{key:"initEffectTable",value:function(){var t=this;this.effectTable={Decelerate:{start:function(){t.velocity.increaseValueByRate(u.effect.Decelerate.rate),t.bikeBody.setLinearVelocity(et(t.velocity.value,t.bikeBody.getLinearVelocity().y))},end:function(){t.velocity.increaseValueByRate(-u.effect.Decelerate.rate),t.bikeBody.setLinearVelocity(et(t.velocity.value,t.bikeBody.getLinearVelocity().y))}},Accelerate:{start:function(){t.velocity.increaseValueByRate(u.effect.Accelerate.rate),t.bikeBody.setLinearVelocity(et(t.velocity.value,t.bikeBody.getLinearVelocity().y))},end:function(){t.velocity.increaseValueByRate(-u.effect.Accelerate.rate),t.bikeBody.setLinearVelocity(et(t.velocity.value,t.bikeBody.getLinearVelocity().y))}},WeakenJump:{start:function(){t.jumpForce.increaseValueByRate(u.effect.WeakenJump.rate)},end:function(){t.jumpForce.increaseValueByRate(-u.effect.WeakenJump.rate)}},SpiderWeb:{start:function(){t.spiderWebRemainBreakTimes=u.effect.SpiderWeb.breakTimes,t.spiderWebBreakIntervalFrame=0},cover:function(){t.spiderWebRemainBreakTimes=u.effect.SpiderWeb.breakTimes},end:function(){t.spiderWebRemainBreakTimes=0}},PowerJump:{start:function(){t.jumpForce.increaseValueByRate(u.effect.PowerJump.rate)},end:function(){t.jumpForce.increaseValueByRate(-u.effect.PowerJump.rate)}},Invincible:{start:function(){t.setBikeScale(u.effect.Invincible.scale),t.removeAllEffects(!0)},end:function(){t.setBikeScale(1),t.bikeSprite.alpha=1},update:function(){var e=Math.floor(t.effectRemainFrame.Invincible/u.effect.Invincible.twinkleInterval)%2==0;t.bikeSprite.alpha=e?1:u.effect.Invincible.twinkleAlpha}}}}},{key:"setBikeScale",value:function(t){var e=this.id,i=u.bikeList.find(function(t){return t.id===e}),n=u.bikeDensity*(i.densityPercent||u.bikeDensity)/t/t,o=u.bikeRadius*t;this.bikeSprite.scale.set(t,t),this.selfFixture&&this.bikeBody.destroyFixture(this.selfFixture),this.selfFixture=this.bikeBody.createFixture(ot(o),{density:n,friction:1})}},{key:"calcJumpRadius",value:function(t,e,i){var n=e/i,o=t*n,a=e*n/2;return Math.sqrt(Math.pow(o,2)+Math.pow(a,2))}},{key:"resetBikeStatus",value:function(){this.jumpCount=0,this.jumping=!1,this.setContactFatalEdge(!1),this.removeAllEffects()}},{key:"removeAllEffects",value:function(t){for(var e in this.effectRemainFrame)!this.effectRemainFrame.hasOwnProperty(e)||t&&u.effect[e].isHelpful||(delete this.effectRemainFrame[e],this.effectTable[e]&&this.effectTable[e].end&&this.effectTable[e].end(),this.removeBuffIcon(e));for(var i in this.durationEffectTable)!this.durationEffectTable.hasOwnProperty(i)||t&&u.effect[i].isHelpful||(this.durationEffectTable[i].destroy(),delete this.durationEffectTable[i])}},{key:"hasEffect",value:function(t){return void 0!==this.effectRemainFrame[t]}},{key:"getBikePhysicalPosition",value:function(){return this.bikeBody.getPosition()}},{key:"isPlayer",value:function(){return!0}},{key:"addBikeChild",value:function(t,e){return 0===e?this.underBikeContainer.addChild(t):this.upBikeContainer.addChild(t),t}},{key:"addBuffIcon",value:function(t){if(u.effect[t].buffIconImagePath&&void 0===this.buffIconTable[t]){var e,i=this.buffIconContainer.addChild(new V);i.anchor.set(.5,0),i.texture=U.from(u.effect[t].buffIconImagePath),i.scale.set(u.buff.iconScale,u.buff.iconScale);var n=Math.ceil(this.effectRemainFrame[t]/u.fps),o=i.addChild(new z(n,new H(u.buff.text)));o.anchor.set(.5,.5),(e=o.position).set.apply(e,Pe(u.buff.textPosition)),this.buffIconTable[t]=i,this.sortBuffIcon()}}},{key:"removeBuffIcon",value:function(t){this.buffIconTable[t]&&(this.buffIconTable[t].destroy(),delete this.buffIconTable[t],this.sortBuffIcon())}},{key:"sortBuffIcon",value:function(){var t=this,e=-1;Q.keys(u.effect).forEach(function(i){t.buffIconTable[i]&&(e++,t.buffIconTable[i].x=e*u.buff.iconInterval)}),this.buffIconContainer.x=-e*u.buff.iconInterval/2}},{key:"updateBuffIcon",value:function(){for(var t in this.buffIconTable)this.buffIconTable.hasOwnProperty(t)&&(this.effectRemainFrame[t]>0?this.buffIconTable[t].getChildAt(0).text=Math.ceil(this.effectRemainFrame[t]/u.fps):this.buffIconTable[t].getChildAt(0).text="")}},{key:"hasRoadUnderBike",value:function(){for(var t=this.gameScene.roadList,e=t.length,i=this.bikeOutterContainer.x,n=this.bikeOutterContainer.y,o=0;o<e;o++){var a=t[o];if(!(a.getLeftBorderX()<=i))return!1;if(a.getRightBorderX()>i&&a.getLowestTopY()>=n)return!0}return!1}},{key:"setContactFatalEdge",value:function(t){this.startFloat||(this.isContactFatalEdge=t)}},{key:"isInvincible",value:function(){return this.hasEffect("Invincible")||this.hasEffect("Sprint")}}])&&Te(e.prototype,i),n&&Te(e,n),t}();function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,e){return!e||"object"!==Ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ee(t,e){return(Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Me=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Be(this,Le(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ee(t,e)}(e,Ce),e}();function Re(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var De=function(){function t(e){var i=e.root,n=e.isHorizontal;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=i,this.root.hitArea=new Y(0,0,this.root.mywidth,this.root.myheight),this.container=this.root.getChildAt(0),this.createMask(),this.initDirectionRelatedVariable(n),this.maxOffset=0,this.bindListener()}var e,i,n;return e=t,(i=[{key:"onTouchStart",value:function(t){this.touching=!0,this.lastTouchOffset=t.data.global[this.moveAxis],cancelAnimationFrame(this.recoverAnimationID)}},{key:"onTouchMove",value:function(t){if(this.touching){var e=t.data.global[this.moveAxis],i=e-this.lastTouchOffset;this.lastTouchOffset=e;var n=this.container[this.moveAxis]+i;(n>this.maxOffset||n<this.minOffset)&&(n=this.container[this.moveAxis]+i/u.listResistance),this.container[this.moveAxis]=n}}},{key:"onTouchEnd",value:function(){var t=this;if(this.touching=!1,this.container[this.moveAxis]>this.maxOffset||this.container[this.moveAxis]<this.minOffset){var e=(new Date).getTime(),i=(this.container[this.moveAxis]>this.maxOffset?this.maxOffset:this.minOffset)-this.container[this.moveAxis];!function n(){var o=(new Date).getTime();t.container[t.moveAxis]>t.minOffset?(t.container[t.moveAxis]+=(o-e)/250*i,t.container[t.moveAxis]<=t.maxOffset?t.container[t.moveAxis]=t.maxOffset:t.recoverAnimationID=requestAnimationFrame(n)):t.container[t.moveAxis]<t.maxOffset&&(t.container[t.moveAxis]+=(o-e)/250*i,t.container[t.moveAxis]>=t.minOffset?t.container[t.moveAxis]=t.minOffset:t.recoverAnimationID=requestAnimationFrame(n)),e=o}()}}},{key:"createMask",value:function(){var t=this.root.getGlobalPosition(),e=t.x,i=t.y;this.root.mask=(new N).beginFill().drawRect(e,i,this.root.mywidth,this.root.myheight).endFill()}},{key:"initDirectionRelatedVariable",value:function(t){this.isHorizontal=t,t?(this.moveAxis="x",this.minOffset=this.root.mywidth-this.container.mywidth):(this.moveAxis="y",this.minOffset=this.root.myheight-this.container.myheight)}},{key:"bindListener",value:function(){this.root.buttonMode=!0,this.root.interactive=!0,this.root.on("pointerdown",this.onTouchStart.bind(this)),this.root.on("pointermove",this.onTouchMove.bind(this)),this.root.on("pointerup",this.onTouchEnd.bind(this)),this.root.on("pointerupoutside",this.onTouchEnd.bind(this))}}])&&Re(e.prototype,i),n&&Re(e,n),t}();function Oe(t){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function je(t,e){return!e||"object"!==Oe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ue(t){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ne(t,e){return(Ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ve=function(t){function e(t,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=je(this,Ue(e).call(this))).data=t,n.fontFamily=n.data.font,n.config=u.imageText[n.fontFamily],n._text="",n.mycontainer=n.addChild(new j),n.mycontainer.mywidth=0,n.mycontainer.myheight=n.config.charHeight,n.updateHAlign("left"),n.updateVAlign("top"),void 0!==t.left?n.setHAlign("left",t.left):void 0!==t.right?n.setHAlign("right",i.mywidth-t.right):void 0!==t.centerX?n.setHAlign("center",i.mywidth/2):void 0!==t.x&&n.setHAlign("left",t.x),void 0!==t.top?n.setVAlign("top",t.top):void 0!==t.bottom?n.setVAlign("bottom",i.myheight-t.bottom):void 0!==t.centerY?n.setVAlign("center",i.myheight/2):void 0!==t.y&&n.setVAlign("top",t.y),void 0!==t.scaleX&&(n.scale.x=t.scaleX),void 0!==t.scaleY&&(n.scale.y=t.scaleY),n.text=(t.text||"").replace(/\${.*?}/g,function(t){return F[u.i18nPath].data[t.substring(2,t.length-1)]}),n}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ne(t,e)}(e,V),i=e,(n=[{key:"setHAlign",value:function(t,e){this.x=e,this.updateHAlign(t)}},{key:"setVAlign",value:function(t,e){this.y=e,this.updateVAlign(t)}},{key:"updateHAlign",value:function(t){switch(this.hAlign=t||this.hAlign,this.hAlign){case"left":this.mycontainer.x=0;break;case"right":this.mycontainer.x=-this.mycontainer.mywidth;break;case"center":this.mycontainer.x=-this.mycontainer.mywidth/2}}},{key:"updateVAlign",value:function(t){switch(this.vAlign=t||this.vAlign,this.vAlign){case"top":this.mycontainer.y=0;break;case"bottom":this.mycontainer.y=-this.mycontainer.myheight;break;case"center":this.mycontainer.y=-this.mycontainer.myheight/2}}},{key:"text",set:function(t){var e=this;if(null==t&&(t=""),t=t.toString(),this._text!==t){this._text=t,this.mycontainer.removeChildren();var i=this._text.split("\n");this.mycontainer.mywidth=0,this.mycontainer.myheight=this.config.charHeight*i.length,i.forEach(function(t,i){var n=t.split(""),o=0;n.forEach(function(t){var n=e.config.charImgPathTable[t];if(n){var a=V.from(n),s=a.texture.height;a.x=o,o+=a.width,a.y=i*e.config.charHeight+e.config.charHeight-s,e.mycontainer.addChild(a)}}),o>e.mycontainer.mywidth&&(e.mycontainer.mywidth=o)}),this.updateHAlign(this.hAlign),this.updateVAlign(this.vAlign)}}}])&&Fe(i.prototype,n),o&&Fe(i,o),e}();function Ge(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,o=!1,a=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==r.return||r.return()}finally{if(o)throw a}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Xe(t,e){return void 0===t?e:t}function ze(t,e,i){e.mywidth=App.sceneWidth,e.myheight=App.sceneHeight,e.interactive=!i,e.ui={},e.uiWithID={};var n=[];t.child.forEach(function(t){t.label.startsWith("Guide")||e.addChild(function t(e,i,n,o,a){var s=e.props;var r;switch(e.type){case"Panel":r=function(t,e){var i=function(t,e,i){var n=t.props,o=Xe(n.x,0),a=Xe(n.y,0),s=Xe(n.width,i.width),r=Xe(n.height,i.height),l=Xe(n.anchorX,0),h=Xe(n.anchorY,0),c=Xe(n.scaleX,1),u=Xe(n.scaleY,1),m=Xe(n.rotation,0)/180*Math.PI,p=Xe(n.alpha,1),d=Xe(n.visible,!0);void 0!==n.left&&void 0!==n.right?(o=n.left,s=e.mywidth-n.left-n.right):void 0!==n.left?o=n.left:void 0!==n.right?o=e.mywidth-n.right-s:void 0!==n.centerX&&(o=e.mywidth/2-s/2+n.centerX);void 0!==n.top&&void 0!==n.bottom?(a=n.top,r=e.myheight-n.top-n.bottom):void 0!==n.top?a=n.top:void 0!==n.bottom?a=e.myheight-n.bottom-r:void 0!==n.centerY&&(a=e.myheight/2-r/2+n.centerY);return{x:o,y:a,width:s,height:r,anchorX:l,anchorY:h,scaleX:c,scaleY:u,rotation:m,alpha:p,visible:d}}(t,e,{width:100,height:100}),n=new j;return n.mywidth=i.width,n.myheight=i.height,n.x=i.x,n.y=i.y,n.scale.set(i.scaleX,i.scaleY),n.rotation=i.rotation,n.alpha=i.alpha,n.visible=i.visible,n}(e,i);break;case"Image":r=function(t,e){var i,n=t.props;i=n.sizeGrid?function(t,e){var i,n,o,a,s=t.props,r=Ge(s.sizeGrid.split(",").map(function(t){return parseInt(t)}),4),l=r[0],h=r[1],c=r[2],u=r[3];if(void 0===s.skin)n=s.width||0,o=s.height||0,a=new V;else{var m="myLaya/laya/assets/".concat(s.skin);i=U.from(m),n=Xe(s.width,i.width),o=Xe(s.height,i.height),a=new W(i,u,l,h,c)}var p=Xe(s.x,0),d=Xe(s.y,0);void 0!==s.left&&void 0!==s.right?(p=s.left,n=e.mywidth-s.left-s.right):void 0!==s.left?p=s.left:void 0!==s.right?p=e.mywidth-s.right-n:void 0!==s.centerX&&(p=e.mywidth/2+s.centerX-n/2);void 0!==s.top&&void 0!==s.bottom?(d=s.top,o=e.myheight-s.top-s.bottom):void 0!==s.top?d=s.top:void 0!==s.bottom?d=e.myheight-s.bottom-o:void 0!==s.centerY&&(d=e.myheight/2+s.centerY-o/2);return a.width=n,a.height=o,a.mywidth=n,a.myheight=o,a.x=p,a.y=d,a}(t,e):function(t,e){var i,n,o,a=t.props;if(void 0!==a.skin){var s="myLaya/laya/assets/".concat(a.skin);i=U.from(s),n=i?Xe(a.width,i.width):0,o=i?Xe(a.height,i.height):0}else n=Xe(a.width,0),o=Xe(a.height,0);var r=Xe(a.scaleX,1),l=Xe(a.scaleY,1),h=Xe(a.x,0),c=Xe(a.y,0);void 0!==a.left&&void 0!==a.right?(h=a.left,n=e.mywidth-a.left-a.right):void 0!==a.left?h=a.left:void 0!==a.right?h=e.mywidth-a.right-n*r:void 0!==a.centerX&&(h=e.mywidth/2+a.centerX-n*r/2);void 0!==a.top&&void 0!==a.bottom?(c=a.top,o=e.myheight-a.top-a.bottom):void 0!==a.top?c=a.top:void 0!==a.bottom?c=e.myheight-a.bottom-o*l:void 0!==a.centerY&&(c=e.myheight/2+a.centerY-o*l/2);var u=new j,m=new V;return m.texture=i,m.width=n,m.height=o,u.addChild(m),u.mywidth=n,u.myheight=o,u.scale.set(r,l),u.position.set(h,c),u}(t,e);return i.rotation=Xe(n.rotation,0)/180*Math.PI,i.alpha=Xe(n.alpha,1),i.visible=Xe(n.visible,!0),i}(e,i);break;case"Label":r=function(t,e){var i=t.props;if(u.imageText[i.font])return function(t,e){var i=t.props;return new Ve(i,e)}(t,e);var n=Xe(i.x,0),o=Xe(i.y,0),a=Xe(i.anchorX,0),s=Xe(i.anchorY,0),r=Xe(i.scaleX,1),l=Xe(i.scaleY,1),h=Xe(i.rotation,0)/180*Math.PI,c=Xe(i.alpha,1),m=Xe(i.visible,1);void 0!==i.left&&void 0!==i.right?(a=0,n=i.left):void 0!==i.left?(a=0,n=i.left):void 0!==i.right?(a=1,n=e.mywidth-i.right):void 0!==i.centerX&&(a=.5,n=e.mywidth/2+i.centerX);void 0!==i.top&&void 0!==i.bottom?(s=0,o=i.top):void 0!==i.top?(s=0,o=i.top):void 0!==i.bottom?(s=1,o=e.myheight-i.bottom):void 0!==i.centerY&&(s=.5,o=e.myheight/2+i.centerY);var p=We(i);return p.anchor.set(a,s),p.x=n,p.y=o,p.scale.set(r,l),p.rotation=h,p.alpha=c,p.visible=m,p}(e,i);break;case"TextInput":r=function(t,e){var i=t.props,n=Xe(i.width,100),o=Xe(i.height,100),a=Xe(i.fontSize,12),s={fontSize:"".concat(a,"px"),padding:"".concat((o-a)/2,"px"),width:"".concat(n,"px"),color:"#26272E"},r=new Z({input:s,box:He});r.placeholder=i.prompt;var l=0,h=0;void 0!==i.centerX&&(l=e.mywidth/2+i.centerX-n/2);void 0!==i.centerY&&(h=e.myheight/2+i.centerY-o/2);return r.position.set(l,h),r}(e,i);break;default:throw"不支持的场景元素类型：".concat(e.type)}void 0!==s.var&&(n[s.var]=r,r.var=s.var);void 0!==e.compId&&(o[e.compId]=r);s.name&&(r.uiname=s.name);s.runtime&&(r.clickSoundPath=s.runtime.replace("../","myLaya/"));e.child.forEach(function(e){return r.addChild(t(e,r,n,o,a))});void 0!==s.layoutEnabled&&a.push(function(){r.scrollView=new De({root:r,isHorizontal:s.layoutEnabled})});return r}(t,e,e.ui,e.uiWithID,n))}),n.forEach(function(t){return t()})}function He(t,e){var i=new j,n=new N;return n.beginFill(16777215),n.drawRect(0,0,t,e),n.endFill(),i.addChild(n),i}function We(t){var e=Xe(t.text,"").replace(/\${.*?}/g,function(t){return F[u.i18nPath].data[t.substring(2,t.length-1)]}),i=Xe(t.color,"black"),n=Xe(t.fontSize,10),o=Xe(t.font),a=Xe(t.width),s={fill:i,fontFamily:"arial",fontSize:n,wordWrap:!1,leading:Xe(t.leading,0),padding:5};return void 0!==Xe(t.strokeColor)&&(s.stroke=Xe(t.strokeColor)),void 0!==Xe(t.stroke)&&(s.strokeThickness=Xe(t.stroke)),o&&(s.fontFamily=o),void 0!==a&&(s.wordWrap=!0,s.wordWrapWidth=a),new z(e,new H(s))}var Je={createScene:function(t,e){return ze(F[t].data,e)},createTextFromData:We,createSceneByData:ze};function Ye(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var qe=function(){return!0},Ze=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,n=[{key:"uiClone",value:function(e,i,n){var o=t.copy(e,n);return void 0===i&&((i=o).ui={}),o.uiname&&(i.ui[o.uiname]=o),e instanceof Ve||e.children.forEach(function(e){o.addChild(t.uiClone(e,i,o))}),o}},{key:"initUIRoot",value:function(e,i){void 0===i&&((i=e).ui={}),e.uiname&&(i.ui[e.uiname]=e),e.children.forEach(function(e){return t.initUIRoot(e,i)})}},{key:"clone",value:function(e,i){var n=t.copy(e,i);return e.children.forEach(function(e){n.addChild(t.clone(e,i))}),n}},{key:"copy",value:function(e,i){var n;return e instanceof Ve?n=t.copyImageText(e,i):e instanceof z?n=t.copyText(e):e instanceof V?n=t.copySprite(e):e instanceof W?n=t.copyNineSlicePlane(e):e instanceof j&&(n=t.copyContainer(e)),e.uiname&&(n.uiname=e.uiname),e.clickSoundPath&&(n.clickSoundPath=e.clickSoundPath),n}},{key:"copyContainer",value:function(t){var e=new j;return e.alpha=t.alpha,e.buttonMode=t.buttonMode,e.hitArea=t.hitArea,e.interactive=t.interactive,e.rotation=t.rotation,e.scale.set(t.scale.x,t.scale.y),e.visible=t.visible,e.x=t.x,e.y=t.y,e.mywidth=t.mywidth,e.myheight=t.myheight,e}},{key:"copySprite",value:function(t){var e=new V;return e.alpha=t.alpha,e.anchor.set(t.anchor.x,t.anchor.y),e.buttonMode=t.buttonMode,e.interactive=t.interactive,e.rotation=t.rotation,e.scale.set(t.scale.x,t.scale.y),e.texture=t.texture,e.visible=t.visible,e.x=t.x,e.y=t.y,e.mywidth=t.mywidth,e.myheight=t.myheight,e}},{key:"copyText",value:function(t){var e=new z(t.text,t.style);return e.alpha=t.alpha,e.anchor.set(t.anchor.x,t.anchor.y),e.buttonMode=t.buttonMode,e.interactive=t.interactive,e.rotation=t.rotation,e.scale.set(t.scale.x,t.scale.y),e.visible=t.visible,e.x=t.x,e.y=t.y,e.mywidth=t.mywidth,e.myheight=t.myheight,e}},{key:"copyImageText",value:function(t,e){var i=new Ve(t.data,e);return i.alpha=t.alpha,i.buttonMode=t.buttonMode,i.interactive=t.interactive,i.rotation=t.rotation,i.visible=t.visible,i.x=t.x,i.y=t.y,i.width=t.width,i.height=t.height,i.mywidth=t.mywidth,i.myheight=t.myheight,i}},{key:"copyNineSlicePlane",value:function(t){var e=new W(t.texture,t.leftWidth,t.topHeight,t.rightWidth,t.bottomHeight);return e.alpha=t.alpha,e.buttonMode=t.buttonMode,e.interactive=t.interactive,e.rotation=t.rotation,e.visible=t.visible,e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e.mywidth=t.mywidth,e.myheight=t.myheight,e}},{key:"onClick",value:function(e,i,n){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.buttonMode=!0,e.interactive=!0,e.on("pointerdown",function(i){if((a.noControl||qe(e))&&(e.clickPoint={x:i.data.global.x,y:i.data.global.y},!n)){e.originScaleX=e.scale.x,e.originScaleY=e.scale.y,e.scale.set(e.originScaleX*u.buttonClickScale,e.originScaleY*u.buttonClickScale);var o=t.calcButtonMove(e),s=o.moveX,r=o.moveY,l=e.x-s,h=e.y-r;e.position.set(l,h)}}),e.on("pointerup",function(s){if((a.noControl||qe(e))&&(o.controlClickCallback&&o.controlClickCallback(),e.clickPoint)){if(!n){e.scale.set(e.originScaleX,e.originScaleY);var r=t.calcButtonMove(e),l=r.moveX,h=r.moveY,c=e.x+l,m=e.y+h;e.position.set(c,m)}Q.isPointInRect({x:s.data.global.x,y:s.data.global.y},{x:e.clickPoint.x-u.buttonClickOffset,y:e.clickPoint.y-u.buttonClickOffset,width:2*u.buttonClickOffset,height:2*u.buttonClickOffset})&&(i(e,s),e.clickSoundPath&&Ft.playSound(e.clickSoundPath)),e.clickPoint=void 0}}),e.on("pointerupoutside",function(){if((a.noControl||qe(e))&&e.clickPoint&&(e.clickPoint=void 0,!n)){e.scale.set(e.originScaleX,e.originScaleY);var i=t.calcButtonMove(e),o=i.moveX,s=i.moveY,r=e.x+o,l=e.y+s;e.position.set(r,l)}})}},{key:"controlClick",value:function(t,e){qe=t,this.controlClickCallback=e}},{key:"freeClick",value:function(){qe=function(){return!0},delete this.controlClickCallback}},{key:"getClickPredicate",value:function(){return qe}},{key:"calcButtonMove",value:function(t){var e=t.mywidth*t.originScaleX,i=t.myheight*t.originScaleY;return{moveX:(e*u.buttonClickScale-e)/2,moveY:(i*u.buttonClickScale-i)/2}}}],(i=null)&&Ye(e.prototype,i),n&&Ye(e,n),t}(),Ke=i(0);function $e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ti(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ei(t,e,i){return e&&ti(t.prototype,e),i&&ti(t,i),t}var ii=["x","y","alpha","width","height"];var ni=function(){function t(e,i,n,o,a,s){Qe(this,t),this.obj=e,this.key=i,this.callback=s,this.updateObject=$e({},i,function(t,e){return"scaleX"===e?t.scale.x:"scaleY"===e?t.scale.y:"rotation"===e?Q.radius2angle(t.rotation):-1!==ii.indexOf(e)?t[e]:void console.error("动画解析功能暂时不支持属性：".concat(e,"，如果需要的话，请和程序进行沟通"))}(e,i)),this.tween=new Ke.a.Tween(this.updateObject).to($e({},i,n),o).easing(function(t){if("linearNone"===t)return Ke.a.Easing.Linear.None;console.error("动画解析功能暂时不支持缓动：".concat(t,"，如果需要的话，请和程序进行沟通"))}(a)).onUpdate(this.onUpdate.bind(this)).onComplete(this.onComplete.bind(this)).start(performance.now())}return ei(t,[{key:"onUpdate",value:function(){var t,e,i;t=this.obj,e=this.key,i=this.updateObject[this.key],"scaleX"===e?t.scale.x=i:"scaleY"===e?t.scale.y=i:"rotation"===e?t.rotation=Q.angle2radius(i):-1!==ii.indexOf(e)?t[e]=i:console.error("动画解析功能暂时不支持属性：".concat(e,"，如果需要的话，请和程序进行沟通"))}},{key:"onComplete",value:function(){this.stop(),this.callback()}},{key:"stop",value:function(){this.tween.stop()}}]),t}(),oi=function(){function t(e,i,n,o){var a=this;Qe(this,t),this.obj=e,this.key=i,this.frames=n,this.callback=o,this.index=0,this.lastFrameIndex=0,0===this.frames[0].index&&(this.obj[this.key]=this.frames[0].value,this.index++),this.frames[this.index]?this.playFrame():requestAnimationFrame(function(){a.completed=!0,a.callback()})}return ei(t,[{key:"onFrameEnded",value:function(){this.index++,this.frames[this.index]?this.playFrame():(this.completed=!0,this.callback())}},{key:"playFrame",value:function(){var t=this.frames[this.index],e=1e3*(t.index-this.lastFrameIndex)/24;this.lastFrameIndex=t.index,this.frame=new ni(this.obj,this.key,t.value,e,t.tweenMethod,this.onFrameEnded.bind(this))}},{key:"stop",value:function(){this.frame&&this.frame.stop()}}]),t}(),ai=function(){function t(e,i,n){var o=this;Qe(this,t),this.callback=n||function(){return 0},this.animationTable={},i.nodes.forEach(function(t){o.animationTable[t.target]={};var i=e(t.target);if(i)for(var n in t.keyframes)if(t.keyframes.hasOwnProperty(n)){var a=t.keyframes[n];o.animationTable[t.target][n]=new oi(i,n,a,o.onFramesEnded.bind(o))}})}return ei(t,[{key:"onFramesEnded",value:function(){this.checkIsAllCompleted()&&this.callback()}},{key:"checkIsAllCompleted",value:function(){for(var t in this.animationTable)if(this.animationTable.hasOwnProperty(t)){var e=this.animationTable[t];for(var i in e)if(e.hasOwnProperty(i)&&!e[i].completed)return!1}return!0}},{key:"stop",value:function(){for(var t in this.animationTable)if(this.animationTable.hasOwnProperty(t)){var e=this.animationTable[t];for(var i in e)e.hasOwnProperty(i)&&(e[i].completed||e[i].stop())}}}]),t}();function si(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ri=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bg=new G(e.children[0].texture,App.sceneWidth,App.sceneHeight),i.addChildAt(this.bg,0),e.visible=!1}var e,i,n;return e=t,(i=[{key:"stop",value:function(){this.frameId&&(cancelAnimationFrame(this.frameId),delete this.frameId)}},{key:"start",value:function(){var t=this;!function e(){t.bg.tilePosition.x+=u.movingBackground.x,t.bg.tilePosition.y+=u.movingBackground.y,t.frameId=requestAnimationFrame(e)}()}}])&&si(e.prototype,i),n&&si(e,n),t}();function li(t){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ci(t,e){return!e||"object"!==li(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ui(t,e,i){return(ui="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function mi(t){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pi(t,e){return(pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var di=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ci(this,mi(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pi(t,e)}(e,j),i=e,(n=[{key:"create",value:function(t,e){this.sceneName=t,this.eventTable={},this.createCallback=e,this.__proto__.constructor.sceneFilePath?(this.sceneFilePath=this.__proto__.constructor.sceneFilePath,this.loadResources()):this.internalOnCreate()}},{key:"destroy",value:function(){var t;this.onDestroy();for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];(t=ui(mi(e.prototype),"destroy",this)).call.apply(t,[this].concat(n))}},{key:"show",value:function(){var t=this;this.visible=!0,this._movingBackground&&this._movingBackground.start(),this.onShow.apply(this,arguments),this.stopNormalAnimation(),this.playAnimation("in",function(){t.createNormalAnimation(),App.onSceneShowOnTop(t.sceneName)})}},{key:"hide",value:function(){var t=this;this.stopNormalAnimation(),this.playAnimation("out",function(){t.visible=!1,t._movingBackground&&t._movingBackground.stop(),t.onHide()})}},{key:"loadResources",value:function(){var t=[this.sceneFilePath];this.__proto__.constructor.resPathList&&(t=t.concat(this.__proto__.constructor.resPathList)),App.loadResources(t,this.onLoadedAllRes.bind(this))}},{key:"onLoadedAllRes",value:function(){Je.createScene(this.sceneFilePath,this),this.internalOnCreate()}},{key:"internalOnCreate",value:function(){this.onCreate(),this.ui._movingBackground&&(this._movingBackground=new ri(this.ui._movingBackground,this)),this.createCallback(),this.createCallback=void 0}},{key:"createNormalAnimation",value:function(){var t=this,e=this.getAnimationConfig("normal");e&&(this.normalAnimation=new ai(this.getChildByID.bind(this),e,function(){return t.createNormalAnimation()}))}},{key:"stopNormalAnimation",value:function(){this.normalAnimation&&(this.normalAnimation.stop(),delete this.normalAnimation)}},{key:"onCreate",value:function(){}},{key:"onDestroy",value:function(){for(var t in this.eventTable)this.eventTable.hasOwnProperty(t)&&pt.unregisterEvent(t,this.eventTable[t]);this.eventTable=void 0,this.normalAnimation&&(this.normalAnimation.stop(),delete this.normalAnimation)}},{key:"onShow",value:function(){}},{key:"onHide",value:function(){}},{key:"registerEvent",value:function(t,e){e=e.bind(this),this.eventTable[t]=e,pt.registerEvent(t,e)}},{key:"unregisterEvent",value:function(t){pt.unregisterEvent(t,this.eventTable[t]),this.eventTable[t]=void 0}},{key:"onClick",value:function(){Ze.onClick.apply(Ze,arguments)}},{key:"isShowed",value:function(){return this.visible}},{key:"getChildByID",value:function(t){return this.uiWithID[t]}},{key:"playAnimation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.getAnimationConfig(t);if(n)return App.showMask(i.onClickMask),new ai(this.getChildByID.bind(this),n,function(){App.hideMask(),e()});e()}},{key:"getAnimationConfig",value:function(t){if(this.sceneFilePath&&F[this.sceneFilePath]&&F[this.sceneFilePath].data.animations)return F[this.sceneFilePath].data.animations.find(function(e){return e.name===t})}},{key:"getGuidePanelData",value:function(t){if(this.sceneFilePath&&F[this.sceneFilePath]&&F[this.sceneFilePath].data)return F[this.sceneFilePath].data.child.find(function(e){return e.props.var===t})}}])&&hi(i.prototype,n),o&&hi(i,o),e}();function fi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yi=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.originPath=[];for(var a=0;a<i.length;a++)this.originPath.push(i[a]);this.leftTopPoint={x:i[0],y:i[1]},this.lowestTopY=i.reduce(function(t,e,i){return i%2==1?void 0===t?e:e>t?e:t:t},i[1]),this.highestTopPoint=i.reduce(function(t,e,n){return n%2==1&&e<t.y?{x:i[n-1],y:i[n]}:t},{x:i[0],y:i[1]});for(var s=i[1],r=1;r<i.length;r+=2)i[r]>s&&(s=i[r]);var l=s+App.sceneHeight/3*2;i=[i[0],l].concat(i).concat([i[i.length-2],l]),this.world=e,this.sprite=new j,this.sprite.part=this;var h=Q.getPathRect(i);this.rect=h;var c=i.map(function(t,e){return e%2==0?t-h.x:t-h.y});this.createSide(n,h.width,h.height),this.createTop(o,c),this.createEdgeMask(c),this.createClipMask(c),this.sprite.cacheAsBitmap=!0,this.sprite.position.set(h.x,h.y),this.createPhysicsBody(e,i)}var e,i,n;return e=t,n=[{key:"isFatalEdge",value:function(t,e){var i,n;t.y>e.y?(n=t.y-e.y,i=t.x-e.x):(n=e.y-t.y,i=e.x-t.x);var o=Math.atan(n/i);return u.fatalEdgeAngleRange[0]<=o&&o<=u.fatalEdgeAngleRange[1]}}],(i=[{key:"createSide",value:function(t,e,i){var n=F[t].texture,o=new G(n,e,i);this.sprite.addChild(o)}},{key:"createTop",value:function(t,e){for(var i=F[t].texture,n=2;n<e.length-4;n+=2){var o={x:e[n],y:e[n+1]},a={x:e[n+2],y:e[n+3]},s=Q.calcPointDistance(o,a),r=new G(i,s,i.height);this.sprite.addChild(r),r.position.set(o.x,o.y),r.rotation=Q.calcRadians(o,a)}}},{key:"createEdgeMask",value:function(t){var e=this;[{sp:{x:t[0],y:t[1]},ep:{x:t[2],y:t[3]}},{sp:{x:t[t.length-4],y:t[t.length-3]},ep:{x:t[t.length-2],y:t[t.length-1]}}].forEach(function(t){var i=t.sp,n=t.ep,o=Math.abs(i.y-n.y),a=Q.createLinearGradientMask(o,u.edgeHeight,u.edgeColorStop),s=U.from(a),r=new V(s);e.sprite.addChild(r),r.position.set(i.x,i.y),r.rotation=Q.calcRadians(i,n)})}},{key:"createClipMask",value:function(t){var e=new N;e.beginFill(),e.drawPolygon(t),e.endFill(),this.sprite.mask=e}},{key:"createPhysicsBody",value:function(e,i){var n=i.map(function(t,e){return e%2==1&&(t=u.designHeight-t),t*u.pixel2meter}),o=e.createBody();this.body=o,o.setUserData({type:"Road",obj:this});for(var a=0;a<=n.length-4;a+=2){var s={x:n[a],y:n[a+1]},r={x:n[a+2],y:n[a+3]},l={density:0,friction:1};if(a===n.length-4)o.createFixture(nt(et(s.x,s.y),et(r.x,r.y)),l).setUserData({isCliff:!0});else if(t.isFatalEdge(s,r)){if(Q.calcPointDistance(s,r)<=u.roadFatalMinLength)o.createFixture(nt(et(s.x,s.y),et(r.x,r.y)),l);else{var h=Q.calcRadians(r,s),c={x:r.x+Math.cos(h)*u.roadFatalMinLength,y:r.y+Math.sin(h)*u.roadFatalMinLength};o.createFixture(nt(et(s.x,s.y),et(c.x,c.y)),l).setUserData({isFatal:!0}),o.createFixture(nt(et(c.x,c.y),et(r.x,r.y)),l)}}else o.createFixture(nt(et(s.x,s.y),et(r.x,r.y)),l)}}},{key:"getRightBorderX",value:function(){return this.rect.x+this.rect.width}},{key:"getLeftBorderX",value:function(){return this.rect.x}},{key:"getBottomBorderX",value:function(){return this.rect.y+this.rect.height}},{key:"getTopBorderY",value:function(){return this.rect.y}},{key:"getLowestTopY",value:function(){return this.lowestTopY}},{key:"getHighestTopPoint",value:function(){return this.highestTopPoint}},{key:"getLeftTopPoint",value:function(){return{x:this.leftTopPoint.x,y:this.leftTopPoint.y}}},{key:"getTopPosInTargetX",value:function(t){for(var e=this.originPath,i=0;i<=e.length-4;i+=2){var n={x:e[i],y:e[i+1]},o={x:e[i+2],y:e[i+3]};if(t>=n.x&&t<o.x){var a=Q.calcRadians(n,o);return{x:n.x+(t-n.x),y:n.y+(t-n.x)*Math.tan(a)}}}}},{key:"destroy",value:function(){this.world.destroyBody(this.body),this.sprite.destroy()}}])&&fi(e.prototype,i),n&&fi(e,n),t}();function gi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var vi=function(){function t(e,i,n,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType=e,this.gameMgr=i,this.parent=n,this.world=o,this.config={imagePath:"myLaya/laya/assets/".concat(a.props.skin),scaleX:void 0===a.props.scaleX?1:a.props.scaleX,scaleY:void 0===a.props.scaleY?1:a.props.scaleY,rotation:void 0===a.props.rotation?0:Q.angle2radius(a.props.rotation),x:a.props.x,y:a.props.y};var s=Et.getItemProp(a,"ID");if(s){var r=u.item[e].table[s];r?Q.copyProps(this.config,r):console.error("物体".concat(e,"没有ID").concat(s,"的配置"))}this.sprite=void 0,this.body=void 0}var e,i,n;return e=t,(i=[{key:"destroy",value:function(){this.destroyed||(this.sprite.destroy(),this.body&&this.world.destroyBody(this.body),this.destroyed=!0)}},{key:"onCreate",value:function(){this.config.animationJsonPath?(this.sprite=this.parent.addChild(new X(Et.getFrames(this.config.animationJsonPath,this.config.animationName))),this.sprite.loop=!0,this.sprite.animationSpeed=this.config.animationSpeed,this.sprite.play()):"Random"===this.config.effect?(this.sprite=this.parent.addChild(new X(Et.getFrames(u.imagePath.randomItem))),this.sprite.loop=!0,this.sprite.animationSpeed=u.animationSpeed.randomItem,this.sprite.play()):(this.sprite=this.parent.addChild(new V),this.sprite.texture=F[this.config.imagePath].texture),this.sprite.anchor.set(.5,.5),this.sprite.scale.set(this.config.scaleX,this.config.scaleY),this.sprite.rotation=this.config.rotation,this.sprite.position.set(this.config.x,this.config.y),this.sprite.part=this}},{key:"update",value:function(){var t=this.body.getPosition(),e=Et.physicsPos2renderPos(t);this.sprite.position.set(e.x,e.y),this.sprite.rotation=-this.body.getAngle()}},{key:"onPreSolve",value:function(){}},{key:"onBeginContact",value:function(){}},{key:"getLeftBorderX",value:function(){return this.sprite.x-this.sprite.anchor.x*this.sprite.texture.width*this.sprite.scale.x}},{key:"getRightBorderX",value:function(){return this.getLeftBorderX()+this.sprite.texture.width*this.sprite.scale.x}},{key:"changeSpeed",value:function(t){this.sprite.animationSpeed=this.config.animationSpeed*t}}])&&gi(e.prototype,i),n&&gi(e,n),t}();function _i(t){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xi(t,e){return!e||"object"!==_i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Si(t,e,i){return(Si="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ki(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function ki(t){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wi(t,e){return(wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ai=function(t){function e(t,i,n,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=xi(this,ki(e).call(this,"upDownPlatform",t,i,n,o))).config.velocity*=u.pixel2meter,a.onCreate(),a}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wi(t,e)}(e,vi),i=e,(n=[{key:"onCreate",value:function(){Si(ki(e.prototype),"onCreate",this).call(this),this.body=this.world.createKinematicBody(),this.body.setUserData(this);var t=this.sprite.texture,i=t.width/2*u.pixel2meter*this.config.scaleX,n=t.height/2*u.pixel2meter*this.config.scaleY;this.body.createFixture(st(i,n)).setUserData({resetJumpStatus:!0});var o=Et.renderPos2PhysicsPos(this.sprite.position);this.body.setPosition(o),this.body.setAngle(-this.config.rotation),this.config.topY=this.sprite.y-this.config.topOffset,this.config.bottomY=this.sprite.y+this.config.bottomOffset,this.config.isStartUp?this.body.setLinearVelocity(et(0,this.config.velocity)):this.body.setLinearVelocity(et(0,-this.config.velocity));var a=this.gameMgr.getSpriteGameBounds(this.sprite);this.leftBorderX=a.x,this.rightBorderX=a.x+a.width,this.lowestTopY=a.y+a.height+this.config.bottomOffset,this.highestTopPoint={x:this.leftBorderX,y:a.y-this.config.topOffset}}},{key:"update",value:function(){Si(ki(e.prototype),"update",this).call(this);var t=this.sprite.position;t.y<=this.config.topY?this.body.setLinearVelocity(et(0,-this.config.velocity)):t.y>=this.config.bottomY&&this.body.setLinearVelocity(et(0,this.config.velocity))}},{key:"getLeftBorderX",value:function(){return this.leftBorderX}},{key:"getRightBorderX",value:function(){return this.rightBorderX}},{key:"getLowestTopY",value:function(){return this.lowestTopY}},{key:"getHighestTopPoint",value:function(){return this.highestTopPoint}},{key:"getTopPosInTargetX",value:function(t){return{x:t,y:this.highestTopPoint.y}}},{key:"getLeftTopPoint",value:function(){return{x:this.leftBorderX,y:this.highestTopPoint.y}}}])&&bi(i.prototype,n),o&&bi(i,o),e}();function Pi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ti=function(){function t(e,i,n,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e,this.world=i,this.config={path:n,sideImagePath:o,topImagePath:a,roadHeight:u.designHeight},this.container=void 0,this.body=void 0,this.onCreate()}var e,i,n;return e=t,(i=[{key:"destroy",value:function(){this.container.destroy(),this.world.destroyBody(this.body)}},{key:"onCreate",value:function(){var t=this;this.container=this.parent.addChild(new j);var e=Q.getPathRect(this.config.path);this.rightBorderX=e.x+e.width,this.leftBorderX=e.x,this.lowestTopY=this.config.path.reduce(function(t,e,i){return i%2==1?void 0===t?e:e>t?e:t:t},this.config.path[1]),this.highestTopPoint=this.config.path.reduce(function(e,i,n){return n%2==1&&i<e.y?{x:t.config.path[n-1],y:t.config.path[n]}:e},{x:this.config.path[0],y:this.config.path[1]}),this.leftTopPoint={x:this.config.path[0],y:this.config.path[1]};var i=this.config.path.map(function(t,i){return i%2==0?t-e.x:t-e.y});this.createSide(e.width),this.createTop(i),this.createMask(i),this.container.cacheAsBitmap=!0,this.container.position.set(e.x,e.y),this.createBody()}},{key:"createSide",value:function(t){var e=F[this.config.sideImagePath].texture;this.container.addChild(new G(e,t,this.config.roadHeight))}},{key:"createTop",value:function(t){for(var e=F[this.config.topImagePath].texture,i=0;i<t.length-2;i+=2){var n={x:t[i],y:t[i+1]},o={x:t[i+2],y:t[i+3]},a=Q.calcPointDistance(n,o),s=this.container.addChild(new G(e,a,e.height));s.position.set(n.x,n.y),s.rotation=Q.calcRadians(n,o)}}},{key:"createMask",value:function(t){t=t.concat([t[t.length-2],this.config.roadHeight,0,this.config.roadHeight]);var e=new N;e.beginFill(),e.drawPolygon(t),e.endFill(),this.container.mask=e}},{key:"createBody",value:function(){this.body=this.world.createBody(),this.body.setUserData({type:"Road2",obj:this});for(var t=this.config.path.map(function(t,e){return e%2==1&&(t=u.designHeight-t),t*u.pixel2meter}),e=0;e<t.length-2;e+=2){var i=et(t[e],t[e+1]),n=et(t[e+2],t[e+3]);this.body.createFixture(nt(i,n),{density:0,friction:1}).setUserData({resetJumpStatus:!0,p1:i,p2:n})}}},{key:"getRightBorderX",value:function(){return this.rightBorderX}},{key:"getLeftBorderX",value:function(){return this.leftBorderX}},{key:"getLowestTopY",value:function(){return this.lowestTopY}},{key:"getHighestTopPoint",value:function(){return this.highestTopPoint}},{key:"getLeftTopPoint",value:function(){return{x:this.leftTopPoint.x,y:this.leftTopPoint.y}}},{key:"getTopPosInTargetX",value:function(t){for(var e=this.config.path,i=0;i<=e.length-4;i+=2){var n={x:e[i],y:e[i+1]},o={x:e[i+2],y:e[i+3]};if(t>=n.x&&t<o.x){var a=Q.calcRadians(n,o);return{x:n.x+(t-n.x),y:n.y+(t-n.x)*Math.tan(a)}}}}}])&&Pi(e.prototype,i),n&&Pi(e,n),t}();function Ci(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ii=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=e,this.world=i,this.config={imagePath:"myLaya/laya/assets/".concat(n.props.skin),scaleX:void 0===n.props.scaleX?1:n.props.scaleX,scaleY:void 0===n.props.scaleY?1:n.props.scaleY,rotation:void 0===n.props.rotation?0:Q.angle2radius(n.props.rotation),x:n.props.x,y:n.props.y},this.sprite=void 0,this.body=void 0,this.onCreate()}var e,i,n;return e=t,(i=[{key:"destroy",value:function(){this.sprite.destroy(),this.world.destroyBody(this.body)}},{key:"onCreate",value:function(){this.sprite=this.parent.addChild(new V);var t=F[this.config.imagePath].texture;this.sprite.texture=t,this.sprite.anchor.set(.5,.5),this.sprite.scale.set(this.config.scaleX,this.config.scaleY),this.sprite.position.set(this.config.x,this.config.y),this.sprite.rotation=this.config.rotation,this.body=this.world.createBody();var e=t.width/2*u.pixel2meter*this.config.scaleX,i=t.height/2*u.pixel2meter*this.config.scaleY;this.body.createFixture(st(e,i)).setUserData({isFatal:!0});var n=Et.renderPos2PhysicsPos(this.sprite.position);this.body.setPosition(n),this.body.setAngle(-this.config.rotation)}}])&&Ci(e.prototype,i),n&&Ci(e,n),t}();function Bi(t){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Li(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ei(t,e){return!e||"object"!==Bi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mi(t,e,i){return(Mi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ri(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function Ri(t){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Di(t,e){return(Di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Oi=function(t){function e(t,i,n,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Ei(this,Ri(e).call(this,"rollingStone",t,i,n,o))).onCreate(),a}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Di(t,e)}(e,vi),i=e,(n=[{key:"onCreate",value:function(){Mi(Ri(e.prototype),"onCreate",this).call(this),this.leftBorderX=this.sprite.x-this.sprite.texture.width*this.sprite.scale.x/2}},{key:"createBody",value:function(){this.body=this.world.createDynamicBody(),this.body.setUserData(this);var t=this.sprite.texture.width/2*this.sprite.scale.x*u.pixel2meter;this.body.createFixture(ot(t),{density:1,friction:1}).setUserData({isDanger:!0});var e=Et.renderPos2PhysicsPos(this.sprite.position);this.body.setPosition(e),this.body.setAngle(-this.config.rotation),this.body.setAngularVelocity(this.config.angularVelocity)}},{key:"update",value:function(){if(void 0===this.body)this.gameMgr.isItemXEnterView(this)&&this.createBody();else{if(!this.isDead&&this.striked){var t=Q.calcRadians(this.striked.bikePos,this.body.getPosition()),e=Math.cos(t)*u.item.rollingStone.strikedImpulse,i=Math.sin(t)*u.item.rollingStone.strikedImpulse;this.body.applyLinearImpulse(et(e,i),this.body.getPosition()),this.body.setAngularVelocity(u.item.rollingStone.strikedAngularVelocity),this.isDead=!0}var n=Et.physicsPos2renderPos(this.body.getPosition());this.sprite.position.set(n.x,n.y),this.sprite.rotation=-this.body.getAngle()}}},{key:"onPreSolve",value:function(t){(this.isDead||this.striked)&&t.setEnabled(!1)}},{key:"onBeginContact",value:function(t,e){if(!this.isDead){var i=e.getBody(),n=i.getUserData();if(this.gameMgr.isBike(n))if(i.getPosition().y<this.body.getPosition().y)if(n.isInvincible()){var o=i.getPosition(),a=o.x,s=o.y;this.striked={bikePos:{x:a,y:s}}}else n.setContactFatalEdge(!0);else n.resetJumpStatus()}}},{key:"getLeftBorderX",value:function(){return this.leftBorderX}}])&&Li(i.prototype,n),o&&Li(i,o),e}();function Fi(t){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ui(t,e){return!e||"object"!==Fi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ni(t,e,i){return(Ni="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function Vi(t){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gi(t,e){return(Gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xi=function(t){function e(t,i,n,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Ui(this,Vi(e).call(this,"fireBall",t,i,n,o))).config.velocity*=u.pixel2meter,a.onCreate(),a}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gi(t,e)}(e,vi),i=e,(n=[{key:"onCreate",value:function(){Ni(Vi(e.prototype),"onCreate",this).call(this),this.leftBorderX=this.sprite.x-this.sprite.texture.width*this.sprite.scale.x/2}},{key:"createBody",value:function(){this.body=this.world.createKinematicBody(),this.body.setUserData(this);var t=Et.renderPos2PhysicsPos(this.sprite.position);this.body.setPosition(t),this.body.setAngle(-this.config.rotation);var e={},i=this.sprite.texture,n=i.width/2*u.pixel2meter*this.config.scaleX,o=i.height/2*u.pixel2meter*this.config.scaleY;e.shape=st(n,o),e.isSensor=!0,this.body.createFixture(e).setUserData({isDanger:!0}),this.body.setLinearVelocity(et(this.config.velocity,0))}},{key:"update",value:function(){if(u.warningAnimation&&!this.hasShowedWarning)this.gameMgr.isXEnterView(this.getLeftBorderX()-u.warningAnimation.warningDistance)&&this.showWarning();else if(void 0===this.body)this.gameMgr.isItemXEnterView(this)&&this.createBody();else{if(!this.isDead&&this.striked){this.body.setDynamic();var t=Q.calcRadians(this.striked.bikePos,this.body.getPosition()),e=Math.cos(t)*u.item.fireBall.strikedImpulse,i=Math.sin(t)*u.item.fireBall.strikedImpulse;this.body.applyLinearImpulse(et(e,i),this.body.getPosition()),this.body.setAngularVelocity(u.item.fireBall.strikedAngularVelocity),this.isDead=!0}var n=Et.physicsPos2renderPos(this.body.getPosition());this.sprite.position.set(n.x,n.y),this.sprite.rotation=-this.body.getAngle()}}},{key:"onBeginContact",value:function(t,e){if(!this.isDead){var i=e.getBody(),n=i.getUserData();if(this.gameMgr.isBike(n))if(n.isInvincible()){var o=i.getPosition(),a=o.x,s=o.y;this.striked={bikePos:{x:a,y:s}}}else n.setContactFatalEdge(!0)}}},{key:"getLeftBorderX",value:function(){return this.leftBorderX}},{key:"showWarning",value:function(){this.hasShowedWarning=!0,this.gameMgr.showWarning(this.sprite)}}])&&ji(i.prototype,n),o&&ji(i,o),e}();function zi(t){return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Wi(t,e){return!e||"object"!==zi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ji(t,e,i){return(Ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function Yi(t){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qi(t,e){return(qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zi=function(t){function e(t,i,n,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=Wi(this,Yi(e).call(this,"EatableItem",t,i,n,o))).isHelpful=!!s.config.portable||u.effect[s.config.effect].isHelpful,a&&(s.chainData=a,s.chainData.count++,s.chainData.value+=s.config.value),s.onCreate(),s}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qi(t,e)}(e,vi),i=e,(n=[{key:"createBody",value:function(){this.body=this.world.createKinematicBody(),this.body.setUserData(this);var t={},e=this.sprite.texture,i=e.width/2*u.pixel2meter*this.sprite.scale.x,n=e.height/2*u.pixel2meter*this.sprite.scale.y;t.shape=st(i,n),t.isSensor=!0,this.body.createFixture(t).setUserData({isDanger:!this.isHelpful});var o=Et.renderPos2PhysicsPos(this.sprite.position);this.body.setPosition(o),this.body.setAngle(-this.sprite.rotation),this.baseY=o.y,this.frame=0}},{key:"onBeginContact",value:function(t,e){if(this.config.portable){if(this.gameMgr.chtable.player.is(e))this.sprite.visible&&!this.animation&&(Ft.playSound(u.soundPath.eatRandomItem,void 0,this.gameMgr.stepSpeed),"Random"===this.config.effect?pt.dispatchEvent("AteItem","Random",void 0,void 0,this.config):pt.dispatchEvent("AteItem","PortableItem",this.config.effect,this.sprite.texture,this.config),this.playEatAnimation());else if(this.gameMgr.chtable.enemy.is(e)){var i=e.getBody().getUserData();i.selfFixture===e&&("Random"===this.config.effect?i.onAteItem("PortableItem",this.gameMgr.randomEffect(i)):i.onAteItem("PortableItem",this.config.effect))}}else this.gameMgr.chtable.player.is(e)?this.sprite.visible&&!this.animation&&(pt.dispatchEvent("AteItem",this.config.effect,void 0,void 0,this.config),this.chainData&&(this.chainData.count--,0===this.chainData.count&&this.gameMgr.addExtraScore(this.config.effect,this.chainData.value)),this.playEatAnimation()):this.gameMgr.chtable.enemy.is(e)&&e.getBody().getUserData().selfFixture===e&&e.getBody().getUserData().onAteItem(this.config.effect)}},{key:"playEatAnimation",value:function(){var t=this;this.animation=new Ke.a.Tween(this.sprite).to({y:this.sprite.y-u.eatItemAnimation.yOffset,alpha:0},u.eatItemAnimation.duration/this.gameMgr.stepSpeed).easing(Ke.a.Easing.Quadratic.Out).onComplete(function(){t.sprite.visible=!1,delete t.animation,0===t.gameMgr.enemyList.length&&(t.willDestroyed=!0)}).start(performance.now())}},{key:"update",value:function(){var t=this;if(void 0===this.body&&this.gameMgr.isItemXEnterView(this)&&this.createBody(),this.body){if(this.isAttracted?this.moveToPlayer():this.gameMgr.isItemXInView(this)&&["Magnet","Sprint"].some(function(e){if(t.gameMgr.hasEffect(e)&&t.config["attractedBy".concat(e)])return t.isAttracted=!0,t.moveToPlayer(),!0}),!this.isAttracted&&(this.body.setLinearVelocity(et(this.config.forwardVelocity||0,0)),this.config.isMoveUpDown)){this.frame+=this.config.upDownStep*this.gameMgr.stepSpeed;var i=this.baseY+Math.sin(this.frame)*this.config.upDownCoefficient;this.body.setPosition(et(this.body.getPosition().x,i))}this.animation||Ji(Yi(e.prototype),"update",this).call(this)}}},{key:"moveToPlayer",value:function(){if(!this.animation&&"play"===this.gameMgr.gameStatus){var t=Q.calcRadians(this.body.getPosition(),this.gameMgr.bikeBody.getPosition()),e=u.effect.Magnet.velocity*u.pixel2meter,i=e*Math.cos(t),n=e*Math.sin(t),o=this.gameMgr.stepDuration*u.stepTimesEachFrame*this.gameMgr.stepSpeed,a=this.body.getPosition();this.body.setPosition(et(a.x+i*o,a.y+n*o))}}},{key:"destroy",value:function(){this.animation&&this.animation.stop(),Ji(Yi(e.prototype),"destroy",this).call(this)}}])&&Hi(i.prototype,n),o&&Hi(i,o),e}();function Ki(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Qi=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType="Spring",this.gameMgr=e,this.container=i,this.world=n,this.config=o;var a=Et.getItemProp(o,"ID")||"default";this.itemConfig=u.item[this.itemType].table[a],this.createSprite()}var e,i,n;return e=t,(i=[{key:"destroy",value:function(){this.sprite.destroy(),this.body&&this.world.destroyBody(this.body),void 0!==this.playerEndedTimer&&clearTimeout(this.playerEndedTimer)}},{key:"update",value:function(){if(void 0===this.body)this.gameMgr.isItemXEnterView(this)&&(this.scaleFrame=0,this.createBody(),this.itemConfig.appearSoundPath&&this.itemConfig.appearSoundPath.length>0&&Ft.playSound(this.itemConfig.appearSoundPath,void 0,this.gameMgr.stepSpeed));else if(this.itemConfig.scaleRange){this.scaleFrame+=this.gameMgr.stepSpeed;var t,e=this.itemConfig.scaleDuration/1e3*u.fps*2,i=this.scaleFrame/e,n=i-Math.floor(i);t=n<.5?this.itemConfig.scaleRange[0]+(this.itemConfig.scaleRange[1]-this.itemConfig.scaleRange[0])*n*2:this.itemConfig.scaleRange[0]+(this.itemConfig.scaleRange[1]-this.itemConfig.scaleRange[0])*(1-n)*2,this.sprite.scale.set(t,t)}}},{key:"onBeginContact",value:function(t,e){var i=e.getBody(),n=i.getUserData();this.gameMgr.isBike(n)&&(n.resetJumpStatus(),n.spring?(n.spring(this.itemConfig.contactBikeVelocity),u.soundPath.spring&&Ft.playSound(u.soundPath.spring,void 0,this.gameMgr.stepSpeed)):i.setLinearVelocity(et(i.getLinearVelocity().x,this.itemConfig.contactBikeVelocity)),n.addBulletTime&&n.addBulletTime(this.itemConfig.bulletTimeValueTrampled),this.playAnimation("ing"),this.animation.loop=!1,this.animation.onComplete=this.onIngAnimationComplete.bind(this))}},{key:"getLeftBorderX",value:function(){return this.sprite.x+this.animation.x-this.animation.texture.width*this.animation.scale.x*this.animation.anchor.x}},{key:"getRightBorderX",value:function(){return this.sprite.x+this.animation.x+this.animation.texture.width*this.animation.scale.x*(1-this.animation.anchor.x)}},{key:"createSprite",value:function(){this.sprite=new V,this.container.addChild(this.sprite),this.sprite.part=this,this.playAnimation("common"),this.sprite.position.set(this.config.props.x,this.config.props.y)}},{key:"createBody",value:function(){this.body=this.world.createBody(),this.body.setUserData(this);var t=Et.renderPos2PhysicsPos(this.sprite);this.body.setPosition(t);var e=this.itemConfig.bodyWidth/2*u.pixel2meter,i=this.itemConfig.bodyHeight/2*u.pixel2meter;if(this.body.createFixture({shape:st(e,i),isSensor:!0}),rt.showCollider){var n=new N;n.beginFill();var o=2*e*u.meter2pixel,a=2*i*u.meter2pixel;n.drawRect(-o/2,-a/2,o,a),n.endFill(),this.sprite.addChild(n)}}},{key:"playAnimation",value:function(t){var e;this.animation&&this.animation.destroy();var i=this.itemConfig.animations[t],n=Et.getFrames(i.path,i.name);this.animation=new X(n),this.sprite.addChild(this.animation),this.animation.anchor.set(.5,.5),this.animation.scale.set(this.config.props.scaleX,this.config.props.scaleY),(e=this.animation.position).set.apply(e,Ki(i.pos)),this.animation.animationSpeed=i.speed,this.animation.play()}},{key:"onIngAnimationComplete",value:function(){this.playerEndedTimer=setTimeout(this.onPlayEndedTimeout.bind(this),0)}},{key:"onPlayEndedTimeout",value:function(){delete this.playerEndedTimer,this.playAnimation("ended")}}])&&$i(e.prototype,i),n&&$i(e,n),t}();function tn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var en=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewWidth=i,this.moveVelocity=n,this.container=new j,this.before=this.createSprite(e),this.before.x=0,this.after=this.createSprite(e),this.after.x=this.before.x+this.before.width}var e,i,n;return e=t,(i=[{key:"createSprite",value:function(t){var e=V.from(t);return e.anchor.set(0,0),this.container.addChild(e)}},{key:"onFrame",value:function(){this.after.x-=this.moveVelocity/r.fps,this.before.x-=this.moveVelocity/r.fps,this.after.x+this.after.width<=this.viewWidth&&this.onExhaust()}},{key:"onExhaust",value:function(){this.before.position.x=this.after.position.x+this.after.width;var t=this.before;this.before=this.after,this.after=t}}])&&tn(e.prototype,i),n&&tn(e,n),t}();function nn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var on=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.sprite=new X(Et.getFrames(u.bulletTime.lineAnimationPath)),this.sprite.anchor.set(0,.5),this.sprite.position.set(i,n),this.sprite.animationSpeed=u.bulletTime.lineAnimationSpeed,this.sprite.play(),this.container.addChild(this.sprite),console.log("create")}var e,i,n;return e=t,(i=[{key:"destroy",value:function(){console.log("destroy"),this.animation&&(this.animation.stop(),delete this.animation),this.sprite.destroy()}},{key:"playAppearAnimation",value:function(){var t=this;this.animation&&(this.animation.stop(),delete this.animation),this.sprite.alpha=0,this.animation=new Ke.a.Tween(this.sprite).to({alpha:1},u.bulletTime.filmImageAppearDuration).easing(Ke.a.Easing.Quadratic.Out).onComplete(function(){delete t.animation}).start(performance.now())}},{key:"playDisappearAnimation",value:function(t){var e=this;this.animation&&(this.animation.stop(),delete this.animation),this.sprite.alpha=1,this.animation=new Ke.a.Tween(this.sprite).to({alpha:0},u.bulletTime.filmImageAppearDuration).easing(Ke.a.Easing.Quadratic.Out).onComplete(function(){delete e.animation,t&&t()}).start(performance.now())}},{key:"update",value:function(){this.sprite.x+=-1}},{key:"isPlayingAnimation",value:function(){return void 0!==this.animation}},{key:"getRightBorderX",value:function(){return this.sprite.x+this.sprite.width}}])&&nn(e.prototype,i),n&&nn(e,n),t}();function an(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var sn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMgr=e,this.config=u.bulletTime.line,this.bulletTimeLine=[],this.baseY=App.sceneHeight/(this.config.maxCountInScreen+1)}var e,i,n;return e=t,(i=[{key:"clear",value:function(){this.bulletTimeLine.forEach(function(t){return t&&t.destroy()}),this.bulletTimeLine=[]}},{key:"destroy",value:function(){this.clear()}},{key:"enterBulletTime",value:function(){this.bulletTimeLine.forEach(function(t){return t&&t.destroy()}),this.bulletTimeLine=[];for(var t=Q.intList(this.config.minCountInScreen-1,this.config.maxCountInScreen-1),e=Q.randomIntInRange(this.config.minCountInScreen,this.config.maxCountInScreen),i=Q.randomChooseMulti(t,e),n=0;n<this.config.maxCountInScreen;n++)-1!==i.indexOf(n)?this.createLine(n,App.sceneWidth*Math.random()).playAppearAnimation():this.bulletTimeLine[n]=void 0}},{key:"leaveBulletTime",value:function(){var t=this;this.bulletTimeLine.forEach(function(e){return e&&e.playDisappearAnimation(t.onDisappearAnimationEnded.bind(t))})}},{key:"onDisappearAnimationEnded",value:function(){this.bulletTimeLine.some(function(t){return t&&t.isPlayingAnimation()})||(this.bulletTimeLine.forEach(function(t){return t&&t.destroy()}),this.bulletTimeLine=[])}},{key:"update",value:function(){this.bulletTimeLine.forEach(function(t){return t&&t.update()});for(var t=0,e=[],i=0;i<this.bulletTimeLine.length;i++){var n=this.bulletTimeLine[i];n?this.gameMgr.isItemOutSideOfViewLeft(n)?(n.destroy(),delete this.bulletTimeLine[i]):(t++,e.push(i)):e.push(i)}var o=[];t<this.config.minCountInScreen&&(t=this.config.minCountInScreen-t,o=Q.randomChooseMulti(e,t));for(var a=0;a<this.bulletTimeLine.length;a++)void 0===this.bulletTimeLine[a]&&(-1!==o.indexOf(a)||Math.random()<=this.config.createLineRatePerFrame)&&this.createLine(a,App.sceneWidth)}},{key:"createLine",value:function(t,e){var i=(t+1)*this.baseY+2*this.config.randomOffset*Math.random()-this.config.randomOffset;return e+=-this.gameMgr.cameraContainer.x,i+=-this.gameMgr.cameraContainer.y,this.bulletTimeLine[t]=new on(this.gameMgr.underBikeContianer,e,i),this.bulletTimeLine[t]}}])&&an(e.prototype,i),n&&an(e,n),t}();function rn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ln=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mgr=e,this.gameMgr=i,this.panelContainer=n,this.data=o,this.guidePanel=this.createGuidePanel(o),this.playAnimation(o.animations)}var e,i,n;return e=t,(i=[{key:"destroy",value:function(){this.showTimer&&clearTimeout(this.showTimer),Ze.freeClick(),this.animation&&(this.animation.stop(),delete this.animation),this.guidePanel.destroy()}},{key:"createGuidePanel",value:function(t){var e=this,i=new j;Je.createSceneByData(t,i,!0),this.panelContainer.addChild(i),"1"===Et.getItemProp(t,"蒙版")&&(this.guideMask=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill(),i.addChildAt(this.guideMask,0));var n=parseInt(Et.getItemProp(t,"显示时间"));if(n&&(this.showTimer=setTimeout(function(){e.onClickGuidePanel()},1e3*n)),"1"===Et.getItemProp(t,"暂停直到用户点击"))this.gameMgr.pauseGame(),Ze.onClick(i,this.onClickGuidePanel.bind(this),!0),Ze.controlClick(function(t){return t===i});else if("1"===Et.getItemProp(t,"暂停直到用户跳跃"))this.gameMgr.pauseGame(),Ze.controlClick(function(t){if(e.gameMgr.gameContainer===t)return e.onClickGuidePanel(),!0});else if("1"===Et.getItemProp(t,"暂停直到用户使用道具")||"2"===Et.getItemProp(t,"暂停直到用户使用道具")){if(this.gameMgr.pauseGame(),this.guidePanelItemIndex=parseInt(Et.getItemProp(t,"暂停直到用户使用道具")),this.guideMask){this.guideMask.clear(),this.guideMask.beginFill(0,.5),this.guideMask.drawRect(0,0,App.sceneWidth,App.sceneHeight),this.guideMask.beginHole();var o=this.gameMgr.ui["portableItemButton".concat(this.guidePanelItemIndex)],a=o.getBounds(),s=App.trans2GlobalPosition(a),r=s.x,l=s.y;this.guideMask.drawRoundedRect(r,l,a.width,a.height,Math.min(a.width,a.height)*u.guideRectCornerRadius),this.guideMask.endHole(),this.guideMask.endFill(),Ze.controlClick(function(t){return o===t},this.onClickGuidePanel.bind(this))}}else if("1"===Et.getItemProp(t,"暂停直到用户使用子弹时间")&&(this.gameMgr.pauseGame(),this.guideMask)){this.guideMask.clear(),this.guideMask.beginFill(0,.5),this.guideMask.drawRect(0,0,App.sceneWidth,App.sceneHeight),this.guideMask.beginHole();var h=this.gameMgr.ui.bulletTimeBtn,c=h.getBounds(),m=App.trans2GlobalPosition(c),p=m.x,d=m.y;this.guideMask.drawRoundedRect(p,d,c.width,c.height,Math.min(c.width,c.height)*u.guideRectCornerRadius),this.guideMask.endHole(),this.guideMask.endFill(),Ze.controlClick(function(t){return h===t},this.onClickGuidePanel.bind(this))}return i}},{key:"playAnimation",value:function(t){var e=this;if(t){var i=t.find(function(t){return"normal"===t.name});i&&(this.animation=new ai(this.getChildByID.bind(this),i,function(){return e.playAnimation(t)}))}}},{key:"getChildByID",value:function(t){return this.guidePanel.uiWithID[t]}},{key:"onClickGuidePanel",value:function(){var t=Et.getItemProp(this.data,"引导名称");t&&Pt.completeGuide(t),this.gameMgr.resumeGame(),this.mgr.destroyGuidePanel()}}])&&rn(e.prototype,i),n&&rn(e,n),t}();function hn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var cn=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMgr=e,this.panelContainer=i,this.guidePanelDataList=[],pt.registerEvent("GameWin",this.onGameWin.bind(this))}var e,i,n;return e=t,(i=[{key:"clear",value:function(){this.setControlAll(!1),this.guidePanelDataList=[],this.destroyGuidePanel()}},{key:"setControlAll",value:function(t){this.controlAll=t,this.controlAll?Ze.controlClick(function(){return!1}):Ze.freeClick()}},{key:"push",value:function(t){this.guidePanelDataList.push(t)}},{key:"update",value:function(){for(var t=0;t<this.guidePanelDataList.length;t++){var e=this.guidePanelDataList[t];if(this.gameMgr.bikeOutterContainer.x>=e.props.x+u.bikeLeftMargin&&("1"!==Et.getItemProp(e,"只显示一次")||!Pt.hasCompletedGuide(Et.getItemProp(e,"引导名称")))){this.destroyGuidePanel(),this.guidePanel=new ln(this,this.gameMgr,this.panelContainer,e),this.guidePanelDataList.splice(t,1);break}}}},{key:"onGameWin",value:function(){this.destroyGuidePanel(),this.setControlAll(!1)}},{key:"destroyGuidePanel",value:function(){this.guidePanel&&(this.guidePanel.destroy(),delete this.guidePanel),this.setControlAll(this.controlAll)}}])&&hn(e.prototype,i),n&&hn(e,n),t}();function un(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var mn=function(){function t(e,i){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventTable={GameStart:this.onGameStart.bind(this),GameStop:this.onGameStop.bind(this),GamePause:this.onGamePause.bind(this),GameResume:this.onGameResume.bind(this)},this.eventTable)this.eventTable.hasOwnProperty(n)&&pt.registerEvent(n,this.eventTable[n]);this.appStatus=1,this.gameStatus=1,this.callback=e,this.timeout=i,this.setTimeout()}var e,i,n;return e=t,(i=[{key:"setTimeout",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){this.start=(new Date).getTime(),this.timer=setTimeout(this.onTimeout.bind(this),this.timeout)})},{key:"clearTimeout",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){clearTimeout(this.timer),delete this.timer,this.unregisterEventTable()})},{key:"unregisterEventTable",value:function(){for(var t in this.eventTable)this.eventTable.hasOwnProperty(t)&&pt.unregisterEvent(t,this.eventTable[t])}},{key:"onTimeout",value:function(){this.unregisterEventTable(),this.callback()}},{key:"onGameStop",value:function(){this.appStatus=0,this.onPause()}},{key:"onGameStart",value:function(){this.appStatus=1,this.onResume()}},{key:"onGamePause",value:function(){this.gameStatus=0,this.onPause()}},{key:"onGameResume",value:function(){this.gameStatus=1,this.onResume()}},{key:"onPause",value:function(){if(!(this.appStatus&&this.gameStatus||void 0===this.timer)){var t=(new Date).getTime();clearTimeout(this.timer),delete this.timer,this.timeout-=t-this.start}}},{key:"onResume",value:function(){this.appStatus&&this.gameStatus&&void 0===this.timer&&this.setTimeout()}}])&&un(e.prototype,i),n&&un(e,n),t}();function pn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var dn=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mgr=i;var o=App.getScene(e.scene)||i,a=new j;if(Je.createSceneByData(o.getGuidePanelData(e.panel),a,!0),n.addChild(a),e.showMask&&(this.guideMask=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill(),a.addChildAt(this.guideMask,0)),"guidePanel"===e.showUtilClick)a.hitArea=new Y(0,0,App.sceneWidth,App.sceneHeight),Ze.onClick(a,this.onClickGuidePanel.bind(this),!0),Ze.controlClick(function(t){return t===a});else if(""!==e.showUtilClick){var s=e.showUtilClick;if(void 0!==s){var r=o.ui[s];if(r){if(this.guideMask){this.guideMask.clear(),this.guideMask.beginFill(0,.5),this.guideMask.drawRect(0,0,App.sceneWidth,App.sceneHeight),this.guideMask.beginHole();var l=r.getBounds(),h=App.trans2GlobalPosition(l),c=h.x,m=h.y;this.guideMask.drawRoundedRect(c,m,l.width,l.height,Math.min(l.width,l.height)*u.guideRectCornerRadius),this.guideMask.endHole(),this.guideMask.endFill()}Ze.onClick(r,function(){return 0},!0),Ze.controlClick(function(t){return r===t},this.onClickGuidePanel.bind(this))}else alert("引导界面不存在要点击的控件：".concat(s))}}else"GameScene"!==e.scene&&Ze.controlClick(function(){return!1},this.onClickGuidePanel.bind(this));var p=e.showDuration;p&&(this.timer=new mn(this.onTimeout.bind(this),1e3*p)),this.guidePanel=a;var d=o.getAnimationConfig("normal");d&&this.playAnimation(d)}var e,i,n;return e=t,(i=[{key:"destroy",value:function(){Ze.freeClick(),this.timer&&this.timer.clearTimeout(),this.animation&&(this.animation.stop(),delete this.animation),this.guidePanel.destroy()}},{key:"playAnimation",value:function(t){var e=this;this.animation=new ai(this.getChildByID.bind(this),t,function(){return e.playAnimation(t)})}},{key:"getChildByID",value:function(t){return this.guidePanel.uiWithID[t]}},{key:"onClickGuidePanel",value:function(){this.mgr.destroyUIGuidePanel()}},{key:"onTimeout",value:function(){this.onClickGuidePanel()}}])&&pn(e.prototype,i),n&&pn(e,n),t}();function fn(t){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yn(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function gn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,o=!1,a=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==r.return||r.return()}finally{if(o)throw a}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function vn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _n(t,e){return!e||"object"!==fn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bn(t,e,i){return(bn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xn(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function xn(t){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sn(t,e){return(Sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kn(t,e){return void 0===t?e:t}function wn(t,e){t.position.set(kn(e.props.x,0),kn(e.props.y,0)),t.anchor.set(kn(e.props.anchorX,0),kn(e.props.anchorY,0)),t.scale.set(kn(e.props.scaleX,1),kn(e.props.scaleY,1)),t.rotation=Q.angle2radius(kn(e.props.rotation,0))}var An=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),_n(this,xn(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sn(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=this;this.initContactHandleTable(),this.initEffectTable(),this.registerEvent("Restart",this.onRestart),this.registerEvent("Reborn",this.onReborn),this.registerEvent("AteItem",this.onAteItem),this.registerEvent("UseItem",this.onUseItem),this.keyDownHandler=this.onKeydown.bind(this),window.addEventListener("keydown",this.keyDownHandler),this.gameContainer=new j,this.addChildAt(this.gameContainer,0);var e=App.sceneHeight/u.designHeight;if(this.gameContainer.scale.set(e,e),this.gameContainer.x=(App.sceneWidth-e*u.designWidth)/2,this.gameContainer.interactive=!0,this.gameContainer.buttonMode=!0,this.gameContainer.on("pointerdown",this.onPointerDown.bind(this)),this.gameContainer.on("pointermove",this.onPointerMove.bind(this)),this.gameContainer.on("pointerup",this.onPointerUp.bind(this)),this.gameContainer.on("pointerupoutside",this.onPointerUp.bind(this)),rt.debug){this.gameContainer.scale.set(.5,.5),this.gameContainer.position.set(this.gameContainer.x+.5*u.designWidth/2,.5*u.designHeight/2)}this.cameraContainer=new j,u.enableCameraAutoZoom?(this.autoZoomContainer=new j,this.gameContainer.addChild(this.autoZoomContainer),this.autoZoomContainer.addChild(this.cameraContainer)):this.gameContainer.addChild(this.cameraContainer),this.createBottomMask(),rt.showFPS&&this.createFPSText(),this.ui.skipBtn.visible=!1,this.ui.pauseButton.visible=!1,this.ui.surrenderButton.visible=!1,this.ui.starPanel.visible=!1,this.ui.coinPanel.visible=!1,this.ui.expPanel.visible=!1,this.ui.velocityState.visible=!1,this.ui.rewardProgressPanel.visible=!1,this.onClick(this.ui.confirmButton,this.onClickConfirmButton.bind(this)),this.ui.rebornPanel.visible=!1,this.portableItemButtonList=[1,2].map(function(e){return t.ui["portableItemButton".concat(e)]}),this.portableItemButtonList.forEach(function(e,i){var n=e.getChildAt(1);e.hitArea=new Y(n.x,n.y,n.mywidth,n.myheight),e.removeChildAt(1),t.onClick(e,function(){return t.onClickPortableItem(i)})}),this.gameStatus="end",this.animationList=[],this.pauseGame(),App.ticker.add(this.gameLoop.bind(this)),this.ui.matchRacetrack.visible=!1,this.ui.nextPlayerInfo.visible=!1,this.ui.itemUseHistoryPanel.removeChildren(),this.stepDuration=1/u.fps/u.stepTimesEachFrame,this.stepSpeed=1,this.ui.enterBulletTime&&this.onClick(this.ui.enterBulletTime,this.enterBulletTime.bind(this)),this.ui.leaveBulletTime&&this.onClick(this.ui.leaveBulletTime,this.leaveBulletTime.bind(this)),this.initBulletTime(),this.guideMgr=new cn(this,this.ui.guidePanelContainer);for(var i=0;i<u.starCount;i++){var n=this.ui["star".concat(i)].children[0];n.anchor.set(.5,.5),n.position.set(n.x+n.width/2,n.y+n.height/2)}this.warningTable={}}},{key:"onShow",value:function(){var t=this;App.getScene("MainScene").curPlayerLevel=Pt.getPlayerLevel().level,App.getScene("MainScene").gameLevelFirstWin=!1,this.guideMgr.clear(),this.guideMgr.setControlAll(!1),this.doubleReward=!1,this.rebornTimes=0,this.ui.blockSightSprite.visible=!1,clearTimeout(this.deadCompleteTimer),this.distance=0,this.ui.diamondText.text=0,this.updateCoin(0),this.updateStar(0),this.updateExp(0),this.setContactFatalEdge(!1),this.dragBackPos=void 0,this.startDragBikeBack=void 0,this.startAdjustBikeHeight=void 0,this.startY=void 0,this.startFloat=void 0,this.bikeFloatFrame=void 0,this.cameraContainer.removeChildren(),this.cameraContainer.position.set(0,0),this.roadList=[],this.itemList=[],this.showList=[],this.portableItemButtonList.forEach(function(t){2===t.children.length&&t.removeChildAt(1),t.randoming=!1,t.destroying=!1}),this.ui.sealMask.visible=!1,u.enableCameraAutoZoom&&(this.autoZoomContainer.scale.set(1,1),this.autoZoomContainer.position.set(0,0)),this.effectRemainFrame={},this.itemUseHistoryDisappearTimer&&this.itemUseHistoryDisappearTimer.forEach(function(t){return clearTimeout(t)}),this.itemUseHistoryDisappearTimer=[],this.ui.itemUseHistoryPanel.removeChildren(),this.targetCameraPos=void 0,this.playerName=Pt.getPlayerName(),this.initEnvironment(),this.rewardType&&(this.rewards=Pt.get(this.rewardType)),App.showScene("LoadingScene",this.getBikeID()),App.loadResources(this.getResPathList(),function(){App.getScene("LoadingScene").goToPercent(100,function(){t.onLoadedGameRes()})},function(t){App.getScene("LoadingScene").goToPercent(t)},1e3*u.minLoadingTime),this.clearWarning(),this.ui.addExtraScoreLabel.x=-1e3,this.ui.addExtraScoreLabel.alpha=1,this.addExtraScoreAnimation&&(this.addExtraScoreAnimation.stop(),delete this.addExtraScoreAnimation),this.contactRoadList=[],this.contactRoad2List=[],this.contactUpdownPlatformList=[]}},{key:"getBikeID",value:function(){return this.rewards[2].received?this.rewards[2].bike:Pt.get(Pt.selectedBike,0)}},{key:"onDestroy",value:function(){this.uiGuidePanel&&this.uiGuidePanel.destroy(),this.stopSounds(),window.removeEventListener("keydown",this.keyDownHandler),bn(xn(e.prototype),"onDestroy",this).call(this)}},{key:"stopSounds",value:function(){this.bubbleFloatSound&&(Ft.stopLoopSound(this.bubbleFloatSound),this.bubbleFloatSound=void 0)}},{key:"getResPathList",value:function(){var t=[],e=["imagePath","userUsedEffectPath","bearerSufferedEffectPath","bearerBuffEffectPath","buffIconImagePath","useSound","sufferSound"];for(var i in u.effect)u.effect.hasOwnProperty(i)&&function(){var n=u.effect[i];e.forEach(function(e){return n[e]&&t.push(n[e])})}();var n=[];for(var o in u.item)if(u.item.hasOwnProperty(o)&&(u.item[o].appearSoundPath&&n.push(u.item[o].appearSoundPath),u.item[o].table)){var a=u.item[o].table;for(var s in a)if(a.hasOwnProperty(s)){var r=a[s];if(r.appearSoundPath&&r.appearSoundPath.length>0&&n.push(r.appearSoundPath),r.animationJsonPath&&r.animationJsonPath.length>0&&t.push(r.animationJsonPath),r.animations)for(var l in r.animations)r.animations.hasOwnProperty(l)&&t.push(r.animations[l].path);r.bulletTimeAnimation&&r.bulletTimeAnimation.animationJsonPath&&r.bulletTimeAnimation.animationJsonPath.length>0&&t.push(r.bulletTimeAnimation.animationJsonPath)}}var h=this.getBikeID(),c=u.bikeList.find(function(t){return t.id===h}),m=c.bikeCommonAnimation||u.bikeCommonAnimation,p=Q.values(c.bikeJumpingAnimation||u.bikeJumpingAnimation).map(function(t){return t.atlasPath}),d=c.bikeSprintAnimation||u.bikeSprintAnimation,f=c.bikeSpringAnimation?c.bikeSpringAnimation.path:u.bikeSpringAnimation.path,y=c.bikeRotateAnimation?c.bikeRotateAnimation.path:u.bikeRotateAnimation.path,g=c.bikeFallingAnimation?c.bikeFallingAnimation.path:u.bikeFallingAnimation.path,v=[];return Q.values(u.playerEffect).forEach(function(t){t.length?t.forEach(function(t){return v.push(t.animationJsonPath)}):v.push(t.animationJsonPath)}),[u.finalFlagImagePath,u.goldCoinAniJson,u.fireWallAniJson,u.effect.BananaPeel.peelPrefabPath,u.startImagePath.ui,this.bgmPath,m,d,f,y,g,u.bulletTime.filmImagePath,u.bulletTime.lineAnimationPath,u.warningAnimation.warnSpritePath].concat(n).concat(Q.values(u.item.bird.table).map(function(t){return t.animationJsonPath})).concat(Q.values(u.item.Cloud.table).map(function(t){return t.animationJsonPath})).concat(Q.values(u.soundPath)).concat(Q.values(u.sceneItemImagePath)).concat(Q.values(u.emitterPath)).concat(Q.values(u.imagePath)).concat(t).concat(v).concat(p)}},{key:"onRestart",value:function(){this.emitter&&(this.emitter.destroy(),this.emitter=void 0),this.enemyList.forEach(function(t){return t.destroy()}),this.itemList.forEach(function(t){return t.destroy&&t.destroy()}),this.onShow()}},{key:"onReborn",value:function(){this.startDragBikeBack=!0,this.rebornDragVelocity=Q.calcPointDistance(this.bikeBody.getPosition(),this.dragBackPos)/u.rebornDragDuration/u.fps,this.bikeBubbleSprite.visible=!0,this.bikeBody.setStatic(),this.bikeBody.setAngle(0),this.bikeSelfContainer.rotation=0,this.resumeGame()}},{key:"onLoadedGameRes",value:function(){if(App.hideScene("LoadingScene"),this.resetBulletTime(),this.world=new it({gravity:et(0,this.gravity)}),this.world.on("begin-contact",this.onBeginContact.bind(this)),this.world.on("end-contact",this.onEndContact.bind(this)),this.world.on("pre-solve",this.onPreSolve.bind(this)),this.createBg(),this.closeViewContainer=this.cameraContainer.addChild(new j),this.road2Container=this.closeViewContainer.addChild(new j),rt.showDeadLine&&(this.deadLine=this.road2Container.addChild(new N),this.deadLine.beginFill(),this.deadLine.lineStyle(4,16711680,1),this.deadLine.moveTo(0,0),this.deadLine.lineTo(u.designWidth,0),this.deadLine.endFill()),this.underBikeContianer=this.closeViewContainer.addChild(new j),this.bikeContainer=this.closeViewContainer.addChild(new j),this.emitter=new J(this.bikeContainer,[U.from(u.imagePath.bikeParticle)],F[u.emitterPath.bike].data),this.emitter.emit=!1,rt.debug){var t=new N;this.gameContainer.addChild(t),t.lineStyle(10,16767232,1),t.moveTo(0,0),t.lineTo(u.designWidth,0),t.lineTo(u.designWidth,u.designHeight),t.lineTo(0,u.designHeight),t.lineTo(0,0)}if(this.initGameContent(),this.adjustInitCameraBg(),this.rewards)for(var e=0;e<2;e++)if(this.rewards[e].received){var i=U.from(u.effect[this.rewards[e].effect].imagePath);this.showPortableItem(this.rewards[e].effect,i)}this.gameStatus="play",this.resumeGame(),Ft.pauseBGM(),this.initGameUIGuide()}},{key:"initGameUIGuide",value:function(){var t=this;[[window.MapGameScene,"startInMapGameBegin"],[window.LevelGameScene,"startInLevelGameBegin"],[window.EndlessGameScene,"startInEndlessGameBegin"]].some(function(e){var i=gn(e,2),n=i[0],o=i[1];if(t instanceof n){for(var a in u.UIGuide){if(u.UIGuide.hasOwnProperty(a))if(u.UIGuide[a][o]){if(!Pt.hasCompletedGuide(a)){t.guideKey=a,t.config=u.UIGuide[t.guideKey],t.index=0;var s=t.config.guidePanelList[t.index];t.uiGuidePanel=new dn(s,t,t.ui.uiGuidePanel)}break}}return!0}})}},{key:"destroyUIGuidePanel",value:function(){this.uiGuidePanel.destroy(),this.index++;var t=this.config.guidePanelList[this.index];t?this.uiGuidePanel=new dn(t,this,this.ui.uiGuidePanel):Pt.completeGuide(this.guideKey)}},{key:"initContactHandleTable",value:function(){var t=this;this.chtable={player:{is:function(e){return e.getBody()===t.bikeBody},preSolve:function(e,i){if("end"===t.gameStatus)return e.setEnabled(!1);if(t.chtable.enemy.is(i))e.setEnabled(!1);else if(t.chtable.road2.is(i)){var n=i.getUserData(),o=n.p1,a=n.p2;Q.getDistanceFromPointToLine(t.bikeBody.getPosition(),o,a)<u.bikeRadius-u.pixel2meter&&(e.setEnabled(!1),i.getBody().getUserData().obj.isPlayerInside=!0)}var s=i.getBody().getUserData();t.isInvincible()&&[pe,_e].some(function(t){return s instanceof t})&&e.setEnabled(!1)},beginContact:function(t,e){var i=e.getBody().getUserData();if("Road"===i.type?this.contactRoadList.push(e):"Road2"===i.type?this.contactRoad2List.push(e):i instanceof Ai&&this.contactUpdownPlatformList.push(e),!(i&&i instanceof Vt&&i.thrower===this||i&&i instanceof Se))if(i&&i instanceof Ae)this.isInvincible()||this.setContactFatalEdge(!0);else{var n=e.getUserData();if((this.chtable.road.is(e)||n&&n.resetJumpStatus)&&this.resetJumpStatus(),this.chtable.obstacle.is(e))this.isInvincible()||this.setContactFatalEdge(!0);else{var o=e.getUserData();o&&o.isFatal&&(this.isInvincible()||this.setContactFatalEdge(!0),(o=e.getBody().getUserData())&&o.thrower&&pt.dispatchEvent("UseItem",o.thrower,this,"BananaPeel"))}}}},enemy:{is:function(e){var i=e.getBody().getUserData();if(i)return t.enemyList.find(function(t){return t===i})},preSolve:function(t,e,i){i.getBody().getUserData().onPreSolve(t,e,i)},beginContact:function(t,e,i){i.getBody().getUserData().onBeginContact(t,e,i)}},road:{is:function(t){var e=t.getBody().getUserData();if(e)return"Road"===e.type}},road2:{is:function(t){var e=t.getBody().getUserData();if(e)return"Road2"===e.type}},obstacle:{is:function(t){var e=t.getBody().getUserData();if(e)return["BigFireWall","SmallFireWall"].find(function(t){return t===e.type})}},editorItem:{is:function(e){return-1!==t.itemList.indexOf(e.getBody().getUserData())},preSolve:function(t,e,i){var n=i.getBody().getUserData();n.onPreSolve&&n.onPreSolve(t,e,i)},beginContact:function(t,e,i){var n=i.getBody().getUserData();n.onBeginContact&&n.onBeginContact(t,e,i)}}}}},{key:"onPreSolve",value:function(t){var e=t.getFixtureA(),i=t.getFixtureB();for(var n in this.chtable)if(this.chtable.hasOwnProperty(n)){var o=this.chtable[n];if(o.is(e)){for(var a in o.preSolve&&this.callByScene(o.preSolve,t,i,e),this.chtable)if(this.chtable.hasOwnProperty(a)){var s=this.chtable[a];s.is(i)&&s.preSolve&&this.callByScene(s.preSolve,t,e,i)}break}}}},{key:"onBeginContact",value:function(t){var e=t.getFixtureA(),i=t.getFixtureB();for(var n in this.chtable)if(this.chtable.hasOwnProperty(n)){var o=this.chtable[n];if(o.is(e)){for(var a in o.beginContact&&this.callByScene(o.beginContact,t,i,e),this.chtable)if(this.chtable.hasOwnProperty(a)){var s=this.chtable[a];s.is(i)&&s.beginContact&&this.callByScene(s.beginContact,t,e,i)}break}}}},{key:"onEndContact",value:function(t){var e,i,n=this.getBikeFromFixture(t.getFixtureA());n?e=(i=t.getFixtureB()).getBody().getUserData():(n=this.getBikeFromFixture(t.getFixtureB()))&&(e=(i=t.getFixtureA()).getBody().getUserData()),n&&e&&("Road"===e.type?Q.removeItemFromArray(this.contactRoadList,i):"Road2"===e.type?Q.removeItemFromArray(this.contactRoad2List,i):e instanceof Ai&&Q.removeItemFromArray(this.contactUpdownPlatformList,i))}},{key:"getBikeFromFixture",value:function(t){var i=t.getBody().getUserData();if(i instanceof e)return i}},{key:"callByScene",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];t.bind(this).apply(void 0,i)}},{key:"onPointerDown",value:function(t){if(Ze.getClickPredicate()(this.gameContainer))if("play"===this.gameStatus){if(this.hasEffect("Sprint"))return;this.startFloat?(this.startFloat=!1,this.bikeBubbleSprite.visible=!1,this.stopSounds(),Ft.playSound(u.soundPath.bubbleDestroy)):(this.tryJump(),this._isPressing=!0)}else"end"===this.gameStatus&&this.startAdjustBikeHeight&&(this.startY=t.data.global.y)}},{key:"playPlayerEffect",value:function(t,e){var i=this,n=new X(Et.getFrames(t.animationJsonPath,t.animationName));return n.animationSpeed=t.animationSpeed*this.stepSpeed,n.onComplete=function(){Q.removeItemFromArray(i.animationList,n),n.destroy()},n.loop=!!t.loop,n.play(),e?(n.position.set(e.x+t.animationPos[0],e.y+t.animationPos[1]),this.underBikeContianer.addChild(n)):t.followPlayer?(n.position.set(t.animationPos[0],t.animationPos[1]),this.bikeOutterContainer.addChild(n)):(n.position.set(this.bikeOutterContainer.x+t.animationPos[0],this.bikeOutterContainer.y+t.animationPos[1]),this.underBikeContianer.addChild(n)),this.animationList.push(n),n}},{key:"onKeydown",value:function(t){switch(t.code){case"ArrowUp":this.onPointerDown();break;case"Space":"play"===this.gameStatus?(this.gameStatus="end",this.pauseGame()):"end"===this.gameStatus&&(this.gameStatus="play",this.resumeGame());break;case"ArrowLeft":this.enterBulletTime();break;case"ArrowRight":this.leaveBulletTime();break;case"ArrowDown":this.playLightAnimation()}}},{key:"getMultiple",value:function(){var t=1;return this.rotating&&(t+=u.rotateStatus.rewardAddTimes),1!==this.stepSpeed&&(t+=u.bulletTime.rewardAddTimes),t}},{key:"getMultipleAble",value:function(t){switch(t){case"GoldCoin":return u.double.coin;case"Exp":return u.double.exp;default:return!1}}},{key:"onAteItem",value:function(t,e,i,n){var o=this,a=1;switch(t){case"Random":var s=this.randomEffect(this),r=F[u.effect[s].imagePath||u.defaultItemImagePath].texture,l=this.portableItemButtonList.find(function(t){return t.children.length<2&&!t.randoming});l&&(l.randoming=!0,this.playRandomItemAnimation(l,function(){l.randoming=!1,o.showPortableItem(s,r)}));break;case"PortableItem":this.showPortableItem(e,i);break;case"GoldCoin":var h=n.value;u.double.coin&&(h*=a=this.getMultiple()),this.updateCoin(this.coin+h),Ft.playSound(u.soundPath.eatGoldCoin,void 0,this.stepSpeed);break;case"Star":this.updateStar(this.star+1),Ft.playSound(u.soundPath.eatStar,void 0,this.stepSpeed);break;case"Exp":var c=n.value;u.double.exp&&(c*=a=this.getMultiple()),this.updateExp(this.exp+c),Ft.playSound(u.soundPath.eatExp,void 0,this.stepSpeed);break;case"Thunder":this.isInvincible()||this.setContactFatalEdge(!0),Ft.playSound(u.effect.Thunder.sufferSound,void 0,this.stepSpeed),this.addEffect(this,u.effect.Thunder.bearerSufferedEffectPath);break;default:var m=u.effect[t];if(this.isInvincible()&&m&&!m.isHelpful)return;this.eatEffect=n||{effect:t}}if(n){if(n.bulletTimeValue){var p=n.bulletTimeValue;u.double.bulletTimeValue&&(p*=a=this.getMultiple()),this.addBulletTime(p)}if(this.addRewardProgressValue&&n.rewardProgressValue){var d=n.rewardProgressValue;u.double.rewardProgressValue&&(d*=a=this.getMultiple()),this.addRewardProgressValue(d)}}a>1&&this.playMultiple(a)}},{key:"createImageText",value:function(t,e,i){var n=new j;i.addChild(n);var o=u.imageText[e],a=t.split(""),s=0;return a.forEach(function(t){var e=o.charImgPathTable[t];if(e){var i=V.from(e),a=i.texture.height;i.x=s,s+=i.width,i.y=o.charHeight-a,n.addChild(i)}}),n.x=-s/2,n.y=-o.charHeight/2,n}},{key:"playMultiple",value:function(t){var e=this.createImageText("x".concat(t),"bonuspt3",this.bikeSprite);e.y+=u.doubleAnimation.yStartOffset,new Ke.a.Tween(e).to({y:e.y-u.doubleAnimation.yOffset,alpha:u.doubleAnimation.endAlpha},u.doubleAnimation.duration/this.stepSpeed).onComplete(function(){e.destroy()}).start(performance.now())}},{key:"createBottomMask",value:function(){var t=Q.createLinearGradientMask(u.designWidth,u.maskHeight,u.maskColorStop),e=U.from(t),i=new V(e);i.anchor.set(0,1),i.position.set(0,u.designHeight),this.gameContainer.addChild(i)}},{key:"createFPSText",value:function(){this.addChild((new N).beginFill(0,.5).drawRect(0,0,120,50).endFill());var t=new H({fill:"white"});this.fpsText=new z("FPS:0",t),this.fpsText.anchor.set(0,0),this.addChild(this.fpsText)}},{key:"createBg",value:function(){var t=this;this.bgList=[],this.bgTextureList.forEach(function(e,i){var n=new j;t.cameraContainer.addChild(n);for(var o=F[e].texture,a=Q.getTexturePointColor(o,o.width-1,o.height-1),s={container:n},r=t.bgScale[i],l=0;l<2;l++){var h=new V(o);if(n.addChild(h),h.scale.set(r,r),h.position.set(l*o.width*r,t.bgY[i]),s[0===l?"before":"after"]=h,i===t.bgTextureList.length-1){var c=new N;c.beginFill(a),c.drawRect(0,0,o.width,u.bgOffsetHeight),c.endFill(),h.addChild(c),c.position.set(0,o.height)}else{var m=new N;m.beginFill(a),m.drawRect(0,0,o.width,u.designHeight),m.endFill(),h.addChild(m),m.position.set(0,o.height)}}t.bgList.push(s)})}},{key:"createPart",value:function(t,e){var i=this;switch(Et.getItemType(t)){case"Road":var n=t.props.points.split(",").map(function(e,i){var n=parseInt(e);return n+=i%2==0?t.props.x:t.props.y}),o=new yi(this.world,n,this.sideTexture,this.topTexture);this.roadList.push(o),this.underBikeContianer.addChild(o.sprite);break;case"Road2":var a=t.props.points.split(",").map(function(e,i){var n=parseInt(e);return n+=i%2==0?t.props.x:t.props.y}),s=new Ti(this.road2Container,this.world,a,this.sideTexture2,this.topTexture2);this.roadList.push(s);break;case"BigFireWall":var r=new _e(t,this.world,this);this.underBikeContianer.addChild(r.sprite),this.itemList.push(r);break;case"SmallFireWall":var l=new pe(t,this.world,this);this.underBikeContianer.addChild(l.sprite),this.itemList.push(l);break;case"BlackBird":this.itemList.push(new Se(this,this.underBikeContianer,this.world,t));break;case"Cloud":this.itemList.push(new Ae(this,this.underBikeContianer,this.world,t));break;case"Spring":this.itemList.push(new Qi(this,this.underBikeContianer,this.world,t));break;case"GroundStab":var h=new Qt(this.underBikeContianer,this.world,t,this);this.itemList.push(h);break;case"UpDownPlatform":var c=new Ai(this,this.underBikeContianer,this.world,t);this.itemList.push(c),this.roadList.push(c);break;case"DeadLine":var u=new Ii(this.underBikeContianer,this.world,t);this.itemList.push(u);break;case"RollingStone":this.itemList.push(new Oi(this,this.underBikeContianer,this.world,t));break;case"FireBall":var m=new Xi(this,this.underBikeContianer,this.world,t);this.itemList.push(m);break;case"EatableItem":this.itemList.push(new Zi(this,this.underBikeContianer,this.world,t,e));break;case"Sprite":var p=V.from("myLaya/laya/assets/".concat(t.props.skin));this.underBikeContianer.addChild(p),wn(p,t),this.showList.push(p);break;case"Text":var d=Je.createTextFromData(t.props);this.underBikeContianer.addChild(d),wn(d,t),this.showList.push(d);break;case"Guide":this.guideMgr.push(t);break;case"Chain":var f={count:0,value:0};t.child.forEach(function(e){e.props.x+=t.props.x,e.props.y+=t.props.y,e.animations=t.animations,i.createPart(e,f)});break;default:var y=new ee(t,this.world);this.underBikeContianer.addChild(y.sprite)}}},{key:"createBike",value:function(t){var e,i=this,n=Et.physicsPos2renderPos(t);if(this.bikeOutterContainer=this.bikeContainer.addChild(new j),this.bikeOutterContainer.position.set(n.x,n.y),rt.showCollider){var o=new N;o.beginFill(),o.drawCircle(0,0,u.bikeRadius*u.meter2pixel),o.endFill(),this.bikeOutterContainer.addChild(o)}this.bikeSelfContainer=this.bikeOutterContainer.addChild(new j),this.bikeSelfContainer.scale.set(u.bikeScale,u.bikeScale),this.underBikeContainer=this.bikeSelfContainer.addChild(new j),this.bikeSprite=this.bikeSelfContainer.addChild(new V),this.bikeSprite.anchor.set(.5,.5),this.upBikeContainer=this.bikeSelfContainer.addChild(new j),this.bikeAnimSprite=this.bikeSprite.addChild(new V),this.bikeAnimSprite.anchor.set(.5,.5);var a,s,r,l=this.getBikeID(),h=u.bikeList.find(function(t){return t.id===l});h.imagePath&&(this.bikeDecorateSprite=V.from(h.imagePath),this.bikeSprite.addChild(this.bikeDecorateSprite),(a=this.bikeDecorateSprite.anchor).set.apply(a,yn(h.anchor)),(s=this.bikeDecorateSprite.scale).set.apply(s,yn(h.scale)),(r=this.bikeDecorateSprite.position).set.apply(r,yn(h.position)));this.player={},this.player.velocity=new Kt,this.player.jumpForce=new Kt(this.jumpForce),h.velocityPercent&&this.player.velocity.setBasicValue(this.bikeCommonVelocity*h.velocityPercent);var c=u.bikeDensity*(h.densityPercent||u.bikeDensity),m=F[u.imagePath.bubble].texture;this.bikeBubbleSprite=this.bikeOutterContainer.addChild(new V(m)),this.bikeBubbleSprite.anchor.set(.5,.5),this.bikeBubbleSprite.visible=!1;var p=F[u.imagePath.rebornArrow].texture;this.bikeArrowSprite1=this.bikeOutterContainer.addChild(new V(p)),this.bikeArrowSprite1.position.set(0,-m.height/2),this.bikeArrowSprite2=this.bikeOutterContainer.addChild(new V(p)),this.bikeArrowSprite2.rotation=Math.PI,this.bikeArrowSprite2.position.set(0,m.height/2),this.bikeArrowList=[this.bikeArrowSprite1,this.bikeArrowSprite2],this.bikeArrowList.forEach(function(t){t.anchor.set(.5,1),t.visible=!1}),this.bikeBody=this.world.createDynamicBody(),this.bikeBody.setUserData(this),this.bikeFixture=this.bikeBody.createFixture(ot(u.bikeRadius),{density:c,friction:1}),this.bikeBody.setPosition(t),this.bikeBody.setLinearVelocity(et(this.player.velocity.value,0)),this.bikeJumpExtraCountdown=h.bikeJumpExtraCountdown||u.bikeJumpExtraCountdown,this.resetBikeStatus(),rt.showBikeState&&(this.stateText=this.bikeSprite.addChild(new z("",new H({fill:"white",fontSize:50})))),this.effectList=[],this.durationEffectTable={},this.animationList=[],this.buffIconContainer=this.bikeOutterContainer.addChild(new j),this.buffIconContainer.y=u.buff.containerY,this.buffIconTable={};var d=u.playerEffect.follow;this.followAnimation=new X(Et.getFrames(d.animationJsonPath,d.animationName)),(e=this.followAnimation.position).set.apply(e,yn(d.animationPos)),this.followAnimation.animationSpeed=d.animationSpeed*this.stepSpeed,this.followAnimation.loop=!0,this.followAnimation.play(),this.bikeSprite.addChild(this.followAnimation),this.animationList.push(this.followAnimation),this.bulletEffectList=u.playerEffect.bulletTime.map(function(t){return i.playPlayerEffect(t)}),this.bulletEffectList.forEach(function(t){return t.visible=!1})}},{key:"resetBikeStatus",value:function(){this.resetJumpStatus(),this.setContactFatalEdge(!1),this.bikeAccSprite=this.bikeContainer.addChild(new V),this.bikeAccSprite.anchor.set(.5,1),this.bikeAccSprite.visible=!1,this.removeAllEffects()}},{key:"removeAllEffects",value:function(t){for(var e in this.effectRemainFrame)!this.effectRemainFrame.hasOwnProperty(e)||t&&u.effect[e].isHelpful||(delete this.effectRemainFrame[e],this.effectTable[e]&&this.effectTable[e].end&&this.effectTable[e].end(),this.removeBuffIcon(e));for(var i in this.durationEffectTable)!this.durationEffectTable.hasOwnProperty(i)||t&&u.effect[i].isHelpful||(this.durationEffectTable[i].destroy(),delete this.durationEffectTable[i])}},{key:"gameLoop",value:function(t){this.gameLoopFunc(t)}},{key:"play",value:function(){this.willEnterScene&&(this.enterRewardRoad(),this.willEnterScene=!1),this.eatEffect&&(this.startEffect(this.eatEffect.effect,this.eatEffect.fixedDuration),delete this.eatEffect),this.fpsText&&(this.fpsText.text="FPS：".concat(Math.floor(App.ticker.FPS)));for(var t=this.bikeBody.getPosition().x,e=this.isBikeLanded(),i=u.stepTimesEachFrame*this.stepSpeed,n=0;n<i;n++)this.world.step(this.stepDuration);var o=this.bikeBody.getLinearVelocity(),a=this.bikeBody.getPosition();!this.isBikeLanded()&&o.y<0&&this.onFalling();var s=this.isBikeLanded();!e&&s&&this.onLanded(),this.syncBikeSprite(o,a);for(var r=0;r<this.itemList.length;r++){var l=this.itemList[r];if(l.willDestroyed)this.removeItem(l),r--;else{l.update&&l.update();var h=l.itemType;!l.itemShowed&&this.isItemXEnterView(l)&&(l.itemShowed=!0,u.item[h]&&u.item[h].appearSoundPath&&Ft.playSound(u.item[h].appearSoundPath,void 0,this.stepSpeed))}}for(var c in this.syncEnemySprite&&this.syncEnemySprite(),this.judgeGameLose(o,a),this.judgeGameWin(a),this.startDragBikeBack&&this.dragBikeBack(),rt.cameraFollowEnemy&&this.enemyList[0]&&(this.targetCameraPos=this.enemyList[0].bikeBody.getPosition()),this.moveCamera(),this.scrollBg(),this.dynamicCreateRoad&&(this.cleanPartOutOfView(),this.dynamicCreateRoad(),this.showDistance()),this.keepBikeMove(o),this.keepEnemyMove&&this.keepEnemyMove(),this.updateEffect(),this.updateLittleInvincible(),this.jumpExtraCountdown-=this.stepSpeed,this.updateBuffIcon(),this.effectList.forEach(function(t){return t.update()}),this.durationEffectTable)this.durationEffectTable.hasOwnProperty(c)&&this.durationEffectTable[c].update();if(u.enableCameraAutoZoom&&this.autoZoomCamera(),this.bikeOutterContainer&&(this.emitter.updateOwnerPos(this.bikeOutterContainer.x,this.bikeOutterContainer.y),this.emitter.update(1/u.fps)),"play"===this.gameStatus){var m=this.bikeBody.getPosition().x;this.distance+=(m-t)*u.meter2distance,this.ui.distanceText.text=Math.floor(this.distance)+"m",this.distance>this.nextBulletDistanceIndex*u.bulletTime.addValueDistance&&(this.addBulletTime(u.bulletTime.addValuePerDistance),this.nextBulletDistanceIndex++)}if(rt.showBikeState)for(var p in this.stateText.text="",this.effectRemainFrame)this.effectRemainFrame.hasOwnProperty(p)&&(this.effectRemainFrame[p]>0?this.stateText.text+="".concat(p,":").concat(Math.ceil(this.effectRemainFrame[p]/u.fps),"\n"):this.stateText.text+="".concat(p,"\n"));this.gaSprite&&this.onGuideAnimation(),1!==this.stepSpeed&&(this.reduceBulletTimeValue(),this.bulletTimeFilms.forEach(function(t){return t.onFrame()}),this.bulletTimeLineMgr.update()),this.guideMgr.update(),this.updateWarning()}},{key:"pause",value:function(){}},{key:"updateCoin",value:function(t){this.coin=t,this.ui.coinText.text=this.coin}},{key:"updateStar",value:function(t){this.star=t;for(var e=0;e<u.starCount;e++)this.ui["star".concat(e)].visible=e<this.star;var i=this.ui["star".concat(this.star-1)];if(i){i=i.children[0];var n=u.getStarAnimation.startScale,o=u.getStarAnimation.startAlpha;i.scale.set(n,n),i.alpha=o;var a={scale:n,alpha:o};new Ke.a.Tween(a).to({scale:1,alpha:1},u.getStarAnimation.duration).easing(Ke.a.Easing.Bounce.Out).onUpdate(function(){i.scale.set(a.scale,a.scale),i.alpha=a.alpha}).start(performance.now())}}},{key:"updateExp",value:function(t){this.exp=t,this.ui.expText.text=this.exp}},{key:"syncBikeSprite",value:function(t,e){this.followAnimation&&(this.followAnimation.visible=this.isBikeLanded()),this.contactRoad2List.forEach(function(t){return t.getBody().getUserData().obj.isPlayerInside=!1});var i=Et.physicsPos2renderPos(e);if(this.bikeOutterContainer.position.set(i.x,i.y),"end"===this.gameStatus)this.bikeSelfContainer.rotation=this.bikeBody.getAngle(),this.bikeAccSprite.visible=!1;else{if(this.startFloat?(this.bikeAccSprite.visible=!0,this.bikeAccSprite.texture=F[u.startImagePath.ui].textures["cd-".concat(Math.ceil(this.bikeFloatFrame/u.fps),".png")],this.bikeAccSprite.position.set(this.bikeOutterContainer.x,this.bikeOutterContainer.y-this.bikeSelfContainer.height/2)):this.bikeAccSprite.visible=!1,this.jumping)this.bikeSelfContainer.rotation=Q.angle2radius(u.bikeJumpingRotation);else if(u.bikeRotateByMoveDirection&&(this.bikeSelfContainer.rotation=-Math.atan(t.y/t.x)),!(this.hasEffect("Sprint")||this.rotating||this.isSpring||this.isJacking)){var n=this.bikeBody.getLinearVelocity().x,o=u.bikeBasicVelocity;this.bikeAnimSpeed=n/o/u.framesForChangeImageInBasicVelocity}this.updateBikeAnimation()}}},{key:"isBikeLanded",value:function(){var t=this;return!this.hasEffect("Sprint")&&(0!==this.contactRoadList.length||this.contactRoad2List.some(function(t){return!t.getBody().getUserData().obj.isPlayerInside})||this.contactUpdownPlatformList.some(function(e){return t.bikeBody.getPosition().y>e.getBody().getPosition().y}))}},{key:"judgeGameLose",value:function(t,e){var i=this.findLowestRoadTopY(-this.cameraContainer.x);this.deadLine&&this.deadLine.position.set(-this.cameraContainer.x,i+u.bikeGameOverOffsetHeight*u.meter2pixel),"play"===this.gameStatus&&e.y<Et.renderY2PhysicsY(i)-u.bikeGameOverOffsetHeight&&this.onDead(),"play"===this.gameStatus&&this.isContactFatalEdge&&(this.bikeBody.setLinearVelocity(et(0,0)),this.bikeBody.setAngularVelocity(u.bikeGameOverAngularVelocity),this.bikeBody.applyLinearImpulse(et(-100,200),this.bikeBody.getPosition()),this.onDead())}},{key:"judgeGameWin",value:function(t){"play"===this.gameStatus&&this.finalPoint&&t.x>Et.renderPos2PhysicsPos(this.finalPoint).x&&this.gameWin()}},{key:"moveCamera",value:function(){var t=this;if("play"===this.gameStatus||this.startAdjustBikeHeight||this.targetCameraPos){var e=this.targetCameraPos?Et.physicsPos2renderPos(this.targetCameraPos):this.bikeOutterContainer,i=this.cameraContainer.x,n=this.cameraContainer.y;if(this.cameraContainer.x=u.bikeLeftMargin-e.x,!u.forbidenCameraVerticalMove){var o=this.cameraContainer.y+e.y;o<u.bikeCameraMinY?this.cameraContainer.y=u.bikeCameraMinY-e.y:o>u.bikeCameraMaxY&&(this.cameraContainer.y=u.bikeCameraMaxY-e.y)}var a=this.cameraContainer.x-i,s=this.cameraContainer.y-n,r=this.bgList.length-1,l=this.bgList[r],h=this.bgY[r],c=this.bgScale[r],m=h+(l.before.height+(l.before.children[0]?l.before.children[0].height:0))*c,p=void 0===this.verticalParallaxDepth[r]?1:this.verticalParallaxDepth[r];l.container.y+m-p*s<u.designHeight-this.cameraContainer.y||l.container.y+u.bgMinHeightInView-p*s>u.designHeight-this.cameraContainer.y?this.bgList.forEach(function(e,i){var n=void 0===t.horizontalParallaxDepth[i]?1:t.horizontalParallaxDepth[i];e.container.position.x-=a*n,e.container.position.y-=s}):this.bgList.forEach(function(e,i){var n=void 0===t.horizontalParallaxDepth[i]?1:t.horizontalParallaxDepth[i],o=void 0===t.verticalParallaxDepth[i]?1:t.verticalParallaxDepth[i];e.container.position.x-=a*n,e.container.position.y-=s*o})}}},{key:"findLowestRoadTopY",value:function(t){for(var e,i=this.roadList,n=t+u.designWidth,o=0;o<i.length;o++){var a=i[o];if(a.getRightBorderX()>t){for(e=a.getLowestTopY(),o++;o<i.length&&!((a=i[o]).getLeftBorderX()>=n);o++){var s=a.getLowestTopY();s>e&&(e=s)}break}}return e}},{key:"findRoadHighestY",value:function(t){for(var e,i=this.roadList,n=t+u.designWidth,o=0;o<i.length;o++){var a=i[o];if(a.getRightBorderX()>t){for(e=a.getHighestTopPoint(),o++;o<i.length&&!((a=i[o]).getLeftBorderX()>=n);o++){var s=a.getHighestTopPoint();s.y<e.y&&(e=s)}break}}return{highestY:e?e.y:this.getBikeYInCurrentView(),distance:u.designWidth}}},{key:"findAdjustHeight",value:function(t){for(var e=this.roadList,i=0;i<e.length;i++){var n=e[i];if(n.getRightBorderX()>t)return n.getLeftBorderX()<=t?n.getTopPosInTargetX(t):n.getLeftTopPoint()}}},{key:"getBikeYInCurrentView",value:function(){return Et.renderY2PhysicsY(-this.cameraContainer.y+(u.bikeCameraMaxY+u.bikeCameraMinY)/2)}},{key:"scrollBg",value:function(){var t=this;this.bgList.forEach(function(e,i){if(e.container.x+e.before.x+e.before.width*t.bgScale[i]<-t.cameraContainer.x){e.before.x=e.after.x+e.after.width*t.bgScale[i];var n=e.before;e.before=e.after,e.after=n}})}},{key:"keepBikeMove",value:function(t){if("play"===this.gameStatus)if(this.hasEffect("Sprint")){var e=this.findRoadHighestY(this.bikeOutterContainer.x),i=e.highestY,n=e.distance,o=Math.atan((this.bikeOutterContainer.y-(i-u.bikeSprintRadius*u.meter2pixel))/n),a=u.effect.Sprint.velocity*u.pixel2meter,s=Math.tan(o)*a;this.bikeBody.setLinearVelocity(et(a,s));var r=et(0,this.world.getGravity().y*this.bikeBody.getMass()*-1);this.bikeBody.applyForceToCenter(r)}else this.startFloat?(0===this.bikeFloatFrame?(this.startFloat=!1,this.stopSounds(),Ft.playSound(u.soundPath.bubbleDestroy),this.bikeBubbleSprite.visible=!1):this.bikeFloatFrame--,this.bikeBody.applyForceToCenter(et(0,-this.gravity*this.bikeBody.getMass())),this.bikeBody.setLinearVelocity(et(u.rebornFloatVelocity,0))):this.isSlowFalling?this.bikeBody.setLinearVelocity(et(this.player.velocity.value,t.y*u.slowFallingCoeffient)):this.bikeBody.setLinearVelocity(et(this.player.velocity.value,t.y))}},{key:"initGameContent",value:function(){}},{key:"initEnvironment",value:function(){}},{key:"autoZoomCamera",value:function(){if("play"===this.gameStatus){var t,e=u.bikeLeftMargin,i=u.designHeight/2,n=u.cameraAutoZoomScaleSpeed,o=this.bikeBody.getLinearVelocity().x===this.player.velocity.basicValue?u.cameraAutoZoomCommonScale:1,a=this.autoZoomContainer.scale.x,s=o-a;s<0?(t=a-n)<o&&(t=o):0===s?t=a:(t=a+n)>o&&(t=o),this.autoZoomContainer.scale.set(t,t),this.autoZoomContainer.position.set(e-e*t,i-i*t)}}},{key:"adjustInitCameraBg",value:function(){var t=this;this.cameraContainer.x=u.bikeLeftMargin-this.bikeOutterContainer.x;var e=this.cameraContainer.y+this.bikeOutterContainer.y;e<u.bikeCameraMinY?this.cameraContainer.y=u.bikeCameraMinY-this.bikeOutterContainer.y:e>u.bikeCameraMaxY&&(this.cameraContainer.y=u.bikeCameraMaxY-this.bikeOutterContainer.y),this.bgList.forEach(function(e){e.container.position.x=-t.cameraContainer.y,e.container.position.y=-t.cameraContainer.y})}},{key:"onClickPortableItem",value:function(t){var e=this;if("play"===this.gameStatus){var i=this.portableItemButtonList[t];if(2===i.children.length&&!i.randoming&&!i.destroying){if(this.hasEffect("Seal"))return App.showNotice("Your item are sealed now.");var n=i.children[1].effect,o=u.effect[n];if("BananaPeel"===n)this.throwBananaPeel(this);else if(o.isHelpful)this.onAteItem(n);else{var a,s=this.enemyList;switch(o.targetType){case 1:var r=this.getFormerOne(this);a=r?[r]:[];break;case 2:a=s;break;case 0:default:a=[Q.randomChoose(s)]}0===a.length?pt.dispatchEvent("UseItem",this,{getName:function(){return App.getText("Air")}},n):a.forEach(function(t){t.onAteItem(n),pt.dispatchEvent("UseItem",e,t,n)})}if(o.userUsedEffectPath){var l=new qt(this,o.userUsedEffectPath,function(){Q.removeItemFromArray(e.effectList,l),l.destroy()},this);this.effectList.push(l)}o.useSound&&Ft.playSound(o.useSound,void 0,this.stepSpeed),i.destroying=!0;var h=i.children[1],c={alpha:1,scale:1};new Ke.a.Tween(c).to({alpha:0,scale:u.useItemAnimation.scale},u.useItemAnimation.duration).easing(Ke.a.Easing.Quadratic.Out).onUpdate(function(){h.alpha=c.alpha,h.scale.set(c.scale,c.scale)}).onComplete(function(){h.destroy(),i.destroying=!1}).start(performance.now())}}}},{key:"showPortableItem",value:function(t,e){this.portableItemButtonList.some(function(i){if(1===i.children.length){var n=new V(e);return i.addChild(n),n.anchor.set(.5,.5),n.position.set(i.mywidth/2,i.myheight/2),n.effect=t,!0}})}},{key:"onDead",value:function(){this.leaveInvincible(),this.leaveBulletTime(),this.leaveRotateStatus(),Ft.playSound(u.soundPath.die),this.gameStatus="end";var t,e=this.bikeBody.getPosition(),i=this.findAdjustHeight(this.bikeOutterContainer.x);i?t=Et.renderPos2PhysicsPos(i).y+u.bikeRadius-u.rebornPosOffsetHeight*u.pixel2meter:t=this.getBikeYInCurrentView();this.dragBackPos={x:e.x,y:t},this.deadPos={x:e.x,y:e.y},this.targetCameraPos={x:e.x,y:e.y},this.moveCameraVelocity={x:(this.dragBackPos.x-this.targetCameraPos.x)/u.rebornDragDuration/u.fps,y:(this.dragBackPos.y-this.targetCameraPos.y)/u.rebornDragDuration/u.fps},this.removeAllEffects()}},{key:"dragBikeBack",value:function(){var t=Et.moveToTargetPos(this.bikeBody.getPosition(),this.dragBackPos,this.rebornDragVelocity),e=t.x,i=t.y,n=t.final;this.bikeBody.setPosition(et(e,i)),this.targetCameraPos.x+=this.moveCameraVelocity.x,this.targetCameraPos.y+=this.moveCameraVelocity.y,n&&this.onDragBackEnded()}},{key:"onDragBackEnded",value:function(){this.targetCameraPos=void 0,this.startDragBikeBack=!1,this.startAdjustBikeHeight=!0,this.bikeArrowList.forEach(function(t){return t.visible=!0}),this.ui.rebornPanel.visible=!0}},{key:"onPointerMove",value:function(t){if(this.startAdjustBikeHeight&&void 0!==this.startY){var e=t.data.global.y-this.startY;this.startY=t.data.global.y;var i=this.bikeBody.getPosition(),n=this.bikeOutterContainer.y+e,o={x:-this.cameraContainer.x,y:Et.physicsPos2renderPos(this.dragBackPos).y-u.designHeight-u.rebornPosOffsetHeight,width:u.designWidth,height:u.designHeight};Q.isPointInRect({x:-this.cameraContainer.x,y:n},o)&&this.bikeBody.setPosition(et(i.x,i.y+-e*u.pixel2meter))}}},{key:"onPointerUp",value:function(){this._isPressing=!1,Ze.getClickPredicate()(this.gameContainer)&&(this.startAdjustBikeHeight&&void 0!==this.startY?this.startY=void 0:this.rotating&&(this.leaveRotateStatus(),this.tryJump()))}},{key:"onClickConfirmButton",value:function(){this.ui.rebornPanel.visible=!1,this.startAdjustBikeHeight=!1,this.gameStatus="play",this.bikeBody.setDynamic(),this.resetBikeStatus(),this.startFloat=!0,this.bikeArrowList.forEach(function(t){return t.visible=!1}),this.bikeFloatFrame=u.rebornFloatFrame,Ft.playSound(u.soundPath.rebornButton),this.stopSounds(),this.bubbleFloatSound=Ft.playLoopSound(u.soundPath.bubbleFloat)}},{key:"settle",value:function(){var t=this.coin*Et.getBikeConfig("coinPercent"),e=this.distance*Et.getBikeConfig("distancePercent");this.doubleReward&&(t*=2,e*=2),e=Math.floor(e),Pt.add(Pt.coin,Math.floor(t));var i=Pt.add(Pt.distance,e);u.endlessMode.sceneList.forEach(function(t){if(i>=t.unlockDistance){var e=Pt.get(Pt.unlockEndlessSceneIDList,[]);-1===e.indexOf(t.id)&&(e.push(t.id),Pt.set(Pt.unlockEndlessSceneIDList,e),t.unlockInfo&&pt.dispatchEvent("UnlockSystem",t.unlockInfo))}}),Pt.add(Pt.rankDistance,e),Pt.refreshPreparationRewards(this.rewardType),this.pauseGame()}},{key:"isItemOutSideOfViewLeft",value:function(t){if(t.getRightBorderX)return t.getRightBorderX()<-this.cameraContainer.x}},{key:"isXEnterView",value:function(t){return t<-this.cameraContainer.x+u.designWidth}},{key:"isItemXEnterView",value:function(t){if(t.getLeftBorderX)return this.isXEnterView(t.getLeftBorderX())}},{key:"isItemXInView",value:function(t){return t.getLeftBorderX()<-this.cameraContainer.x+u.designWidth&&t.getRightBorderX()>-this.cameraContainer.x}},{key:"resetJumpStatus",value:function(){if(this.jumping=!1,this.isSpring=!1,this.isJacking=!1,this.jumpCount=0,this.isSlowFalling&&this.leaveSlowFalling(),!this.rotating&&!this.hasEffect("Sprint")){var t=this.getBikeCommonAnimation(),e=t.frames,i=t.pos;this.setBikeAnimation(e,1,i)}}},{key:"startEffect",value:function(t,e){var i=this;if("end"!==this.gameStatus){if(this.effectRemainFrame[t])this.effectTable[t]&&this.effectTable[t].cover&&this.effectTable[t].cover();else{this.effectTable[t]&&this.effectTable[t].start&&this.effectTable[t].start();var n=u.effect[t];if(n.bearerBuffEffectPath&&(this.durationEffectTable[t]=new qt(this,n.bearerBuffEffectPath,void 0,this)),n.bearerSufferedEffectPath){var o=new qt(this,n.bearerSufferedEffectPath,function(){o.destroy(),Q.removeItemFromArray(i.effectList,o)},this);this.effectList.push(o)}n.buffIconImagePath&&this.addBuffIcon(t),n.sufferSound&&Ft.playSound(n.sufferSound,void 0,this.stepSpeed)}var a=e||Pt.getEffectDuration(this.getBikeID(),t,this.onlyBaseDuration);this.effectRemainFrame[t]=a*u.fps}}},{key:"updateEffect",value:function(){for(var t in this.effectRemainFrame)this.effectRemainFrame.hasOwnProperty(t)&&(this.effectRemainFrame[t]-=this.stepSpeed,this.effectRemainFrame[t]<=0?(delete this.effectRemainFrame[t],this.effectTable[t]&&this.effectTable[t].end&&this.effectTable[t].end(),this.removeBuffIcon(t),this.durationEffectTable[t]&&(this.durationEffectTable[t].destroy(),delete this.durationEffectTable[t])):this.effectTable[t]&&this.effectTable[t].update&&this.effectTable[t].update())}},{key:"initEffectTable",value:function(){var t=this;this.effectTable={Decelerate:{start:function(){t.player.velocity.increaseValueByRate(u.effect.Decelerate.rate),t.bikeBody.setLinearVelocity(et(t.player.velocity.value,t.bikeBody.getLinearVelocity().y))},end:function(){t.player.velocity.increaseValueByRate(-u.effect.Decelerate.rate),t.bikeBody.setLinearVelocity(et(t.player.velocity.value,t.bikeBody.getLinearVelocity().y))}},Accelerate:{start:function(){t.player.velocity.increaseValueByRate(u.effect.Accelerate.rate),t.bikeBody.setLinearVelocity(et(t.player.velocity.value,t.bikeBody.getLinearVelocity().y))},end:function(){t.player.velocity.increaseValueByRate(-u.effect.Accelerate.rate),t.bikeBody.setLinearVelocity(et(t.player.velocity.value,t.bikeBody.getLinearVelocity().y))}},WeakenJump:{start:function(){t.player.jumpForce.increaseValueByRate(u.effect.WeakenJump.rate)},end:function(){t.player.jumpForce.increaseValueByRate(-u.effect.WeakenJump.rate)}},PowerJump:{start:function(){t.player.jumpForce.increaseValueByRate(u.effect.PowerJump.rate)},end:function(){t.player.jumpForce.increaseValueByRate(-u.effect.PowerJump.rate)}},BlockSight:{start:function(){t.ui.blockSightSprite.visible=!0},end:function(){t.ui.blockSightSprite.visible=!1}},SpiderWeb:{start:function(){t.spiderWebRemainBreakTimes=u.effect.SpiderWeb.breakTimes},cover:function(){t.spiderWebRemainBreakTimes=u.effect.SpiderWeb.breakTimes},end:function(){t.spiderWebRemainBreakTimes=0}},Seal:{start:function(){t.ui.sealMask.visible=!0},end:function(){t.ui.sealMask.visible=!1}},Invincible:{start:function(){t.leaveInvincible(),t.setBikeScale(u.effect.Invincible.scale),t.removeAllEffects(!0)},end:function(){t.setBikeScale(1),t.bikeSprite.alpha=1,t.enterInvincible(u.effect.Invincible.endInvincibleDuration)},update:function(){var e=Math.floor(t.effectRemainFrame.Invincible/u.effect.Invincible.twinkleInterval)%2==0;t.bikeSprite.alpha=e?1:u.effect.Invincible.twinkleAlpha}},Sprint:{start:function(){t.leaveInvincible(),t.removeAllEffects(!0),t.setBikeScale(2,!0),t.resetJumpStatus();var e=t.getBikeSprintAnimation(),i=e.frames,n=e.pos;t.setBikeAnimation(i,1,n)},end:function(){t.setBikeScale(1,!0),t.enterInvincible(u.effect.Sprint.endInvincibleDuration);var e=t.getBikeCommonAnimation(),i=e.frames,n=e.pos;t.setBikeAnimation(i,1,n)}}}}},{key:"setBikeScale",value:function(t,e){var i=this.getBikeID(),n=u.bikeList.find(function(t){return t.id===i}),o=u.bikeDensity*(n.densityPercent||u.bikeDensity)/t/t,a=u.bikeRadius*t;e||(this.bikeSprite.scale.set(t,t),this.buffIconContainer.y=u.buff.containerY*t),this.bikeFixture&&this.bikeBody.destroyFixture(this.bikeFixture),this.bikeFixture=this.bikeBody.createFixture(ot(a),{density:o,friction:1})}},{key:"hasEffect",value:function(t){return void 0!==this.effectRemainFrame[t]}},{key:"removeItem",value:function(t){var e=this.itemList.indexOf(t);-1!==e&&(t.destroy(),this.itemList.splice(e,1))}},{key:"onUseItem",value:function(t,e,i){var n=this,o=u.itemUseHistory.lineHeight,a=this.createUseItemInfo(t,e,i);a.y=this.ui.itemUseHistoryPanel.children.length*o,this.ui.itemUseHistoryPanel.addChild(a),this.itemUseHistoryDisappearTimer.push(setTimeout(function(){n.ui.itemUseHistoryPanel.removeChildAt(0);for(var t=0;t<n.ui.itemUseHistoryPanel.children.length;t++){n.ui.itemUseHistoryPanel.children[0].y=t*o}},1e3*u.itemUseHistory.duration))}},{key:"getName",value:function(){return this.playerName}},{key:"getFormerOne",value:function(t){var e=[this].concat(this.enemyList);return e.sort(function(t,e){return e.getBikePhysicalPosition().x-t.getBikePhysicalPosition().x}),e[e.indexOf(t)-1]}},{key:"getBikePhysicalPosition",value:function(){return this.bikeBody.getPosition()}},{key:"getRank",value:function(t){var e=[this].concat(this.enemyList);return e.sort(function(t,e){return e.getBikePhysicalPosition().x-t.getBikePhysicalPosition().x}),e.indexOf(t)+1}},{key:"throwBananaPeel",value:function(t){this.itemList.push(new Vt(this,this.underBikeContianer,this.world,t))}},{key:"isPlayer",value:function(){return!0}},{key:"addBikeChild",value:function(t,e){return 0===e?this.underBikeContainer.addChild(t):this.upBikeContainer.addChild(t),t}},{key:"addBuffIcon",value:function(t){if(u.effect[t].buffIconImagePath&&void 0===this.buffIconTable[t]){var e,i=this.buffIconContainer.addChild(new V);i.anchor.set(.5,0),i.texture=F[u.effect[t].buffIconImagePath].texture,i.scale.set(u.buff.iconScale,u.buff.iconScale);var n=Math.ceil(this.effectRemainFrame[t]/u.fps),o=i.addChild(new z(n,new H(u.buff.text)));o.anchor.set(.5,.5),(e=o.position).set.apply(e,yn(u.buff.textPosition)),this.buffIconTable[t]=i,this.sortBuffIcon()}}},{key:"removeBuffIcon",value:function(t){this.buffIconTable[t]&&(this.buffIconTable[t].destroy(),delete this.buffIconTable[t],this.sortBuffIcon())}},{key:"sortBuffIcon",value:function(){var t=this,e=-1;Q.keys(u.effect).forEach(function(i){t.buffIconTable[i]&&(e++,t.buffIconTable[i].x=e*u.buff.iconInterval)}),this.buffIconContainer.x=-e*u.buff.iconInterval/2}},{key:"updateBuffIcon",value:function(){for(var t in this.buffIconTable)this.buffIconTable.hasOwnProperty(t)&&(this.effectRemainFrame[t]===1/0?this.buffIconTable[t].getChildAt(0).text="":this.buffIconTable[t].getChildAt(0).text=Math.ceil(this.effectRemainFrame[t]/u.fps))}},{key:"pauseGame",value:function(){this.gameLoopFunc=this.pause.bind(this),this.animationList.forEach(function(t){return t.stop()}),pt.dispatchEvent("GamePause")}},{key:"resumeGame",value:function(){this.gameLoopFunc=this.play.bind(this),this.animationList.forEach(function(t){return t.play()}),pt.dispatchEvent("GameResume")}},{key:"getSpriteGameBounds",value:function(t){var e=t.getBounds(),i=this.getParentScale(t),n=i.scaleX,o=i.scaleY;return["x","width"].forEach(function(t){return e[t]/=n}),["y","height"].forEach(function(t){return e[t]/=o}),e.x-=this.cameraContainer.x,e.y-=this.cameraContainer.y,e}},{key:"getParentScale",value:function(t){for(var e=1,i=1;t.parent;)e*=t.parent.scale.x,i*=t.parent.scale.y,t=t.parent;return{scaleX:e,scaleY:i}}},{key:"getHead",value:function(){return u.defaultEnemyHeadImagePath}},{key:"getPlayerRankList",value:function(){var t=[this].concat(this.enemyList);return t.sort(function(t,e){return e.getBikePhysicalPosition().x-t.getBikePhysicalPosition().x}),t}},{key:"setContactFatalEdge",value:function(t){this.startFloat||(this.isContactFatalEdge=t)}},{key:"addEffect",value:function(t,e){var i=this,n=this.bikeContainer.addChild(new j);n.position.set(t.bikeOutterContainer.x,t.bikeOutterContainer.y);var o=new zt(e,function(){o.destroy(),n.destroy(),Q.removeItemFromArray(i.effectList,o)},this);n.addChild(o.sprite),this.effectList.push(o)}},{key:"createUseItemInfo",value:function(t,e,i){var n=new j,o=0,a=function(t,e){var i=new z(t,new H({fill:e,fontSize:u.itemUseHistory.fontSize,stroke:u.itemUseHistory.stroke,strokeThickness:u.itemUseHistory.strokeThickness}));i.anchor.set(0,.5),i.x=o,n.addChild(i),o+=i.width+u.itemUseHistory.partSpace};a("【".concat(t.getName(),"】"),t===this?u.itemUseHistory.selfNameColor:u.itemUseHistory.enemyNameColor),a(App.getText("对"),u.itemUseHistory.commonTextColor),a("【".concat(e.getName(),"】"),e===this?u.itemUseHistory.selfNameColor:u.itemUseHistory.enemyNameColor),a(App.getText("使用了"),u.itemUseHistory.commonTextColor);var s=n.addChild(V.from(u.effect[i].imagePath));return s.anchor.set(0,.5),s.scale.set(u.itemUseHistory.iconSale,u.itemUseHistory.iconSale),s.x=o,n}},{key:"showGuideAnimation",value:function(){this.gaSprite=this.addChild(new V),this.gaSprite.anchor.set(.5,.5),this.gaSprite.x=App.sceneWidth/2,this.gaStep=-1,this.gaSpriteTextureList=[u.imagePath.start3,u.imagePath.start2,u.imagePath.start1],this.startAction()}},{key:"startAction",value:function(){var t=this;this.guideActionList=[function(){return t.actionCallback(function(){t.ui.guidePanel.visible=!0,App.showMask()})},function(){return t.actionMove()},function(){return t.actionCallback(function(){return Ft.playSound(u.soundPath.guideCountDown)})},function(){return t.actionDelay()},function(){return t.actionMove()},function(){return t.actionCallback(function(){return Ft.playSound(u.soundPath.guideCountDown)})},function(){return t.actionDelay()},function(){return t.actionMove()},function(){return t.actionCallback(function(){return Ft.playSound(u.soundPath.guideCountDown)})},function(){return t.actionDelay()},function(){return t.actionScale()},function(){return t.actionCallback(function(){return Ft.playSound(u.soundPath.guideStartGo,function(){Ft.playBGM(t.bgmPath,!0)})})},function(){return t.actionDelay()},function(){return t.actionFadeout()},function(){return t.actionCallback(function(){t.gaSprite.destroy(),t.gaSprite=void 0,t.ui.guidePanel.visible=!1,App.hideMask()})}],this.onActionEnded()}},{key:"onGuideAnimation",value:function(){switch(this.action){case"move":this.onMoveAction();break;case"scale":this.onScaleAction();break;case"delay":this.onDelayAction();break;case"fadeout":this.onFadeoutAction()}}},{key:"onMoveAction",value:function(){this.gaSprite.y+=this.gaVelocity,this.gaSprite.y>=App.sceneHeight/2&&this.onActionEnded()}},{key:"onScaleAction",value:function(){this.gaSprite.scale.x-=this.gaVelocity,this.gaSprite.scale.y-=this.gaVelocity,this.gaSprite.scale.x<=1&&this.onActionEnded()}},{key:"onDelayAction",value:function(){this.delay++,this.delay>u.guideAction.delayFrame&&this.onActionEnded()}},{key:"onFadeoutAction",value:function(){this.gaSprite.alpha-=this.gaVelocity,this.gaSprite.alpha<=0&&this.onActionEnded()}},{key:"onActionEnded",value:function(){var t=this.guideActionList.shift();t&&t()}},{key:"actionMove",value:function(){this.action="move",this.gaStep++,this.gaSprite.texture=U.from(this.gaSpriteTextureList[this.gaStep]),this.gaSprite.y=-this.gaSprite.height/2,this.gaVelocity=App.sceneHeight/2/(u.fps-u.guideAction.delayFrame)}},{key:"actionScale",value:function(){this.action="scale",this.gaSprite.texture=U.from(u.imagePath.startGo),this.gaSprite.scale.set(u.guideAction.startScale,u.guideAction.startScale),this.gaVelocity=(u.guideAction.startScale-1)/(u.fps-u.guideAction.delayFrame)}},{key:"actionFadeout",value:function(){this.action="fadeout",this.gaVelocity=1/(u.fps-u.guideAction.delayFrame)}},{key:"actionDelay",value:function(){this.action="delay",this.delay=0}},{key:"actionCallback",value:function(t){t(),this.onActionEnded()}},{key:"isInvincible",value:function(){return this.hasEffect("Invincible")||this.hasEffect("Sprint")||this.littleInvincible}},{key:"isBike",value:function(t){return t===this||-1!==this.enemyList.indexOf(t)}},{key:"getBikeCommonAnimation",value:function(){var t=this.getBikeID(),e=u.bikeList.find(function(e){return e.id===t});return{frames:Et.getFrames(e.bikeCommonAnimation||u.bikeCommonAnimation,"bike"),pos:e.bikeCommonAnimationPos||u.bikeCommonAnimationPos}}},{key:"getBikeSprintAnimation",value:function(){var t=this.getBikeID(),e=u.bikeList.find(function(e){return e.id===t});return{frames:Et.getFrames(e.bikeSprintAnimation||u.bikeSprintAnimation,"sprint"),pos:e.bikeSprintAnimationPos||u.bikeSprintAnimationPos}}},{key:"getBikeAnimation",value:function(t){var e=this.getBikeID(),i=u.bikeList.find(function(t){return t.id===e})[t]||u[t];return{frames:Et.getFrames(i.path,i.name),pos:i.pos,speed:i.speed}}},{key:"getBikeJumpAnimation",value:function(t){var e=this.getBikeID(),i=u.bikeList.find(function(t){return t.id===e}).bikeJumpingAnimation||u.bikeJumpingAnimation,n=i[t];if(void 0===n){var o;for(var a in i)o=a;o&&t>o&&(n=i[o])}return n}},{key:"initBulletTime",value:function(){this.createBulletTimeFullEffect(),this.onClick(this.ui.bulletTimeBtn,this.onClickBulletTimeBtn.bind(this),!0),this.bulletTimeMask=new N,this.ui.bulletTimeEnough.mask=this.bulletTimeMask,this.ui.bulletTimeLack.mask=this.bulletTimeMask,this.updateBulletTime(0),this.createBulletTimeFilm(),this.bulletTimeLineMgr=new sn(this)}},{key:"createBulletTimeFilm",value:function(){this.bulletTimeFilms=[];for(var t=0;t<2;t++){var e=new en(u.bulletTime.filmImagePath,App.sceneWidth,u.bulletTime.filmImageMoveVelocity);this.bulletTimeFilms.push(e),this.addChildAt(e.container,2)}this.bulletTimeFilms[0].container.y=-this.bulletTimeFilms[0].before.height,this.bulletTimeFilms[1].container.y=App.sceneHeight}},{key:"createBulletTimeFullEffect",value:function(){var t=U.from("myLaya/laya/assets/images/bullet-time-full-effect-1.png"),e=U.from("myLaya/laya/assets/images/bullet-time-full-effect-2.png");this.bulletTimeFullEffect=new X([t,e]),this.bulletTimeFullEffect.anchor.set(.5,.5),this.bulletTimeFullEffect.position.set(102,28),this.ui.bulletTimeBtn.addChild(this.bulletTimeFullEffect),this.bulletTimeFullEffect.play()}},{key:"onClickBulletTimeBtn",value:function(){1===this.stepSpeed?this.bulletTime>=u.bulletTime.usableMinValue&&(this.updateBulletTime(this.bulletTime-u.bulletTime.startUpCostValue),this.enterBulletTime()):(this.leaveBulletTime(),this.enterInvincible(u.bulletTime.endInvincibleDuration))}},{key:"getPlayerLevel",value:function(){return Pt.getPlayerLevel().level}},{key:"updateBulletTime",value:function(t){var e=Pt.getBulletTimeMaxValue(this.getPlayerLevel());if(t>=e?t=e:t<0&&(t=0),t!==this.bulletTime){this.bulletTime=t,this.bulletTime>=u.bulletTime.usableMinValue?(this.ui.bulletTimeLack.visible=!1,this.ui.bulletTimeEnough.visible=!0):(this.ui.bulletTimeEnough.visible=!1,this.ui.bulletTimeLack.visible=!0);var i=this.ui.bulletTimeBtn.scale.x;this.bulletTimeMask.clear(),this.bulletTimeMask.lineStyle(40*i);var n=this.ui.bulletTimeBtn.getBounds(),o=this.bulletTime/e,a=Math.PI/2*3;this.bulletTimeMask.arc(99*i+n.x,102*i+n.y,70*i,a-2*Math.PI*o,a),this.ui.bulletTimeValue.text=Math.floor(this.bulletTime),this.bulletTimeFullEffect.visible=1===o}}},{key:"reduceBulletTimeValue",value:function(){this.updateBulletTime(this.bulletTime-u.bulletTime.reduceValuePerSecond/u.fps),this.bulletTime<=0&&(this.leaveBulletTime(),this.enterInvincible(u.bulletTime.endInvincibleDuration))}},{key:"resetBulletTime",value:function(){this.bulletTimeFilms.forEach(function(t,e){t.container.y=0===e?-t.before.height:App.sceneHeight}),this.nextBulletDistanceIndex=1,this.updateBulletTime(0)}},{key:"addBulletTime",value:function(t){t&&(1===this.stepSpeed||u.bulletTime.addValueInBulletTime)&&this.updateBulletTime(this.bulletTime+t)}},{key:"enterBulletTime",value:function(){var t=this;if(1===this.stepSpeed){var e=this.player.velocity.basicValue,i=u.bulletTimeTargetVelocity/e,n=1/u.stepTimesEachFrame;i=i>1?1:i<n?n:Math.floor(i/n)*n,this.stepSpeed=i,Ft.bgmSource&&(Ft.bgmSource.playbackRate.value=this.stepSpeed),this.itemList.forEach(function(e){return e.changeSpeed&&e.changeSpeed(t.stepSpeed)}),this.playBulletTimeFilm(!0),this.bulletTimeLineMgr.enterBulletTime(),this.animationList.forEach(function(e){e.animationSpeed*=t.stepSpeed}),this.bulletEffectList.forEach(function(t){return t.visible=!0})}}},{key:"leaveBulletTime",value:function(){var t=this;1!==this.stepSpeed&&(this.animationList.forEach(function(e){e.animationSpeed/=t.stepSpeed}),this.stepSpeed=1,Ft.bgmSource&&(Ft.bgmSource.playbackRate.value=this.stepSpeed),this.itemList.forEach(function(e){return e.changeSpeed&&e.changeSpeed(t.stepSpeed)}),this.playBulletTimeFilm(!1),this.bulletTimeLineMgr.leaveBulletTime(),this.bulletEffectList.forEach(function(t){return t.visible=!1}))}},{key:"playBulletTimeFilm",value:function(t){var e,i,n=this;this.filmAnimation&&this.filmAnimation.stop(),t?(e=0,i=this.bulletTimeFilms[0].before.height):(i=0,e=this.bulletTimeFilms[0].before.height),this.bulletTimeFilms.forEach(function(t,i){t.container.y=0===i?-t.before.height+e:App.sceneHeight-e});var o={y:e};this.filmAnimation=new Ke.a.Tween(o).to({y:i},u.bulletTime.filmImageAppearDuration).easing(Ke.a.Easing.Quadratic.Out).onUpdate(function(){n.bulletTimeFilms.forEach(function(t,e){t.container.y=0===e?-t.before.height+o.y:App.sceneHeight-o.y})}).start(performance.now())}},{key:"spring",value:function(t){var e=this;if(this.resetJumpStatus(),this.isSpring=!0,!this.rotating&&!this.hasEffect("Sprint")){var i=u.bikeList.find(function(t){return t.id===e.getBikeID()}).bikeSpringAnimation||u.bikeSpringAnimation,n=Et.getFrames(i.path,i.name);this.setBikeAnimation(n,i.speed,i.pos,{once:!0})}this.bikeBody.setLinearVelocity(et(this.bikeBody.getLinearVelocity().x,t))}},{key:"jack",value:function(t){this.resetJumpStatus(),this.isJacking=!0,this.bikeBody.setLinearVelocity(et(this.bikeBody.getLinearVelocity().x,t))}},{key:"playRandomItemAnimation",value:function(t,e){for(var i=[],n=0;n<u.randomItemAnimation.times;n++){var o=Q.keys(this.getItemRandomTableList(this)).map(function(t){return U.from(u.effect[t].imagePath)});i=i.concat(Q.randomList(o))}var a=new X(i);t.addChild(a),a.anchor.set(.5,.5),a.position.set(t.mywidth/2,t.myheight/2),a.animationSpeed=u.randomItemAnimation.speed,a.loop=!1,a.play(),a.onComplete=function(){a.destroy(),e()}}},{key:"randomEffect",value:function(t){var e=this.getItemRandomTableList(t),i=[],n=[];for(var o in e)e.hasOwnProperty(o)&&(i.push(e[o]),n.push(o));return n[Q.randomWithWeight(i)]}},{key:"enterInvincible",value:function(t){this.isInvincible()||(this.littleInvincible={remainFrames:t*u.fps})}},{key:"leaveInvincible",value:function(){delete this.littleInvincible,this.bikeSprite.alpha=1}},{key:"updateLittleInvincible",value:function(){if(this.littleInvincible)if(this.littleInvincible.remainFrames-=this.stepSpeed,this.littleInvincible.remainFrames<=0)this.leaveInvincible();else{var t=Math.floor(this.littleInvincible.remainFrames/u.effect.LittleInvincible.twinkleInterval)%2==0;this.bikeSprite.alpha=t?1:u.effect.LittleInvincible.twinkleAlpha}}},{key:"showWarning",value:function(t){var e=t.y;if(void 0===this.warningTable[e]){var i=V.from(u.warningAnimation.warnSpritePath);i.anchor.set(1,.5);var n=this.itemY2sceneY(e);i.position.set(App.sceneWidth,n),this.addChildAt(i,1),this.warningTable[e]={sprite:i,item:t},Ft.playSound(u.soundPath.warning,void 0,this.stepSpeed)}}},{key:"updateWarning",value:function(){for(var t in this.warningTable)if(this.warningTable.hasOwnProperty(t)){var e=this.warningTable[t];this.isXEnterView(e.item.x-u.warningAnimation.disWarningDistance)&&(e.sprite.destroy(),delete this.warningTable[t])}}},{key:"clearWarning",value:function(){for(var t in this.warningTable){if(this.warningTable.hasOwnProperty(t))this.warningTable[t].sprite.destroy(),delete this.warningTable[t]}}},{key:"itemY2sceneY",value:function(t){return t+this.cameraContainer.y}},{key:"addExtraScore",value:function(t,e){switch(t){case"GoldCoin":this.updateCoin(this.coin+e),this.playAddExtraScore(App.getText("ExtraCoin",{value:e}));break;case"Exp":this.updateExp(this.exp+e),this.playAddExtraScore(App.getText("ExtraExp",{value:e}))}}},{key:"playAddExtraScore",value:function(t){var e=this;this.addExtraScoreAnimation&&(this.addExtraScoreAnimation.stop(),delete this.addExtraScoreAnimation),this.ui.addExtraScoreLabel.x=u.addExtraScoreAnimation.startMoveX,this.ui.addExtraScoreLabel.alpha=1,this.ui.addExtraScoreLabel.text=t,this.addExtraScoreAnimation=new Ke.a.Tween(this.ui.addExtraScoreLabel).to({x:u.addExtraScoreAnimation.endMoveX},u.addExtraScoreAnimation.appearDuration).onComplete(function(){e.addExtraScoreAnimation=new Ke.a.Tween(e.ui.addExtraScoreLabel).delay(u.addExtraScoreAnimation.showDuration).to({alpha:0},u.addExtraScoreAnimation.disappearAnimation).onComplete(function(){delete e.addExtraScoreAnimation}).start(performance.now())}).start(performance.now())}},{key:"setBikeAnimation",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=this.bikeAnimSprite.position).set.apply(e,yn(n)),this.bikeAnimSpeed=i,this.bikeAnimTextures=t,this.bikeAnimFrameIndex=0,this.bikeAnimSprite.texture=this.bikeAnimTextures[0],this.bikeAnimOption=o}},{key:"updateBikeAnimation",value:function(){this.bikeAnimFrameIndex+=this.bikeAnimSpeed*this.stepSpeed,this.bikeAnimFrameIndex>=this.bikeAnimTextures.length&&(this.bikeAnimOption.once?this.bikeAnimFrameIndex=this.bikeAnimTextures.length-1:this.bikeAnimFrameIndex%=this.bikeAnimTextures.length),this.bikeAnimSprite.texture=this.bikeAnimTextures[Math.floor(this.bikeAnimFrameIndex)]}},{key:"enterRotateStatus",value:function(){this.rotating=!0;var t=this.getBikeAnimation("bikeRotateAnimation"),e=t.frames,i=t.pos,n=t.speed;this.setBikeAnimation(e,n,i)}},{key:"leaveRotateStatus",value:function(){if(this.rotating){this.rotating=!1;var t=this.getBikeCommonAnimation(),e=t.frames,i=t.pos,n=t.speed;this.setBikeAnimation(e,i,n)}}},{key:"canBikeRotate",value:function(){var t=this.getBikeID();return u.bikeList.find(function(e){return e.id===t}).rotatable}},{key:"canBikeSlowFalling",value:function(){var t=this.getBikeID();return u.bikeList.find(function(e){return e.id===t}).slowFalling}},{key:"isBikeLatestJump",value:function(){return!this.hasEffect("UnlimitedJump")&&(this.jumpCount>=u.jumpCommonMaxCount||this.jumpExtraCountdown<=0)}},{key:"onLanded",value:function(){this.isSlowFalling&&this.leaveSlowFalling(),this.isPressing()&&this.canBikeRotate()&&this.enterRotateStatus()}},{key:"tryJump",value:function(){if(this.hasEffect("SpiderWeb"))this.bikeBody.applyLinearImpulse(et(0,u.effect.SpiderWeb.jumpForce),this.bikeBody.getPosition()),this.spiderWebRemainBreakTimes--,this.spiderWebRemainBreakTimes<=0&&(delete this.effectRemainFrame.SpiderWeb,this.effectTable.SpiderWeb.end&&this.effectTable.SpiderWeb.end(),this.durationEffectTable.SpiderWeb&&(this.durationEffectTable.SpiderWeb.destroy(),delete this.durationEffectTable.SpiderWeb),this.removeBuffIcon("SpiderWeb"));else if(this.hasEffect("UnlimitedJump")||this.jumpCount<u.jumpCommonMaxCount||this.jumpExtraCountdown>0){var t=this.bikeBody.getLinearVelocity();switch(this.bikeBody.setLinearVelocity(et(t.x,0)),this.bikeBody.applyLinearImpulse(et(0,this.player.jumpForce.value),this.bikeBody.getPosition()),this.jumping=!0,this.isSpring=!1,this.isJacking=!1,this.jumpCount++,this.jumpExtraCountdown=this.bikeJumpExtraCountdown[this.jumpCount-u.jumpCommonMaxCount],this.jumpCount){case 1:Ft.playSound(u.soundPath.firstJump,void 0,this.stepSpeed);break;case 2:Ft.playSound(u.soundPath.secondJump,void 0,this.stepSpeed),this.emitter.playOnce();break;default:Ft.playSound(u.soundPath.extraJump,void 0,this.stepSpeed),this.emitter.playOnce()}var e=this.getBikeJumpAnimation(this.jumpCount);e?this.setBikeAnimation(Et.getFrames(e.atlasPath,e.animationName),1/e.interval,e.pos||u.bikeCommonAnimationPos):this.bikeSelfContainer.rotation=Q.angle2radius(u.bikeJumpingRotation);var i=1===this.jumpCount?u.playerEffect.ground:u.playerEffect.air;this.playPlayerEffect(i)}}},{key:"onFalling",value:function(){this.isPressing()?!this.isSlowFalling&&this.canBikeSlowFalling()&&this.isBikeLatestJump()&&this.enterSlowFalling():this.isSlowFalling&&this.leaveSlowFalling()}},{key:"isPressing",value:function(){return this._isPressing}},{key:"enterSlowFalling",value:function(){var t=this.getBikeAnimation("bikeFallingAnimation"),e=t.frames,i=t.speed,n=t.pos;this.setBikeAnimation(e,i,n),this.isSlowFalling=!0}},{key:"leaveSlowFalling",value:function(){var t=this.getBikeCommonAnimation(),e=t.frames,i=t.pos;this.setBikeAnimation(e,1,i),this.isSlowFalling=!1}}])&&vn(i.prototype,n),o&&vn(i,o),e}();function Pn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}An.sceneFilePath="myLaya/laya/pages/View/GameScene.scene.json";var Tn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=e}var e,i,n;return e=t,(i=[{key:"create",value:function(t){this.enemyCount=t;for(var e=this.root.children.length-1;e>=1;e--)this.root.removeChildAt(e);this.racetrackPlayer=this.root.addChild(new V(F[u.imagePath.racetrackPlayer].texture)),this.racetrackPlayer.anchor.set(.5,0),this.racetrackPlayer.position.set(u.racetrack.startX,u.racetrack.startY),this.racetrackEnemies=[];for(var i=0;i<this.enemyCount;i++){var n=this.root.addChildAt(new V(F[u.imagePath.racetrackEnemy].texture),1);n.anchor.set(.5,0),n.position.set(u.racetrack.startX,u.racetrack.startY-(i+1)*u.racetrack.playerYInterval),this.racetrackEnemies.push(n)}}},{key:"update",value:function(t,e){this.racetrackPlayer.x=t*u.racetrack.totalLength+u.racetrack.startX,this.racetrackEnemies.forEach(function(t,i){return t.x=e[i]*u.racetrack.totalLength+u.racetrack.startX})}}])&&Pn(e.prototype,i),n&&Pn(e,n),t}();function Cn(t){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function In(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bn(t,e){return!e||"object"!==Cn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ln(t,e,i){return(Ln="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=En(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function En(t){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mn(t,e){return(Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bn(this,En(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}(e,An),i=e,(n=[{key:"onCreate",value:function(){Ln(En(e.prototype),"onCreate",this).call(this),this.ui.matchRacetrack.visible=!0,this.matchRacetrack=new Tn(this.ui.matchRacetrack),this.enemyCount=0}},{key:"initEnvironment",value:function(){this.bikeCommonVelocity=this.mapConfig.bikeVelocity||u.bikeVelocity,this.gravity=this.mapConfig.gravity||u.gravity,this.jumpForce=this.mapConfig.jumpForce||u.jumpForce,this.bgTextureList=this.mapConfig.texture.bg,this.sideTexture=this.mapConfig.texture.side,this.topTexture=this.mapConfig.texture.top,this.sideTexture2=this.mapConfig.texture.side2,this.topTexture2=this.mapConfig.texture.top2,this.horizontalParallaxDepth=this.mapConfig.horizontalParallaxDepth,this.verticalParallaxDepth=this.mapConfig.verticalParallaxDepth,this.bgY=this.mapConfig.bgY||u.bgY,this.bgmPath=this.mapConfig.bgmPath||u.defaultBgmPath,this.bgScale=this.mapConfig.bgScale||u.defaultBgScale}},{key:"getResPathList",value:function(){return Ln(En(e.prototype),"getResPathList",this).call(this).concat(this.mapConfig.texture.bg).concat([this.mapConfig.texture.side,this.mapConfig.texture.top,this.mapConfig.texture.side2,this.mapConfig.texture.top2,this.mapScenePath])}},{key:"initGameContent",value:function(){var t=this.getRoadPathList(),e=Q.getLast(t);this.finalPoint={x:(e[e.length-6]+e[e.length-4])/2,y:(e[e.length-5]+e[e.length-3])/2},this.finalPointPhysicX=Et.renderPos2PhysicsPos(this.finalPoint).x,this.createMap(),this.createFinalFlag(),this.enemyList=[];var i=Et.renderPos2PhysicsPos({x:t[0][2]+u.bikeLeftMargin,y:t[0][3]});i.x+=u.bikeRadius,i.y+=u.bikeRadius,this.bikeStarPos=i,this.createBike(i),this.createRacetrackPlayer()}},{key:"getRoadPathList",value:function(){return F[this.mapScenePath].data.child.filter(function(t){return t.label.split("//").find(function(t){return"Road"===t})}).map(function(t){for(var e=t.props.points.split(",").map(function(e,i){var n=parseInt(e);return n+=i%2==0?t.props.x:t.props.y}),i=e[1],n=1;n<e.length;n+=2)e[n]>i&&(i=e[n]);var o=i+App.sceneHeight/3*2;return e=(e=[e[0],o].concat(e)).concat([e[e.length-2],o])})}},{key:"createMap",value:function(){var t=this,e=F[this.mapScenePath].data;e.child.forEach(function(i){i.animations=e.animations,t.createPart(i)}),this.roadList.sort(function(t,e){return t.getLeftBorderX()-e.getLeftBorderX()})}},{key:"createFinalFlag",value:function(){var t=new V(F[u.finalFlagImagePath].texture);t.anchor.set(.5,1),t.scale.set(.5,.5),t.position.set(this.finalPoint.x,this.finalPoint.y),this.underBikeContianer.addChild(t)}},{key:"createRacetrackPlayer",value:function(){this.matchRacetrack.create(this.enemyCount),this.bikeStartX=this.bikeBody.getPosition().x,this.totalDistance=(this.finalPoint.x-this.bikeSprite.x)*u.pixel2meter}},{key:"updateRacetrackPlayer",value:function(){var t=this;this.matchRacetrack.update(this.calcRacetrackPlayerRate(this.bikeBody),this.enemyList.map(function(e){return t.calcRacetrackPlayerRate(e.bikeBody)}))}},{key:"calcRacetrackPlayerRate",value:function(t){var e=t.getPosition().x-this.bikeStartX;return e>this.totalDistance&&(e=this.totalDistance),e/this.totalDistance}},{key:"play",value:function(){Ln(En(e.prototype),"play",this).call(this),this.updateRacetrackPlayer()}},{key:"isPlayerInScreen",value:function(t){return t.bikeOutterContainer.x<u.designWidth-this.cameraContainer.x}},{key:"settle",value:function(){this.stopSounds(),this.pauseGame();var t=this.distance*Et.getBikeConfig("distancePercent");this.doubleReward&&(t*=2),t=Math.floor(t),Pt.add(Pt.distance,t),Pt.add(Pt.rankDistance,t)}}])&&In(i.prototype,n),o&&In(i,o),e}();function Dn(t){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function On(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fn(t,e){return!e||"object"!==Dn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jn(t,e,i){return(jn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Un(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function Un(t){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nn(t,e){return(Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Fn(this,Un(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nn(t,e)}(e,Rn),i=e,(n=[{key:"onCreate",value:function(){jn(Un(e.prototype),"onCreate",this).call(this),this.rewardType=Pt.preparationDataMap,this.ui.surrenderButton.visible=!0,this.onClick(this.ui.surrenderButton,this.onClickSurrenderButton.bind(this)),this.enemyCount=u.enemy.count}},{key:"onShow",value:function(t){var i=this;this.mapIndex=t,this.mapConfig=u.mapList[t],this.mapScenePath=u.mapBasePath+this.mapConfig.scenePath+".scene.json",this.enemyIDList=[];for(var n=JSON.parse(JSON.stringify(u.bikeList)),o=function(t){var e=Q.randomChoose(n).id;i.enemyIDList.push(e);var o=n.findIndex(function(t){return t.id===e});n.splice(o,1)},a=0;a<u.enemy.count;a++)o();jn(Un(e.prototype),"onShow",this).call(this),window.TDGA&&TDGA.onEvent("竞技模式")}},{key:"getResPathList",value:function(){var t=jn(Un(e.prototype),"getResPathList",this).call(this);return this.enemyIDList.forEach(function(e){var i=u.bikeList.find(function(t){return t.id===e});t.push(i.bikeCommonAnimation||u.bikeCommonAnimation);var n=Q.values(i.bikeJumpingAnimation||u.bikeJumpingAnimation).map(function(t){return t.atlasPath});t=t.concat(n)}),t}},{key:"onLoadedGameRes",value:function(){var t=this;ct.requestRandomPlayerInfo(u.enemy.count,function(i){t.enemyInfoList=i,jn(Un(e.prototype),"onLoadedGameRes",t).call(t)}),Ft.playSound(u.soundPath.guideStartGo,function(){Ft.playBGM(t.bgmPath,!0)})}},{key:"onRestart",value:function(){this.onShow(this.mapIndex)}},{key:"initGameContent",value:function(){jn(Un(e.prototype),"initGameContent",this).call(this),this.createEnemy(this.bikeStarPos),this.bikeRankText=this.bikeOutterContainer.addChild(new V(F[u.imagePath.rankText])),this.bikeRankText.anchor.set(.5,.5),this.bikeRankText.position.set(u.bike.rankText.positionX,u.bike.rankText.positionY)}},{key:"createEnemy",value:function(t){var e=this;this.enemyList=[],rt.removeAllEnemy||this.enemyIDList.forEach(function(i,n){var o="NPC".concat(n+1),a=u.defaultEnemyHeadImagePath,s=e.enemyInfoList.pop();s&&(o=s.playername,a=s.headurl);var r=u.bikeList.find(function(t){return t.id===i}),l=Et.getFrames(r.bikeCommonAnimation||u.bikeCommonAnimation,"enemy"),h=r.bikeCommonAnimationPos||u.bikeCommonAnimationPos,c=new Me(e,e.bikeContainer,e.world,i,{commonVelocity:e.bikeCommonVelocity,jumpForce:e.jumpForce,frames:l,animPos:h,playername:o,headurl:a});c.setPhysicalPosition(t),e.enemyList.push(c)})}},{key:"syncEnemySprite",value:function(){this.enemyList.forEach(function(t){return t.update()})}},{key:"keepEnemyMove",value:function(){this.enemyList.forEach(function(t){return t.afterUpdate()})}},{key:"onClickSurrenderButton",value:function(){var t=this;App.showScene("TipScene",{tip:App.getText("You only get the last prize after surrender, are you sure?"),confirmCallback:function(){t.gameWin(u.enemy.count)},cancelCallback:function(){}})}},{key:"play",value:function(){jn(Un(e.prototype),"play",this).call(this),this.updateNextPlayerInfo(),this.bikeRankText.texture=U.from(u.imagePath["rankText".concat(this.getRank(this))])}},{key:"getItemRandomTableList",value:function(t){if(this.mapConfig.itemRandomTableList){var e=this.getRank(t);return this.mapConfig.itemRandomTableList[e]}return this.mapConfig.itemRandomTable?this.mapConfig.itemRandomTable:u.defaultItemRandomTable}},{key:"updateNextPlayerInfo",value:function(){var t=this.getFormerOne(this);if(t&&!this.isPlayerInScreen(t)){this.ui.nextPlayerInfo.visible=!0,this.ui.nextPlayerName.text=t.getName();var e,i=this.bikeBody.getPosition().x,n=t.bikeBody.getPosition().x,o=this.finalPointPhysicX;e=n>o?o-i:n-i,this.ui.nextPlayerDistance.text=Math.ceil(e)+"m",this.ui.nextPlayerHead.children[0].texture=U.from(t.getHead())}else this.ui.nextPlayerInfo.visible=!1}},{key:"settle",value:function(){jn(Un(e.prototype),"settle",this).call(this),Pt.refreshPreparationRewards(Pt.preparationDataMap),Pt.add(Pt.mapGameTimes,1);var t=u.rankScore[this.rank||0]*Et.getBikeConfig("scorePercent");this.doubleReward&&(t*=2),t=Math.floor(t),Pt.add(Pt.totalScore,t),Pt.add(Pt.rankTotalScore,t),Pt.add(Pt.mapModeWatchedAdTimes,-1)}},{key:"gameWin",value:function(t){this.gameStatus="win";var e=Math.floor(Math.random()*u.mapList.length);e===Pt.get(Pt.currentMapScene)&&(e+=1,void 0===u.mapList[e]&&(e=0)),Pt.set(Pt.currentMapScene,e);var i=[];if(void 0===t)t=this.enemyList.reduce(function(t,e){return e.completeGame?t+1:t},0),i=this.getPlayerRankList().map(function(t){return t.getName()});else{var n=[].concat(this.enemyList);n.sort(function(t,e){return e.getBikePhysicalPosition().x-t.getBikePhysicalPosition().x}),i=n.concat([this]).map(function(t){return t.getName()})}this.rank=t,App.showScene("GameResultScene",{rank:t,distance:Math.floor(this.distance),coin:this.coin,playerNameList:i,gameScene:this}),pt.dispatchEvent("GameWin")}},{key:"onDead",value:function(){jn(Un(e.prototype),"onDead",this).call(this),this.deadCompleteTimer=setTimeout(this.onReborn.bind(this),u.bike.deadCompleteTime)}}])&&On(i.prototype,n),o&&On(i,o),e}();function Gn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}window.MapGameScene=Vn;var Xn=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.progress=e,this.text=i,this.max=1,this.value=0,this.fixedPartWidth=this.progress.leftWidth+this.progress.rightWidth,this.changePartWidth=this.progress.texture.width-this.fixedPartWidth,this.update()}var e,i,n;return e=t,(i=[{key:"setMax",value:function(t){this.max=t,this.update()}},{key:"setValue",value:function(t){t>this.max&&(t=this.max),this.value=t,this.update()}},{key:"update",value:function(){var t=this.value/this.max;this.progress.width=t*this.changePartWidth+this.fixedPartWidth,this.text&&(this.text.text="".concat(Math.floor(100*t),"%"))}},{key:"isFull",value:function(){return this.value===this.max}}])&&Gn(e.prototype,i),n&&Gn(e,n),t}();function zn(t){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Wn(t,e){return!e||"object"!==zn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jn(t,e,i){return(Jn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yn(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function Yn(t){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qn(t,e){return(qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Wn(this,Yn(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qn(t,e)}(e,An),i=e,(n=[{key:"onCreate",value:function(){Jn(Yn(e.prototype),"onCreate",this).call(this),this.rewardType=Pt.preparationDataEndless,this.registerEvent("Continue",this.onContinue.bind(this)),this.ui.coinPanel.visible=!0,this.ui.expPanel.visible=!0,this.ui.pauseButton.visible=!0,this.ui.velocityState.visible=!0,this.ui.rewardProgressPanel.visible=!0,this.rewardProgress=new Xn(this.ui.rewardProgress,this.ui.rewardProgressRate),this.rewardProgress.setMax(u.endlessMode.rewardRoad.maxValue),this.onClick(this.ui.pauseButton,this.onClickPauseButton.bind(this))}},{key:"onShow",value:function(t){this.rewardRoads=Q.clone(u.endlessMode.rewardRoad.roadPath),this.inRewardRoad=!1,this.rewardProgress.setValue(0),this.sceneIndex=t,this.sceneConfig=u.endlessMode.sceneList[t],0===this.sceneConfig.roadSectionList.length&&(this.sceneConfig.roadSectionList=u.endlessMode.default.roadSectionList),0===this.sceneConfig.infiniteRoadSectionList.length&&(this.sceneConfig.infiniteRoadSectionList=u.endlessMode.default.infiniteRoadSectionList),this.nextDistanceIndex=0;var i=this.sceneConfig.distanceNotice;this.nextNoticeDistance=i&&i[this.nextDistanceIndex],Jn(Yn(e.prototype),"onShow",this).call(this),window.TDGA&&TDGA.onEvent("无尽模式")}},{key:"initEnvironment",value:function(){this.bikeCommonVelocity=this.sceneConfig.bikeVelocity||u.bikeVelocity,this.gravity=this.sceneConfig.gravity||u.gravity,this.jumpForce=this.sceneConfig.jumpForce||u.jumpForce,this.bgTextureList=this.sceneConfig.texture.bg,this.sideTexture=this.sceneConfig.texture.side,this.topTexture=this.sceneConfig.texture.top,this.sideTexture2=this.sceneConfig.texture.side2,this.topTexture2=this.sceneConfig.texture.top2,this.horizontalParallaxDepth=this.sceneConfig.horizontalParallaxDepth,this.verticalParallaxDepth=this.sceneConfig.verticalParallaxDepth,this.bgY=this.sceneConfig.bgY||u.bgY,this.bgmPath=this.sceneConfig.bgmPath||u.defaultBgmPath,this.bgScale=this.sceneConfig.bgScale||u.defaultBgScale,this.itemRandomTable=this.sceneConfig.itemRandomTable||u.defaultItemRandomTable}},{key:"getResPathList",value:function(){var t=this;return this.sceneFilePathList=[],[this.sceneConfig.roadSectionList,this.sceneConfig.infiniteRoadSectionList].forEach(function(e){var i=e.reduce(function(t,e){return e.list.forEach(function(e){u.roadSections[e].forEach(function(e){return t.push("".concat(u.endlessMode.baseScenePath).concat(e,".scene.json"))})}),t},[]);t.sceneFilePathList=t.sceneFilePathList.concat(i)}),Jn(Yn(e.prototype),"getResPathList",this).call(this).concat(this.sceneConfig.texture.bg).concat([this.sceneConfig.texture.side,this.sceneConfig.texture.top,this.sceneConfig.texture.side2,this.sceneConfig.texture.top2]).concat(u.endlessMode.rewardRoad.roadPath).concat(this.sceneFilePathList).concat(u.gameScene.velocityStateImgList.map(function(t){return t.imgPath}))}},{key:"onRestart",value:function(){this.onShow(this.sceneIndex)}},{key:"initGameContent",value:function(){this.createPart({label:"Road",props:{points:[0,u.designHeight/2,u.startRoadLength,u.designHeight/2].join(","),x:0,y:0}}),this.mapWidth=u.startRoadLength,this.offsetX=u.startRoadLength,this.offsetY=u.designHeight/2,this.createBike(Et.renderPos2PhysicsPos({x:u.designWidth/2,y:u.designHeight/2-u.bikeRadius*u.meter2pixel})),this.enemyList=[],this.diffIndex=-1,this.roadSectionList=this.sceneConfig.roadSectionList,this.preparePartList(),this.createSpeedUpNotice()}},{key:"createRoadSection",value:function(t,e,i){var n=this;t.child.forEach(function(o){o.props.x+=e,o.props.y+=i,o.animations=t.animations,n.createPart(o)}),this.roadList.sort(function(t,e){return t.getLeftBorderX()-e.getLeftBorderX()})}},{key:"dynamicCreateRoad",value:function(){if(this.mapWidth<=-this.cameraContainer.x+u.designWidth){0===this.partList.length&&this.preparePartList();var t=this.partList.pop();this.createRoadSection(t,this.offsetX,this.offsetY),this.mapWidth+=t.props.width,this.offsetX+=t.props.width,this.offsetY+=t.props.height}}},{key:"preparePartList",value:function(){this.roadSectionList[this.diffIndex+1]?this.diffIndex++:(this.diffIndex=0,this.roadSectionList=this.sceneConfig.infiniteRoadSectionList);var t=this.roadSectionList[this.diffIndex],e=Q.randomChoose(t.list),i=u.roadSections[e].map(function(t){return Q.clone(F["".concat(u.endlessMode.baseScenePath).concat(t,".scene.json")].data)});t.velocity>this.player.velocity.getBasicValueRate()&&(this.speedUpNotice.visible=!0,this.speedUpNotice.gotoAndPlay(0)),this.player.velocity.setBasicValueRate(t.velocity),this.onVelocityUpdate(t.velocity),this.bikeBody.setLinearVelocity(et(this.player.velocity.value,this.bikeBody.getLinearVelocity().y)),this.partList=[];for(var n=0,o=t.length;o>n;){0===i.length&&(i=u.roadSections[e].map(function(t){return Q.clone(F["".concat(u.endlessMode.baseScenePath).concat(t,".scene.json")].data)}));var a=Math.floor(Math.random()*i.length),s=i.splice(a,1)[0];this.partList.push(s),n+=s.props.width}}},{key:"onVelocityUpdate",value:function(t){for(var e=0;e<u.gameScene.velocityStateImgList.length;e++){var i=u.gameScene.velocityStateImgList[e];if(t<=i.maxVelocity){this.ui.velocityState.children[0].texture=U.from(i.imgPath);break}}}},{key:"showDistance",value:function(){this.distance>=this.nextNoticeDistance&&(App.showNotice(App.getText("You have ridden ${distance} meters",{distance:this.nextNoticeDistance})),this.nextDistanceIndex++,this.nextNoticeDistance=this.sceneConfig.distanceNotice[this.nextDistanceIndex])}},{key:"cleanPartOutOfView",value:function(){var t=this;this.underBikeContianer.children.forEach(function(e){var i=e.part;i&&i.getRightBorderX()<-t.cameraContainer.x&&(i.destroy(),[t.roadList,t.itemList].forEach(function(t){-1!==t.indexOf(i)&&Q.removeItemFromArray(t,i)}))})}},{key:"onDead",value:function(){var t=this;Jn(Yn(e.prototype),"onDead",this).call(this),this.deadCompleteTimer=setTimeout(function(){t.pauseGame(),App.showScene("GameOverRebornScene",{gameScene:t})},u.bike.deadCompleteTime)}},{key:"onClickPauseButton",value:function(){"play"===this.gameStatus?(this.pauseGame(),this.gameStatus="pause",App.showScene("PauseScene",{gameSceneName:"EndlessGameScene",clickMainTip:"Are you sure you want to quit the game?  The current game data will be saved automatically after exit.",clickRestartTip:"Are you sure to restart the game? The current game data will be saved automatically after exit."})):"pause"===this.gameStatus&&(this.resumeGame(),this.gameStatus="play",App.hideScene("PauseScene"))}},{key:"onContinue",value:function(){this.onClickPauseButton()}},{key:"getItemRandomTableList",value:function(){return this.itemRandomTable}},{key:"onLoadedGameRes",value:function(){Jn(Yn(e.prototype),"onLoadedGameRes",this).call(this),this.showGuideAnimation()}},{key:"createSpeedUpNotice",value:function(){var t=this;this.speedUpNotice||(this.speedUpNotice=new X(Et.getFrames(u.imagePath.speedUpNotice)),this.speedUpNotice.loop=!1,this.speedUpNotice.animationSpeed=u.animationSpeed.speedUpNotice,this.speedUpNotice.onComplete=function(){return t.speedUpNotice.visible=!1},this.speedUpNotice.anchor.set(.5,.5),this.speedUpNotice.visible=!1,this.ui.speedUpNotice.addChild(this.speedUpNotice))}},{key:"settle",value:function(){Jn(Yn(e.prototype),"settle",this).call(this),Pt.add(Pt.endlessGameTimes,1);var t=this.exp*Et.getBikeConfig("expPercent");this.doubleReward&&(t*=2),Pt.add(Pt.exp,Math.floor(t));var i=Math.floor(Math.random()*u.endlessMode.sceneList.length);i===Pt.get(Pt.selectedEndlessScene)&&(i+=1,void 0===u.endlessMode.sceneList[i]&&(i=0)),Pt.set(Pt.selectedEndlessScene,i)}},{key:"enterRewardRoad",value:function(){var t=this;this.playLightAnimation(function(){t.itemList.forEach(function(t){return t.destroy()}),t.itemList=[],t.roadList.forEach(function(t){return t.destroy()}),t.roadList=[],t.showList.forEach(function(t){return t.destroy()}),t.showList=[],0===t.rewardRoads.length&&(t.rewardRoads=Q.randomList(Q.clone(u.endlessMode.rewardRoad.roadPath)));var e=Q.clone(F[t.rewardRoads.pop()].data);t.offsetX=-t.cameraContainer.x,t.mapWidth=-t.cameraContainer.x,t.createRoadSection(e,t.offsetX,t.offsetY),t.mapWidth+=e.props.width,t.offsetX+=e.props.width,t.offsetY+=e.props.height,t.rewardProgress.setValue(0),t.inRewardRoad=!0,t.rewardRoadFinalX=t.mapWidth})}},{key:"addRewardProgressValue",value:function(t){this.inRewardRoad||(this.rewardProgress.setValue(this.rewardProgress.value+t),this.rewardProgress.isFull()&&(this.willEnterScene=!0))}},{key:"playLightAnimation",value:function(t){var e=new N;this.addChild(e),e.beginFill(16777215),e.drawRect(0,0,App.sceneWidth,App.sceneHeight),e.endFill(),e.alpha=0,new Ke.a.Tween(e).to({alpha:1},u.endlessMode.rewardRoad.lightAnimationDuration/2).onComplete(function(){t&&t(),new Ke.a.Tween(e).to({alpha:0},u.endlessMode.rewardRoad.lightAnimationDuration/2).onComplete(function(){e.destroy()}).start(performance.now())}).start(performance.now())}},{key:"play",value:function(){Jn(Yn(e.prototype),"play",this).call(this),this.inRewardRoad&&this.bikeOutterContainer.x+u.endlessMode.rewardRoad.endDistance>=this.rewardRoadFinalX&&(this.playLightAnimation(),this.inRewardRoad=!1,this.enterInvincible(u.endlessMode.rewardRoad.endInvincibleDuration))}}])&&Hn(i.prototype,n),o&&Hn(i,o),e}();function Kn(t){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qn(t,e){return!e||"object"!==Kn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function to(t,e,i){return(to="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eo(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function eo(t){return(eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function io(t,e){return(io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}window.EndlessGameScene=Zn;var no=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qn(this,eo(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&io(t,e)}(e,Rn),i=e,(n=[{key:"onCreate",value:function(){to(eo(e.prototype),"onCreate",this).call(this),this.rewardType=Pt.preparationDataGameLevel,this.registerEvent("Continue",this.onContinue.bind(this)),this.ui.starPanel.visible=!0,this.ui.expPanel.visible=!0,this.ui.coinPanel.visible=!0,this.ui.pauseButton.visible=!0,this.onClick(this.ui.pauseButton,this.onClickPauseButton.bind(this))}},{key:"onShow",value:function(t,i){this.mapIndex=t,this.levelIndex=i,this.mapConfig=u.gameLevelMode.mapList[t],this.mapScenePath=this.mapConfig.levelList[this.levelIndex],to(eo(e.prototype),"onShow",this).call(this),window.TDGA&&TDGA.onEvent("闯关模式")}},{key:"onRestart",value:function(){this.onShow(this.mapIndex,this.levelIndex)}},{key:"onLoadedGameRes",value:function(){to(eo(e.prototype),"onLoadedGameRes",this).call(this),this.showGuideAnimation()}},{key:"onClickPauseButton",value:function(){"play"===this.gameStatus?(this.pauseGame(),this.gameStatus="pause",App.showScene("PauseScene",{gameSceneName:"LevelGameScene",clickMainTip:"Are you sure you want to quit the game?  The current game data will be saved automatically after exit.",clickRestartTip:"Are you sure to restart the game? The current game data will be saved automatically after exit."})):"pause"===this.gameStatus&&(this.resumeGame(),this.gameStatus="play",App.hideScene("PauseScene"))}},{key:"getItemRandomTableList",value:function(){return this.mapConfig.itemRandomTableList}},{key:"settle",value:function(){to(eo(e.prototype),"settle",this).call(this);var t=this.exp*Et.getBikeConfig("expPercent");(this.doubleReward&&(t*=2),"win"===this.gameStatus)&&(Pt.isPlayGameLevelFirstTime(this.mapIndex,this.levelIndex)&&(App.getScene("MainScene").gameLevelFirstWin=!0));Pt.add(Pt.exp,Math.floor(t)),"win"===this.gameStatus&&Pt.setGameLevelStarCount(this.mapIndex,this.levelIndex,this.star),Pt.refreshPreparationRewards(Pt.preparationDataGameLevel)}},{key:"gameWin",value:function(){this.gameStatus="win",App.showScene("GameLevelResultScene",{gameScene:this}),pt.dispatchEvent("GameWin")}},{key:"onDead",value:function(){var t=this;to(eo(e.prototype),"onDead",this).call(this),this.deadCompleteTimer=setTimeout(function(){t.pauseGame(),App.showScene("GameLevelRebornScene",{gameScene:t,distance:t.distance,playerRate:(t.deadPos.x-t.bikeStartX)/t.totalDistance})},u.bike.deadCompleteTime)}},{key:"onContinue",value:function(){this.onClickPauseButton()}}])&&$n(i.prototype,n),o&&$n(i,o),e}();function oo(t){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ao(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function so(t,e){return!e||"object"!==oo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ro(t){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lo(t,e){return(lo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}window.LevelGameScene=no;var ho=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),so(this,ro(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lo(t,e)}(e,di),i=e,o=[{key:"onClickMainButton",value:function(){App.getScene("EndlessGameScene").settle(),App.hideScene("GameOverScene"),App.destroyScene("EndlessGameScene"),App.showScene("MainScene"),App.getScene("MainScene").onGameEnded()}}],(n=[{key:"onCreate",value:function(){var t=this,i=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(i,0),this.onClick(this.ui.mainButton,e.onClickMainButton),this.onClick(this.ui.advertDoubleButton,this.onClickAdvertDoubleButton.bind(this)),this.typeList=["distance","exp","coin"].map(function(e){return{type:e,doubleIcon:t.ui["".concat(e,"DoubleIcon")],percentText:t.ui["".concat(e,"PercentText")],valueText:t.ui["".concat(e,"ValueText")]}}),this.typeList.forEach(function(e){return t.initAnimationObject(e.doubleIcon)}),this.initAnimationObject(this.ui.hasDoubleRewardText),this.initAnimationObject(this.ui.newRecordIcon),this.animations=[]}},{key:"initAnimationObject",value:function(t){(t=t.children[0]).originScale=t.scale.x,t.anchor.set(.5,.5),t.position.set(t.x+t.width/2,t.y+t.height/2)}},{key:"recoverAnimationObject",value:function(t){(t=t.children[0]).alpha=1,t.scale.set(t.originScale,t.originScale)}},{key:"onShow",value:function(t){var e=this;this.parent.setChildIndex(this,this.parent.children.length-1),this.args=t,this.distanceRecord=Pt.get(Pt.distanceRecord,0),this.ui.distanceRecordText.text=this.distanceRecord,this.typeList.forEach(function(t){t.doubleIcon.visible=!1;var e=Et.getBikeConfig("".concat(t.type,"Percent"));e>1?(t.percentText.visible=!0,t.percentText.text="+".concat(Math.floor(100*e),"%")):t.percentText.visible=!1,t.valueText.text=0}),this.ui.advertDoubleButton.visible=!0,this.ui.hasDoubleRewardText.visible=!1,this.ui.newRecordIcon.visible=!1,App.showMask(this.onClickMask.bind(this)),this.playNumberAnimation(function(){return e.onResolveAnimationEnded()})}},{key:"playNumberAnimation",value:function(t){var e=this,i={percent:0},n=new Ke.a.Tween(i).to({percent:1},u.resolveAnimation.numberAnimation.duration).onUpdate(function(){e.typeList.forEach(function(t){var n=e.args.gameScene[t.type],o=Et.getBikeConfig("".concat(t.type,"Percent"));t.valueText.text=Math.floor(n*o*i.percent)})}).onComplete(function(){Q.removeItemFromArray(e.animations,n),t&&t()}).start(performance.now());this.animations.push(n)}},{key:"playDoubleAnimation",value:function(t){var e=this;this.ui.advertDoubleButton.visible=!1,this.typeList.forEach(function(t){return t.doubleIcon.visible=!1});var i=0;!function n(){if(i<e.typeList.length){var o=e.typeList[i].doubleIcon;o.visible=!0,e.playStarAnimation(o,u.resolveAnimation.doubleIconAnimation,function(){e.playAdvertNumberAnimation(i,function(){i++,n()})})}else i===e.typeList.length?(e.ui.hasDoubleRewardText.visible=!0,e.playStarAnimation(e.ui.hasDoubleRewardText,u.resolveAnimation.getIconAnimation,function(){i++,n()})):t&&t()}()}},{key:"playStarAnimation",value:function(t,e,i){var n=this,o=(t=t.children[0]).originScale,a=o*e.startScale,s=e.startAlpha;t.scale.set(a,a),t.alpha=s;var r={scale:a,alpha:s},l=new Ke.a.Tween(r).to({scale:o,alpha:1},e.duration).easing(Ke.a.Easing.Bounce.Out).onUpdate(function(){t.scale.set(r.scale,r.scale),t.alpha=r.alpha}).onComplete(function(){Q.removeItemFromArray(n.animations,l),i&&i()}).start(performance.now());this.animations.push(l)}},{key:"playAdvertNumberAnimation",value:function(t,e){var i=this,n={percent:1},o=new Ke.a.Tween(n).to({percent:2},u.resolveAnimation.numberAnimation.duration).onUpdate(function(){var e=i.typeList[t],o=i.args.gameScene[e.type],a=Et.getBikeConfig("".concat(e.type,"Percent"));e.valueText.text=Math.floor(o*a*n.percent)}).onComplete(function(){Q.removeItemFromArray(i.animations,o),e&&e()}).start(performance.now());this.animations.push(o)}},{key:"onClickAdvertDoubleButton",value:function(){var t=this;window.PlatformHelper.showAd(function(e){e&&(t.args.gameScene.doubleReward=!0,window.TDGA&&TDGA.onEvent("广告无尽模式双倍"),App.showMask(t.onClickMask.bind(t)),t.playDoubleAnimation(function(){return t.onResolveAnimationEnded()}))})}},{key:"onResolveAnimationEnded",value:function(){var t=this;this.getDistance()>this.distanceRecord&&!this.ui.newRecordIcon.visible?(this.ui.newRecordIcon.visible=!0,this.playStarAnimation(this.ui.newRecordIcon,u.resolveAnimation.newRecordAnimation,function(){t.onClickMask()})):this.onClickMask()}},{key:"onClickMask",value:function(){var t=this;App.hideMask(),this.animations.forEach(function(t){return t.stop()}),this.animations=[],this.typeList.forEach(function(e){var i=t.args.gameScene[e.type],n=Et.getBikeConfig("".concat(e.type,"Percent")),o=Math.floor(i*n);t.args.gameScene.doubleReward&&(o*=2),e.valueText.text=o,e.doubleIcon.visible=t.args.gameScene.doubleReward,t.recoverAnimationObject(e.doubleIcon)}),this.args.gameScene.doubleReward?(this.ui.advertDoubleButton.visible=!1,this.ui.hasDoubleRewardText.visible=!0):(this.ui.advertDoubleButton.visible=!0,this.ui.hasDoubleRewardText.visible=!1),this.recoverAnimationObject(this.ui.hasDoubleRewardText);var e=this.getDistance();e>this.distanceRecord&&(this.ui.newRecordIcon.visible=!0,Pt.set(Pt.distanceRecord,e)),this.recoverAnimationObject(this.ui.newRecordIcon)}},{key:"getDistance",value:function(){var t=this.args.gameScene.distance,e=Et.getBikeConfig("distancePercent"),i=Math.floor(t*e);return this.args.gameScene.doubleReward&&(i*=2),i}}])&&ao(i.prototype,n),o&&ao(i,o),e}();function co(t){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mo(t,e){return!e||"object"!==co(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function po(t){return(po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ho.sceneFilePath="myLaya/laya/pages/View/GameOverScene.scene.json";var yo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mo(this,po(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fo(t,e)}(e,di),i=e,(n=[{key:"onClickContinueButton",value:function(){App.hideScene("PauseScene"),pt.dispatchEvent("Continue")}},{key:"onClickMainButton",value:function(){var t=this;App.showScene("TipScene",{tip:App.getText(this.args.clickMainTip),confirmCallback:function(){App.getScene(t.args.gameSceneName).settle(),App.destroyScene(t.args.gameSceneName),App.hideScene("PauseScene"),App.showScene("MainScene"),App.getScene("MainScene").onGameEnded()},cancelCallback:function(){}})}},{key:"onClickRestartButton",value:function(){var t=this;App.showScene("TipScene",{tip:App.getText(this.args.clickRestartTip),confirmCallback:function(){App.getScene(t.args.gameSceneName).settle(),App.hideScene("PauseScene"),pt.dispatchEvent("Restart")},cancelCallback:function(){}})}},{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.onClick(this.ui.continueButton,this.onClickContinueButton.bind(this)),this.onClick(this.ui.mainButton,this.onClickMainButton.bind(this)),this.onClick(this.ui.restartButton,this.onClickRestartButton.bind(this))}},{key:"onShow",value:function(t){this.parent.setChildIndex(this,this.parent.children.length-1),this.args=t}}])&&uo(i.prototype,n),o&&uo(i,o),e}();function go(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}yo.sceneFilePath="myLaya/laya/pages/View/PauseScene.scene.json";var _o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bikeSprite=new j,void 0!==i?e.addChildAt(this.bikeSprite,i):e.addChild(this.bikeSprite),this.decorateSprite=new V,this.bikeSprite.addChild(this.decorateSprite),this.visible=!0}var e,i,n;return e=t,(i=[{key:"setBikeID",value:function(t){this.config=u.bikeList.find(function(e){return e.id===t}),this.animationPath=this.config.bikeCommonAnimation||u.bikeCommonAnimation,this.updateDecorate(),this.isAnimationLoaded()?this.updateAnimation():(this.bikeSprite.visible=!1,this.loadAnimation())}},{key:"isAnimationLoaded",value:function(){return App.hasLoadResource(this.animationPath)}},{key:"loadAnimation",value:function(){App.loadResources([this.animationPath],this.onLoadedAnimation.bind(this),function(){return 0})}},{key:"onLoadedAnimation",value:function(){this.updateAnimation()}},{key:"updateAnimation",value:function(){if(this.isAnimationLoaded()){var t,e=Et.getFrames(this.animationPath,"bike");this.bikeAnimSprite&&this.bikeAnimSprite.destroy(),this.bikeAnimSprite=this.bikeSprite.addChildAt(new X(e),0),this.bikeAnimSprite.anchor.set(.5,.5),(t=this.bikeAnimSprite.position).set.apply(t,go(this.config.bikeCommonAnimationPos||u.bikeCommonAnimationPos)),void 0!==this.animationSpeed&&(this.bikeAnimSprite.animationSpeed=this.animationSpeed),this.playing&&this.bikeAnimSprite.play(),this.bikeSprite.visible=this.visible}}},{key:"updateDecorate",value:function(){var t,e,i;this.config.imagePath&&0!==this.config.imagePath.length?(this.decorateSprite.texture=U.from(this.config.imagePath),(t=this.decorateSprite.anchor).set.apply(t,go(this.config.anchor)),(e=this.decorateSprite.scale).set.apply(e,go(this.config.scale)),(i=this.decorateSprite.position).set.apply(i,go(this.config.position)),this.decorateSprite.visible=!0):this.decorateSprite.visible=!1}},{key:"setPositionX",value:function(t){this.bikeSprite.x=t}},{key:"getPositionX",value:function(){return this.bikeSprite.x}},{key:"getPositionY",value:function(){return this.bikeSprite.y}},{key:"getLeftBorderX",value:function(){return this.bikeSprite.x-this.getWidth()/2}},{key:"setPosition",value:function(t,e){this.bikeSprite.position.set(t,e)}},{key:"getWidth",value:function(){return this.bikeAnimSprite?this.bikeAnimSprite.width*Math.abs(this.bikeSprite.scale.x):0}},{key:"play",value:function(){this.bikeAnimSprite&&this.bikeAnimSprite.play(),this.playing=!0}},{key:"stop",value:function(){this.bikeAnimSprite&&this.bikeAnimSprite.stop(),this.playing=!1}},{key:"destroy",value:function(){this.bikeSprite.destroy()}},{key:"setGray",value:function(t){Et.greySprite(this.bikeSprite,t)}},{key:"reverse",value:function(t){this.bikeSprite.scale.x=Math.abs(this.bikeSprite.scale.x)*(t?-1:1)}},{key:"setVisible",value:function(t){this.visible=t,this.bikeSprite.visible=t}},{key:"setScale",value:function(t){this.bikeSprite.scale.set(t,t)}},{key:"setAnimationSpeed",value:function(t){this.animationSpeed=t,this.bikeAnimSprite&&(this.bikeAnimSprite.animationSpeed=t)}}])&&vo(e.prototype,i),n&&vo(e,n),t}();function bo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}_o.resPathList=[];var xo=function(){function t(e){var i=e.button,n=e.system,o=e.handler;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.button=i,this.system=n,this.handler=o,this.refreshLockStatus(),Ze.onClick(this.button,this.onClick.bind(this)),this.unlockSystemHandler=this.onUnlockSystem.bind(this),pt.registerEvent("UnlockSystem",this.unlockSystemHandler)}var e,i,n;return e=t,(i=[{key:"onUnlockSystem",value:function(){this.refreshLockStatus()}},{key:"onClick",value:function(){Et.isSystemLocked(this.system)?App.showTip(Et.getLockNotice(this.system),void 0,void 0,!0):this.handler()}},{key:"refreshLockStatus",value:function(){for(var t=Et.isSystemLocked(this.system),e=0;e<this.button.children.length;e++){var i=this.button.children[e];"lockedImage"!==i.uiname&&Et.greySprite(i,t)}Et.findChildByName(this.button,"lockedImage").visible=t}},{key:"destroy",value:function(){pt.unregisterEvent("UnlockSystem",this.unlockSystemHandler)}}])&&bo(e.prototype,i),n&&bo(e,n),t}();function So(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ko=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),console.log("start guide",e),this.guideKey=e,this.config=u.UIGuide[this.guideKey],this.index=0;var n=this.config.guidePanelList[this.index];App.showMask(),App.registerOnSceneShowOnTop(n.scene,function(){App.hideMask(),i.uiGuidePanel=new dn(n,i,App.uiGuidePanelContainer)})}var e,i,n;return e=t,(i=[{key:"destroyUIGuidePanel",value:function(){var t=this;this.uiGuidePanel.destroy();var e=this.config.guidePanelList[this.index];this.index++;var i=this.config.guidePanelList[this.index];i?i.scene===e.scene?this.uiGuidePanel=new dn(i,this,App.uiGuidePanelContainer):(App.showMask(),App.registerOnSceneShowOnTop(i.scene,function(){App.hideMask(),t.uiGuidePanel=new dn(i,t,App.uiGuidePanelContainer)})):Pt.completeGuide(this.guideKey)}}])&&So(e.prototype,i),n&&So(e,n),t}();function wo(t){return(wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ao(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,o=!1,a=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==r.return||r.return()}finally{if(o)throw a}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Po(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function To(t,e){return!e||"object"!==wo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Co(t){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Io(t,e){return(Io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),To(this,Co(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Io(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=this;this.lockableButtons=["shopButton","homeButton","rankButton","drawButton","signButton","giftButton","mapModeButton","endlessModeButton","bikeButton"],this.lockableButtons.forEach(function(e){return new xo({button:t.ui[e],system:e,handler:t["onClick".concat(Q.formatName(e))].bind(t)})}),this.onClick(this.ui.gamelevelModeButton,this.onClickGamelevelModeButton.bind(this)),this.onClick(this.ui.systemButton,this.onClickSystemButton.bind(this)),this.onClick(this.ui.addDiamondButton,this.onClickAddDiamondButton.bind(this)),this.onClick(this.ui.addCoinButton,this.onClickAddCoinButton.bind(this)),this.onClick(this.ui.endlessHelpButton,this.onClickEndlessHelpButton.bind(this)),this.onClick(this.ui.mapHelpButton,this.onClickMapHelpButton.bind(this)),this.onClick(this.ui.gamelevelHelpButton,this.onClickGamelevelHelpButton.bind(this)),this.onClick(this.ui.lastLevelButton,this.onClickLastLevelButton.bind(this)),this.onClick(this.ui.nextLevelButton,this.onClickNextLevelButton.bind(this));for(var e=1;e<=5;e++){var i=this.ui["glBtn".concat(e)];i.index=e-1,this.onClick(i,this.onClickGameLevel.bind(this))}this.selectedLevel=0,this.ui.signButton.visible=yt.hasSignReward(),window.PlatformHelper.canLogout&&this.onClick(this.ui.userImage,this.onClickUserImage.bind(this)),pt.registerEvent("RefreshRankData",this.onRefreshRankData.bind(this)),pt.registerEvent("UnlockSystem",this.onUnlockSystem.bind(this)),pt.registerEvent("UpdatePoint",this.updatePoint.bind(this)),this.bikeSprite=new _o(this.ui.bikeSpritePanel),this.bikeSprite.setAnimationSpeed(u.mainScene.bikeSprite.animationSpeed),this.waitShowNotice=[],this.gameLevel=0,this.mode="GameLevel",this.refreshMode(),this.initGift(),this.expProgress=new Xn(this.ui.expProgress)}},{key:"onRefreshRankData",value:function(){var t=this;this.ui.distanceText.text="".concat(Math.floor(Pt.get(Pt.rankDistance,0)),"m"),this.ui.totalScoreText.text=Pt.get(Pt.rankTotalScore,0),this.ui.diamondText.text=Pt.get(Pt.diamond,0),this.ui.coinText.text=Pt.get(Pt.coin,0);var e=Pt.getPlayerLevel(),i=e.level,n=e.curExp,o=e.totalExp;this.ui.levelText.text=App.getText("LevelDsc",{level:i}),this.expProgress.setMax(o),this.expProgress.setValue(n),this.ui.expRate.text="".concat(n,"/").concat(o),["distance","coin","exp","score"].forEach(function(e){t.ui["".concat(e,"PercentText")].text="x".concat(Math.floor(100*Et.getBikeConfig("".concat(e,"Percent"))),"%")}),this.ui.bulletMaxValueAddText.text=Pt.getBulletTimeMaxValue()}},{key:"onShow",value:function(){if(this.onRefreshRankData(),this.refreshMode(!0),Ft.playBGM(u.mainBgmPath),this.bikeSprite.setBikeID(Pt.get(Pt.selectedBike,0)),this.bikeSprite.setPosition(-this.bikeSprite.getWidth()/2,0),this.bikeSprite.play(),this.bikeSprite.setPositionX(0),this.onUpdate(),this.ui.userImage.children[0].texture=U.from(Pt.get(Pt.headurl,u.defaultEnemyHeadImagePath)),this.ui.userNameText.text=Pt.getPlayerName(),window.PlatformHelper.closeLogoScene(),this.refreshLockStatus(),this.updatePoint(),rt.testUnlockSystemGuide){var t=rt.testUnlockSystemGuide;rt.testUnlockSystemGuide="",setTimeout(function(){new ko(t),setTimeout(function(){App.showScene("GameLevelScene")},0)},0)}else 0===rt.forceShowBeginnerGuide&&!Pt.get(Pt.throughGuide,!1)||1===rt.forceShowBeginnerGuide?App.showScene("GuideGameScene"):Pt.hasCompletedFirstGameGuide()||this.showFirstGameGuide()}},{key:"onHide",value:function(){this.bikeSprite.stop(),cancelAnimationFrame(this.animationFrame)}},{key:"onUpdate",value:function(){var t=this.bikeSprite.getPositionX()+u.mainScene.bikeSprite.velocityX;this.bikeSprite.setPositionX(t),this.bikeSprite.getLeftBorderX()>=App.sceneWidth&&this.bikeSprite.setPositionX(-this.bikeSprite.getWidth()/2),this.animationFrame=requestAnimationFrame(this.onUpdate.bind(this))}},{key:"onClickMapModeButton",value:function(){this.mode="Map",this.refreshMode(),App.showScene("PreparationScene",this.mode)}},{key:"refreshMapMode",value:function(){var t=Pt.get(Pt.currentMapScene),e=u.mapList[t].texture.mainCover;this.ui.sceneImage.children[0].texture=F[e].texture}},{key:"onClickEndlessModeButton",value:function(){if(this.mode="Endless",this.refreshMode(),-1===Pt.get(Pt.unlockSystems,[]).indexOf("preparationScene")){var t=function(){App.hideScene("MainScene"),App.hideScene("PreparationScene"),App.showScene("EndlessGameScene",Pt.get(Pt.selectedEndlessScene,0))};0===Pt.get(Pt.endlessGameTimes,0)?App.showScene("HelpEndlessScene",t):t()}else App.showScene("PreparationScene",this.mode)}},{key:"refreshEndlessMode",value:function(){var t=Pt.get(Pt.selectedEndlessScene,0),e=u.endlessMode.sceneList[t].texture.mainCover;this.ui.sceneImage.children[0].texture=F[e].texture}},{key:"onClickHomeButton",value:function(){App.hideScene("MainScene"),App.showScene("HomeScene",Pt.get(Pt.homeData),!0)}},{key:"onClickShopButton",value:function(){App.hideScene("MainScene"),App.showScene("ShopScene")}},{key:"onClickDrawButton",value:function(){App.hideScene("MainScene"),App.showScene("DrawScene")}},{key:"onClickBikeButton",value:function(){App.hideScene("MainScene"),App.showScene("BikeScene")}},{key:"onClickSystemButton",value:function(){App.hideScene("MainScene"),App.showScene("SystemScene")}},{key:"onClickRankButton",value:function(){App.hideScene("MainScene"),App.showScene("RankScene")}},{key:"onClickUserImage",value:function(){App.showTip(App.getText("Do you want log out?"),function(){delete localStorage.username,delete localStorage.password;var t=window.parent.location.href;window.parent.location.href=t.replace("autoRegister=1","")})}},{key:"initGift",value:function(){var t=this;this.updateGiftState(),setInterval(function(){t.updateGiftState()},1e3)}},{key:"updateGiftState",value:function(){var t=yt.getGiftRemainTime();t?(this.ui.giftTimeText.visible=!0,this.ui.giftTimeText.text=Q.getCDTimeStringWithoutHour(1e3*t),Et.showRedPoint(this.ui.giftButton,!1)):(this.ui.giftTimeText.visible=!1,Et.showRedPoint(this.ui.giftButton,!Et.isSystemLocked("giftButton")))}},{key:"onClickGiftButton",value:function(){yt.hasGift()?0===yt.getGiftRemainTime()?App.showScene("GiftScene"):App.showNotice(App.getText("领取礼包的时间还没到")):App.showNotice(App.getText("ThereIsNoGiftToday"))}},{key:"onClickSignButton",value:function(){App.showScene("SignScene")}},{key:"hideSignScene",value:function(){this.ui.signButton.visible=!1}},{key:"onClickAddDiamondButton",value:function(){App.hideScene("MainScene"),App.showScene("ShopScene",1)}},{key:"onClickAddCoinButton",value:function(){App.hideScene("MainScene"),App.showScene("ShopScene",2)}},{key:"onClickEndlessHelpButton",value:function(){App.showScene("HelpEndlessScene")}},{key:"onClickMapHelpButton",value:function(){App.showScene("HelpMatchScene")}},{key:"onClickGamelevelHelpButton",value:function(){App.showScene("HelpGameLevelScene")}},{key:"refreshLockStatus",value:function(){var t=-1!==Pt.get(Pt.unlockSystems,[]).indexOf("shopButton");this.ui.addCoinButton.visible=t,this.ui.addDiamondButton.visible=t}},{key:"onUnlockSystem",value:function(t){this.refreshLockStatus(),this.waitShowNotice.push(t)}},{key:"showUnlockNotice",value:function(t){var e=this;App.showScene("NewContentScene",t,function(){e.checkWaitShowNotice(t)})}},{key:"checkWaitShowNotice",value:function(t){this.waitShowNotice.length?this.showUnlockNotice(this.waitShowNotice.shift()):this.showNextGameLevel(t)}},{key:"onClickGamelevelModeButton",value:function(){this.mode="GameLevel",this.refreshMode(),App.showScene("GameLevelScene")}},{key:"onClickLastLevelButton",value:function(){this.gameLevel--,this.gameLevel<0&&(this.gameLevel=0),this.refreshMode()}},{key:"onClickNextLevelButton",value:function(){this.gameLevel++;var t=u.gameLevelMode.mapList.length-1;this.gameLevel>t&&(this.gameLevel=t),this.refreshMode()}},{key:"refreshGameLevelMode",value:function(t){this.selectedLevel=t&&this.selectedLevel||0,this.refreshGameLevelSelectedState();var e=u.gameLevelMode.mapList[this.gameLevel];this.ui.sceneImage.children[0].texture=F[e.mainCover].texture;var i=Pt.getGameLevelStarTotalCount(),n=e.starCountUnlockNeeded,o=Pt.isGameLevelMapLocked(this.gameLevel);this.ui.totalStarCount.text=i,this.ui.gameLevelMapDsc.text=App.getText(e.dsc),this.ui.gameLevelLocked.visible=o,this.ui.glUnlockStarCount.text=n,Et.greySprite(this.ui.sceneImage.children[0],o),this.ui.lastLevelButton.visible=this.gameLevel>0,this.ui.nextLevelButton.visible=this.gameLevel<u.gameLevelMode.mapList.length-1}},{key:"refreshGameLevelSelectedState",value:function(){for(var t=1;t<=5;t++){var e=Pt.getGameLevelStarCount(this.gameLevel,t-1),i=Pt.isGameLevelLocked(this.gameLevel,t-1),n=this.ui["glBtn".concat(t)];i?(n.children[0].texture=U.from(u.imagePath.lockedLevel),n.interactive=!1):t-1===this.selectedLevel?(n.children[0].texture=U.from(u.imagePath.selectedLevel),n.interactive=!0):(n.children[0].texture=U.from(u.imagePath.enabledLevel),n.interactive=!0),Et.findChildByName(n,"nameLabel").text="".concat(this.gameLevel+1,"-").concat(t);for(var o=1;o<=3;o++){Et.findChildByName(n,o+"").visible=e>=o}}}},{key:"onClickGameLevel",value:function(t){this.selectedLevel=t.index,this.refreshGameLevelSelectedState(),App.showScene("PreparationScene",this.mode)}},{key:"refreshMode",value:function(t){switch(this.ui.gameLevelPanel.visible="GameLevel"===this.mode,Et.greySprite(this.ui.sceneImage.children[0],!1),this.mode){case"Map":this.refreshMapMode();break;case"GameLevel":this.refreshGameLevelMode(t);break;case"Endless":this.refreshEndlessMode()}}},{key:"updatePoint",value:function(){var t=this;[["signButton",function(){return yt.hasReceivableSignReward()}],["shopButton",function(){return Pt.hasShopReceivableCoin()||Pt.hasShopReceivableDiamond()}],["homeButton",function(){return Pt.hasHomeReceivableItem()}],["drawButton",function(){return Pt.isDrawAble()}],["bikeButton",function(){return!Et.isSystemLocked("upgradePanelButton")&&Pt.hasBikeUpgradable()}]].forEach(function(e){var i=Ao(e,2),n=i[0],o=i[1];return Et.showRedPoint(t.ui[n],o()&&(-1===t.lockableButtons.indexOf(n)||!Et.isSystemLocked(n)))})}},{key:"onGameEnded",value:function(){var t=Pt.getPlayerLevel().level;this.curPlayerLevel<t?(this.curPlayerLevel++,this.showLevelUp(t)):this.checkWaitShowNotice()}},{key:"showLevelUp",value:function(t){var e=this,i=u.levelUpReward[this.curPlayerLevel-2];i?App.showScene("LevelUpScene",this.curPlayerLevel,function(){if(i.bike){var n=Pt.plusBike(i.bike),o=n.levelUp,a=n.highestLevel;App.showScene("BikeDetailScene",i.bike,o,a,function(){e.onGameEnded(t)})}else e.onGameEnded(t)}):this.onGameEnded(t)}},{key:"showNextGameLevel",value:function(t){var e=App.getScene("GameLevelScene");if(e)if(t){for(var i in u.UIGuide){if(u.UIGuide.hasOwnProperty(i))if(u.UIGuide[i].startInUnlockSystem===t){new ko(i);break}}e.show()}else e.onGameEnded(this.gameLevelFirstWin)}},{key:"showFirstGameGuide",value:function(){for(var t in u.UIGuide){if(u.UIGuide.hasOwnProperty(t))if(u.UIGuide[t].startInFirstTimeShowMainScene){new ko(t);break}}}}])&&Po(i.prototype,n),o&&Po(i,o),e}();function Lo(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Eo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Bo.sceneFilePath="myLaya/laya/pages/View/MainScene.scene.json",Bo.resPathList=u.mapList.map(function(t){return t.texture.mainCover}).concat(u.endlessMode.sceneList.map(function(t){return t.texture.mainCover})).concat(_o.resPathList).concat([u.mainBgmPath]);var Mo=function(){function t(e){var i=e.root,n=e.initItemFunc,o=e.updateItemFunc,a=e.count,s=e.isStatic,r=e.isHorizontal,l=e.onScroll;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemTable={},this.cacheItemList=[],this.root=i,this.root.hitArea=new Y(0,0,this.root.mywidth,this.root.myheight),this.container=this.root.addChild(new j),this.item=i.children[0],this.item.visible=!1,this.initItem=n,this.updateItem=o,this.onScroll=l||function(){return 0},this.createMask(),s||this.bindListener(),this.initDirectionRelatedVariable(r),this.countPerLine=Math.ceil(this.lineLength/this.itemLineLength),this.maxOffset=0,a=a||0,this.setItemCount(a),this.update()}var e,i,n;return e=t,(i=[{key:"initDirectionRelatedVariable",value:function(t){this.isHorizontal=t,t?(this.lineLength=this.root.myheight,this.viewLength=this.root.mywidth,this.itemLineLength=this.item.myheight,this.itemLength=this.item.mywidth,this.moveAxis="x"):(this.lineLength=this.root.mywidth,this.viewLength=this.root.myheight,this.itemLineLength=this.item.mywidth,this.itemLength=this.item.myheight,this.moveAxis="y")}},{key:"getItemPosition",value:function(t){if(this.isHorizontal){var e=Math.floor(t/this.countPerLine),i=t%this.countPerLine;return[e*this.itemLength,i*this.itemLineLength]}var n=t%this.countPerLine,o=Math.floor(t/this.countPerLine);return[n*this.itemLineLength,o*this.itemLength]}},{key:"createMask",value:function(){var t=this.root.getGlobalPosition(),e=t.x,i=t.y;this.root.mask=(new N).beginFill().drawRect(e,i,this.root.mywidth,this.root.myheight).endFill()}},{key:"createItem",value:function(){var t=this.cacheItemList.pop();return void 0===t&&(t=Ze.uiClone(this.item,void 0,this.container),this.container.addChild(t),this.initItem&&this.initItem(t)),t}},{key:"bindListener",value:function(){this.root.buttonMode=!0,this.root.interactive=!0,this.root.on("pointerdown",this.onTouchStart.bind(this)),this.root.on("pointermove",this.onTouchMove.bind(this)),this.root.on("pointerup",this.onTouchEnd.bind(this)),this.root.on("pointerupoutside",this.onTouchEnd.bind(this))}},{key:"onTouchStart",value:function(t){this.touching=!0,this.lastTouchOffset=t.data.global[this.moveAxis],cancelAnimationFrame(this.recoverAnimationID)}},{key:"onTouchMove",value:function(t){if(this.touching){var e=t.data.global[this.moveAxis],i=e-this.lastTouchOffset;this.lastTouchOffset=e;var n=this.container[this.moveAxis]+i;(n>this.maxOffset||n<this.minOffset)&&(n=this.container[this.moveAxis]+i/u.listResistance),this.container[this.moveAxis]=n,this.update(),this.onScroll()}}},{key:"onTouchEnd",value:function(){var t=this;if(this.touching=!1,this.container[this.moveAxis]>this.maxOffset||this.container[this.moveAxis]<this.minOffset){var e=(new Date).getTime(),i=(this.container[this.moveAxis]>this.maxOffset?this.maxOffset:this.minOffset)-this.container[this.moveAxis];!function n(){var o=(new Date).getTime();t.container[t.moveAxis]>t.minOffset?(t.container[t.moveAxis]+=(o-e)/250*i,t.container[t.moveAxis]<=t.maxOffset?t.container[t.moveAxis]=t.maxOffset:t.recoverAnimationID=requestAnimationFrame(n)):t.container[t.moveAxis]<t.maxOffset&&(t.container[t.moveAxis]+=(o-e)/250*i,t.container[t.moveAxis]>=t.minOffset?t.container[t.moveAxis]=t.minOffset:t.recoverAnimationID=requestAnimationFrame(n)),t.update(),e=o,t.onScroll()}()}}},{key:"calcStartAndEnd",value:function(t,e,i){var n=Math.floor(t/e),o=Math.floor((t+i)/e);n<0&&(n=0);var a=Math.ceil(this.itemCount/this.countPerLine);o>a-1&&(o=a-1);var s=n*this.countPerLine,r=(o+1)*this.countPerLine-1;return r>=this.itemCount&&(r=this.itemCount-1),{start:s,end:r}}},{key:"update",value:function(){var t=this.calcStartAndEnd(-this.container[this.moveAxis],this.itemLength,this.viewLength),e=t.start,i=t.end;for(var n in this.itemTable)this.itemTable.hasOwnProperty(n)&&(n<e||n>i)&&(this.itemTable[n].visible=!1,this.cacheItemList.push(this.itemTable[n]),delete this.itemTable[n]);for(var o=e;o<=i;o++)if(void 0===this.itemTable[o]){var a,s=this.createItem();this.itemTable[o]=s,(a=s.position).set.apply(a,Lo(this.getItemPosition(o))),s.visible=!0,this.updateItem(s,o)}}},{key:"refresh",value:function(){for(var t in this.itemTable)this.itemTable.hasOwnProperty(t)&&this.updateItem(this.itemTable[t],parseInt(t))}},{key:"reset",value:function(t){for(var e in t=void 0===t?this.itemCount:t,this.container[this.moveAxis]=0,this.setItemCount(t),this.itemTable)this.itemTable.hasOwnProperty(e)&&(this.itemTable[e].visible=!1,this.cacheItemList.push(this.itemTable[e]),delete this.itemTable[e]);this.update()}},{key:"getIndex",value:function(){return-Math.floor(this.container[this.moveAxis]/this.itemLength)}},{key:"setIndex",value:function(t){this.container[this.moveAxis]=-this.itemLength*t,this.update()}},{key:"getItemCount",value:function(){return this.itemCount}},{key:"setItemCount",value:function(t){this.itemCount=t,this.minOffset=this.viewLength-Math.ceil(this.itemCount/this.countPerLine)*this.itemLength,this.minOffset>this.maxOffset&&(this.minOffset=0)}},{key:"getViewLineCount",value:function(){return Math.floor(this.viewLength/this.itemLength)}},{key:"updateItems",value:function(t){for(var e in this.itemTable)this.itemTable.hasOwnProperty(e)&&t(this.itemTable[e],parseInt(e))}},{key:"isAbleScrollLeft",value:function(){return this.container[this.moveAxis]<this.maxOffset}},{key:"isAbleScrollRight",value:function(){return this.container[this.moveAxis]>this.minOffset}}])&&Eo(e.prototype,i),n&&Eo(e,n),t}();function Ro(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Do=function(){function t(e){var i=this,n=e.root,o=e.initItemFunc,a=e.clickButtonFunc,s=e.infoList,r=e.buttonDistance;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=n,this.clickButtonFunc=a,this.button=this.root.children[0],void 0===r&&(r=this.button.mywidth),this.buttonList=s.map(function(t,e){var n=Ze.uiClone(i.button,void 0,i.root);return o(n,t,e),i.root.addChild(n),n.x=e*r,Ze.onClick(n,i.onClickButton.bind(i)),n}),this.button.visible=!1,this.onClickButton(this.buttonList[0])}var e,i,n;return e=t,(i=[{key:"onClickButton",value:function(t){var e=this,i=this.selectedIndex;this.buttonList.forEach(function(i,n){t===i?(e.selectedIndex=n,i.ui.common.visible=!1,i.ui.selected.visible=!0):(i.ui.common.visible=!0,i.ui.selected.visible=!1)}),this.clickButtonFunc(this.selectedIndex,i)}},{key:"select",value:function(t){this.onClickButton(this.buttonList[t])}}])&&Ro(e.prototype,i),n&&Ro(e,n),t}();function Oo(t){return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jo(t,e){return!e||"object"!==Oo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Uo(t){return(Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function No(t,e){return(No=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),jo(this,Uo(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&No(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this)),this.selectedMapID=Pt.get(Pt.selectedEndlessScene,0),this.panelList=[{panel:this.ui.diamondPanel,init:this.initDiamondPanel.bind(this),show:this.showDiamondPanel.bind(this)},{panel:this.ui.goldPanel,init:this.initGoldPanel.bind(this),show:this.showGoldPanel.bind(this)}],this.panelList.forEach(function(t){return t.panel.visible=!1}),this.infoList=[1,2],this.radio=new Do({root:this.ui.tab,initItemFunc:this.initRadioButton.bind(this),clickButtonFunc:this.onClickRadio.bind(this),infoList:this.infoList,buttonDistance:u.shopScene.radioDistance}),pt.registerEvent("RefreshRankData",this.onRefreshRankData.bind(this)),pt.registerEvent("UpdatePoint",this.updatePoint.bind(this))}},{key:"onShow",value:function(t){this.updatePoint(),this.onRefreshRankData(),this.onClickRadio(this.radio.selectedIndex),t&&-1!==this.infoList.indexOf(t)&&this.radio.select(this.infoList.indexOf(t))}},{key:"onClickReturnButton",value:function(){App.hideScene("ShopScene"),App.showScene("MainScene")}},{key:"initRadioButton",value:function(t,e){for(var i=1;i<=2;i++)t.ui["tab".concat(i,"Image")].visible=i===e}},{key:"onClickRadio",value:function(t,e){void 0!==e&&(this.panelList[e].panel.visible=!1);var i=this.panelList[t];i.panel.visible=!0,i.hasInit||(i.init(),i.hasInit=!0),i.show()}},{key:"initGoldPanel",value:function(){this.goldList=new Mo({root:this.ui.goldList,initItemFunc:this.initGoldItem.bind(this),updateItemFunc:this.updateGoldItem.bind(this),count:u.rewardGoldList.length,isStatic:!u.shopScene.enableListMove})}},{key:"initGoldItem",value:function(t){var e=this;t.info={coin:1},this.onClick(t.ui.iconImage,function(){return e.onClickItem(t)},!0),this.onClick(t.ui.advertButton,this.onClickCoinAdvertButton.bind(this))}},{key:"updateGoldItem",value:function(t,e){clearInterval(t.timer),t.ui.onlineText.visible=!1,t.ui.buyText.visible=!1,t.ui.advertButton.visible=!1,t.ui.advertButton.index=e,t.ui.advertButton.rewardCoin=u.rewardGoldList[e].rewardCoin,t.ui.dsc.text="".concat(App.getText("Coin")," ").concat(u.rewardGoldList[e].rewardCoin);var i=1e3*(60*u.rewardGoldList[e].onlineMinutes-yt.getOnlineTime());-1!==Pt.get(Pt.receivedCoinList,[]).indexOf(e)?t.ui.buyText.visible=!0:i<=0?t.ui.advertButton.visible=!0:(t.ui.onlineText.visible=!0,t.ui.onlineText.text=App.getText("OnlineSay",{time:Q.getCDTimeStringWithoutHour(i)}),t.timer=setInterval(function(){var i=1e3*(60*u.rewardGoldList[e].onlineMinutes-yt.getOnlineTime());t.ui.onlineText.text=App.getText("OnlineSay",{time:Q.getCDTimeStringWithoutHour(i)}),i<=0&&(t.ui.onlineText.visible=!1,t.ui.advertButton.visible=!0,clearInterval(t.timer))},1e3))}},{key:"showGoldPanel",value:function(){this.goldList.refresh()}},{key:"onClickCoinAdvertButton",value:function(t){var e=this;window.PlatformHelper.showAd(function(i){if(i){App.showScene("PrizeScene",[{rewardCoin:t.rewardCoin}]);var n=Pt.get(Pt.receivedCoinList,[]);n.push(t.index),Pt.set(Pt.receivedCoinList,n),e.goldList.refresh(),window.TDGA&&TDGA.onEvent("广告金币"),pt.dispatchEvent("UpdatePoint")}})}},{key:"initDiamondPanel",value:function(){this.diamondList=new Mo({root:this.ui.diamondList,initItemFunc:this.initDiamondItem.bind(this),updateItemFunc:this.updateDiamondItem.bind(this),count:u.rewardDiamondList.length,isStatic:!u.shopScene.enableListMove})}},{key:"initDiamondItem",value:function(t){var e=this;t.info={diamond:1},this.onClick(t.ui.iconImage,function(){return e.onClickItem(t)},!0),this.onClick(t.ui.advertButton,this.onClickDiamondAdvertButton.bind(this))}},{key:"updateDiamondItem",value:function(t,e){clearInterval(t.timer),t.ui.onlineText.visible=!1,t.ui.buyText.visible=!1,t.ui.advertButton.visible=!1,t.ui.advertButton.index=e,t.ui.advertButton.rewardDiamond=u.rewardDiamondList[e].rewardDiamond,t.ui.dsc.text="".concat(App.getText("Diamond")," ").concat(u.rewardDiamondList[e].rewardDiamond);var i=1e3*(60*u.rewardDiamondList[e].onlineMinutes-yt.getOnlineTime());-1!==Pt.get(Pt.receivedDiamondList,[]).indexOf(e)?t.ui.buyText.visible=!0:i<=0?t.ui.advertButton.visible=!0:(t.ui.onlineText.visible=!0,t.ui.onlineText.text=App.getText("OnlineSay",{time:Q.getCDTimeStringWithoutHour(i)}),t.timer=setInterval(function(){var i=1e3*(60*u.rewardGoldList[e].onlineMinutes-yt.getOnlineTime());t.ui.onlineText.text=App.getText("OnlineSay",{time:Q.getCDTimeStringWithoutHour(i)}),i<=0&&(t.ui.onlineText.visible=!1,t.ui.advertButton.visible=!0,clearInterval(t.timer))},1e3))}},{key:"showDiamondPanel",value:function(){this.diamondList.refresh()}},{key:"onClickDiamondAdvertButton",value:function(t){var e=this;window.PlatformHelper.showAd(function(i){if(i){App.showScene("PrizeScene",[{rewardDiamond:t.rewardDiamond}]);var n=Pt.get(Pt.receivedDiamondList,[]);n.push(t.index),Pt.set(Pt.receivedDiamondList,n),e.diamondList.refresh(),window.TDGA&&TDGA.onEvent("广告钻石"),pt.dispatchEvent("UpdatePoint")}})}},{key:"initMapPanel",value:function(){this.mapList=new Mo({root:this.ui.mapList,initItemFunc:this.initMapItem.bind(this),updateItemFunc:this.updateMapItem.bind(this),count:u.endlessMode.sceneList.length,isStatic:!u.shopScene.enableListMove})}},{key:"showMapPanel",value:function(){this.mapList.refresh()}},{key:"initMapItem",value:function(t){this.onClick(t,this.onClickMapItem.bind(this),!0),t.root=t.children[0],t.backgroundImage=t.root.children[1].children[0],t.commonImage=t.root.children[2],t.unlockButton=t.root.children[3],this.onClick(t.unlockButton,this.onClickUnlockButton.bind(this)),t.unlockCostText=t.unlockButton.children[2],t.selectedImage=t.root.children[4],t.lockedImage=t.root.children[5],t.unlockCondition=t.root.children[6],t.unlockConditionText=t.unlockCondition.children[0],t.mapDescription=t.root.children[7],t.mapDescriptionText=t.mapDescription.children[0]}},{key:"updateMapItem",value:function(t,e){var i=u.endlessMode.sceneList[e],n=i.texture.shopCover;t.backgroundImage.texture=F[n].texture,t.mapDescriptionText.text=i.name?App.getText(i.name):App.getText("Map")+i.id;var o=Pt.isEndlessSceneLocked(i.id);Et.greySprite(t.backgroundImage,o),o?(t.commonImage.visible=!1,t.selectedImage.visible=!1,t.lockedImage.visible=!0,t.unlockButton.visible=!0,t.unlockCostText.text=i.unlockCostDiamond,t.unlockCondition.visible=!0,t.unlockConditionText.text=App.getText("TotalDistanceReach",{distance:i.unlockDistance}),t.interactive=!1,t.unlockButton.id=i.id):(t.commonImage.visible=i.id!==this.selectedMapID,t.selectedImage.visible=i.id===this.selectedMapID,t.lockedImage.visible=!1,t.unlockButton.visible=!1,t.unlockCondition.visible=!1,t.interactive=!0,t.id=i.id)}},{key:"onClickMapItem",value:function(t){this.selectedMapID=t.id,Pt.set(Pt.selectedEndlessScene,this.selectedMapID),this.mapList.refresh()}},{key:"onClickUnlockButton",value:function(t){var e=u.endlessMode.sceneList.find(function(e){return e.id===t.id}),i=Pt.get(Pt.diamond,0);if(i>=e.unlockCostDiamond){i-=e.unlockCostDiamond,Pt.set(Pt.diamond,i),this.ui.diamondText.text=i;var n=Pt.get(Pt.unlockEndlessSceneIDList,[]);n.push(e.id),Pt.set(Pt.unlockEndlessSceneIDList,n),this.mapList.refresh(),e.unlockInfo&&App.showScene("NewContentScene",e.unlockInfo)}else App.showNotice(App.getText("DiamondIsNotEnough"))}},{key:"onRefreshRankData",value:function(){this.ui.distanceText.text="".concat(Math.floor(Pt.get(Pt.rankDistance,0)),"m"),this.ui.totalScoreText.text=Pt.get(Pt.rankTotalScore,0),this.ui.diamondText.text=Pt.get(Pt.diamond,0),this.ui.coinText.text=Pt.get(Pt.coin,0)}},{key:"updatePoint",value:function(){this.radio.buttonList.forEach(function(t,e){var i;i=1===e?Pt.hasShopReceivableCoin():Pt.hasShopReceivableDiamond(),Et.showRedPoint(t,i)})}},{key:"onClickItem",value:function(t){App.showScene("InfoScene",t.info)}}])&&Fo(i.prototype,n),o&&Fo(i,o),e}();function Go(t){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zo(t,e){return!e||"object"!==Go(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ho(t){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wo(t,e){return(Wo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Vo.sceneFilePath="myLaya/laya/pages/View/ShopScene.scene.json",Vo.resPathList=u.endlessMode.sceneList.map(function(t){return t.texture.shopCover}).concat(u.moneyList.map(function(t){return t.imagePath})).concat(u.presentList.map(function(t){return t.imagePath}));var Jo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zo(this,Ho(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wo(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){pt.registerEvent("RefreshRankData",this.onRefreshRankData.bind(this)),this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this)),this.onClick(this.ui.bikeButton,this.onClickBikeButton.bind(this)),this.onClick(this.ui.drawButton,this.onClickDrawButton.bind(this)),this.onClick(this.ui.advertButton,this.onClickAdvertButton.bind(this)),this.onTick(),this.timer=setInterval(this.onTick.bind(this),1e3),this.ui.costDiamondText.text=u.diamondDrawCost}},{key:"onShow",value:function(){this.onTick(),this.ui.distanceText.text="".concat(Math.floor(Pt.get(Pt.rankDistance,0)),"m"),this.ui.totalScoreText.text=Pt.get(Pt.rankTotalScore,0),this.onRefreshRankData()}},{key:"onHide",value:function(){this.drawSound&&(Ft.stopLoopSound(this.drawSound),this.drawSound=void 0)}},{key:"onRefreshRankData",value:function(){this.ui.diamondText.text=Pt.get(Pt.diamond,0),this.ui.coinText.text=Pt.get(Pt.coin,0)}},{key:"onClickReturnButton",value:function(){App.hideScene("DrawScene"),App.showScene("MainScene")}},{key:"onClickBikeButton",value:function(){App.hideScene("DrawScene"),App.showScene("BikeScene")}},{key:"onClickDrawButton",value:function(){this.ui.costDiamondPanel.visible?Pt.get(Pt.diamond,0)>=u.diamondDrawCost?this.draw():App.showNotice(App.getText("DiamondIsNotEnough")):this.draw()}},{key:"onClickAdvertButton",value:function(){var t=this;window.PlatformHelper.showAd(function(e){e&&(t.draw(),window.TDGA&&TDGA.onEvent("广告扭蛋"))})}},{key:"onTick",value:function(){this.ui.drawButton.visible=!1,this.ui.advertButton.visible=!1,this.ui.costDiamondPanel.visible=!1;var t=new Date,e=Pt.get(Pt.nextFreeDrawTime);this.ui.freeDrawText.text="",this.ui.drawTimeText.text="",t>=e?(this.ui.freeDrawText.text=App.getText("Free"),this.ui.costDiamondPanel.visible=!1,this.ui.drawButton.visible=!0):Pt.get(Pt.drawAdvertTimes,0)<u.advertDrawBikeTime?(this.ui.advertButton.visible=!0,this.ui.drawTimeText.text=Q.getCDTimeString(e-t)):(this.ui.drawTimeText.text=Q.getCDTimeString(e-t),this.ui.drawButton.visible=!0,this.ui.costDiamondPanel.visible=!0)}},{key:"draw",value:function(){window.TDGA&&TDGA.onEvent("扭蛋"),this.playDrawAnimation1()}},{key:"playDrawAnimation1",value:function(){this.drawAnimation=this.playAnimation("special_draw",this.onAnimation1Ended.bind(this),{onClickMask:this.onClickMask.bind(this)})}},{key:"onAnimation1Ended",value:function(){this.playDrawAnimation2(),this.openPrizeScene()}},{key:"openPrizeScene",value:function(){if(this.ui.costDiamondPanel.visible){var t=Pt.get(Pt.diamond,0);t-=u.diamondDrawCost,Pt.set(Pt.diamond,t),this.ui.diamondText.text=t}else if(!0===this.ui.advertButton.visible)Pt.set(Pt.drawAdvertTimes,Pt.get(Pt.drawAdvertTimes,0)+1);else{var e=(new Date).getTime()+1e3*u.freeDrawInterval;Pt.set(Pt.nextFreeDrawTime,e),pt.dispatchEvent("UpdatePoint")}var i=Q.randomWithWeight(u.drawWeightList.map(function(t){return t.weight})),n=Pt.hasDrawed()?u.drawWeightList[i]:{type:"bike",id:u.firstDrawBikeID};switch(n.type){case"bike":var o=n.id,a=Pt.plusBike(o),s=a.levelUp,r=a.highestLevel;App.showScene("BikeDetailScene",o,s,r);break;case"coin":App.showScene("PrizeScene",[{rewardCoin:n.number}]);break;case"diamond":App.showScene("PrizeScene",[{rewardDiamond:n.number}])}Pt.markDrawed(),this.onTick()}},{key:"playDrawAnimation2",value:function(){this.drawAnimation=this.playAnimation("recover_special_draw")}},{key:"onClickMask",value:function(){App.hideMask(),this.drawAnimation.stop(),this.recoverDrawAnimation(),this.openPrizeScene()}},{key:"recoverDrawAnimation",value:function(){this.playAnimation("recover_special_draw")}}])&&Xo(i.prototype,n),o&&Xo(i,o),e}();function Yo(t){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,o=!1,a=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==r.return||r.return()}finally{if(o)throw a}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Zo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ko(t,e){return!e||"object"!==Yo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $o(t){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qo(t,e){return(Qo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Jo.sceneFilePath="myLaya/laya/pages/View/DrawScene.scene.json",Jo.resPathList=_o.resPathList.concat(Q.values(u.drawScene.res));var ta=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ko(this,$o(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qo(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=this;this.selectedIndex=0,this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this)),this.onClick(this.ui.selectBikeButton,this.onClickSelectedBikeButton.bind(this)),this.onClick(this.ui.upgradeButton,this.onClickUpgradeButton.bind(this)),this.onClick(this.ui.bikePanelButton,this.onClickBikePanelButton.bind(this)),this.list=new Mo({root:this.ui.list,initItemFunc:this.initItem.bind(this),updateItemFunc:this.updateItem.bind(this),count:u.bikeList.length,isHorizontal:u.bikeScene.bikeList.isHorizontal,onScroll:this.onScroll.bind(this)}),this.upgradeList=new Mo({root:this.ui.upgradeList,updateItemFunc:this.updateUpgradeItem.bind(this),count:u.upgradeBike.items.length,isStatic:!0}),[this.ui.drawButton,this.ui.upgradePanelButton].forEach(function(e){return new xo({button:e,system:e.var,handler:t["onClick".concat(Q.formatName(e.var))].bind(t)})}),pt.registerEvent("UpdatePoint",this.updatePoint.bind(this));for(var e=0;e<3;e++){var i=this.ui["specialIcon".concat(e)];this.onClick(i,this.onClickAbilityItem.bind(this),!0)}}},{key:"onShow",value:function(){this.updatePoint(),this.onClickItem({index:0}),this.ui.upgradePanel.visible=!1,this.onScroll()}},{key:"onHide",value:function(){this.upgradeSound&&(Ft.stopLoopSound(this.upgradeSound),this.upgradeSound=void 0)}},{key:"initItem",value:function(t){t.bikeSprite=new _o(t.ui.bikePanel),t.bikeSprite.setPosition(t.ui.bikePanel.mywidth/2,t.ui.bikePanel.myheight/2+20),this.onClick(t,this.onClickItem.bind(this),!0)}},{key:"updateItem",value:function(t,e){t.index=e;var i=u.bikeList[e],n=!Pt.hasOwnedBike(i.id);t.bikeSprite.setBikeID(i.id),t.bikeSprite.setGray(n),this.selectedIndex===e?t.bikeSprite.play():t.bikeSprite.stop(),t.ui.lostMaskImage.visible=n,t.ui.lockedImage.visible=n,t.ui.fightMaskImage.visible=Pt.get(Pt.selectedBike,0)===i.id;var o=Pt.get(Pt.bikeLevelMap,{})[i.id];t.ui.levelIcon.visible=void 0!==o,t.ui.levelText.text=void 0!==o?"".concat(o+1):"";var a=Pt.getBikeUpgradeTimes(i.id);t.ui.upgradeLevelIcon.visible=0!==a,t.ui.upgradeLevelText.text=0!==a?"".concat(a):"",Et.showRedPoint(t,Pt.isBikeUpgradable(i.id)),void 0===i.quality&&(i.quality=Math.floor(4*Math.random()));for(var s=0;s<4;s++)t.ui["common".concat(s)].visible=i.quality===s&&this.selectedIndex!==e,t.ui["selected".concat(s)].visible=i.quality===s&&this.selectedIndex===e}},{key:"updateUpgradeItem",value:function(t,e){if(u.upgradeBike.items.forEach(function(i,n){t.ui["itemPanel".concat(n)].visible=e===n}),t.ui.selectedIcon.visible=!1,void 0!==this.selectedIndex){var i=qo(Pt.getBikeUpgradeItem(u.bikeList[this.selectedIndex].id,e),2),n=i[0],o=i[1];t.ui.upgradeProgressLabel.text=App.getText("UpgradeItemDsc",{cur:n,max:o});for(var a=21;a<=32;a++){var s=(a-20)/12*u.upgradeBike.maxValue;t.ui[a].visible=n>=s}}}},{key:"onClickReturnButton",value:function(){App.hideScene("BikeScene"),App.showScene("MainScene")}},{key:"onClickDrawButton",value:function(){App.hideScene("BikeScene"),App.showScene("DrawScene")}},{key:"onClickItem",value:function(t){this.selectedIndex=t.index,this.list.refresh();var e=u.bikeList[t.index],i=Pt.hasOwnedBike(e.id);this.ui.selectBikeButton.visible=i&&Pt.get(Pt.selectedBike,0)!==e.id,this.ui.unlockBikeImage.visible=!i,this.refreshUpgradePanelButtonLockStatus(i),this.updatePropPanel(),this.updateUpgradePanel()}},{key:"updatePropPanel",value:function(){var t=this,e=u.bikeList[this.selectedIndex],i=e.id;this.ui.bikeNameText.text=App.getText(e.name),this.ui.bikeDscText.text=App.getText(e.dsc);var n=Pt.getBikeVelocityLevel(i);this.ui.velocityLevelIcon.children[0].texture=U.from(u.levelIconTable[n]);var o=Pt.getBikeJumpLevel(i);this.ui.jumpLevelIcon.children[0].texture=U.from(u.levelIconTable[o]);for(var a=u.abilityList.filter(function(t){return Pt.isBikeHasAbility(i,t.id)}),s=0;s<3;s++){var r=a[s],l=this.ui["specialIcon".concat(s)];void 0!==r?(l.visible=!0,l.children[0].texture=U.from(r.icon),l.info={ability:r}):l.visible=!1}var h=Pt.get(Pt.bikeLevelMap,{})[i]||0;this.ui.levelText.text=h+1,["distance","exp","coin","score"].forEach(function(e){return t.setPercentText(e,i,h)})}},{key:"onClickAbilityItem",value:function(t){App.showScene("InfoScene",t.info)}},{key:"setPercentText",value:function(t,e,i){this.ui["".concat(t,"PercentText")].text="".concat(Math.floor(100*Et.getBikeConfig("".concat(t,"Percent"),e,i)),"%")}},{key:"updateUpgradePanel",value:function(){this.refreshUpgradeInfo(),this.upgradeList.refresh()}},{key:"refreshUpgradePanelButtonLockStatus",value:function(t){for(var e=Et.isSystemLocked("upgradePanelButton")||!t,i=0;i<this.ui.upgradePanelButton.children.length;i++){var n=this.ui.upgradePanelButton.children[i];"lockedImage"!==n.uiname&&Et.greySprite(n,e)}Et.findChildByName(this.ui.upgradePanelButton,"lockedImage").visible=e}},{key:"onClickSelectedBikeButton",value:function(){Pt.set(Pt.selectedBike,u.bikeList[this.selectedIndex].id),this.list.refresh(),this.onClickItem({index:this.selectedIndex})}},{key:"onClickUpgradePanelButton",value:function(){this.ui.upgradePanel.visible=!0}},{key:"onClickBikePanelButton",value:function(){this.ui.upgradePanel.visible=!1}},{key:"onClickUpgradeButton",value:function(){return Pt.hasOwnedBike(u.bikeList[this.selectedIndex].id)?Pt.get(Pt.coin,0)<Pt.getBikeUpgradeCost(u.bikeList[this.selectedIndex].id)?App.showNotice(App.getText("Gold Coin is not enough!")):void this.upgradeBike():App.showNotice("该自行车未解锁")}},{key:"refreshUpgradeInfo",value:function(){var t=Pt.getBikeUpgradeTimes(u.bikeList[this.selectedIndex].id),e=Q.getLast(u.upgradeBike.playerLevelLimitTimes),i=Pt.getPlayerLevel().level,n=u.upgradeBike.playerLevelLimitTimes[i-1];if(t>=e)this.ui.lvLimitPanel.visible=!0,this.ui.lvLimitLabel.text=App.getText("Highest Level"),this.ui.upgradeButton.visible=!1,this.ui.upgradeCostPanel.visible=!1;else if(t>=(void 0===n?e:n)){var o;if(this.ui.lvLimitPanel.visible=!0,void 0===n)o=u.upgradeBike.playerLevelLimitTimes.length+1;else for(var a=i;a<u.upgradeBike.playerLevelLimitTimes.length;a++)if(u.upgradeBike.playerLevelLimitTimes[a]>t){o=a+1;break}this.ui.lvLimitLabel.text=App.getText("玩家${level}级才能继续升级",{level:o}),this.ui.upgradeButton.visible=!1,this.ui.upgradeCostPanel.visible=!1}else this.ui.upgradeButton.visible=!0,this.ui.upgradeCostPanel.visible=!0,this.ui.lvLimitPanel.visible=!1;this.ui.upgradeCostLabel.text=Pt.getBikeUpgradeCost(u.bikeList[this.selectedIndex].id),this.ui.upgradeTimesLabel.text=App.getText("已升级${times}次",{times:t}),Et.greySprite(this.ui.upgradePanel,!Pt.hasOwnedBike(u.bikeList[this.selectedIndex].id))}},{key:"upgradeBike",value:function(){App.showMask(this.onUpgradeEnded.bind(this)),Pt.add(Pt.coin,-Pt.getBikeUpgradeCost(u.bikeList[this.selectedIndex].id)),this.upgradeItemIndex=Pt.upgradeBikeItem(u.bikeList[this.selectedIndex].id),this.initFrame(),this.frame=-1,this.upgradeSound=Ft.playLoopSound(u.bikeScene.res.upgradeSound),this.onFrame(),pt.dispatchEvent("UpdatePoint")}},{key:"onUpgradeEnded",value:function(){var t=this;this.upgradeSound&&(Ft.stopLoopSound(this.upgradeSound),this.upgradeSound=void 0),this.refreshUpgradeInfo(),this.upgradeList.updateItems(function(e,i){i===t.upgradeItemIndex?(t.updateUpgradeItem(e,i),e.ui.selectedIcon.visible=!0):e.ui.selectedIcon.visible=!1}),cancelAnimationFrame(this.animationID),App.hideMask()}},{key:"initFrame",value:function(){this.indexInFrame=[];for(var t=u.upgradeBike.animation,e=u.upgradeBike.items.length,i=t.startTurns*e,n=(t.startSpeed-t.uniformSpeed)/i,o=0;o<e;o++){var a=Math.ceil(t.startSpeed-n*o);this.createIndexFrames(o,a)}for(var s=0;s<t.uniformTurns;s++)for(var r=0;r<e;r++)this.createIndexFrames(r,t.uniformSpeed);for(var l=t.endTurns*e+this.upgradeItemIndex,h=(t.startSpeed-t.uniformSpeed)/l,c=0;c<l;c++){var m=Math.ceil(t.uniformSpeed+h*c),p=c%e;this.createIndexFrames(p,m)}for(var d=0;d<t.twinkleTurn;d++)this.createIndexFrames(this.upgradeItemIndex,t.uniformSpeed),this.createIndexFrames(-1,t.uniformSpeed);this.indexInFrame.push(this.upgradeItemIndex)}},{key:"createIndexFrames",value:function(t,e){for(var i=[],n=0;n<e;n++)i.push(t);this.indexInFrame=this.indexInFrame.concat(i)}},{key:"onFrame",value:function(){var t=this;this.frame++,this.frame>=this.indexInFrame.length?this.onUpgradeEnded():(this.selectedItemIndex=this.indexInFrame[this.frame],this.upgradeList.updateItems(function(e,i){e.ui.selectedIcon.visible=i===t.selectedItemIndex}),this.animationID=requestAnimationFrame(this.onFrame.bind(this)),-1===this.selectedItemIndex&&this.refreshUpgradeInfo())}},{key:"updatePoint",value:function(){Et.showRedPoint(this.ui.drawButton,!Et.isSystemLocked("drawButton")&&Pt.isDrawAble());var t=Et.isSystemLocked("upgradePanelButton");Et.showRedPoint(this.ui.upgradePanelButton,!t&&Pt.isBikeUpgradable(u.bikeList[this.selectedIndex].id)),this.list.refresh()}},{key:"onScroll",value:function(){this.ui.leftArrow&&(this.ui.leftArrow.visible=this.list.isAbleScrollLeft()),this.ui.rightArrow&&(this.ui.rightArrow.visible=this.list.isAbleScrollRight())}}])&&Zo(i.prototype,n),o&&Zo(i,o),e}();function ea(t){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ia(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function na(t,e){return!e||"object"!==ea(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oa(t){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aa(t,e){return(aa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ta.sceneFilePath="myLaya/laya/pages/View/BikeScene.scene.json",ta.resPathList=_o.resPathList.concat(Q.values(u.bikeScene.res)).concat(u.abilityList.map(function(t){return t.icon}));var sa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),na(this,oa(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aa(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.onClick(this.ui.closeButton,this.onClickCloseButton.bind(this)),this.onClick(this.ui.confirmButton,this.onClickConfirmButton.bind(this)),this.onClick(this.ui.cancelButton,this.onClickCancelButton.bind(this))}},{key:"onShow",value:function(t){this.parent.setChildIndex(this,this.parent.children.length-1),this.ui.tipText.text=t.tip,this.ui.panel.height=this.ui.tipText.height+(t.hideConfirmButton?100:170),this.ui.confirmButton.y=this.ui.tipText.y+this.ui.tipText.height+25,this.ui.cancelButton=this.ui.confirmButton.y,this.ui.confirmButton.visible=!t.hideConfirmButton,this.args=t}},{key:"onClickCloseButton",value:function(){App.hideScene("TipScene")}},{key:"onClickConfirmButton",value:function(){App.hideScene("TipScene"),this.args.confirmCallback&&this.args.confirmCallback()}},{key:"onClickCancelButton",value:function(){App.hideScene("TipScene"),this.args.cancelCallback&&this.args.cancelCallback()}}])&&ia(i.prototype,n),o&&ia(i,o),e}();function ra(t){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function la(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ha(t,e){return!e||"object"!==ra(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ca(t){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ua(t,e){return(ua=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}sa.sceneFilePath="myLaya/laya/pages/View/TipScene.scene.json";var ma=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ha(this,ca(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ua(t,e)}(e,di),i=e,o=[{key:"onClickMainButton",value:function(){App.hideScene("GameResultScene"),App.getScene("MapGameScene").pauseGame(),App.getScene("MapGameScene").settle(),App.destroyScene("MapGameScene"),App.showScene("MainScene"),App.getScene("MainScene").onGameEnded()}}],(n=[{key:"onCreate",value:function(){var t=this,i=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(i,0),this.onClick(this.ui.mainButton,e.onClickMainButton),this.onClick(this.ui.advertDoubleButton,this.onClickAdvertDoubleButton.bind(this)),this.typeList=["score","distance"].map(function(e){return{type:e,doubleIcon:t.ui["".concat(e,"DoubleIcon")],percentText:t.ui["".concat(e,"PercentText")],valueText:t.ui["".concat(e,"ValueText")]}}),this.typeList.forEach(function(e){return t.initAnimationObject(e.doubleIcon)}),this.initAnimationObject(this.ui.hasDoubleRewardText),this.animations=[]}},{key:"initAnimationObject",value:function(t){(t=t.children[0]).originScale=t.scale.x,t.anchor.set(.5,.5),t.position.set(t.x+t.width/2,t.y+t.height/2)}},{key:"recoverAnimationObject",value:function(t){(t=t.children[0]).alpha=1,t.scale.set(t.originScale,t.originScale)}},{key:"onShow",value:function(t){var e=this;this.parent.setChildIndex(this,this.parent.children.length-1),Ft.pauseBGM(),Ft.playSound(u.soundPath.throughFlag),this.args=t,App.getScene("MapGameScene").stopSounds(),void 0===this.rankList?this.rankList=new Mo({root:this.ui.rankList,updateItemFunc:this.updateRankItem.bind(this),count:u.enemy.count+1,isStatic:!0}):this.rankList.refresh(),this.typeList.forEach(function(t){t.doubleIcon.visible=!1;var e=Et.getBikeConfig("".concat(t.type,"Percent"));e>1?(t.percentText.visible=!0,t.percentText.text="+".concat(Math.floor(100*e),"%")):t.percentText.visible=!1,t.valueText.text=0}),this.ui.advertDoubleButton.visible=!0,this.ui.hasDoubleRewardText.visible=!1,App.showMask(this.onClickMask.bind(this)),this.playNumberAnimation(function(){e.onClickMask()})}},{key:"playNumberAnimation",value:function(t){var e=this,i={percent:0},n=new Ke.a.Tween(i).to({percent:1},u.resolveAnimation.numberAnimation.duration).onUpdate(function(){e.typeList.forEach(function(t){var n="score"===t.type?u.rankScore[e.args.rank]:e.args.gameScene[t.type],o=Et.getBikeConfig("".concat(t.type,"Percent"));t.valueText.text=Math.floor(n*o*i.percent)})}).onComplete(function(){Q.removeItemFromArray(e.animations,n),t&&t()}).start(performance.now());this.animations.push(n)}},{key:"updateRankItem",value:function(t,e){for(var i=0;i<u.enemy.count+1;i++){t.ui["bg".concat(i)].visible=e===i}t.ui.nameText.text=this.args.playerNameList[e],t.ui.scoreText.text=u.rankScore[e]||0}},{key:"onClickAdvertDoubleButton",value:function(){var t=this;window.PlatformHelper.showAd(function(e){e&&(t.args.gameScene.doubleReward=!0,window.TDGA&&TDGA.onEvent("广告竞技模式双倍"),App.showMask(t.onClickMask.bind(t)),t.playDoubleAnimation(function(){return t.onClickMask()}))})}},{key:"playDoubleAnimation",value:function(t){var e=this;this.ui.advertDoubleButton.visible=!1,this.typeList.forEach(function(t){return t.doubleIcon.visible=!1});var i=0;!function n(){if(i<e.typeList.length){var o=e.typeList[i].doubleIcon;o.visible=!0,e.playStarAnimation(o,u.resolveAnimation.doubleIconAnimation,function(){e.playAdvertNumberAnimation(i,function(){i++,n()})})}else i===e.typeList.length?(e.ui.hasDoubleRewardText.visible=!0,e.playStarAnimation(e.ui.hasDoubleRewardText,u.resolveAnimation.getIconAnimation,function(){i++,n()})):t&&t()}()}},{key:"playStarAnimation",value:function(t,e,i){var n=this,o=(t=t.children[0]).originScale,a=o*e.startScale,s=e.startAlpha;t.scale.set(a,a),t.alpha=s;var r={scale:a,alpha:s},l=new Ke.a.Tween(r).to({scale:o,alpha:1},e.duration).easing(Ke.a.Easing.Bounce.Out).onUpdate(function(){t.scale.set(r.scale,r.scale),t.alpha=r.alpha}).onComplete(function(){Q.removeItemFromArray(n.animations,l),i&&i()}).start(performance.now());this.animations.push(l)}},{key:"playAdvertNumberAnimation",value:function(t,e){var i=this,n={percent:1},o=new Ke.a.Tween(n).to({percent:2},u.resolveAnimation.numberAnimation.duration).onUpdate(function(){var e=i.typeList[t],o="score"===e.type?u.rankScore[i.args.rank]:i.args.gameScene[e.type],a=Et.getBikeConfig("".concat(e.type,"Percent"));e.valueText.text=Math.floor(o*a*n.percent)}).onComplete(function(){Q.removeItemFromArray(i.animations,o),e&&e()}).start(performance.now());this.animations.push(o)}},{key:"onClickMask",value:function(){var t=this;App.hideMask(),this.animations.forEach(function(t){return t.stop()}),this.animations=[],this.typeList.forEach(function(e){var i="score"===e.type?u.rankScore[t.args.rank]:t.args.gameScene[e.type],n=Et.getBikeConfig("".concat(e.type,"Percent")),o=Math.floor(i*n);t.args.gameScene.doubleReward&&(o*=2),e.valueText.text=o,e.doubleIcon.visible=t.args.gameScene.doubleReward,t.recoverAnimationObject(e.doubleIcon)}),this.args.gameScene.doubleReward?(this.ui.advertDoubleButton.visible=!1,this.ui.hasDoubleRewardText.visible=!0):(this.ui.advertDoubleButton.visible=!0,this.ui.hasDoubleRewardText.visible=!1),this.recoverAnimationObject(this.ui.hasDoubleRewardText)}}])&&la(i.prototype,n),o&&la(i,o),e}();function pa(t){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function da(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fa(t,e){return!e||"object"!==pa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ya(t){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ga(t,e){return(ga=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ma.sceneFilePath="myLaya/laya/pages/View/GameResultScene.scene.json";var va=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),fa(this,ya(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ga(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this)),this.onClick(this.ui.bgmButton,this.onClickBGMButton.bind(this)),this.onClick(this.ui.soundButton,this.onClickSoundButton.bind(this)),this.onClick(this.ui.beginnerGuide,this.onClickBeginnerGuideBtn.bind(this))}},{key:"onShow",value:function(){this.ui.bgmOnImage.visible=Pt.get(Pt.bgmOn,!0),this.ui.bgmOffImage.visible=!Pt.get(Pt.bgmOn,!0),this.ui.soundOnImage.visible=Pt.get(Pt.soundOn,!0),this.ui.soundOffImage.visible=!Pt.get(Pt.soundOn,!0)}},{key:"onClickReturnButton",value:function(){App.hideScene("SystemScene"),App.showScene("MainScene")}},{key:"onClickBGMButton",value:function(){Pt.set(Pt.bgmOn,!Pt.get(Pt.bgmOn,!0)),this.ui.bgmOnImage.visible=Pt.get(Pt.bgmOn,!0),this.ui.bgmOffImage.visible=!Pt.get(Pt.bgmOn,!0),Ft.muteBGM(!Pt.get(Pt.bgmOn,!0))}},{key:"onClickSoundButton",value:function(){Pt.set(Pt.soundOn,!Pt.get(Pt.soundOn,!0)),this.ui.soundOnImage.visible=Pt.get(Pt.soundOn,!0),this.ui.soundOffImage.visible=!Pt.get(Pt.soundOn,!0),Ft.muteSound(!Pt.get(Pt.soundOn,!0))}},{key:"onClickBeginnerGuideBtn",value:function(){App.showScene("GuideGameScene")}}])&&da(i.prototype,n),o&&da(i,o),e}();function _a(t){return(_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ba(t){return ka(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||Sa()}function xa(t,e){return ka(t)||function(t,e){var i=[],n=!0,o=!1,a=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==r.return||r.return()}finally{if(o)throw a}}return i}(t,e)||Sa()}function Sa(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function ka(t){if(Array.isArray(t))return t}function wa(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Aa(t,e){return!e||"object"!==_a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pa(t){return(Pa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ta(t,e){return(Ta=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}va.sceneFilePath="myLaya/laya/pages/View/SystemScene.scene.json";function Ca(){return{x:Math.random()*u.home.homeWidth,y:u.home.floorStartY+Math.random()*(u.home.homeHeight-u.home.floorStartY)}}function Ia(t,e){return void 0===t?e:t}var Ba=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Aa(this,Pa(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ta(t,e)}(e,di),i=e,o=[{key:"onClickReturnButton",value:function(){App.hideScene("HomeScene"),App.showScene("MainScene")}},{key:"onClickReturnRankButton",value:function(){App.hideScene("HomeScene"),App.showScene("RankScene")}},{key:"initRadioButton",value:function(t,e){for(var i=1;i<=4;i++)t.ui["tab".concat(i,"Image")].visible=e===i}},{key:"onClickHomeHelpButton",value:function(){App.showScene("HelpHomeScene")}}],(n=[{key:"onCreate",value:function(){var t=this;this.onClick(this.ui.returnBtn,e.onClickReturnButton),this.onClick(this.ui.hideUIBtn,this.onClickHideUIButton.bind(this)),this.onClick(this.ui.showUIBtn,this.onClickShowUIButton.bind(this)),this.onClick(this.ui.startRemoveItemModeBtn,this.onClickStartRemoveItemModeButton.bind(this)),this.onClick(this.ui.endRemoveItemModeBtn,this.onClickEndRemoveItemModeButton.bind(this)),this.onClick(this.ui.removeAllItemBtn,this.onClickRemoveAllItemButton.bind(this)),this.onClick(this.ui.lastBtn,function(){return t.onClickToggleButton(-1)}),this.onClick(this.ui.nextBtn,function(){return t.onClickToggleButton(1)}),this.onClick(this.ui.commonItemBtn,this.onClickCommonItemBtn.bind(this)),this.onClick(this.ui.lockedItemBtn,this.onClickLockedItemBtn.bind(this)),this.onClick(this.ui.returnRankBtn,e.onClickReturnRankButton),this.onClick(this.ui.homeHelpButton,e.onClickHomeHelpButton),pt.registerEvent("RefreshRankData",this.onRefreshRankData.bind(this)),pt.registerEvent("GameStop",this.onGameStop.bind(this)),pt.registerEvent("UpdatePoint",this.updatePoint.bind(this)),this.ui.showUIBtn.visible=!1,this.ui.endRemoveItemModeBtn.visible=!1,this.ui.removeAllItemBtn.visible=!1,this.radio=new Do({root:this.ui.radio,initItemFunc:e.initRadioButton,clickButtonFunc:this.onClickRadio.bind(this),infoList:[1,2,3,4]}),this.itemList=new Mo({root:this.ui.itemList,initItemFunc:this.initListItem.bind(this),updateItemFunc:this.updateListItem.bind(this),count:0,isHorizontal:!0,isStatic:!0}),this.homeContainer=this.ui.homeContainer,this.homeContainerPos=App.getGlobalPosition(this.homeContainer),this.homeContainerMask=(new N).beginFill().drawRect(this.homeContainer.getGlobalPosition().x,this.homeContainer.getGlobalPosition().y,this.homeContainer.mywidth,this.homeContainer.myheight).endFill(),this.homeContainer.mask=this.homeContainerMask,this.homeInnerContainer=this.homeContainer.addChild(new j),this.bgSprite=this.homeInnerContainer.addChild(new V),this.floorSprite=this.homeInnerContainer.addChild(new V),this.floorSprite.position.set(0,u.home.floorStartY),this.itemContainer=this.homeInnerContainer.addChild(new j),this.homeMinX=this.homeContainer.mywidth-u.home.homeWidth,this.homeMaxX=0,this.homeMinY=this.homeContainer.myheight-u.home.homeHeight,this.homeMaxY=0,this.moveX=0,this.moveY=0,this.homeContainer.buttonMode=!0,this.homeContainer.interactive=!0,this.homeContainer.hitArea=new Y(0,0,this.homeContainer.mywidth,this.homeContainer.myheight),this.homeContainer.on("pointerdown",this.onTouchHomeStart.bind(this)),this.on("pointermove",this.onTouchMove.bind(this)),this.on("pointerup",this.onTouchEnd.bind(this)),this.on("pointerupoutside",this.onTouchEnd.bind(this)),App.ticker.add(this.gameLoop.bind(this))}},{key:"onRefreshRankData",value:function(){this.ui.distanceText.text="".concat(Math.floor(Pt.get(Pt.rankDistance,0)),"m"),this.ui.totalScoreText.text=Pt.get(Pt.rankTotalScore,0),this.ui.diamondText.text=Pt.get(Pt.diamond,0),this.ui.coinText.text=Pt.get(Pt.coin,0)}},{key:"onShow",value:function(t){var e=this,i=t.bgID,n=t.floorID,o=t.spoilsList,a=t.petsList,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Pt.get(Pt.hasShowHomeHelpScene,!1)||(App.showScene("HelpHomeScene"),Pt.set(Pt.hasShowHomeHelpScene,!0)),this.selectedBgID=i,this.bgIndex=u.home.backgrounds.findIndex(function(t){return t.id===i});var r=u.home.backgrounds[this.bgIndex];this.bgSprite.texture=U.from(r.path);var l=r.itemScale||u.home.defaultSceneItemScale;this.bgSprite.scale.set(l,l),this.selectedFloorID=n,this.floorIndex=u.home.floors.findIndex(function(t){return t.id===n});var h=u.home.floors[this.floorIndex];this.floorSprite.texture=U.from(h.path);var c=h.itemScale||u.home.defaultSceneItemScale;this.floorSprite.scale.set(c,c),this.itemContainer.removeChildren(),o.forEach(function(t){var i=xa(t,4),n=i[0],o=i[1],a=i[2],s=i[3];return e.createSpoils(n,o,a,s)}),a.forEach(function(t){return e.createPet(t)}),this.sortItems(),s?(this.refreshPlayerBasicInfo(),this.radio.select(0),this.onClickShowUIButton()):this.onClickHideUIButton(),this.ui.uiContainer.visible=s,this.ui.showUIBtn.visible=!1,this.ui.returnRankBtn.visible=!s,this.updatePoint()}},{key:"refreshPlayerBasicInfo",value:function(){this.ui.distanceText.text="".concat(Math.floor(Pt.get(Pt.rankDistance,0)),"m"),this.ui.diamondText.text=Pt.get(Pt.diamond,0),this.ui.coinText.text=Pt.get(Pt.coin,0),this.ui.totalScoreText.text=Pt.get(Pt.rankTotalScore,0),this.ui.addtionText.text=[{text:"Coin",config:"coinPercent"},{text:"Distance",config:"distancePercent"},{text:"Score",config:"scorePercent"},{text:"Exp",config:"expPercent"}].filter(function(t){return 0!==Et.getHomeConfig(t.config)}).map(function(t){return"".concat(App.getText(t.text),": ").concat(Math.floor(100*Et.getHomeConfig(t.config)),"%")}).join("\n")}},{key:"createSpoils",value:function(t,e,i,n){var o=u.home.spoils.find(function(t){return t.id===e}),a=V.from(o.path);a.itemID=t,a.anchor.set(.5,1);var s=o.itemScale||u.home.defaultSceneItemScale;a.scale.set(s,s),this.itemContainer.addChild(a),a.position.set(i,n);var r=a.addChild(V.from(u.home.removeItemButtonImagePath));r.anchor.set(.5,.5),r.visible=this.ui.endRemoveItemModeBtn.visible,this.onClick(r,this.onClickRemoveItemBtn.bind(this)),a.removeItemBtn=r}},{key:"createPet",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ca(),i=this.itemContainer.addChild(new j),n=u.home.pets.find(function(e){return e.id===t}),o=i.addChild(V.from(n.path));i.position.set(e.x,e.y),o.anchor.set(.5,1);var a=n.itemScale||u.home.defaultSceneItemScale;o.scale.set(a,a);var s=i.addChild(V.from(u.home.removeItemButtonImagePath));s.visible=this.ui.endRemoveItemModeBtn.visible,s.anchor.set(.5,.5),this.onClick(s,this.onClickRemoveItemBtn.bind(this)),i.removeItemBtn=s,i.itemConfig=n;var r=Ca(),l=0,h=Ia(n.petsJumpInterval,u.home.defaultPetsJumpInterval)*u.fps;i.onEachFrame=function(){var t=Et.moveToTargetPos(i.position,r,Ia(n.petsVelocity,u.home.defaultPetsVelocity)),e=t.x,a=t.y,s=t.final;i.position.set(e,a),l++,o.rotation=Q.angle2radius((Math.floor(l/h)%2==0?1:-1)*Ia(n.petsJumpRotation,u.home.defaultPetsJumpRotation)),s&&(r=Ca())}}},{key:"onClickHideUIButton",value:function(){this.ui.uiContainer.visible=!1,this.ui.showUIBtn.visible=!0,this.homeContainer.position.set(0,0),this.homeContainer.mask=void 0,this.homeMinX=App.sceneWidth-u.home.homeWidth,this.homeMinY=App.sceneHeight-u.home.homeHeight,this.homeInnerContainer.position.set(0,0)}},{key:"onClickShowUIButton",value:function(){this.ui.uiContainer.visible=!0,this.ui.showUIBtn.visible=!1,this.homeContainer.position.set(this.homeContainerPos.x,this.homeContainerPos.y),this.homeContainer.mask=this.homeContainerMask,this.homeMinX=this.homeContainer.mywidth-u.home.homeWidth,this.homeMinY=this.homeContainer.myheight-u.home.homeHeight}},{key:"onClickToggleButton",value:function(t){switch(this.radio.selectedIndex){case 0:var e=this.bgIndex+t;e<0?e=u.home.backgrounds.length-1:e>=u.home.backgrounds.length&&(e=0);var i=u.home.backgrounds[e];this.bgIndex=e,this.bgSprite.texture=U.from(i.path);var n=i.itemScale||u.home.defaultSceneItemScale;this.bgSprite.scale.set(n,n),this.ui.selectItemName.text=App.getText("Backgrounds")+i.id;var o=Pt.isHomeItemLocked(this.getSelectedType(),i.id);this.ui.commonItemBtn.visible=!o&&i.id!==this.selectedBgID,this.ui.selectedItemBtn.visible=!o&&i.id===this.selectedBgID,this.ui.lockedItemBtn.visible=o,Et.showRedPoint(this.ui.lockedItemBtn,o&&Pt.isHomeItemUnlockable("backgrounds",i.id));break;case 1:var a=this.floorIndex+t;a<0?a=u.home.floors.length-1:a>=u.home.floors.length&&(a=0);var s=u.home.floors[a];this.floorIndex=a,this.floorSprite.texture=U.from(s.path);var r=s.itemScale||u.home.defaultSceneItemScale;this.floorSprite.scale.set(r,r),this.ui.selectItemName.text=App.getText("Floors")+s.id;var l=Pt.isHomeItemLocked(this.getSelectedType(),s.id);this.ui.commonItemBtn.visible=!l&&s.id!==this.selectedFloorID,this.ui.selectedItemBtn.visible=!l&&s.id===this.selectedFloorID,this.ui.lockedItemBtn.visible=l,Et.showRedPoint(this.ui.lockedItemBtn,l&&Pt.isHomeItemUnlockable("floors",s.id));break;case 2:case 3:var h=this.itemList.getViewLineCount(),c=this.itemList.getItemCount(),m=this.itemList.getIndex()+h*t;if(m<0)m=(Math.ceil(c/h)-1)*h;else m>=c&&(m=0);this.itemList.setIndex(m)}}},{key:"onClickCommonItemBtn",value:function(){switch(this.radio.selectedIndex){case 0:this.selectedBgID=u.home.backgrounds[this.bgIndex].id;var t=Pt.get(Pt.homeData);t.bgID=this.selectedBgID,Pt.set(Pt.homeData,t),this.ui.commonItemBtn.visible=!1,this.ui.selectedItemBtn.visible=!0;break;case 1:this.selectedFloorID=u.home.floors[this.floorIndex].id;var e=Pt.get(Pt.homeData);e.floorID=this.selectedFloorID,Pt.set(Pt.homeData,e),this.ui.commonItemBtn.visible=!1,this.ui.selectedItemBtn.visible=!0}}},{key:"onClickLockedItemBtn",value:function(){var t;t="backgrounds"===this.getSelectedType()?u.home.backgrounds[this.bgIndex].id:u.home.floors[this.floorIndex].id,this.showLockedInfo(this.getSelectedType(),t)}},{key:"onClickRadio",value:function(t,e){var i=this;switch(e){case 0:this.ui.selectItemPanel.visible=!1,this.bgIndex=u.home.backgrounds.findIndex(function(t){return t.id===i.selectedBgID});var n=u.home.backgrounds[this.bgIndex];this.bgSprite.texture=U.from(n.path);var o=n.itemScale||u.home.defaultSceneItemScale;this.bgSprite.scale.set(o,o);break;case 1:this.ui.selectItemPanel.visible=!1,this.floorIndex=u.home.floors.findIndex(function(t){return t.id===i.selectedFloorID});var a=u.home.floors[this.floorIndex];this.floorSprite.texture=U.from(a.path);var s=a.itemScale||u.home.defaultSceneItemScale;this.floorSprite.scale.set(s,s);break;case 2:case 3:this.ui.itemList.visible=!1;break;default:this.ui.itemList.visible=!1,this.ui.selectItemPanel.visible=!1}switch(t){case 0:this.ui.selectItemPanel.visible=!0;var r=u.home.backgrounds.find(function(t){return t.id===i.selectedBgID});this.ui.selectItemName.text=r&&App.getText("Backgrounds")+r.id,this.ui.commonItemBtn.visible=!1,this.ui.selectedItemBtn.visible=!0,this.ui.lockedItemBtn.visible=!1;break;case 1:this.ui.selectItemPanel.visible=!0;var l=u.home.floors.find(function(t){return t.id===i.selectedFloorID});this.ui.selectItemName.text=l&&App.getText("Floors")+l.id,this.ui.commonItemBtn.visible=!1,this.ui.selectedItemBtn.visible=!0,this.ui.lockedItemBtn.visible=!1;break;case 2:this.ui.itemList.visible=!0,this.itemList.reset(u.home.spoils.length);break;case 3:this.ui.itemList.visible=!0,this.itemList.reset(u.home.pets.length)}}},{key:"initListItem",value:function(t){var e=this,i=t.ui.icon.children[0];i.anchor.set(.5,.5),i.position.set(t.ui.icon.mywidth/2,t.ui.icon.myheight/2),t.buttonMode=!0,t.interactive=!0,t.on("pointerdown",function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e.onTouchItemStart.apply(e,[t].concat(n))})}},{key:"updateListItem",value:function(t,e){var i=this.getSelectedType(),n=u.home[i][e],o=t.ui.icon.children[0];o.texture=U.from(n.path);var a=n.iconScale||u.home.defaultIconItemScale;t.ui.icon.children[0].scale.set(a,a),t.itemConfig=n;var s=Pt.isHomeItemLocked(i,n.id);Et.greySprite(o,s),t.ui.lockedImage.visible=s,Et.showRedPoint(t,s&&Pt.isHomeItemUnlockable(i,n.id))}},{key:"onTouchHomeStart",value:function(t){this.touching=!0,this.lastTouchPosition={x:t.data.global.x,y:t.data.global.y}}},{key:"onTouchItemStart",value:function(t,e){if(Pt.isHomeItemLocked(this.getSelectedType(),t.itemConfig.id))this.showLockedInfo(this.getSelectedType(),t.itemConfig.id);else{var i=this.addChild(new V);i.texture=U.from(t.itemConfig.path),i.anchor.set(.5,1);var n=App.trans2GlobalPosition(e.data.global),o=n.x,a=n.y;i.position.set(o,a);var s=t.itemConfig.itemScale||u.home.defaultSceneItemScale;i.scale.set(s,s),this.touchingSprite=i,this.touchingItemID=t.itemConfig.id}}},{key:"onTouchMove",value:function(t){var e=App.trans2GlobalPosition(t.data.global),i=e.x,n=e.y;if(this.touching){var o=i-this.lastTouchPosition.x,a=this.homeInnerContainer.x+o;a>=this.homeMinX&&a<this.homeMaxX&&(this.homeInnerContainer.x=a);var s=n-this.lastTouchPosition.y,r=this.homeInnerContainer.y+s;r>=this.homeMinY&&r<this.homeMaxY&&(this.homeInnerContainer.y=r),this.lastTouchPosition.x=i,this.lastTouchPosition.y=n}else this.touchingSprite&&(this.touchingSprite.position.set(i,n),i<this.homeContainer.x+u.home.edgeMoveOffset.x&&i>this.homeContainer.x?this.moveX=u.home.edgeMoveVelocity.x:i>this.homeContainer.x+this.homeContainer.mywidth-u.home.edgeMoveOffset.x&&i<this.homeContainer.x+this.homeContainer.mywidth?this.moveX=-u.home.edgeMoveVelocity.x:this.moveX=0,n<this.homeContainer.y+u.home.edgeMoveOffset.y&&n>this.homeContainer.y?this.moveY=u.home.edgeMoveVelocity.y:n>this.homeContainer.y+this.homeContainer.myheight-u.home.edgeMoveOffset.y&&n<this.homeContainer.y+this.homeContainer.myheight?this.moveY=-u.home.edgeMoveVelocity.y:this.moveY=0)}},{key:"onTouchEnd",value:function(t){var e=this;if(this.touching)this.touching=!1;else if(this.touchingSprite){this.touchingSprite.destroy(),this.touchingSprite=void 0;var i=Pt.get(Pt.homeData);if(2===this.radio.selectedIndex){if(i.spoilsList.length>=u.home.spoilsMaxCount)return App.showNotice(App.getText("骑士大人，战力品摆放已经超过总上限${count}个了哟！",{count:u.home.spoilsMaxCount}))}else if(3===this.radio.selectedIndex){if(i.petsList.length>=u.home.petsMaxCount)return App.showNotice(App.getText("骑士大人，宠物摆放已经超过总上限${count}个了哟！",{count:u.home.petsMaxCount}));if(i.petsList.filter(function(t){return t===e.touchingItemID}).length>=u.home.petsOfTheSameKindMaxCount)return App.showNotice(App.getText("骑士大人，这个宠物最多只能放出${count}个哟！",{count:u.home.petsOfTheSameKindMaxCount}))}var n=this.homeContainer.getGlobalPosition(),o={x:n.x,y:n.y+u.home.floorStartY,width:this.homeContainer.mywidth,height:this.homeContainer.myheight-u.home.floorStartY};if(Q.isPointInRect(t.data.global,o)){var a=t.data.global.x-n.x-this.homeInnerContainer.x,s=t.data.global.y-n.y-this.homeInnerContainer.y;if(2===this.radio.selectedIndex){var r=i.spoilsList.length+1;this.createSpoils(r,this.touchingItemID,a,s),i.spoilsList.push([r,this.touchingItemID,a,s])}else this.createPet(this.touchingItemID,{x:a,y:s}),i.petsList.push(this.touchingItemID);this.sortItems(),Pt.set(Pt.homeData,i)}}this.moveX=0,this.moveY=0}},{key:"onClickStartRemoveItemModeButton",value:function(){this.itemContainer.children.forEach(function(t){return t.removeItemBtn.visible=!0}),this.ui.startRemoveItemModeBtn.visible=!1,this.ui.endRemoveItemModeBtn.visible=!0,this.ui.removeAllItemBtn.visible=!0}},{key:"onClickEndRemoveItemModeButton",value:function(){this.itemContainer.children.forEach(function(t){return t.removeItemBtn.visible=!1}),this.ui.startRemoveItemModeBtn.visible=!0,this.ui.endRemoveItemModeBtn.visible=!1,this.ui.removeAllItemBtn.visible=!1}},{key:"onClickRemoveItemBtn",value:function(t){App.showScene("TipScene",{tip:App.getText("ConfirmDeleteHomeItem"),confirmCallback:function(){var e=t.parent,i=Pt.get(Pt.homeData);if(void 0!==e.onEachFrame)Q.removeItemFromArray(i.petsList,e.itemConfig.id);else{var n=i.spoilsList.findIndex(function(t){return t[0]===e.itemID});-1!==n&&i.spoilsList.splice(n,1)}Pt.set(Pt.homeData,i),e.destroy()},cancelCallback:function(){}})}},{key:"onClickRemoveAllItemButton",value:function(){var t=this;App.showScene("TipScene",{tip:App.getText("ConfirmDeleteAllHomeItem"),confirmCallback:function(){App.showScene("TipScene",{tip:App.getText("ConfirmDeleteAllHomeItemAgain"),confirmCallback:function(){t.itemContainer.removeChildren();var e=Pt.get(Pt.homeData);e.spoilsList=[],e.petsList=[],Pt.set(Pt.homeData,e)},cancelCallback:function(){}})},cancelCallback:function(){}})}},{key:"sortItems",value:function(){this.itemContainer.children.sort(function(t,e){var i=t.y-e.y;return 0===i&&(i=t.x-e.x),i})}},{key:"gameLoop",value:function(){this.itemContainer.children.forEach(function(t){return t.onEachFrame&&t.onEachFrame()}),this.sortItems();var t=this.homeInnerContainer.x+this.moveX;t>=this.homeMinX&&t<this.homeMaxX&&(this.homeInnerContainer.x=t);var e=this.homeInnerContainer.y+this.moveY;e>=this.homeMinY&&e<this.homeMaxY&&(this.homeInnerContainer.y=e)}},{key:"getUnlockConditions",value:function(t,e,i){var n=u.home[t].find(function(t){return t.id===e});if(n.unlockConditions){var o=n.unlockConditions;return i&&(o=o.filter(function(t){return-1===[u.conditionsEnum.costCoin,u.conditionsEnum.costDiamond].indexOf(t[0])})),o.map(function(t){var e=ba(t),i=e[0],n=e.slice(1);if(i===u.conditionsEnum.unlockMap){var o=u.endlessMode.sceneList[n[0]],a=o.name?App.getText(o.name):App.getText("Map")+o.id;return App.getText(u.conditions[i],[a])}return App.getText(u.conditions[i],n)})}return[]}},{key:"getUnlockRewards",value:function(t,e){var i=u.home[t].find(function(t){return t.id===e});return i.unlockRewards?[{text:"Coin",config:"coinPercent"},{text:"Distance",config:"distancePercent"},{text:"Score",config:"scorePercent"},{text:"Exp",config:"expPercent"}].filter(function(t){return 0!==i.unlockRewards[t.config]}).map(function(t){return"".concat(App.getText(t.text),": ").concat(Math.floor(100*i.unlockRewards[t.config]),"%")}):[]}},{key:"getUnlockCosts",value:function(t,e){var i=u.home[t].find(function(t){return t.id===e});return i.unlockConditions?i.unlockConditions.filter(function(t){return t[0]===u.conditionsEnum.costCoin||t[0]===u.conditionsEnum.costDiamond}).map(function(t){var e=ba(t),i=e[0],n=e.slice(1);return App.getText(u.conditions[i],n)}):[]}},{key:"showLockedInfo",value:function(t,e){var i=this;if(Pt.isHomeItemSatisfiedCostCondition(t,e)){var n=this.getUnlockConditions(t,e,!0);App.showTip("".concat(App.getText("ItemIsAbleToUnlock"),"\n\n").concat(0!==n.length?App.getText("UnlockConditions")+"\n"+n.join("\n")+"\n":"","\n").concat(App.getText("UnlockRewards"),"\n").concat(this.getUnlockRewards(t,e).join("\n"),"\n\n").concat(App.getText("Would you like to cost the following items to unlock this item?"),"\n").concat(this.getUnlockCosts(t,e).join("\n")),function(){var n=Pt.get(Pt.coin,0),o=Pt.get(Pt.diamond,0),a=u.home[t].find(function(t){return t.id===e}),s=a.unlockConditions,r=s.find(function(t){return t[0]===u.conditionsEnum.costCoin}),l=r?r[1]:0,h=s.find(function(t){return t[0]===u.conditionsEnum.costDiamond}),c=h?h[1]:0;if(n<l||o<c)App.showNotice(App.getText("Cost is not enough!"));else{Pt.set(Pt.coin,n-l),Pt.set(Pt.diamond,o-c);var m=Pt.get(Pt.homeData);m.unlocked[t].push(e),Pt.set(Pt.homeData,m),i.refreshPlayerBasicInfo(),i.refreshCurItemInfo(),a.unlockInfo&&App.showScene("NewContentScene",a.unlockInfo),pt.dispatchEvent("UpdatePoint")}},function(){})}else App.showTip("".concat(App.getText("This item is locked."),"\n                \n").concat(App.getText("UnlockConditions"),"\n").concat(this.getUnlockConditions(t,e).join("\n"),"\n\n").concat(App.getText("UnlockRewards"),"\n").concat(this.getUnlockRewards(t,e).join("\n")),function(){},function(){},!0)}},{key:"getSelectedType",value:function(){return u.home.types[this.radio.selectedIndex]}},{key:"refreshCurItemInfo",value:function(){switch(this.radio.selectedIndex){case 0:var t=u.home.backgrounds[this.bgIndex];this.ui.commonItemBtn.visible=t.id!==this.selectedBgID,this.ui.selectedItemBtn.visible=t.id===this.selectedBgID,this.ui.lockedItemBtn.visible=!1;break;case 1:var e=u.home.floors[this.floorIndex];this.ui.commonItemBtn.visible=e.id!==this.selectedFloorID,this.ui.selectedItemBtn.visible=e.id===this.selectedFloorID,this.ui.lockedItemBtn.visible=!1;break;case 2:case 3:this.itemList.refresh()}}},{key:"onGameStop",value:function(){this.touchingSprite&&(this.touchingSprite.destroy(),this.touchingSprite=void 0)}},{key:"updatePoint",value:function(){this.radio.buttonList.forEach(function(t,e){Et.showRedPoint(t,Pt.hasHomeSubTypeReceivableItem(u.home.types[e]))})}}])&&wa(i.prototype,n),o&&wa(i,o),e}();function La(t){return(La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ea(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ma(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ra(t,e){return!e||"object"!==La(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Da(t){return(Da=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oa(t,e){return(Oa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ba.sceneFilePath="myLaya/laya/pages/View/HomeScene.scene.json";var Fa=[1,2,3],ja=[1,2],Ua=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ra(this,Da(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oa(t,e)}(e,di),i=e,o=[{key:"onClickReturnButton",value:function(){App.hideScene("RankScene"),App.showScene("MainScene")}},{key:"initTypeRadioButton",value:function(t,e){Fa.forEach(function(i){return t.ui[i].visible=e===i})}},{key:"initRangeRadioButton",value:function(t,e){ja.forEach(function(i){return t.ui[i].visible=e===i})}}],(n=[{key:"onCreate",value:function(){this.onClick(this.ui.returnButton,e.onClickReturnButton),this.list=new Mo({root:this.ui.list,initItemFunc:this.initListItem.bind(this),updateItemFunc:this.updateListItem.bind(this),count:0}),this.typeRadio=new Do({root:this.ui.typeRadio,initItemFunc:e.initTypeRadioButton,clickButtonFunc:this.onClickTypeRadio.bind(this),infoList:Fa}),this.rangeRadio=new Do({root:this.ui.rangeRadio,initItemFunc:e.initRangeRadioButton,clickButtonFunc:this.onClickRangeRadio.bind(this),infoList:ja})}},{key:"onShow",value:function(){this.reset()}},{key:"initListItem",value:function(t){}},{key:"updateListItem",value:function(t,e){var i=this,n=this.data[e];t.ui.userNameText.text="--",Fa.forEach(function(e){return t.ui[e].visible=i.type===e}),t.ui.value.text=n.value,t.ui.playerRank.text=e+1,t.index=e;var o=n.username;t.username=o,ct.requestLoadSocialData(o,function(e){if(t.username===o){var i=JSON.parse(e.response);t.ui.userNameText.text=i.playername,t.ui.userImage.children[0].texture=U.from(i.headurl),void 0===i.exp?t.ui.levelText.visible=!1:(t.ui.levelText.visible=!0,t.ui.levelText.text=App.getText("LevelDsc",{level:Pt.getPlayerLevel(i.exp).level}))}})}},{key:"onClickTypeRadio",value:function(t){this.type=Fa[t],this.rangeRadio&&this.reset()}},{key:"onClickRangeRadio",value:function(t){this.range=ja[t],this.reset()}},{key:"reset",value:function(){var t,e=(Ea(t={},1,"/board/get_total_mileage_board"),Ea(t,2,"/board/get_farest_mileage_board"),Ea(t,3,"/board/get_score_board"),t);clearInterval(this.refreshTimeInterval),this.ui.resetTimeText.text=App.getText("RequestingRankData");var i=e[this.type];2===this.range&&(i+="_history"),ct.requestGetRank(i,this.onRequestData.bind(this))}},{key:"onRequestData",value:function(t,e){var i=this;this.data=t,this.list.reset(this.data.length);var n=this.data.findIndex(function(t){return t.username===localStorage.username});this.ui.myValue.text=-1===n?App.getText("NotListed"):n+1,clearInterval(this.refreshTimeInterval);var o=e-(new Date).getTime();this.ui.resetTimeText.text=App.getText("RestartAfterTime",{time:Q.getCDTimeString(o)}),this.refreshTimeInterval=setInterval(function(){var t=e-(new Date).getTime();t>0?i.ui.resetTimeText.text=App.getText("RestartAfterTime",{time:Q.getCDTimeString(t)}):i.reset()},1e3)}},{key:"onClickItem",value:function(t){ct.requestLoadSocialData(this.data[t.index].username,function(t){try{var e=JSON.parse(t.response).home;App.hideScene("RankScene"),App.showScene("HomeScene",e,!1)}catch(t){App.showNotice(App.getText("NetworkBusy"))}})}}])&&Ma(i.prototype,n),o&&Ma(i,o),e}();function Na(t){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Va(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ga(t,e){return!e||"object"!==Na(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xa(t){return(Xa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function za(t,e){return(za=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ua.sceneFilePath="myLaya/laya/pages/View/RankScene.scene.json";var Ha=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ga(this,Xa(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&za(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.onClick(this.ui.registerBtn,this.onRegisterBtn.bind(this)),this.onClick(this.ui.backToLoginBtn,this.onBackToLoginBtn.bind(this))}},{key:"onShow",value:function(){this.ui.usernameInput.text="",this.ui.passwordInput.text=""}},{key:"onRegisterBtn",value:function(){var t=this,e=this.ui.usernameInput.text,i=this.ui.passwordInput.text;if(""===e||""===i)return App.showNotice("Please enter Username and Password!");ct.requestRegister(e,i,function(){App.showNotice("Register success!"),t.onBackToLoginBtn()})}},{key:"onBackToLoginBtn",value:function(){App.hideScene("RegisterScene"),App.showScene("LoginScene")}}])&&Va(i.prototype,n),o&&Va(i,o),e}();function Wa(t){return(Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ja(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ya(t,e){return!e||"object"!==Wa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qa(t){return(qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Za(t,e){return(Za=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ha.sceneFilePath="myLaya/laya/pages/View/RegisterScene.scene.json";var Ka=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ya(this,qa(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Za(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.onClick(this.ui.loginBtn,this.onClickLoginBtn.bind(this)),this.onClick(this.ui.goToCreateAccountBtn,this.onClickGoToCreateAccountBtn.bind(this))}},{key:"onShow",value:function(){this.ui.usernameInput.text="",this.ui.passwordInput.text="",window.PlatformHelper.closeLogoScene()}},{key:"onClickLoginBtn",value:function(){var t=this.ui.usernameInput.text,e=this.ui.passwordInput.text;if(""===t||""===e)return App.showNotice("Please enter Username and Password!");ct.requestLogin(t,e,t,void 0,function(){localStorage.playername=t,App.hideScene("LoginScene"),App.showScene("MainScene")})}},{key:"onClickGoToCreateAccountBtn",value:function(){App.hideScene("LoginScene"),App.showScene("RegisterScene")}}])&&Ja(i.prototype,n),o&&Ja(i,o),e}();function $a(t){return($a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qa(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ts(t,e){return!e||"object"!==$a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function es(t){return(es=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function is(t,e){return(is=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ka.sceneFilePath="myLaya/laya/pages/View/LoginScene.scene.json";var ns=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ts(this,es(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&is(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=this,e=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(e,0),this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this));for(var i=function(e){t.onClick(t.ui["advertButton".concat(e)],function(){t.onClickAdvertButton(e)}),t.onClick(t.ui["item".concat(e)],function(){return t.onClickItem(t.ui["item".concat(e)])},!0)},n=1;n<=3;n++)i(n);this.onClick(this.ui.startButton,this.onClickStartButton.bind(this)),this.bikeSprite=new _o(this.ui.itemIcon3,0);var o=function(e){var i=t.ui["firstTimeReward".concat(e)];Ze.initUIRoot(i),i.ui.itemIcon=i.ui.itemIcon.addChild(new V),i.ui.itemIcon.anchor.set(.5,.5),i.ui.bikeSprite=new _o(i.ui.bikeSpritePanel),t.onClick(i,function(){return t.onClickItem(i)},!0)};for(n=0;n<2;n++)o(n);this.onClick(this.ui.mapAdButton,this.onClickMapAdButton.bind(this))}},{key:"onShow",value:function(t){if(this.parent.setChildIndex(this,this.parent.children.length-1),this.mode=t,this.ui.endlessModeImage.visible=!1,this.ui.mapModeImage.visible=!1,this.ui.gameLevelTitle.visible=!1,this.ui.coinPanel.visible=!1,this.ui.firstTimePanel.visible=!1,this.ui.mapAdButton.visible=!1,this.ui.startButton.visible=!0,"Map"===this.mode){this.ui.mapModeImage.visible=!0,this.ui.coinPanel.visible=!0,this.ui.costCoinText.text=Pt.getRankModeCostCoin(),this.rewardType=Pt.preparationDataMap;var e=Pt.get(Pt.mapModeWatchedAdTimes,0)>0;this.ui.mapAdButton.visible=!e,this.ui.startButton.visible=e}else if("GameLevel"===this.mode){this.ui.gameLevelTitle.visible=!0;var i=App.getScene("GameLevelScene");this.ui.gameLevelTitle.text=App.getText(u.gameLevelMode.mapList[i.gameLevel].dsc),this.rewardType=Pt.preparationDataGameLevel,this.updateGameLevelInfo()}else"Endless"===this.mode&&(this.ui.endlessModeImage.visible=!0,this.rewardType=Pt.preparationDataEndless);this.rewards=Pt.get(this.rewardType);for(var n=1;n<=3;n++){this.ui["item".concat(n)].info=this.rewards[n-1]}this.ui.itemIcon1.children[0].texture=U.from(u.effect[this.rewards[0].effect].imagePath),this.ui.itemIcon2.children[0].texture=U.from(u.effect[this.rewards[1].effect].imagePath),this.bikeSprite.setBikeID(this.rewards[2].bike),this.bikeSprite.play();for(var o=1;o<=3;o++)this.rewards[o-1].received?(this.ui["receivedText".concat(o)].visible=!0,this.ui["advertButton".concat(o)].visible=!1):(this.ui["receivedText".concat(o)].visible=!1,this.ui["advertButton".concat(o)].visible=!0)}},{key:"onClickReturnButton",value:function(){App.hideScene("PreparationScene")}},{key:"onClickAdvertButton",value:function(t){var e=this;window.PlatformHelper.showAd(function(i){i&&(e.rewards[t-1].received=!0,Pt.set(e.rewardType,e.rewards),"Map"===e.mode?3===t?window.TDGA&&TDGA.onEvent("广告竞技模式自行车"):window.TDGA&&TDGA.onEvent("广告竞技模式道具"):"Endless"===e.mode?3===t?window.TDGA&&TDGA.onEvent("广告无尽模式自行车"):window.TDGA&&TDGA.onEvent("广告无尽模式道具"):"GameLevel"===e.mode&&(3===t?window.TDGA&&TDGA.onEvent("广告闯关模式自行车"):window.TDGA&&TDGA.onEvent("广告闯关模式道具")),e.onShow(e.mode))})}},{key:"onClickStartButton",value:function(){if("Map"===this.mode){var t=Pt.get(Pt.coin,0),e=Pt.getRankModeCostCoin();if(t>=e){var i=function(){Pt.set(Pt.coin,t-e),Pt.set(Pt.rankCostLevel,Pt.get(Pt.rankCostLevel,0)+1),App.hideScene("MainScene"),App.hideScene("PreparationScene"),void 0===rt.fixedMapID||-1===rt.fixedMapID?App.showScene("MapGameScene",Pt.get(Pt.currentMapScene)):App.showScene("MapGameScene",rt.fixedMapID)};0===Pt.get(Pt.mapGameTimes,0)?App.showScene("HelpMatchScene",i):i()}else App.showNotice(App.getText("Gold Coin is not enough!"))}else if("Endless"===this.mode)App.hideScene("MainScene"),App.hideScene("PreparationScene"),App.showScene("EndlessGameScene",Pt.get(Pt.selectedEndlessScene,0));else if("GameLevel"===this.mode){App.hideScene("MainScene"),App.hideScene("PreparationScene");var n=App.getScene("GameLevelScene");App.showScene("LevelGameScene",n.gameLevel,n.selectedLevel)}}},{key:"onClickMapAdButton",value:function(){var t=this;window.PlatformHelper.showAd(function(e){e&&(Pt.add(Pt.mapModeWatchedAdTimes,1),t.show(t.mode))})}},{key:"updateGameLevelInfo",value:function(){var t=App.getScene("GameLevelScene");if(Pt.getGameLevelStarCount(t.gameLevel,t.selectedLevel)!==u.starCount){this.ui.firstTimePanel.visible=!0;for(var e=u.gameLevelMode.mapList[t.gameLevel].rewardList[t.selectedLevel],i=["coin","diamond","exp","bike"],n=0,o=0;o<i.length;o++){var a=i[o],s=e[a];if(s){var r=this.ui["firstTimeReward".concat(n)];if(r)switch(r.ui.itemIcon.visible=!1,r.ui.numberText.visible=!1,r.ui.bikeSpritePanel.visible=!1,a){case"coin":r.ui.itemIcon.visible=!0,r.ui.itemIcon.texture=U.from("myLaya/laya/assets/images/icon-coin.png"),r.ui.numberText.visible=!0,r.ui.numberText.text=s,r.info={coin:1};break;case"diamond":r.ui.itemIcon.visible=!0,r.ui.itemIcon.texture=U.from("myLaya/laya/assets/images/icon-diamond.png"),r.ui.numberText.visible=!0,r.ui.numberText.text=s,r.info={diamond:1};break;case"exp":r.ui.itemIcon.visible=!0,r.ui.itemIcon.texture=U.from("myLaya/laya/assets/images/icon-exp.png"),r.ui.numberText.visible=!0,r.ui.numberText.text=s,r.info={exp:1};break;case"bike":r.ui.bikeSpritePanel.visible=!0,r.ui.bikeSprite.setBikeID(s),r.ui.bikeSprite.play(),r.info={bike:s}}n++}}}else this.ui.firstTimePanel.visible=!1}},{key:"onClickItem",value:function(t){App.showScene("InfoScene",t.info)}}])&&Qa(i.prototype,n),o&&Qa(i,o),e}();function os(t){return(os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function as(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ss(t,e){return!e||"object"!==os(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rs(t){return(rs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ls(t,e){return(ls=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ns.sceneFilePath="myLaya/laya/pages/View/PreparationScene.scene.json";var hs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ss(this,rs(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ls(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this)),this.onClick(this.ui.advertButton,this.onClickAdvertButton.bind(this))}},{key:"onClickReturnButton",value:function(){App.hideScene("GiftScene")}},{key:"onClickAdvertButton",value:function(){window.PlatformHelper.showAd(function(t){if(t){var e=Pt.get(Pt.giftIndex,0),i=u.giftList[e];App.showScene("PrizeScene",[{rewardCoin:i.rewardCoin},{rewardDiamond:i.rewardDiamond}]),Pt.set(Pt.giftIndex,e+1),yt.restartGiftCountDown(),App.hideScene("GiftScene"),window.TDGA&&TDGA.onEvent("广告礼包")}})}}])&&as(i.prototype,n),o&&as(i,o),e}();function cs(t){return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function us(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ms(t,e){return!e||"object"!==cs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ps(t){return(ps=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ds(t,e){return(ds=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}hs.sceneFilePath="myLaya/laya/pages/View/GiftScene.scene.json";var fs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ms(this,ps(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ds(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=this,e=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(e,0),this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this)),this.list=[];for(var i=0;i<3;i++){var n=Ze.uiClone(this.ui.item,void 0,this.ui.list);this.ui.list.addChild(n),this.list.push(n)}this.ui.item.visible=!1,this.list.forEach(function(e){e.itemIcon=e.ui.itemIcon.addChild(new V),e.itemIcon.anchor.set(.5,.5),e.numberText=e.ui.numberText,e.bikePanel=e.ui.bikePanel,e.bikeSprite=new _o(e.bikePanel),t.onClick(e,function(){return t.onClickItem(e)},!0)})}},{key:"onShow",value:function(t,e){var i=this;this.closeCallback=e,this.parent.setChildIndex(this,this.parent.children.length-1),t.forEach(function(t){if(t.rewardCoin)Pt.add(Pt.coin,t.rewardCoin);else if(t.rewardDiamond)Pt.add(Pt.diamond,t.rewardDiamond);else if(t.rewardExp)Pt.add(Pt.exp,t.rewardExp);else if(t.rewardBike){var e=Pt.plusBike(t.rewardBike),i=e.levelUp,n=e.highestLevel;App.showScene("BikeDetailScene",t.rewardBike,i,n)}}),pt.dispatchEvent("RefreshRankData"),this.list.forEach(function(t){t.itemIcon.visible=!1,t.numberText.visible=!1,t.bikePanel.visible=!1,t.visible=!1}),t.forEach(function(t,e){var n=i.list[e];n.visible=!0;var o=n.itemIcon,a=n.numberText;t.rewardCoin?(o.visible=!0,a.visible=!0,o.texture=U.from("myLaya/laya/assets/images/icon-coin.png"),a.text=t.rewardCoin,n.info={coin:1}):t.rewardDiamond?(o.visible=!0,a.visible=!0,o.texture=U.from("myLaya/laya/assets/images/icon-diamond.png"),a.text=t.rewardDiamond,n.info={diamond:1}):t.rewardExp?(o.visible=!0,a.visible=!0,o.texture=U.from("myLaya/laya/assets/images/icon-exp.png"),a.text=t.rewardExp,n.info={exp:1}):t.rewardBike&&(n.bikePanel.visible=!0,n.bikeSprite.setBikeID(t.rewardBike),n.bikeSprite.play(),n.info={bike:t.rewardBike})});var n=this.list[0].mywidth;switch(t.length){case 1:this.list[0].x=this.ui.list.mywidth/2-n/2;break;case 2:this.list[0].x=this.ui.list.mywidth/3-n/2,this.list[1].x=this.ui.list.mywidth/3*2-n/2;break;case 3:this.list.forEach(function(t,e){t.x=n/2+e*n-n/2})}}},{key:"onClickReturnButton",value:function(){this.onClose(),App.hideScene("PrizeScene")}},{key:"onClose",value:function(){this.closeCallback&&this.closeCallback()}},{key:"onClickItem",value:function(t){App.showScene("InfoScene",t.info)}}])&&us(i.prototype,n),o&&us(i,o),e}();function ys(t){return(ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gs(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vs(t,e){return!e||"object"!==ys(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _s(t){return(_s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bs(t,e){return(bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}fs.sceneFilePath="myLaya/laya/pages/View/PrizeScene.scene.json";var xs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),vs(this,_s(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bs(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this)),this.onClick(this.ui.advertButton,this.onClickAdvertButton.bind(this)),this.list=new Mo({root:this.ui.list,initItemFunc:this.initItem.bind(this),updateItemFunc:this.updateItem.bind(this),count:u.signRewardList.length-1,isStatic:!0}),this.initItem7()}},{key:"onShow",value:function(){this.ui.advertButton.visible=yt.hasReceivableSignReward(),this.list.refresh(),this.updateItem7()}},{key:"initItem",value:function(t){var e=this;t.ui.itemIcon=t.ui.itemIcon.addChild(new V),t.ui.itemIcon.anchor.set(.5,.5),t.ui.bikeSprite=new _o(t.ui.bikeSpritePanel),this.onClick(t,function(){return e.onClickItem(t)},!0)}},{key:"updateItem",value:function(t,e){var i=u.signRewardList[e];t.info=i,t.ui.title.text=App.getText("day".concat(e+1)),t.ui.itemIcon.visible=!1,t.ui.numberText.visible=!1,t.ui.bikeSpritePanel.visible=!1,i.coin?(t.ui.itemIcon.visible=!0,t.ui.itemIcon.texture=U.from("myLaya/laya/assets/images/icon-coin.png"),t.ui.numberText.visible=!0,t.ui.numberText.text=i.coin):i.diamond?(t.ui.itemIcon.visible=!0,t.ui.itemIcon.texture=U.from("myLaya/laya/assets/images/icon-diamond.png"),t.ui.numberText.visible=!0,t.ui.numberText.text=i.diamond):i.bike&&(t.ui.bikeSpritePanel.visible=!0,t.ui.bikeSprite.setBikeID(i.bike),t.ui.bikeSprite.play()),t.ui.receivedImage.visible=!1,t.ui.lostImage.visible=!1,yt.isSignRewardReceived(e)?t.ui.receivedImage.visible=!0:yt.isSignRewardReceivable(e)||(t.ui.lostImage.visible=!0)}},{key:"initItem7",value:function(){var t=this;this.ui.bikeSprite=new _o(this.ui.bikeSpritePanel),this.ui.bikeSprite.setBikeID(u.signRewardList[6].bike),this.ui.bikeSprite.play(),this.ui.coinNumberText.text=u.signRewardList[6].coin,this.ui.diamondNumberText.text=u.signRewardList[6].diamond;for(var e=function(e){var i=t.ui["day7item".concat(e)],n=void 0;n=0===e?{coin:u.signRewardList[6].coin}:1===e?{diamond:u.signRewardList[6].diamond}:{bike:u.signRewardList[6].bike},i.info=n,t.onClick(i,function(){return t.onClickItem(i)},!0)},i=0;i<3;i++)e(i)}},{key:"updateItem7",value:function(){this.ui.receivedImage.visible=!1,this.ui.lostImage.visible=!1,yt.isSignRewardReceived(6)?this.ui.receivedImage.visible=!0:yt.isSignRewardReceivable(6)||(this.ui.lostImage.visible=!0)}},{key:"onClickReturnButton",value:function(){App.hideScene("SignScene")}},{key:"onClickAdvertButton",value:function(){var t=this,e=Pt.get(Pt.receivedSignReward,-1)+1,i=u.signRewardList[e];i?window.PlatformHelper.showAd(function(n){if(n){var o=[];i.coin&&o.push({rewardCoin:i.coin}),i.diamond&&o.push({rewardDiamond:i.diamond}),i.bike&&o.push({rewardBike:i.bike}),App.showScene("PrizeScene",o),Pt.set(Pt.receivedSignReward,e),yt.hasSignReward()||(App.hideScene("SignScene"),App.getScene("MainScene").hideSignScene()),t.onShow(),window.TDGA&&TDGA.onEvent("广告签到",{day:e+1}),pt.dispatchEvent("UpdatePoint")}}):App.showNotice("已经没有签到奖励可以领取了")}},{key:"onClickItem",value:function(t){App.showScene("InfoScene",t.info)}}])&&gs(i.prototype,n),o&&gs(i,o),e}();function Ss(t){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ks(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ws(t,e){return!e||"object"!==Ss(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function As(t){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ps(t,e){return(Ps=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}xs.sceneFilePath="myLaya/laya/pages/View/SignScene.scene.json";var Ts=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ws(this,As(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ps(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this))}},{key:"onClickReturnButton",value:function(){App.hideScene("HelpHomeScene")}}])&&ks(i.prototype,n),o&&ks(i,o),e}();function Cs(t){return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Is(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bs(t,e){return!e||"object"!==Cs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ls(t){return(Ls=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Es(t,e){return(Es=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ts.sceneFilePath="myLaya/laya/pages/View/HelpHomeScene.scene.json";var Ms=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bs(this,Ls(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Es(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){this.curPercent=0,this.goToPercent(0),this.bikeSprite=new _o(this)}},{key:"onShow",value:function(t){this.parent.setChildIndex(this,this.parent.children.length-1),this.goToPercent(0),this.timer=requestAnimationFrame(this.onAnimationFrame.bind(this)),this.bikeSprite.setBikeID(t),this.bikeSprite.play(),this.ui.tipText.text=App.getText("Tip".concat(Math.floor(Q.randomInRange(1,u.tipCount+1))))}},{key:"onHide",value:function(){cancelAnimationFrame(this.timer),this.bikeSprite.stop()}},{key:"goToPercent",value:function(t,e){this.targetPercent=t,this.targetCallback=e}},{key:"setPercent",value:function(t){this.ui.percentText.text="".concat(Math.floor(t),"%");var e=new N;e.beginFill();var i=this.ui.percentImage.getGlobalPosition(),n=this.ui.percentImage.width*t/100;e.drawRect(i.x,i.y,n,this.ui.percentImage.height),e.endFill(),this.ui.percentImage.mask=e,this.bikeSprite.setPosition(i.x+n-(App.realWidth-App.sceneWidth)/2,i.y)}},{key:"onAnimationFrame",value:function(){this.curPercent++,this.curPercent>this.targetPercent&&(this.curPercent=this.targetPercent,this.targetCallback&&(this.targetCallback(),this.targetCallback=void 0)),this.setPercent(this.curPercent),this.timer=requestAnimationFrame(this.onAnimationFrame.bind(this))}}])&&Is(i.prototype,n),o&&Is(i,o),e}();function Rs(t){return(Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ds(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Os(t,e){return!e||"object"!==Rs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fs(t){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function js(t,e){return(js=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ms.sceneFilePath="myLaya/laya/pages/View/LoadingScene.scene.json";var Us=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Os(this,Fs(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&js(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this))}},{key:"onShow",value:function(t){this.closeCallback=t}},{key:"onClickReturnButton",value:function(){App.hideScene("HelpEndlessScene"),this.closeCallback&&this.closeCallback()}}])&&Ds(i.prototype,n),o&&Ds(i,o),e}();function Ns(t){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vs(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gs(t,e){return!e||"object"!==Ns(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xs(t){return(Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zs(t,e){return(zs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Us.sceneFilePath="myLaya/laya/pages/View/HelpEndlessScene.scene.json";var Hs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Gs(this,Xs(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zs(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this))}},{key:"onShow",value:function(t){this.closeCallback=t}},{key:"onClickReturnButton",value:function(){App.hideScene("HelpMatchScene"),this.closeCallback&&this.closeCallback()}}])&&Vs(i.prototype,n),o&&Vs(i,o),e}();function Ws(t){return(Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Js(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ys(t,e){return!e||"object"!==Ws(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qs(t){return(qs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zs(t,e){return(Zs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Hs.sceneFilePath="myLaya/laya/pages/View/HelpMatchScene.scene.json";var Ks=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ys(this,qs(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zs(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this))}},{key:"onShow",value:function(t,e){var i=u.lockSystems[t];this.closeCallback=e,this.parent.setChildIndex(this,this.parent.children.length-1),this.ui.title.text=App.getText(i.title),this.ui.image.removeChildren();var n=V.from(i.image);n.anchor.set(.5,.5),n.scale.set(i.imageScale,i.imageScale),this.ui.image.addChild(n),this.ui.dsc.text=App.getText(i.dsc)}},{key:"onClickReturnButton",value:function(){App.hideScene("NewContentScene"),this.closeCallback&&this.closeCallback()}}])&&Js(i.prototype,n),o&&Js(i,o),e}();function $s(t){return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qs(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tr(t,e){return!e||"object"!==$s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function er(t){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ir(t,e){return(ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ks.sceneFilePath="myLaya/laya/pages/View/NewContentScene.scene.json";var nr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tr(this,er(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ir(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this));var e=this.ui.bikeSpritePanel;this.bikeSprite=new _o(e),this.bikeSprite.setPosition(e.mywidth/2,u.drawScene.bikeSprite.y);for(var i=0;i<3;i++){var n=this.ui["specialIcon".concat(i)];this.onClick(n,this.onClickItem.bind(this),!0)}}},{key:"onShow",value:function(t,e,i,n){var o=this;this.closeCallback=n,this.parent.setChildIndex(this,this.parent.children.length-1),this.bikeSprite.setBikeID(t),this.bikeSprite.play(),this.ui.unlockIcon.visible=!e,this.ui.levelUpIcon.visible=e;var a=u.bikeList.find(function(e){return e.id===t});this.ui.bikeNameText.text=App.getText(a.name),this.ui.bikeDscText.text=App.getText(a.dsc);var s=Pt.getBikeVelocityLevel(t);this.ui.velocityLevelIcon.children[0].texture=F[u.levelIconTable[s]].texture;var r=Pt.getBikeJumpLevel(t);this.ui.jumpLevelIcon.children[0].texture=F[u.levelIconTable[r]].texture;for(var l=u.abilityList.filter(function(e){return Pt.isBikeHasAbility(t,e.id)}),h=0;h<3;h++){var c=l[h],m=this.ui["specialIcon".concat(h)];void 0!==c?(m.visible=!0,m.children[0].texture=U.from(c.icon),m.info={ability:c}):m.visible=!1}var p=Pt.get(Pt.bikeLevelMap,{})[t];this.ui.levelText.text=p+1,["distance","exp","coin","score"].forEach(function(i){return o.setPercentText(i,e,t,p)})}},{key:"onClickItem",value:function(t){App.showScene("InfoScene",t.info)}},{key:"setPercentText",value:function(t,e,i,n){var o;o=e?"".concat(Math.floor(100*Et.getBikeConfig("".concat(t,"Percent"),i,n-1)),"% > ").concat(Math.floor(100*Et.getBikeConfig("".concat(t,"Percent"),i,n)),"%"):"".concat(Math.floor(100*Et.getBikeConfig("".concat(t,"Percent"),i,n)),"%"),this.ui["".concat(t,"PercentText")].text=o}},{key:"onClickReturnButton",value:function(){this.onClose(),this.bikeSprite.stop(),App.hideScene("BikeDetailScene")}},{key:"onClose",value:function(){this.closeCallback&&this.closeCallback()}}])&&Qs(i.prototype,n),o&&Qs(i,o),e}();function or(t){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ar(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sr(t,e){return!e||"object"!==or(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rr(t){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lr(t,e){return(lr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}nr.sceneFilePath="myLaya/laya/pages/View/BikeDetailScene.scene.json",nr.resPathList=Q.values(u.levelIconTable).concat(u.abilityList.map(function(t){return t.icon}));var hr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),sr(this,rr(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lr(t,e)}(e,di),i=e,o=[{key:"onClickMainButton",value:function(){App.hideScene("GameLevelFailedScene"),App.getScene("LevelGameScene").pauseGame(),App.getScene("LevelGameScene").settle(),App.destroyScene("LevelGameScene"),App.showScene("MainScene"),App.getScene("MainScene").onGameEnded()}}],(n=[{key:"onCreate",value:function(){var t=this,i=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(i,0),this.onClick(this.ui.mainButton,e.onClickMainButton),this.matchRacetrack=new Tn(this.ui.matchRacetrack),this.typeList=["distance","exp","coin"].map(function(e){return{type:e,doubleIcon:t.ui["".concat(e,"DoubleIcon")],percentText:t.ui["".concat(e,"PercentText")],valueText:t.ui["".concat(e,"ValueText")]}}),this.animations=[]}},{key:"onShow",value:function(t){var e=this;this.parent.setChildIndex(this,this.parent.children.length-1),this.args=t,this.matchRacetrack.create(0),this.matchRacetrack.update(this.args.playerRate),this.typeList.forEach(function(t){var e=Et.getBikeConfig("".concat(t.type,"Percent"));e>1?(t.percentText.visible=!0,t.percentText.text="+".concat(Math.floor(100*e),"%")):t.percentText.visible=!1,t.valueText.text=0}),App.showMask(this.onClickMask.bind(this)),this.playNumberAnimation(function(){e.onClickMask()})}},{key:"playNumberAnimation",value:function(t){var e=this,i={percent:0},n=new Ke.a.Tween(i).to({percent:1},u.resolveAnimation.numberAnimation.duration).onUpdate(function(){e.typeList.forEach(function(t){var n=e.args.gameScene[t.type],o=Et.getBikeConfig("".concat(t.type,"Percent"));t.valueText.text=Math.floor(n*o*i.percent)})}).onComplete(function(){Q.removeItemFromArray(e.animations,n),t&&t()}).start(performance.now());this.animations.push(n)}},{key:"onClickMask",value:function(){var t=this;App.hideMask(),this.animations.forEach(function(t){return t.stop()}),this.animations=[],this.typeList.forEach(function(e){var i=t.args.gameScene[e.type],n=Et.getBikeConfig("".concat(e.type,"Percent"));e.valueText.text=Math.floor(i*n)})}}])&&ar(i.prototype,n),o&&ar(i,o),e}();function cr(t){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mr(t,e){return!e||"object"!==cr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pr(t){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dr(t,e){return(dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}hr.sceneFilePath="myLaya/laya/pages/View/GameLevelFailedScene.scene.json";var fr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mr(this,pr(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dr(t,e)}(e,di),i=e,o=[{key:"onClickRestartButton",value:function(){App.getScene("LevelGameScene").settle(),App.hideScene("GameLevelResultScene"),pt.dispatchEvent("Restart")}}],(n=[{key:"onClickMainButton",value:function(){App.hideScene("GameLevelResultScene"),App.getScene("LevelGameScene").pauseGame(),App.getScene("LevelGameScene").settle(),App.destroyScene("LevelGameScene"),App.showScene("MainScene"),this.onClose()}},{key:"onClickAdvertDoubleButton",value:function(){var t=this;window.PlatformHelper.showAd(function(e){e&&(t.args.gameScene.doubleReward=!0,window.TDGA&&TDGA.onEvent("广告闯关模式双倍"),App.showMask(t.onClickMask.bind(t)),t.playDoubleAnimation(function(){return t.onClickMask()}))})}},{key:"onClickMask",value:function(){var t=this;App.hideMask(),this.animations.forEach(function(t){return t.stop()}),this.animations=[];for(var e=0;e<u.starCount;e++){var i=this.ui["star".concat(e)];i.visible=e<this.args.gameScene.star,this.recoverAnimationObject(i)}this.typeList.forEach(function(e){var i=t.args.gameScene[e.type],n=Et.getBikeConfig("".concat(e.type,"Percent")),o=Math.floor(i*n);t.args.gameScene.doubleReward&&(o*=2),e.valueText.text=o,e.doubleIcon.visible=t.args.gameScene.doubleReward,t.recoverAnimationObject(e.doubleIcon)}),this.args.gameScene.doubleReward?(this.ui.advertDoubleButton.visible=!1,this.ui.hasDoubleRewardText.visible=!0):(this.ui.advertDoubleButton.visible=!0,this.ui.hasDoubleRewardText.visible=!1),this.recoverAnimationObject(this.ui.hasDoubleRewardText)}},{key:"onCreate",value:function(){var t=this,i=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(i,0),this.onClick(this.ui.mainButton,this.onClickMainButton.bind(this)),this.onClick(this.ui.restartButton,e.onClickRestartButton),this.onClick(this.ui.advertDoubleButton,this.onClickAdvertDoubleButton.bind(this)),this.typeList=["distance","exp","coin"].map(function(e){return{type:e,doubleIcon:t.ui["".concat(e,"DoubleIcon")],percentText:t.ui["".concat(e,"PercentText")],valueText:t.ui["".concat(e,"ValueText")]}}),this.typeList.forEach(function(e){return t.initAnimationObject(e.doubleIcon)}),this.initAnimationObject(this.ui.hasDoubleRewardText);for(var n=0;n<u.starCount;n++)this.initAnimationObject(this.ui["star".concat(n)]);this.animations=[]}},{key:"initAnimationObject",value:function(t){(t=t.children[0]).originScale=t.scale.x,t.anchor.set(.5,.5),t.position.set(t.x+t.width/2,t.y+t.height/2)}},{key:"recoverAnimationObject",value:function(t){(t=t.children[0]).alpha=1,t.scale.set(t.originScale,t.originScale)}},{key:"onShow",value:function(t){var e=this;this.parent.setChildIndex(this,this.parent.children.length-1),this.args=t;for(var i=0;i<u.starCount;i++)this.ui["star".concat(i)].visible=!1;this.firstGotAllStars=this.args.gameScene.star===u.starCount&&Pt.getGameLevelStarCount(this.args.gameScene.mapIndex,this.args.gameScene.levelIndex)!==u.starCount,App.getScene("LevelGameScene").stopSounds(),Ft.pauseBGM(),Ft.playSound(u.soundPath.throughFlag),this.typeList.forEach(function(t){t.doubleIcon.visible=!1;var e=Et.getBikeConfig("".concat(t.type,"Percent"));e>1?(t.percentText.visible=!0,t.percentText.text="+".concat(Math.floor(100*e),"%")):t.percentText.visible=!1,t.valueText.text=0}),this.ui.advertDoubleButton.visible=!0,this.ui.hasDoubleRewardText.visible=!1,App.showMask(this.onClickMask.bind(this)),this.playStarsAnimation(this.args.gameScene.star,function(){e.playNumberAnimation(function(){e.onClickMask()})})}},{key:"playStarsAnimation",value:function(t,e){for(var i=this,n=0;n<u.starCount;n++)this.ui["star".concat(n)].visible=!1;this.starIndex=0;!function n(){if(i.starIndex<t){var o=i.ui["star".concat(i.starIndex)];o.visible=!0,i.playStarAnimation(o,u.resolveAnimation.starAnimation,function(){i.starIndex++,n()})}else e&&e()}()}},{key:"playStarAnimation",value:function(t,e,i){var n=this,o=(t=t.children[0]).originScale,a=o*e.startScale,s=e.startAlpha;t.scale.set(a,a),t.alpha=s;var r={scale:a,alpha:s},l=new Ke.a.Tween(r).to({scale:o,alpha:1},e.duration).easing(Ke.a.Easing.Bounce.Out).onUpdate(function(){t.scale.set(r.scale,r.scale),t.alpha=r.alpha}).onComplete(function(){Q.removeItemFromArray(n.animations,l),i&&i()}).start(performance.now());this.animations.push(l)}},{key:"playNumberAnimation",value:function(t){var e=this,i={percent:0},n=new Ke.a.Tween(i).to({percent:1},u.resolveAnimation.numberAnimation.duration).onUpdate(function(){e.typeList.forEach(function(t){var n=e.args.gameScene[t.type],o=Et.getBikeConfig("".concat(t.type,"Percent"));t.valueText.text=Math.floor(n*o*i.percent)})}).onComplete(function(){Q.removeItemFromArray(e.animations,n),t&&t()}).start(performance.now());this.animations.push(n)}},{key:"playDoubleAnimation",value:function(t){var e=this;this.ui.advertDoubleButton.visible=!1,this.typeList.forEach(function(t){return t.doubleIcon.visible=!1});var i=0;!function n(){if(i<e.typeList.length){var o=e.typeList[i].doubleIcon;o.visible=!0,e.playStarAnimation(o,u.resolveAnimation.doubleIconAnimation,function(){e.playAdvertNumberAnimation(i,function(){i++,n()})})}else i===e.typeList.length?(e.ui.hasDoubleRewardText.visible=!0,e.playStarAnimation(e.ui.hasDoubleRewardText,u.resolveAnimation.getIconAnimation,function(){i++,n()})):t&&t()}()}},{key:"playAdvertNumberAnimation",value:function(t,e){var i=this,n={percent:1},o=new Ke.a.Tween(n).to({percent:2},u.resolveAnimation.numberAnimation.duration).onUpdate(function(){var e=i.typeList[t],o=i.args.gameScene[e.type],a=Et.getBikeConfig("".concat(e.type,"Percent"));e.valueText.text=Math.floor(o*a*n.percent)}).onComplete(function(){Q.removeItemFromArray(i.animations,o),e&&e()}).start(performance.now());this.animations.push(o)}},{key:"onClose",value:function(){this.firstGotAllStars?this.showFirstPrize():App.getScene("MainScene").onGameEnded()}},{key:"showFirstPrize",value:function(){var t=this,e=u.gameLevelMode.mapList[this.args.gameScene.mapIndex].rewardList[this.args.gameScene.levelIndex],i=[];e.coin&&i.push({rewardCoin:e.coin}),e.diamond&&i.push({rewardDiamond:e.diamond}),e.exp&&i.push({rewardExp:e.exp}),this.showCommonPrize(i,function(){t.showBikePrize(e.bike,function(){App.getScene("MainScene").onGameEnded()})})}},{key:"showCommonPrize",value:function(t,e){0===t.length?e&&e():App.showScene("PrizeScene",t,e)}},{key:"showBikePrize",value:function(t,e){if(void 0===t)e&&e();else{var i=Pt.plusBike(t),n=i.levelUp,o=i.highestLevel;App.showScene("BikeDetailScene",t,n,o,e)}}}])&&ur(i.prototype,n),o&&ur(i,o),e}();function yr(t){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vr(t,e){return!e||"object"!==yr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _r(t){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function br(t,e){return(br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}fr.sceneFilePath="myLaya/laya/pages/View/GameLevelResultScene.scene.json";var xr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),vr(this,_r(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&br(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this))}},{key:"onShow",value:function(t){this.closeCallback=t}},{key:"onClickReturnButton",value:function(){App.hideScene("HelpGameLevelScene"),this.closeCallback&&this.closeCallback()}}])&&gr(i.prototype,n),o&&gr(i,o),e}();function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kr(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wr(t,e){return!e||"object"!==Sr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ar(t){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pr(t,e){return(Pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}xr.sceneFilePath="myLaya/laya/pages/View/HelpGameLevelScene.scene.json";var Tr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),wr(this,Ar(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pr(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){for(var t=1;t<=5;t++){var e=this.ui["glBtn".concat(t)];e.index=t-1,this.onClick(e,this.onClickGameLevel.bind(this))}this.selectedLevel=0,this.gameLevel=0,this.onClick(this.ui.returnButton,this.onClickReturnButton),this.onClick(this.ui.lastLevelButton,this.onClickLastLevelButton.bind(this)),this.onClick(this.ui.nextLevelButton,this.onClickNextLevelButton.bind(this)),this.onClick(this.ui.gameLevelLocked,this.onClickGameLevelLocked.bind(this)),this.bikeSprite=new _o(this.ui.gameLevelPanel),this.bikeSprite.setScale(u.gameLevelScene.bikeSpriteScale)}},{key:"onClickReturnButton",value:function(){App.hideScene("GameLevelScene"),App.showScene("MainScene")}},{key:"onShow",value:function(){this.bikeSprite.setBikeID(Pt.get(Pt.selectedBike,0)),this.bikeSprite.play(),this.refreshGameLevelMode(!0)}},{key:"onClickLastLevelButton",value:function(){this.gameLevel--,this.gameLevel<0&&(this.gameLevel=0),this.refreshGameLevelMode()}},{key:"onClickNextLevelButton",value:function(){this.gameLevel++;var t=u.gameLevelMode.mapList.length-1;this.gameLevel>t&&(this.gameLevel=t),this.refreshGameLevelMode()}},{key:"refreshGameLevelMode",value:function(t){this.selectedLevel=t&&this.selectedLevel||0,this.refreshGameLevelSelectedState();var e=u.gameLevelMode.mapList[this.gameLevel];this.ui.sceneImage.children[0].texture=F[e.mainCover].texture;var i=Pt.getGameLevelStarTotalCount(),n=e.starCountUnlockNeeded,o=Pt.isGameLevelMapLocked(this.gameLevel);this.bikeSprite.setVisible(!o),this.ui.totalStarCount.text=i,this.ui.gameLevelMapDsc.text=App.getText(e.dsc),this.ui.gameLevelLocked.visible=o,this.ui.glUnlockStarCount.text=n,Et.greySprite(this.ui.sceneImage.children[0],o),this.ui.lastLevelButton.visible=this.gameLevel>0,this.ui.nextLevelButton.visible=this.gameLevel<u.gameLevelMode.mapList.length-1;var a=this.getSelectedLevelBtnPos();this.bikeSprite.setPosition(a.x,a.y)}},{key:"refreshGameLevelSelectedState",value:function(){for(var t=1;t<=5;t++){var e=Pt.getGameLevelStarCount(this.gameLevel,t-1),i=Pt.isGameLevelLocked(this.gameLevel,t-1),n=this.ui["glBtn".concat(t)];this.setButtonState(n,i,t-1===this.selectedLevel),Et.findChildByName(n,"nameLabel").text="".concat(this.gameLevel+1,"-").concat(t),this.refreshLevelBtnStar(n,e)}}},{key:"setButtonState",value:function(t,e,i){e?(t.children[0].texture=U.from(u.imagePath.lockedLevel),t.interactive=!1):i?(t.children[0].texture=U.from(u.imagePath.selectedLevel),t.interactive=!0):(t.children[0].texture=U.from(u.imagePath.enabledLevel),t.interactive=!0)}},{key:"onClickGameLevel",value:function(t){var e=this,i=this.selectedLevel>t.index;this.selectedLevel=t.index,this.playMove(i,function(){e.refreshGameLevelSelectedState(),App.showScene("PreparationScene","GameLevel")})}},{key:"getSelectedLevelBtnPos",value:function(){var t=this.ui["glBtn".concat(this.selectedLevel+1)];return{x:t.x+u.gameLevelScene.bikeSpriteOffsetX,y:t.y+u.gameLevelScene.bikeSpriteOffsetY}}},{key:"playMove",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0};this.bikeSprite.reverse(t);var n={x:this.bikeSprite.getPositionX(),y:this.bikeSprite.getPositionY()},o=!1;App.showMask();var a=new Ke.a.Tween(n).to(this.getSelectedLevelBtnPos(),500).onUpdate(function(){e.bikeSprite.setPosition(n.x,n.y)}).onComplete(function(){App.hideMask(),o=!0,i()}).start(performance.now());!function t(){requestAnimationFrame(function(e){o||(a.update(e),t())})}()}},{key:"onClickGameLevelLocked",value:function(){var t=this;Pt.hasEnoughStarUnlockGameLevelMap(this.gameLevel)?(App.showMask(),setTimeout(function(){Pt.unlockGameLevelMap(t.gameLevel),App.hideMask(),t.refreshGameLevelMode()},100)):App.showNotice("没有足够的星星解锁该地图")}},{key:"onGameEnded",value:function(t){t?Pt.isLatestLevelInMap(this.gameLevel,this.selectedLevel)?Pt.isLatestMap(this.gameLevel)||this.play2nextMap():this.play2nextLevel():this.refreshGameLevelMode()}},{key:"play2nextLevel",value:function(){var t=this;App.showMask(),setTimeout(function(){App.hideMask(),t.onClickGameLevel({index:t.selectedLevel+1})},100)}},{key:"play2nextMap",value:function(){var t=this;App.showMask(),this.onClickNextLevelButton(),setTimeout(function(){App.hideMask(),t.onClickGameLevelLocked()},500)}},{key:"refreshLevelBtnStar",value:function(t,e){for(var i=1;i<=3;i++){Et.findChildByName(t,i+"").visible=e>=i}}}])&&kr(i.prototype,n),o&&kr(i,o),e}();function Cr(t){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ir(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Br(t,e){return!e||"object"!==Cr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lr(t,e,i){return(Lr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Er(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function Er(t){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mr(t,e){return(Mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Tr.sceneFilePath="myLaya/laya/pages/View/GameLevelScene.scene.json";var Rr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Br(this,Er(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mr(t,e)}(e,Rn),i=e,(n=[{key:"onCreate",value:function(){Lr(Er(e.prototype),"onCreate",this).call(this),this.ui.distancePanel.visible=!1,this.ui.matchRacetrack.visible=!1,this.ui.skipBtn.visible=!0,this.onClick(this.ui.skipBtn,this.onClickSkipButton.bind(this),!1,{noControl:!0}),this.onlyBaseDuration=!0}},{key:"onShow",value:function(){this.mapConfig=u.guideMode.mapConfig,this.mapScenePath=u.guideMode.mapConfig.scenePath,Lr(Er(e.prototype),"onShow",this).call(this),this.guideMgr.setControlAll(!0)}},{key:"getResPathList",value:function(){return Lr(Er(e.prototype),"getResPathList",this).call(this).concat([this.mapConfig.bgmPath])}},{key:"getBikeID",value:function(){return 0}},{key:"getPlayerLevel",value:function(){return Pt.getPlayerLevel(0).level}},{key:"onLoadedGameRes",value:function(){Lr(Er(e.prototype),"onLoadedGameRes",this).call(this),Ft.playBGM(this.bgmPath,!0)}},{key:"gameWin",value:function(){this.pauseGame(),this.gameStatus="win",pt.dispatchEvent("GameWin"),Pt.set(Pt.throughGuide,!0),App.destroyScene("GuideGameScene"),App.showScene("MainScene")}},{key:"getItemRandomTableList",value:function(){return this.mapConfig.itemRandomTable}},{key:"onClickSkipButton",value:function(){this.gameWin()}}])&&Ir(i.prototype,n),o&&Ir(i,o),e}();function Dr(t){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Or(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fr(t,e){return!e||"object"!==Dr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jr(t){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ur(t,e){return(Ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Fr(this,jr(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ur(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=this,e=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(e,0),this.onClick(this.ui.returnButton,this.onClickReturnButton.bind(this)),this.list=[];for(var i=0;i<3;i++){var n=Ze.uiClone(this.ui.item,void 0,this.ui.list);this.ui.list.addChild(n),this.list.push(n)}this.ui.item.visible=!1,this.list.forEach(function(e){e.itemIcon=e.ui.itemIcon.addChild(new V),e.itemIcon.anchor.set(.5,.5),e.numberText=e.ui.numberText,e.bikePanel=e.ui.bikePanel,e.bikeSprite=new _o(e.bikePanel),t.onClick(e,function(){return t.onClickItem(e)},!0)})}},{key:"onShow",value:function(t,e){var i=this;this.closeCallback=e,this.parent.setChildIndex(this,this.parent.children.length-1);var n=u.levelUpReward[t-2],o=[];n.coin&&o.push({rewardCoin:n.coin}),n.diamond&&o.push({rewardDiamond:n.diamond}),n.exp&&o.push({rewardExp:n.exp});var a=u.bulletTime.maxValue[t-1]-u.bulletTime.maxValue[t-2];a>0&&o.push({rewardBulletTimeMaxValue:a}),o.forEach(function(t){if(t.rewardCoin)Pt.add(Pt.coin,t.rewardCoin);else if(t.rewardDiamond)Pt.add(Pt.diamond,t.rewardDiamond);else if(t.rewardExp)Pt.add(Pt.exp,t.rewardExp);else if(t.rewardBike){var e=Pt.plusBike(t.rewardBike),i=e.levelUp,n=e.highestLevel;App.showScene("BikeDetailScene",t.rewardBike,i,n)}}),pt.dispatchEvent("RefreshRankData"),this.list.forEach(function(t){t.itemIcon.visible=!1,t.numberText.visible=!1,t.bikePanel.visible=!1,t.visible=!1}),o.forEach(function(t,e){var n=i.list[e];n.visible=!0;var o=n.itemIcon,a=n.numberText;o.scale.set(1,1),t.rewardCoin?(o.visible=!0,a.visible=!0,o.texture=U.from("myLaya/laya/assets/images/icon-coin.png"),a.text=t.rewardCoin,n.info={coin:1}):t.rewardDiamond?(o.visible=!0,a.visible=!0,o.texture=U.from("myLaya/laya/assets/images/icon-diamond.png"),a.text=t.rewardDiamond,n.info={diamond:1}):t.rewardExp?(o.visible=!0,a.visible=!0,o.texture=U.from("myLaya/laya/assets/images/icon-exp.png"),a.text=t.rewardExp,n.info={exp:1}):t.rewardBulletTimeMaxValue?(o.visible=!0,a.visible=!0,o.texture=U.from("myLaya/laya/assets/images/bullet-time-slot.png"),o.scale.set(u.levelUpScene.bulletTimeMaxValueAddIcon.scale,u.levelUpScene.bulletTimeMaxValueAddIcon.scale),a.text=t.rewardBulletTimeMaxValue,n.info={bulletTimeMaxValue:1}):t.rewardBike&&(n.bikePanel.visible=!0,n.bikeSprite.setBikeID(t.rewardBike),n.bikeSprite.play(),n.info={bike:t.rewardBike})});var s=this.list[0].mywidth;switch(o.length){case 1:this.list[0].x=this.ui.list.mywidth/2-s/2;break;case 2:this.list[0].x=this.ui.list.mywidth/3-s/2,this.list[1].x=this.ui.list.mywidth/3*2-s/2;break;case 3:this.list.forEach(function(t,e){t.x=s/2+e*s-s/2})}this.ui.levelText.text=t}},{key:"onClickReturnButton",value:function(){App.hideScene("LevelUpScene"),this.closeCallback&&this.closeCallback()}},{key:"onClickItem",value:function(t){App.showScene("InfoScene",t.info)}}])&&Or(i.prototype,n),o&&Or(i,o),e}();function Vr(t){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gr(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xr(t,e){return!e||"object"!==Vr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zr(t){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hr(t,e){return(Hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Nr.sceneFilePath="myLaya/laya/pages/View/LevelUpScene.scene.json";var Wr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Xr(this,zr(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hr(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=this,e=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(e,0),this.onClick(this.ui.advertRebornButton,this.onClickAdvertRebornButton.bind(this)),this.onClick(this.ui.diamondRebornButton,this.onClickDiamondRebornButton.bind(this)),this.onClick(this.ui.leaveButton,this.onClickLeaveButton.bind(this)),this.ui.diamondRebornCostText.text=u.diamondRebornCost,this.typeList=["distance","exp","coin"].map(function(e){return{type:e,doubleIcon:t.ui["".concat(e,"DoubleIcon")],percentText:t.ui["".concat(e,"PercentText")],valueText:t.ui["".concat(e,"ValueText")]}}),this.animations=[]}},{key:"onShow",value:function(t){var e=this;this.parent.setChildIndex(this,this.parent.children.length-1),this.args=t,this.ui.diamondText.text=Pt.get(Pt.diamond,0),this.ui.distanceRecordText.text=Pt.get(Pt.distanceRecord,0),this.typeList.forEach(function(t){t.valueText.text=0}),App.showMask(this.onClickMask.bind(this)),this.playNumberAnimation(function(){return e.onClickMask()});var i=this.args.gameScene.rebornTimes<u.endlessMode.rebornTimes;this.ui.advertRebornButton.visible=i,this.ui.diamondRebornButton.visible=i,this.ui.hasNoRebornTimesText.visible=!i}},{key:"playNumberAnimation",value:function(t){var e=this,i={percent:0},n=new Ke.a.Tween(i).to({percent:1},u.resolveAnimation.numberAnimation.duration).onUpdate(function(){e.typeList.forEach(function(t){var n=e.args.gameScene[t.type];t.valueText.text=Math.floor(n*i.percent)})}).onComplete(function(){Q.removeItemFromArray(e.animations,n),t&&t()}).start(performance.now());this.animations.push(n)}},{key:"onClickMask",value:function(){var t=this;App.hideMask(),this.animations.forEach(function(t){return t.stop()}),this.animations=[],this.typeList.forEach(function(e){e.valueText.text=Math.floor(t.args.gameScene[e.type])})}},{key:"onClickDiamondRebornButton",value:function(){var t=Pt.get(Pt.diamond,0);t>=u.diamondRebornCost?(t-=u.diamondRebornCost,Pt.set(Pt.diamond,t),this.reborn()):App.showNotice(App.getText("DiamondIsNotEnough"))}},{key:"onClickAdvertRebornButton",value:function(){var t=this;window.PlatformHelper.showAd(function(e){e&&(t.reborn(),window.TDGA&&TDGA.onEvent("广告无尽模式复活"))})}},{key:"onClickLeaveButton",value:function(){App.hideScene("GameOverRebornScene"),App.showScene("GameOverScene",{gameScene:this.args.gameScene})}},{key:"reborn",value:function(){this.args.gameScene.rebornTimes++,App.hideScene("GameOverRebornScene"),pt.dispatchEvent("Reborn"),window.TDGA&&TDGA.onEvent("无尽模式复活")}}])&&Gr(i.prototype,n),o&&Gr(i,o),e}();function Jr(t){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yr(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qr(t,e){return!e||"object"!==Jr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zr(t){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kr(t,e){return(Kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Wr.sceneFilePath="myLaya/laya/pages/View/GameOverRebornScene.scene.json";var $r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qr(this,Zr(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kr(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(t,0),this.hitArea=new Y(0,0,App.sceneWidth,App.sceneHeight),this.onClick(this,this.onClickReturnButton.bind(this),!0),this.bikeSprite=new _o(this.ui.bikePanel,0)}},{key:"onShow",value:function(t){if(this.parent.setChildIndex(this,this.parent.children.length-1),t.ability)this.ui.bikePanel.visible=!1,this.ui.itemIcon.visible=!0,this.ui.itemIcon.children[0].texture=U.from(t.ability.icon),this.ui.itemName.text=App.getText(t.ability.name),this.ui.itemDsc.text=App.getText(t.ability.dsc);else if(t.coin){this.ui.bikePanel.visible=!1,this.ui.itemIcon.visible=!0;var e=u.infoScene.coin;this.ui.itemIcon.children[0].texture=U.from(e.texture),this.ui.itemName.text=App.getText(e.name),this.ui.itemDsc.text=App.getText(e.dsc)}else if(t.diamond){this.ui.bikePanel.visible=!1,this.ui.itemIcon.visible=!0;var i=u.infoScene.diamond;this.ui.itemIcon.children[0].texture=U.from(i.texture),this.ui.itemName.text=App.getText(i.name),this.ui.itemDsc.text=App.getText(i.dsc)}else if(t.exp){this.ui.bikePanel.visible=!1,this.ui.itemIcon.visible=!0;var n=u.infoScene.exp;this.ui.itemIcon.children[0].texture=U.from(n.texture),this.ui.itemName.text=App.getText(n.name),this.ui.itemDsc.text=App.getText(n.dsc)}else if(t.bulletTimeMaxValue){this.ui.bikePanel.visible=!1,this.ui.itemIcon.visible=!0;var o=u.infoScene.bulletTimeMaxValue;this.ui.itemIcon.children[0].texture=U.from(o.texture),this.ui.itemName.text=App.getText(o.name),this.ui.itemDsc.text=App.getText(o.dsc)}else if(void 0!==t.bike){this.ui.bikePanel.visible=!0,this.ui.itemIcon.visible=!1,this.bikeSprite.setBikeID(t.bike),this.bikeSprite.play();var a=u.bikeList.find(function(e){return e.id===t.bike});this.ui.itemName.text=App.getText(a.name),this.ui.itemDsc.text=App.getText(a.dsc)}else{this.ui.bikePanel.visible=!1,this.ui.itemIcon.visible=!0,this.ui.itemIcon.children[0].texture=U.from(u.effect[t.effect].imagePath);var s=u.effect[t.effect];this.ui.itemName.text=App.getText(s.name),this.ui.itemDsc.text=App.getText(s.dsc)}}},{key:"onClickReturnButton",value:function(){App.hideScene("InfoScene")}}])&&Yr(i.prototype,n),o&&Yr(i,o),e}();function Qr(t){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tl(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function el(t,e){return!e||"object"!==Qr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function il(t){return(il=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nl(t,e){return(nl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}$r.sceneFilePath="myLaya/laya/pages/View/InfoScene.scene.json";var ol=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),el(this,il(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nl(t,e)}(e,di),i=e,(n=[{key:"onCreate",value:function(){var t=this,e=(new N).beginFill(0,.5).drawRect(0,0,App.sceneWidth,App.sceneHeight).endFill();this.addChildAt(e,0),this.onClick(this.ui.advertRebornButton,this.onClickAdvertRebornButton.bind(this)),this.onClick(this.ui.diamondRebornButton,this.onClickDiamondRebornButton.bind(this)),this.onClick(this.ui.leaveButton,this.onClickLeaveButton.bind(this)),this.ui.diamondRebornCostText.text=u.diamondRebornCost,this.typeList=["distance","exp","coin"].map(function(e){return{type:e,doubleIcon:t.ui["".concat(e,"DoubleIcon")],percentText:t.ui["".concat(e,"PercentText")],valueText:t.ui["".concat(e,"ValueText")]}}),this.animations=[]}},{key:"onShow",value:function(t){var e=this;this.parent.setChildIndex(this,this.parent.children.length-1),this.args=t,this.ui.diamondText.text=Pt.get(Pt.diamond,0),this.typeList.forEach(function(t){t.valueText.text=0}),App.showMask(this.onClickMask.bind(this)),this.playNumberAnimation(function(){return e.onClickMask()});var i=this.args.gameScene.rebornTimes<u.gameLevelMode.rebornTimes;this.ui.advertRebornButton.visible=i,this.ui.diamondRebornButton.visible=i,this.ui.hasNoRebornTimesText.visible=!i}},{key:"playNumberAnimation",value:function(t){var e=this,i={percent:0},n=new Ke.a.Tween(i).to({percent:1},u.resolveAnimation.numberAnimation.duration).onUpdate(function(){e.typeList.forEach(function(t){var n=e.args.gameScene[t.type];t.valueText.text=Math.floor(n*i.percent)})}).onComplete(function(){Q.removeItemFromArray(e.animations,n),t&&t()}).start(performance.now());this.animations.push(n)}},{key:"onClickMask",value:function(){var t=this;App.hideMask(),this.animations.forEach(function(t){return t.stop()}),this.animations=[],this.typeList.forEach(function(e){e.valueText.text=Math.floor(t.args.gameScene[e.type])})}},{key:"onClickDiamondRebornButton",value:function(){var t=Pt.get(Pt.diamond,0);t>=u.diamondRebornCost?(t-=u.diamondRebornCost,Pt.set(Pt.diamond,t),this.reborn()):App.showNotice(App.getText("DiamondIsNotEnough"))}},{key:"onClickAdvertRebornButton",value:function(){var t=this;window.PlatformHelper.showAd(function(e){e&&(t.reborn(),window.TDGA&&TDGA.onEvent("广告闯关模式复活"))})}},{key:"onClickLeaveButton",value:function(){App.hideScene("GameLevelRebornScene"),App.showScene("GameLevelFailedScene",this.args)}},{key:"reborn",value:function(){this.args.gameScene.rebornTimes++,App.hideScene("GameLevelRebornScene"),pt.dispatchEvent("Reborn"),window.TDGA&&TDGA.onEvent("闯关模式复活")}}])&&tl(i.prototype,n),o&&tl(i,o),e}();function al(t){return(al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sl(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function rl(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ll(t){return(ll=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hl(t,e){return(hl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}ol.sceneFilePath="myLaya/laya/pages/View/GameLevelRebornScene.scene.json";var ul=function(t){function e(t){var i,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=ll(e).call(this,t),i=!o||"object"!==al(o)&&"function"!=typeof o?cl(n):o,window.App=cl(cl(i)),i.realWidth=t.width;var a=t.width/t.height,s=u.designWidth/u.designHeight;u.designWidth<u.designHeight?a>=s?(i.sceneWidth=u.designWidth,i.sceneHeight=u.designHeight):(i.sceneWidth=u.designWidth,i.sceneHeight=u.designWidth/t.width*t.height):a>=s?(i.sceneHeight=u.designHeight,i.sceneWidth=u.designHeight/t.height*t.width):(i.sceneWidth=u.designWidth,i.sceneHeight=u.designHeight),i.root=i.stage.addChild(new j);var r=(t.width-i.sceneWidth)/2,l=(t.height-i.sceneHeight)/2;return i.root.mask=(new N).beginFill().drawRect(r,l,i.sceneWidth,i.sceneHeight).endFill(),i.root.position.set(r,l),i.scenesContainer=new j,i.root.addChild(i.scenesContainer),i.uiGuidePanelContainer=i.root.addChild(new j),i.maskShowCount=0,i.mask=i.root.addChild(new j),i.mask.hitArea=new Y(0,0,i.sceneWidth,i.sceneHeight),i.mask.visible=!1,Ze.onClick(i.mask,function(){return i.clickMaskCallback&&i.clickMaskCallback()},!0),i.createLoadScene(),i.sceneNameClassMap={MainScene:Bo,MapGameScene:Vn,EndlessGameScene:Zn,LevelGameScene:no,GuideGameScene:Rr,LevelUpScene:Nr,GameOverScene:ho,PauseScene:yo,HomeScene:Ba,ShopScene:Vo,DrawScene:Jo,BikeScene:ta,TipScene:sa,GameResultScene:ma,SystemScene:va,RankScene:Ua,RegisterScene:Ha,LoginScene:Ka,PreparationScene:ns,GiftScene:hs,PrizeScene:fs,SignScene:xs,HelpHomeScene:Ts,LoadingScene:Ms,HelpEndlessScene:Us,HelpMatchScene:Hs,HelpGameLevelScene:xr,NewContentScene:Ks,BikeDetailScene:nr,GameLevelFailedScene:hr,GameLevelResultScene:fr,GameLevelScene:Tr,GameOverRebornScene:Wr,InfoScene:$r,GameLevelRebornScene:ol},i.sceneTable={},i.listenGameRunStatus(),i.waitLoadList=[],i.ticker.add(i.onTick.bind(cl(cl(i)))),i.sceneShowCallbackTable={},i}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hl(t,e)}(e,D),i=e,(n=[{key:"showScene",value:function(t){for(var e=this,i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];if(void 0===this.sceneTable[t]){var a=this.sceneNameClassMap[t];this.sceneTable[t]=new a,this.scenesContainer.addChild(this.sceneTable[t]),this.sceneTable[t].create(t,function(){var i;(i=e.sceneTable[t]).show.apply(i,n)})}else{var s;(s=this.sceneTable[t]).show.apply(s,n)}}},{key:"hideScene",value:function(t){this.sceneTable[t]&&this.sceneTable[t].hide()}},{key:"getScene",value:function(t){return this.sceneTable[t]}},{key:"destroyScene",value:function(t){this.sceneTable[t]&&(this.sceneTable[t].destroy(),this.sceneTable[t]=void 0)}},{key:"hasLoadResource",value:function(t){return!(void 0===F[t]||!F[t].isComplete)||Ft.hasLoadedAudio(t)}},{key:"loadResources",value:function(t,e,i){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(O.loading)this.waitLoadList.push([t,e,i,o,a]);else{var s=function(){var t=n.waitLoadList.shift();t&&n.loadResources.apply(n,sl(t))},r=(new Date).getTime();t=(t=Array.from(new Set(t))).filter(function(t){return void 0===F[t]&&!Ft.hasLoadedAudio(t)}),this.loadList=t.map(function(t){return[t,!1]}),void 0===i&&(this.loadScene.visible=!0),this.updateLoadText();var l=[],h=[],c=!1,u=!1;t.forEach(function(e){e?[".mp3",".ogg",".m4a",".wav"].some(function(t){return e.endsWith(t)})?h.push(e):l.push(e):console.log("path===undefined,resPathList=",t)});var m=function(){if(c&&u){n.onLoadEnded();var t=n.parsePrefabDependRes(l),h=(new Date).getTime(),m=o-(h-r);0!==t.length?n.loadResources(t,e,i,m,a+1):m<=0?(e(),s()):setTimeout(function(){i(100),e(),s()},m)}};Ft.loadAudioRes(h,function(){c=!0,m()}),O.add(l).on("progress",function(t,e){if(!u){var o=n.loadList.find(function(t){return e.url===t[0]});o&&(o[1]=!0,n.updateLoadText()),i&&i(n.calcLoadProgress(a,n.loadList))}}).load(function(){u=!0,m()})}}},{key:"parsePrefabDependRes",value:function(t){var e=[];return t.forEach(function(t){(t.endsWith(".scene.json")||t.endsWith(".prefab.json"))&&function t(e,i){i.props.skin&&e.push("myLaya/laya/assets/".concat(i.props.skin)),i.props.source&&e.push("myLaya/laya/assets/".concat(i.props.source)),i.props.texture&&e.push("myLaya/laya/assets/".concat(i.props.texture)),i.props.preset&&e.push("myLaya/".concat(i.props.preset)),i.props.runtime&&e.push(i.props.runtime.replace("../","myLaya/")),i.child.forEach(function(i){return t(e,i)})}(e,F[t].data)}),e}},{key:"createLoadScene",value:function(){this.loadScene=this.root.addChild(new j),this.loadScene.addChild((new N).beginFill(0,.5).drawRect(0,0,this.sceneWidth,this.sceneHeight).endFill()),this.loadText=this.loadScene.addChild(new z("",new H({fontSize:50,fill:"white",wordWrap:!0,wordWrapWidth:this.sceneWidth}))),this.loadText.anchor.set(.5,0),this.loadText.position.set(this.sceneWidth/2,this.sceneHeight/2+50),this.loadSprite=this.loadScene.addChild(new X(u.loadingImagePathList.map(function(t){return U.from(t)}))),this.loadSprite.animationSpeed=.5,this.loadSprite.anchor.set(.5,.5),this.loadSprite.position.set(this.sceneWidth/2,this.sceneHeight/2-50),this.loadSprite.play()}},{key:"updateLoadText",value:function(){this.loadText.text="".concat(Math.floor(this.loadList.reduce(function(t,e){return t+(e[1]?1:0)},0)/this.loadList.length*100),"%")}},{key:"calcLoadProgress",value:function(t,e){for(var i=0,n=1;n<=t;n++)i+=Math.pow(.5,n);var o=e.reduce(function(t,e){return t+(e[1]?1:0)},0)/e.length;return 100*(i+=Math.pow(.5,t+1)*o)}},{key:"onLoadEnded",value:function(){this.loadScene.visible=!1}},{key:"showMask",value:function(t){this.maskShowCount++,this.mask.visible=!0,this.clickMaskCallback=t}},{key:"hideMask",value:function(){this.maskShowCount>0&&this.maskShowCount--,0===this.maskShowCount&&(this.mask.visible=!1)}},{key:"showNotice",value:function(t){var e=new j,i=u.notice.margin,n=new z(t,new H({fill:u.notice.fill,fontSize:u.notice.fontSize,wordWrap:!0,wordWrapWidth:.8*App.sceneWidth}));n.position.set(i/2,i/2);var o=new N;o.beginFill(u.notice.backgroundColor,u.notice.backgroundAlpha),o.drawRect(0,0,n.width+i,n.height+i),o.endFill(),e.addChild(o),e.addChild(n),e.position.set(this.sceneWidth/2-n.width/2,u.notice.positionY),this.root.addChild(e),setTimeout(function(){var t=1e3/60/u.notice.fadeDuration;!function i(){e.alpha-=t,e.alpha<0?e.destroy():requestAnimationFrame(i)}()},u.notice.duration)}},{key:"showTip",value:function(t,e,i,n){App.showScene("TipScene",{tip:t,confirmCallback:e,cancelCallback:i,hideConfirmButton:n})}},{key:"getText",value:function(t,e){var i=F[u.i18nPath].data[t]||t;return e&&(i=i.replace(/\$\{.*?\}/g,function(t){return e[t.substring(2,t.length-1)]})),i}},{key:"getGlobalPosition",value:function(t){var e=t.getGlobalPosition(),i=e.x,n=e.y;return{x:i-this.root.x,y:n-this.root.y}}},{key:"trans2GlobalPosition",value:function(t){var e=t.x,i=t.y;return{x:e-this.root.x,y:i-this.root.y}}},{key:"listenGameRunStatus",value:function(){var t=function(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden"}();if(t){var e=t.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(e,function(){"visible"===document[function(){var t=["webkit","moz","ms","o"];if("visibilityState"in document)return"visibilityState";for(var e=0;e<t.length;e++)if(t[e]+"VisibilityState"in document)return t[e]+"VisibilityState"}()]?pt.dispatchEvent("GameStart"):pt.dispatchEvent("GameStop")},!1)}}},{key:"onTick",value:function(){Ke.a.update(performance.now())}},{key:"registerOnSceneShowOnTop",value:function(t,e){var i=this.sceneShowCallbackTable[t];void 0===i&&(i=[],this.sceneShowCallbackTable[t]=i),i.push(e)}},{key:"onSceneShowOnTop",value:function(t){this.sceneShowCallbackTable[t]&&(this.sceneShowCallbackTable[t].forEach(function(t){return t()}),this.sceneShowCallbackTable[t]=[])}}])&&rl(i.prototype,n),o&&rl(i,o),e}();function ml(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pl(){var t=localStorage.username,e=localStorage.password;t&&e?ct.requestLogin(t,e,t,void 0,function(){App.showScene("MainScene")},function(){App.showScene("LoginScene")}):App.showScene("LoginScene")}window.PlatformHelper={canLogout:!0,showAd:function(t){t(!0)},closeLogoScene:function(){window.logoScene&&window.logoScene.parentNode&&(window.logoScene.hidden=!0)}},function(t){var e,i,n=window.innerWidth/window.innerHeight;n>u.designWidth/u.designHeight?e=(i=u.designHeight)*n:i=(e=u.designWidth)/n;var o=new ul({backgroundColor:u.backgroundColor,width:e,height:i,antialias:!0,transparent:!1,view:canvas}),a=[];Q.values(u.imageText).forEach(function(t){a=a.concat(Q.values(t.charImgPathTable))}),o.loadResources([u.i18nPath,Ms.sceneFilePath,Bo.sceneFilePath,An.sceneFilePath].concat(ml(a)).concat(Bo.resPathList),t,function(t){window.addPercent&&window.addPercent(t)})}(function(){if(-1!==window.parent.location.href.indexOf("autoRegister=1")&&void 0===localStorage.username){var t=(new Date).getTime();ct.requestRegister(t,t,function(){localStorage.username=t,localStorage.password=t,pl()})}else pl()})}]);